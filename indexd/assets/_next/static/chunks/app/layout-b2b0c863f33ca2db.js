(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{14780:()=>{},22493:e=>{e.exports={style:{fontFamily:"'sans', 'sans Fallback'"},className:"__className_315985",variable:"__variable_315985"}},44358:(e,r,i)=>{"use strict";i.d(r,{sG:()=>S,UK:()=>T});var n=i(54568),t=i(7620),o=i(62121),s=i(93727),a=i(37653);let l={wantedContracts:void 0,periodWeeks:void 0,renewWindowWeeks:void 0,maxEgressPriceTB:void 0,maxIngressPriceTB:void 0,maxStoragePriceTBMonth:void 0,minCollateral:void 0,minProtocolVersion:void 0,pinnedCurrency:"",shouldPinMaxStoragePrice:!1,maxStoragePriceTBMonthPinned:void 0,shouldPinMaxEgressPrice:!1,maxEgressPriceTBPinned:void 0,shouldPinMaxIngressPrice:!1,maxIngressPriceTBPinned:void 0,shouldPinMinCollateral:!1,minCollateralPinned:void 0};function d(e){let{contracts:r,hosts:i,pricePinning:n}=e;return{...function(e){let r=new a.A((0,s.bu)(e.period));return{periodWeeks:r,renewWindowWeeks:new a.A((0,s.bu)(e.renewWindow)),wantedContracts:new a.A(e.wantedContracts)}}(r),...{maxStoragePriceTBMonth:(0,s.V$)((0,s.GG)(new a.A(i.maxStoragePrice)),6),maxIngressPriceTB:(0,s.V$)((0,s.BH)(new a.A(i.maxIngressPrice)),6),maxEgressPriceTB:(0,s.V$)((0,s.BH)(new a.A(i.maxEgressPrice)),6),minCollateral:(0,s.V$)(new a.A(i.minCollateral),6),minProtocolVersion:i.minProtocolVersion.join(".")},...{pinnedCurrency:n.currency,shouldPinMaxStoragePrice:!!n.maxStoragePrice,maxStoragePriceTBMonthPinned:new a.A(n.maxStoragePrice),shouldPinMaxIngressPrice:!!n.maxIngressPrice,maxIngressPriceTBPinned:new a.A(n.maxIngressPrice),shouldPinMaxEgressPrice:!!n.maxEgressPrice,maxEgressPriceTBPinned:new a.A(n.maxEgressPrice),shouldPinMinCollateral:!!n.minCollateral,minCollateralPinned:new a.A(n.minCollateral)}}}var c=i(26109),m=i(46682),u=i(62435);function P(e){let{contracts:r,hosts:i,pricePinning:n}=e;return!!r.data&&!r.error&&!!i.data&&!i.error&&!!n.data&&!n.error&&e}var h=i(61938);function v(e){let r=e.watch("pinnedCurrency"),{rate:i}=(0,o.D3d)({currency:r||void 0});return{rate:i,pinnedCurrency:r}}function g(){var e,r,i;let n=(0,o.X9d)({config:{swr:{revalidateOnFocus:!1}}}),l=null==(e=n.data)?void 0:e.v2Settings.prices.storagePrice,d=null==(r=n.data)?void 0:r.v2Settings.prices.ingressPrice,c=null==(i=n.data)?void 0:i.v2Settings.prices.egressPrice,m=(0,t.useMemo)(()=>l?new a.A((0,s.GG)((0,s.V$)(l)).toFixed(0)):void 0,[l]),u=(0,t.useMemo)(()=>d?new a.A((0,s.BH)((0,s.V$)(d)).toFixed(0)):void 0,[d]),P=(0,t.useMemo)(()=>c?new a.A((0,s.BH)((0,s.V$)(c)).toFixed(0)):void 0,[c]);return(0,t.useMemo)(()=>m&&u&&P?{storageMedian:m,ingressMedian:u,egressMedian:P}:{},[m,u,P])}function p(e){let{form:r,fields:i}=e,{storageMedian:t}=g();return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by SiaScan.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxStoragePriceTBMonth",value:t,options:!0})}})})}function b(e){let{form:r,fields:i}=e,{storageMedian:t}=g(),{rate:a}=v(r);return(0,n.jsx)(n.Fragment,{children:t&&a&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by SiaScan.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxStoragePriceTBMonthPinned",value:t.times(a),options:!0})}})})}function x(e){let{form:r,fields:i}=e,{ingressMedian:t}=g();return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by SiaScan.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxIngressPriceTB",value:t,options:!0})}})})}function y(e){let{form:r,fields:i}=e,{rate:t}=v(r),{ingressMedian:a}=g();return(0,n.jsx)(n.Fragment,{children:a&&t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by SiaScan.",decimalsLimit:0,value:(0,s.zh)(a),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxIngressPriceTBPinned",value:a.times(t),options:!0})}})})}function w(e){let{form:r,fields:i}=e,{egressMedian:t}=g();return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by SiaScan.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxEgressPriceTB",value:t,options:!0})}})})}function f(e){let{form:r,fields:i}=e,{rate:t}=v(r),{egressMedian:a}=g();return(0,n.jsx)(n.Fragment,{children:a&&t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by SiaScan.",decimalsLimit:0,value:(0,s.zh)(a),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxEgressPriceTBPinned",value:a.times(t),options:!0})}})})}function M(e,r){return(i,n)=>!n[e]||(r?r(i,n):!!i||"required")}let C=(0,t.createContext)({}),T=()=>(0,t.useContext)(C);function S(e){let{children:r}=e,i=function(){let{hosts:e,contracts:r,pricePinning:i,resources:v}=function(){let e=(0,m.aE)({config:{swr:{refreshInterval:(0,s.Po)(1)}}}),r=(0,m.eY)({config:{swr:{refreshInterval:(0,s.Po)(1)}}}),i=(0,m.R7)({config:{swr:{refreshInterval:(0,s.Po)(1)}}});return{resources:(0,t.useMemo)(()=>({contracts:{data:e.data,error:e.error},hosts:{data:r.data,error:r.error},pricePinning:{data:i.data,error:i.error}}),[e.data,e.error,r.data,r.error,i.data,i.error]),contracts:e,hosts:r,pricePinning:i}}(),{form:g,fields:C}=function(){let e=(0,h.mN)({mode:"all",defaultValues:l}),r=e.watch("maxStoragePriceTBMonth"),i=e.watch("maxEgressPriceTB"),o=e.watch("maxIngressPriceTB");return{form:e,fields:(0,t.useMemo)(()=>({wantedContracts:{type:"number",category:"contracts",title:"Wanted contracts",description:(0,n.jsx)(n.Fragment,{children:"The number of contracts you would like to have."}),units:"contracts",validation:{required:"required"}},periodWeeks:{type:"number",category:"contracts",title:"Period",description:(0,n.jsx)(n.Fragment,{children:"The length of the storage contracts."}),units:"weeks",suggestion:new a.A(6),suggestionTip:"Typically 6 weeks.",validation:{required:"required"}},renewWindowWeeks:{type:"number",category:"contracts",title:"Renew window",description:(0,n.jsx)(n.Fragment,{children:"The number of weeks prior to contract expiration that Sia will attempt to renew your contracts."}),units:"weeks",decimalsLimit:6,suggestion:new a.A(2),suggestionTip:"Typically 2 weeks.",validation:{required:"required"}},shouldPinMaxStoragePrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxStoragePriceTBMonth:{category:"pricing",type:"siacoin",title:"Max storage price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price a host is allowed to charge to store 1 TB worth of data per month. Choose whether to set the price in siacoin per TB per month or to pin the siacoin price to a fixed fiat value per TB per month."}),units:"SC/TB/month",decimalsLimitSc:6,validation:{required:"required"},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(p,{form:r,fields:i})}},maxStoragePriceTBMonthPinned:{title:"",description:"",units:"/TB/month",type:"fiat",category:"pricing",validation:{validate:{required:M("shouldPinMaxStoragePrice",(e,r)=>!r.shouldPinMaxStoragePrice||!!e||"required"),currency:M("shouldPinMaxStoragePrice",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:M("shouldPinMaxStoragePrice",(e,r)=>!r.shouldPinMaxStoragePrice||(null==e?void 0:e.gt(0))||"must be greater than 0")}},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(b,{form:r,fields:i})}},shouldPinMaxIngressPrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxIngressPriceTB:{category:"pricing",type:"siacoin",title:"Max ingress price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price a host is allowed to charge for uploading 1 TB worth of data. Choose whether to set the price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),units:"SC/TB",decimalsLimitSc:6,validation:{required:"required"},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(x,{form:r,fields:i})}},maxIngressPriceTBPinned:{title:"",description:"",units:"/TB",type:"fiat",category:"pricing",validation:{validate:{required:M("shouldPinMaxIngressPrice",(e,r)=>!r.shouldPinMaxIngressPrice||!!e||"required"),currency:M("shouldPinMaxIngressPrice",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:M("shouldPinMaxIngressPrice",(e,r)=>!r.shouldPinMaxIngressPrice||(null==e?void 0:e.gt(0))||"must be greater than 0")}},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(y,{form:r,fields:i})}},shouldPinMaxEgressPrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxEgressPriceTB:{category:"pricing",type:"siacoin",title:"Max egress price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price to download 1 TB. Choose whether to set the price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),units:"SC/TB",decimalsLimitSc:6,validation:{required:"required"},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(w,{form:r,fields:i})}},maxEgressPriceTBPinned:{title:"",description:"",units:"/TB",type:"fiat",category:"pricing",validation:{validate:{required:M("shouldPinMaxEgressPrice",(e,r)=>!r.shouldPinMaxEgressPrice||!!e||"required"),currency:M("shouldPinMaxEgressPrice",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:M("shouldPinMaxEgressPrice",(e,r)=>!r.shouldPinMaxEgressPrice||(null==e?void 0:e.gt(0))||"must be greater than 0")}},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(f,{form:r,fields:i})}},shouldPinMinCollateral:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},minCollateral:{category:"pricing",type:"siacoin",title:"Min collateral",description:(0,n.jsx)(n.Fragment,{children:"The min allowed collateral a contract must have. Choose whether to set the collateral in siacoin or to pin the collateral to a fixed fiat value."}),units:"SC",decimalsLimitSc:6,validation:{required:"required"}},minCollateralPinned:{title:"",description:"",type:"fiat",category:"pricing",validation:{validate:{required:M("shouldPinMinCollateral",(e,r)=>!r.shouldPinMinCollateral||!!e||"required"),currency:M("shouldPinMinCollateral",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:M("shouldPinMinCollateral",(e,r)=>!r.shouldPinMinCollateral||(null==e?void 0:e.gt(0))||"must be greater than 0")}}},pinnedCurrency:{category:"pricing",title:"Pinned currency",description:"Currency to use for fields where price pinning is enabled.",type:"select",options:[...c.Ib.map(e=>{let{id:r,label:i}=e;return{label:i,value:r}}),{label:"none",value:""}],validation:{required:"required"}},minProtocolVersion:{category:"other",type:"text",title:"Min protocol version",description:"The minimum protocol version to accept contracts.",validation:{validate:{version:e=>!e||/^[0-9]+\.[0-9]+\.[0-9]+$/.test(e)||"invalid version"}}}}),[]),maxStoragePriceTBMonth:r,maxEgressPriceTB:i,maxIngressPriceTB:o}}(),T=(0,t.useMemo)(()=>{let e=P(v);if(e)return d({hosts:e.hosts.data,contracts:e.contracts.data,pricePinning:e.pricePinning.data})},[v]),S=(0,t.useMemo)(()=>(function(e){let{contracts:r,hosts:i,pricePinning:n}=e;return!!(r.error||i.error||n.error)})(v),[v]),B=(0,t.useCallback)(async()=>{let n=await e.mutate(),t=await r.mutate(),s=await i.mutate();if(!n||!t||!s)return void(0,o.el3)({title:"Error fetching settings"});g.reset(d({hosts:n,contracts:t,pricePinning:s}))},[g,e,r,i]);(0,o.wdL)({form:g,remoteValues:T}),(0,o.TEy)({form:g,remoteValues:T});let{changeCount:j}=(0,o.xSy)({form:g}),E=function(e){let{resources:r,revalidateAndResetForm:i}=e,n=(0,m.zL)(),a=(0,m.dW)(),l=(0,m.eX)(),d=(0,c.ej)();return(0,t.useCallback)(async e=>{let t=P(r);if(!t)return;let{payloads:m}=function(e){let{resources:r,values:i}=e,n={...r.contracts.data,wantedContracts:Math.round(i.wantedContracts.toNumber()),period:Math.round((0,s.VI)(i.periodWeeks.toNumber())),renewWindow:Math.round((0,s.VI)(i.renewWindowWeeks.toNumber()))};return{payloads:{contracts:n,hosts:{...r.hosts.data,maxStoragePrice:(0,s.zh)((0,s.eX)(i.maxStoragePriceTBMonth)).toString(),maxIngressPrice:(0,s.zh)((0,s.vE)(i.maxIngressPriceTB)).toString(),maxEgressPrice:(0,s.zh)((0,s.vE)(i.maxEgressPriceTB)).toString(),minCollateral:(0,s.zh)(i.minCollateral).toString(),minProtocolVersion:i.minProtocolVersion.split(".").map(Number)},pricePinning:{...r.pricePinning.data,currency:i.pinnedCurrency,maxStoragePrice:i.shouldPinMaxStoragePrice?i.maxStoragePriceTBMonthPinned.toNumber():0,maxEgressPrice:i.shouldPinMaxEgressPrice?i.maxEgressPriceTBPinned.toNumber():0,maxIngressPrice:i.shouldPinMaxIngressPrice?i.maxIngressPriceTBPinned.toNumber():0,minCollateral:i.shouldPinMinCollateral?i.minCollateralPinned.toNumber():0}}}}({resources:t,values:e}),h=[n.put({payload:m.contracts}),a.put({payload:m.hosts}),l.put({payload:m.pricePinning})],v=(await Promise.all(h)).find(e=>e.error);if(v)return void(0,o.el3)({title:"Error updating configuration",body:v.error});(0,o.VE1)({title:"Configuration has been saved"}),(async()=>{await (0,c.cb)(5e3),d(e=>e.startsWith(u.vb))})(),await i()},[r,n,a,l,i,d])}({resources:v,revalidateAndResetForm:B}),k=(0,o._2E)(C),I=(0,t.useMemo)(()=>g.handleSubmit(E,k),[g,E,k]),q=(0,t.useRef)(null),N=(0,t.useCallback)(async e=>{q.current&&(0,o.hwc)(q.current,e)},[]);return{onSubmit:I,revalidateAndResetForm:B,form:g,fields:C,changeCount:j,remoteError:S,configRef:q,takeScreenshot:N}}();return(0,n.jsx)(C.Provider,{value:i,children:r})}},51281:e=>{e.exports={style:{fontFamily:"'mono', 'mono Fallback'"},className:"__className_59b18b",variable:"__variable_59b18b"}},74521:(e,r,i)=>{"use strict";i.d(r,{Providers:()=>c});var n=i(54568),t=i(7620),o=i(22728);let s=(0,t.createContext)({});function a(e){let{children:r}=e;return(0,n.jsx)(s.Provider,{value:{},children:r})}var l=i(44358),d=i(27475);function c(e){let{children:r}=e;return(0,n.jsx)(a,{children:(0,n.jsx)(l.sG,{children:(0,n.jsx)(o.Co,{children:(0,n.jsxs)(d.D,{children:[(0,n.jsx)(o.Yu,{}),r]})})})})}},97867:(e,r,i)=>{Promise.resolve().then(i.bind(i,74521)),Promise.resolve().then(i.t.bind(i,14780,23)),Promise.resolve().then(i.bind(i,85145)),Promise.resolve().then(i.bind(i,30300)),Promise.resolve().then(i.bind(i,31963)),Promise.resolve().then(i.bind(i,59128)),Promise.resolve().then(i.bind(i,40742)),Promise.resolve().then(i.bind(i,4339)),Promise.resolve().then(i.bind(i,21071)),Promise.resolve().then(i.bind(i,2478)),Promise.resolve().then(i.bind(i,81988)),Promise.resolve().then(i.bind(i,93656)),Promise.resolve().then(i.bind(i,98759)),Promise.resolve().then(i.bind(i,70466)),Promise.resolve().then(i.bind(i,93764)),Promise.resolve().then(i.bind(i,99122)),Promise.resolve().then(i.bind(i,47012)),Promise.resolve().then(i.bind(i,33354)),Promise.resolve().then(i.bind(i,10084)),Promise.resolve().then(i.bind(i,78032)),Promise.resolve().then(i.bind(i,62538)),Promise.resolve().then(i.bind(i,21970)),Promise.resolve().then(i.bind(i,241)),Promise.resolve().then(i.bind(i,45153)),Promise.resolve().then(i.bind(i,10476)),Promise.resolve().then(i.bind(i,31160)),Promise.resolve().then(i.bind(i,44198)),Promise.resolve().then(i.bind(i,82313)),Promise.resolve().then(i.bind(i,64095)),Promise.resolve().then(i.bind(i,52517)),Promise.resolve().then(i.bind(i,79087)),Promise.resolve().then(i.bind(i,2772)),Promise.resolve().then(i.bind(i,74794)),Promise.resolve().then(i.bind(i,95305)),Promise.resolve().then(i.bind(i,75381)),Promise.resolve().then(i.bind(i,34458)),Promise.resolve().then(i.bind(i,8875)),Promise.resolve().then(i.bind(i,52454)),Promise.resolve().then(i.bind(i,72115)),Promise.resolve().then(i.bind(i,503)),Promise.resolve().then(i.bind(i,83600)),Promise.resolve().then(i.bind(i,72945)),Promise.resolve().then(i.bind(i,30022)),Promise.resolve().then(i.bind(i,93081)),Promise.resolve().then(i.bind(i,89394)),Promise.resolve().then(i.bind(i,5360)),Promise.resolve().then(i.bind(i,19131)),Promise.resolve().then(i.bind(i,47010)),Promise.resolve().then(i.bind(i,83828)),Promise.resolve().then(i.bind(i,72642)),Promise.resolve().then(i.bind(i,31035)),Promise.resolve().then(i.bind(i,22208)),Promise.resolve().then(i.bind(i,16655)),Promise.resolve().then(i.bind(i,43861)),Promise.resolve().then(i.bind(i,35670)),Promise.resolve().then(i.bind(i,4039)),Promise.resolve().then(i.bind(i,11845)),Promise.resolve().then(i.bind(i,41434)),Promise.resolve().then(i.bind(i,57563)),Promise.resolve().then(i.bind(i,55200)),Promise.resolve().then(i.bind(i,25078)),Promise.resolve().then(i.bind(i,70790)),Promise.resolve().then(i.bind(i,44743)),Promise.resolve().then(i.bind(i,20613)),Promise.resolve().then(i.bind(i,24487)),Promise.resolve().then(i.bind(i,27148)),Promise.resolve().then(i.bind(i,76473)),Promise.resolve().then(i.bind(i,53412)),Promise.resolve().then(i.bind(i,7430)),Promise.resolve().then(i.bind(i,68269)),Promise.resolve().then(i.bind(i,60842)),Promise.resolve().then(i.bind(i,52267)),Promise.resolve().then(i.bind(i,50323)),Promise.resolve().then(i.bind(i,49954)),Promise.resolve().then(i.bind(i,48228)),Promise.resolve().then(i.bind(i,8067)),Promise.resolve().then(i.bind(i,91958)),Promise.resolve().then(i.bind(i,25972)),Promise.resolve().then(i.bind(i,184)),Promise.resolve().then(i.bind(i,21689)),Promise.resolve().then(i.bind(i,66245)),Promise.resolve().then(i.bind(i,26929)),Promise.resolve().then(i.bind(i,63954)),Promise.resolve().then(i.bind(i,32020)),Promise.resolve().then(i.bind(i,81776)),Promise.resolve().then(i.bind(i,50907)),Promise.resolve().then(i.bind(i,91503)),Promise.resolve().then(i.bind(i,63041)),Promise.resolve().then(i.bind(i,23992)),Promise.resolve().then(i.bind(i,83675)),Promise.resolve().then(i.t.bind(i,27261,23)),Promise.resolve().then(i.t.bind(i,73970,23)),Promise.resolve().then(i.t.bind(i,22493,23)),Promise.resolve().then(i.t.bind(i,51281,23))}},e=>{e.O(0,[4862,9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,7164,9800,2121,2728,587,1902,7358],()=>e(e.s=97867)),_N_E=e.O()}]);