(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{2852:e=>{e.exports={style:{fontFamily:"'sans', 'sans Fallback'"},className:"__className_315985",variable:"__variable_315985"}},6183:(e,r,i)=>{"use strict";i.d(r,{sG:()=>B,UK:()=>C});var n=i(54568),t=i(7620),o=i(2720),s=i(48432),a=i(43416);let l={wantedContracts:void 0,periodWeeks:void 0,renewWindowWeeks:void 0,maxEgressPriceTB:void 0,maxIngressPriceTB:void 0,maxStoragePriceTBMonth:void 0,minCollateral:void 0,minProtocolVersion:void 0,pinnedCurrency:"",shouldPinMaxStoragePrice:!1,maxStoragePriceTBMonthPinned:void 0,shouldPinMaxEgressPrice:!1,maxEgressPriceTBPinned:void 0,shouldPinMaxIngressPrice:!1,maxIngressPriceTBPinned:void 0,shouldPinMinCollateral:!1,minCollateralPinned:void 0};function d(e){let{contracts:r,hosts:i,pricePinning:n}=e;return{...function(e){let r=new a.A((0,s.bu)(e.period));return{periodWeeks:r,renewWindowWeeks:new a.A((0,s.bu)(e.renewWindow)),wantedContracts:new a.A(e.wantedContracts)}}(r),...{maxStoragePriceTBMonth:(0,s.V$)((0,s.GG)(new a.A(i.maxStoragePrice)),6),maxIngressPriceTB:(0,s.V$)((0,s.BH)(new a.A(i.maxIngressPrice)),6),maxEgressPriceTB:(0,s.V$)((0,s.BH)(new a.A(i.maxEgressPrice)),6),minCollateral:(0,s.V$)((0,s.GG)(new a.A(i.minCollateral)),6),minProtocolVersion:i.minProtocolVersion.slice(1)},...{pinnedCurrency:n.currency,shouldPinMaxStoragePrice:!!n.maxStoragePrice,maxStoragePriceTBMonthPinned:new a.A(n.maxStoragePrice),shouldPinMaxIngressPrice:!!n.maxIngressPrice,maxIngressPriceTBPinned:new a.A(n.maxIngressPrice),shouldPinMaxEgressPrice:!!n.maxEgressPrice,maxEgressPriceTBPinned:new a.A(n.maxEgressPrice),shouldPinMinCollateral:!!n.minCollateral,minCollateralPinned:new a.A(n.minCollateral)}}}var c=i(84684),m=i(61242),h=i(45027);function u(e){let{contracts:r,hosts:i,pricePinning:n}=e;return!!r.data&&!r.error&&!!i.data&&!i.error&&!!n.data&&!n.error&&e}var P=i(83631);function v(e){let r=e.watch("pinnedCurrency"),{rate:i}=(0,o.Q7e)({currency:r||void 0});return{rate:i,pinnedCurrency:r}}function g(){var e,r,i;let n=(0,o.OrM)({config:{swr:{revalidateOnFocus:!1}}}),l=null==(e=n.data)?void 0:e.v2Settings.prices.storagePrice,d=null==(r=n.data)?void 0:r.v2Settings.prices.ingressPrice,c=null==(i=n.data)?void 0:i.v2Settings.prices.egressPrice,m=(0,t.useMemo)(()=>l?new a.A((0,s.GG)((0,s.V$)(l)).toFixed(0)):void 0,[l]),h=(0,t.useMemo)(()=>d?new a.A((0,s.BH)((0,s.V$)(d)).toFixed(0)):void 0,[d]),u=(0,t.useMemo)(()=>c?new a.A((0,s.BH)((0,s.V$)(c)).toFixed(0)):void 0,[c]);return(0,t.useMemo)(()=>m&&h&&u?{storageMedian:m,ingressMedian:h,egressMedian:u}:{},[m,h,u])}function p(e){let{form:r,fields:i}=e,{storageMedian:t}=g();return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxStoragePriceTBMonth",value:t,options:!0})}})})}function b(e){let{form:r,fields:i}=e,{storageMedian:t}=g(),{rate:a}=v(r);return(0,n.jsx)(n.Fragment,{children:t&&a&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxStoragePriceTBMonthPinned",value:t.times(a),options:!0})}})})}function x(e){let{form:r,fields:i}=e,{ingressMedian:t}=g();return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxIngressPriceTB",value:t,options:!0})}})})}function y(e){let{form:r,fields:i}=e,{rate:t}=v(r),{ingressMedian:a}=g();return(0,n.jsx)(n.Fragment,{children:a&&t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,s.zh)(a),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxIngressPriceTBPinned",value:a.times(t),options:!0})}})})}function w(e){let{form:r,fields:i}=e,{egressMedian:t}=g();return(0,n.jsx)(n.Fragment,{children:t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,s.zh)(t),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxEgressPriceTB",value:t,options:!0})}})})}function f(e){let{form:r,fields:i}=e,{rate:t}=v(r),{egressMedian:a}=g();return(0,n.jsx)(n.Fragment,{children:a&&t&&(0,n.jsx)(o.jQb,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,s.zh)(a),onClick:()=>{(0,o.ve2)({form:r,fields:i,name:"maxEgressPriceTBPinned",value:a.times(t),options:!0})}})})}function T(e,r){return(i,n)=>!n[e]||(r?r(i,n):!!i||"required")}let M=(0,t.createContext)({}),C=()=>(0,t.useContext)(M);function B(e){let{children:r}=e,i=function(){let{hosts:e,contracts:r,pricePinning:i,resources:v}=function(){let e=(0,m.XT)({config:{swr:{refreshInterval:(0,s.Po)(1)}}}),r=(0,m.$P)({config:{swr:{refreshInterval:(0,s.Po)(1)}}}),i=(0,m.Ij)({config:{swr:{refreshInterval:(0,s.Po)(1)}}});return{resources:(0,t.useMemo)(()=>({contracts:{data:e.data,error:e.error},hosts:{data:r.data,error:r.error},pricePinning:{data:i.data,error:i.error}}),[e.data,e.error,r.data,r.error,i.data,i.error]),contracts:e,hosts:r,pricePinning:i}}(),{form:g,fields:M}=function(){let e=(0,P.mN)({mode:"all",defaultValues:l}),r=e.watch("maxStoragePriceTBMonth"),i=e.watch("maxEgressPriceTB"),o=e.watch("maxIngressPriceTB");return{form:e,fields:(0,t.useMemo)(()=>({wantedContracts:{type:"number",category:"contracts",title:"Wanted contracts",description:(0,n.jsx)(n.Fragment,{children:"The number of contracts you would like to have."}),units:"contracts",validation:{required:"required"}},periodWeeks:{type:"number",category:"contracts",title:"Period",description:(0,n.jsx)(n.Fragment,{children:"The length of the storage contracts."}),units:"weeks",suggestion:new a.A(6),suggestionTip:"Typically 6 weeks.",validation:{required:"required"}},renewWindowWeeks:{type:"number",category:"contracts",title:"Renew window",description:(0,n.jsx)(n.Fragment,{children:"The number of weeks prior to contract expiration that Sia will attempt to renew your contracts."}),units:"weeks",decimalsLimit:6,suggestion:new a.A(2),suggestionTip:"Typically 2 weeks.",validation:{required:"required"}},shouldPinMaxStoragePrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxStoragePriceTBMonth:{category:"pricing",type:"siacoin",title:"Max storage price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price a host is allowed to charge to store 1 TB worth of data per month. Choose whether to set the price in siacoin per TB per month or to pin the siacoin price to a fixed fiat value per TB per month."}),units:"SC/TB/month",decimalsLimitSc:6,validation:{required:"required"},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(p,{form:r,fields:i})}},maxStoragePriceTBMonthPinned:{title:"",description:"",units:"/TB/month",type:"fiat",category:"pricing",validation:{validate:{required:T("shouldPinMaxStoragePrice",(e,r)=>!r.shouldPinMaxStoragePrice||!!e||"required"),currency:T("shouldPinMaxStoragePrice",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:T("shouldPinMaxStoragePrice",(e,r)=>!r.shouldPinMaxStoragePrice||(null==e?void 0:e.gt(0))||"must be greater than 0")}},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(b,{form:r,fields:i})}},shouldPinMaxIngressPrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxIngressPriceTB:{category:"pricing",type:"siacoin",title:"Max ingress price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price a host is allowed to charge for uploading 1 TB worth of data. Choose whether to set the price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),units:"SC/TB",decimalsLimitSc:6,validation:{required:"required"},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(x,{form:r,fields:i})}},maxIngressPriceTBPinned:{title:"",description:"",units:"/TB",type:"fiat",category:"pricing",validation:{validate:{required:T("shouldPinMaxIngressPrice",(e,r)=>!r.shouldPinMaxIngressPrice||!!e||"required"),currency:T("shouldPinMaxIngressPrice",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:T("shouldPinMaxIngressPrice",(e,r)=>!r.shouldPinMaxIngressPrice||(null==e?void 0:e.gt(0))||"must be greater than 0")}},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(y,{form:r,fields:i})}},shouldPinMaxEgressPrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxEgressPriceTB:{category:"pricing",type:"siacoin",title:"Max egress price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price to download 1 TB. Choose whether to set the price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),units:"SC/TB",decimalsLimitSc:6,validation:{required:"required"},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(w,{form:r,fields:i})}},maxEgressPriceTBPinned:{title:"",description:"",units:"/TB",type:"fiat",category:"pricing",validation:{validate:{required:T("shouldPinMaxEgressPrice",(e,r)=>!r.shouldPinMaxEgressPrice||!!e||"required"),currency:T("shouldPinMaxEgressPrice",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:T("shouldPinMaxEgressPrice",(e,r)=>!r.shouldPinMaxEgressPrice||(null==e?void 0:e.gt(0))||"must be greater than 0")}},after:e=>{let{form:r,fields:i}=e;return(0,n.jsx)(f,{form:r,fields:i})}},shouldPinMinCollateral:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},minCollateral:{category:"pricing",type:"siacoin",title:"Min collateral",description:(0,n.jsx)(n.Fragment,{children:"The minimum amount of collateral indexd expects a host to lock up per TB per month. Additionally, we expect hosts to lock up at least 2x their storage price. Whichever value is higher is the absolute minimum. Choose whether to set the minimum collateral in siacoin or to pin the minimum collateral to a fixed fiat value."}),units:"SC/TB/month",decimalsLimitSc:6,validation:{required:"required"}},minCollateralPinned:{title:"",description:"",type:"fiat",category:"pricing",units:"/TB/month",validation:{validate:{required:T("shouldPinMinCollateral",(e,r)=>!r.shouldPinMinCollateral||!!e||"required"),currency:T("shouldPinMinCollateral",(e,r)=>!!r.pinnedCurrency||"must select a pinned currency"),range:T("shouldPinMinCollateral",(e,r)=>!r.shouldPinMinCollateral||(null==e?void 0:e.gt(0))||"must be greater than 0")}}},pinnedCurrency:{category:"pricing",title:"Pinned currency",description:"Currency to use for fields where price pinning is enabled.",type:"select",options:[...c.Ib.map(e=>{let{id:r,label:i}=e;return{label:i,value:r}}),{label:"none",value:""}],validation:{required:"required"}},minProtocolVersion:{category:"other",type:"text",title:"Min protocol version",description:"The minimum protocol version to accept contracts.",validation:{validate:{version:e=>!e||/^[0-9]+\.[0-9]+\.[0-9]+$/.test(e)||"invalid version"}}}}),[]),maxStoragePriceTBMonth:r,maxEgressPriceTB:i,maxIngressPriceTB:o}}(),C=(0,t.useMemo)(()=>{let e=u(v);if(e)return d({hosts:e.hosts.data,contracts:e.contracts.data,pricePinning:e.pricePinning.data})},[v]),B=(0,t.useMemo)(()=>(function(e){let{contracts:r,hosts:i,pricePinning:n}=e;return!!(r.error||i.error||n.error)})(v),[v]),S=(0,t.useCallback)(async()=>{let n=await e.mutate(),t=await r.mutate(),s=await i.mutate();if(!n||!t||!s)return void(0,o.el3)({title:"Error fetching settings"});g.reset(d({hosts:n,contracts:t,pricePinning:s}))},[g,e,r,i]);(0,o.wdL)({form:g,remoteValues:C}),(0,o.TEy)({form:g,remoteValues:C});let{changeCount:j}=(0,o.xSy)({form:g}),k=function(e){let{resources:r,revalidateAndResetForm:i}=e,n=(0,m.s3)(),a=(0,m.QT)(),l=(0,m.tC)(),d=(0,c.ej)();return(0,t.useCallback)(async e=>{let t=u(r);if(!t)return;let{payloads:m}=function(e){let{resources:r,values:i}=e,n={...r.contracts.data,wantedContracts:Math.round(i.wantedContracts.toNumber()),period:Math.round((0,s.VI)(i.periodWeeks.toNumber())),renewWindow:Math.round((0,s.VI)(i.renewWindowWeeks.toNumber()))};return{payloads:{contracts:n,hosts:{...r.hosts.data,maxStoragePrice:(0,s.zh)((0,s.eX)(i.maxStoragePriceTBMonth)).toString(),maxIngressPrice:(0,s.zh)((0,s.vE)(i.maxIngressPriceTB)).toString(),maxEgressPrice:(0,s.zh)((0,s.vE)(i.maxEgressPriceTB)).toString(),minCollateral:(0,s.zh)((0,s.eX)(i.minCollateral)).toString(),minProtocolVersion:"v".concat(i.minProtocolVersion)},pricePinning:{...r.pricePinning.data,currency:i.pinnedCurrency,maxStoragePrice:i.shouldPinMaxStoragePrice?i.maxStoragePriceTBMonthPinned.toNumber():0,maxEgressPrice:i.shouldPinMaxEgressPrice?i.maxEgressPriceTBPinned.toNumber():0,maxIngressPrice:i.shouldPinMaxIngressPrice?i.maxIngressPriceTBPinned.toNumber():0,minCollateral:i.shouldPinMinCollateral?i.minCollateralPinned.toNumber():0}}}}({resources:t,values:e}),P=[n.put({payload:m.contracts}),a.put({payload:m.hosts}),l.put({payload:m.pricePinning})],v=(await Promise.all(P)).find(e=>e.error);if(v)return void(0,o.el3)({title:"Error updating configuration",body:v.error});(0,o.VE1)({title:"Configuration has been saved"}),(async()=>{await (0,c.cb)(5e3),d(e=>e.startsWith(h.qQ))})(),await i()},[r,n,a,l,i,d])}({resources:v,revalidateAndResetForm:S}),E=(0,o._2E)(M),I=(0,t.useMemo)(()=>g.handleSubmit(k,E),[g,k,E]),q=(0,t.useRef)(null),F=(0,t.useCallback)(async e=>{q.current&&(0,o.hwc)(q.current,e)},[]);return{onSubmit:I,revalidateAndResetForm:S,form:g,fields:M,changeCount:j,remoteError:B,configRef:q,takeScreenshot:F}}();return(0,n.jsx)(M.Provider,{value:i,children:r})}},28211:(e,r,i)=>{"use strict";i.d(r,{Providers:()=>c});var n=i(54568),t=i(7620),o=i(14751);let s=(0,t.createContext)({});function a(e){let{children:r}=e;return(0,n.jsx)(s.Provider,{value:{},children:r})}var l=i(6183),d=i(38999);function c(e){let{children:r}=e;return(0,n.jsx)(a,{children:(0,n.jsx)(l.sG,{children:(0,n.jsx)(o.Co,{children:(0,n.jsxs)(d.D,{children:[(0,n.jsx)(o.Yu,{}),r]})})})})}},39808:(e,r,i)=>{Promise.resolve().then(i.bind(i,28211)),Promise.resolve().then(i.t.bind(i,55454,23)),Promise.resolve().then(i.bind(i,15522)),Promise.resolve().then(i.bind(i,90499)),Promise.resolve().then(i.bind(i,35124)),Promise.resolve().then(i.bind(i,64105)),Promise.resolve().then(i.bind(i,30339)),Promise.resolve().then(i.bind(i,67206)),Promise.resolve().then(i.bind(i,68360)),Promise.resolve().then(i.bind(i,13621)),Promise.resolve().then(i.bind(i,30971)),Promise.resolve().then(i.bind(i,43861)),Promise.resolve().then(i.bind(i,57628)),Promise.resolve().then(i.bind(i,43819)),Promise.resolve().then(i.bind(i,50429)),Promise.resolve().then(i.bind(i,4993)),Promise.resolve().then(i.bind(i,35328)),Promise.resolve().then(i.bind(i,63895)),Promise.resolve().then(i.bind(i,14859)),Promise.resolve().then(i.bind(i,35091)),Promise.resolve().then(i.bind(i,17319)),Promise.resolve().then(i.bind(i,16613)),Promise.resolve().then(i.bind(i,4903)),Promise.resolve().then(i.bind(i,68952)),Promise.resolve().then(i.bind(i,79735)),Promise.resolve().then(i.bind(i,57643)),Promise.resolve().then(i.bind(i,66341)),Promise.resolve().then(i.bind(i,10637)),Promise.resolve().then(i.bind(i,20344)),Promise.resolve().then(i.bind(i,4942)),Promise.resolve().then(i.bind(i,15610)),Promise.resolve().then(i.bind(i,78837)),Promise.resolve().then(i.bind(i,93179)),Promise.resolve().then(i.bind(i,94475)),Promise.resolve().then(i.bind(i,47538)),Promise.resolve().then(i.bind(i,70473)),Promise.resolve().then(i.bind(i,40118)),Promise.resolve().then(i.bind(i,61856)),Promise.resolve().then(i.bind(i,65511)),Promise.resolve().then(i.bind(i,68758)),Promise.resolve().then(i.bind(i,56086)),Promise.resolve().then(i.bind(i,66093)),Promise.resolve().then(i.bind(i,29162)),Promise.resolve().then(i.bind(i,43125)),Promise.resolve().then(i.bind(i,30502)),Promise.resolve().then(i.bind(i,35373)),Promise.resolve().then(i.bind(i,17039)),Promise.resolve().then(i.bind(i,46988)),Promise.resolve().then(i.bind(i,77735)),Promise.resolve().then(i.bind(i,20057)),Promise.resolve().then(i.bind(i,38429)),Promise.resolve().then(i.bind(i,42276)),Promise.resolve().then(i.bind(i,4833)),Promise.resolve().then(i.bind(i,94050)),Promise.resolve().then(i.bind(i,78052)),Promise.resolve().then(i.bind(i,92143)),Promise.resolve().then(i.bind(i,91770)),Promise.resolve().then(i.bind(i,35220)),Promise.resolve().then(i.bind(i,80953)),Promise.resolve().then(i.bind(i,68146)),Promise.resolve().then(i.bind(i,21023)),Promise.resolve().then(i.bind(i,8245)),Promise.resolve().then(i.bind(i,16041)),Promise.resolve().then(i.bind(i,25038)),Promise.resolve().then(i.bind(i,81288)),Promise.resolve().then(i.bind(i,66900)),Promise.resolve().then(i.bind(i,57069)),Promise.resolve().then(i.bind(i,792)),Promise.resolve().then(i.bind(i,20649)),Promise.resolve().then(i.bind(i,92769)),Promise.resolve().then(i.bind(i,81046)),Promise.resolve().then(i.bind(i,96347)),Promise.resolve().then(i.bind(i,15134)),Promise.resolve().then(i.bind(i,36347)),Promise.resolve().then(i.bind(i,73472)),Promise.resolve().then(i.bind(i,65013)),Promise.resolve().then(i.bind(i,96878)),Promise.resolve().then(i.bind(i,58168)),Promise.resolve().then(i.bind(i,97751)),Promise.resolve().then(i.bind(i,24465)),Promise.resolve().then(i.bind(i,9340)),Promise.resolve().then(i.bind(i,19532)),Promise.resolve().then(i.bind(i,43783)),Promise.resolve().then(i.bind(i,71701)),Promise.resolve().then(i.bind(i,91779)),Promise.resolve().then(i.bind(i,92130)),Promise.resolve().then(i.bind(i,33488)),Promise.resolve().then(i.bind(i,69302)),Promise.resolve().then(i.bind(i,95875)),Promise.resolve().then(i.bind(i,48725)),Promise.resolve().then(i.bind(i,26707)),Promise.resolve().then(i.bind(i,38906)),Promise.resolve().then(i.bind(i,70558)),Promise.resolve().then(i.bind(i,48746)),Promise.resolve().then(i.bind(i,25243)),Promise.resolve().then(i.bind(i,38862)),Promise.resolve().then(i.t.bind(i,19664,23)),Promise.resolve().then(i.t.bind(i,10489,23)),Promise.resolve().then(i.t.bind(i,2852,23)),Promise.resolve().then(i.t.bind(i,50616,23))},50616:e=>{e.exports={style:{fontFamily:"'mono', 'mono Fallback'"},className:"__className_59b18b",variable:"__variable_59b18b"}},55454:()=>{}},e=>{e.O(0,[5890,9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,1144,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,6322,1893,6335,2720,4751,587,18,7358],()=>e(e.s=39808)),_N_E=e.O()}]);