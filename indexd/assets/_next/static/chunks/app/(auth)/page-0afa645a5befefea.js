(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2670],{46217:(e,t,s)=>{Promise.resolve().then(s.bind(s,60358))},46682:(e,t,s)=>{"use strict";s.d(t,{n:()=>d,SX:()=>o,zE:()=>m,P3:()=>i,aE:()=>h,zL:()=>j,eY:()=>g,dW:()=>x,R7:()=>f,eX:()=>v,KR:()=>c,NN:()=>u,vT:()=>y,iG:()=>b,YH:()=>p,Jz:()=>N});var l=s(26109),n=s(62435),a=s(98686),r=s(93727);function i(e){return(0,l.Av)({...e,route:n.dV})}function o(){let e=i({config:{swr:{revalidateOnFocus:!1}}});return(0,a.Ay)(e,()=>{var t;return(null==(t=e.data)?void 0:t.network)==="zen"?(0,r.Py)():(0,r.Nm)()},{refreshInterval:6e4,keepPreviousData:!0}).data||0}function c(e){return(0,l.yW)({...e,route:n.OD})}function u(e){return(0,l.Av)({...e,route:n.DM})}function d(e){return(0,l.Av)({...e,route:n.np})}function m(e){return(0,l.Av)({...e,route:n.vb})}function h(e){return(0,l.Av)({...e,route:n.kf})}function j(e){return(0,l.hz)({...e,route:n.bq})}function g(e){return(0,l.Av)({...e,route:n._M})}function x(e){return(0,l.hz)({...e,route:n.hN})}function f(e){return(0,l.Av)({...e,route:n.NR})}function v(e){return(0,l.hz)({...e,route:n.Ko})}function y(e){return(0,l.Av)({...e,route:n.Z})}function b(e){return(0,l.Av)({...e,route:n.ki})}function p(e){return(0,l.Av)({...e,route:n.s7})}function N(e){return(0,l.yW)({...e,route:n.V$})}},60358:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var l=s(54568),n=s(62121),a=s(31100);function r(e){let{showCloseButton:t,onClose:s,children:r}=e;return(0,l.jsxs)(n.Zkm,{className:"relative p-4 h-full bg-transparent shadow-none border-none flex-1 flex flex-col w-[350px] lg:w-[450px]",children:[t&&(0,l.jsx)("button",{className:"absolute top-3 right-3 p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-blue-500 z-10",onClick:s,"aria-label":"Close drawer",type:"button",children:(0,l.jsx)(a.sn9,{className:"w-5 h-5 text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100"})}),r]})}var i=s(7620),o=s(46682),c=s(37653);function u(e,t){var s;let{geo:l,exchange:n}=t;return{...e,id:e.publicKey,usable:Object.values(e.usability).every(e=>e),location:(null==l||null==(s=l.find(t=>t.publicKey===e.publicKey))?void 0:s.location)||{countryCode:"unknown",latitude:0,longitude:0},exchange:n,sortFields:{storagePrice:new c.g(e.settings.prices.storagePrice),ingressPrice:new c.g(e.settings.prices.ingressPrice),egressPrice:new c.g(e.settings.prices.egressPrice),freeSectorPrice:new c.g(e.settings.prices.freeSectorPrice),maxCollateral:new c.g(e.settings.prices.collateral)}}}function d(){var e;let t=(0,o.P3)(),s=(0,n.XDV)({api:(null==(e=t.data)?void 0:e.network)==="mainnet"?"https://api.siascan.com":"https://api.siascan.com/zen",params:{sortBy:"storage_price",dir:"asc",limit:1e3},payload:{online:!0}}),l=(0,o.zE)(),a=(0,n.bK1)(),r=(0,i.useMemo)(()=>a.currency&&a.rate&&{currency:a.currency,rate:a.rate},[a.currency,a.rate]);return(0,i.useMemo)(()=>{var e;return(null==(e=l.data)?void 0:e.map(e=>u(e,{geo:s.data,exchange:r})))||[]},[l.data,s.data,r])}function m(e){let{usable:t,usability:s,className:a,showExpanded:r=!1}=e,o=(0,i.useMemo)(()=>s&&Object.keys(s).filter(e=>!s[e]).map(e=>(0,l.jsx)(h,{status:"unusable",name:g(e)},e)),[s]),c=(0,i.useMemo)(()=>s&&Object.keys(s).filter(e=>s[e]).map(e=>(0,l.jsx)(h,{status:"usable",name:g(e)},e)),[s]);return(0,l.jsx)("div",{className:(0,n.cn)("flex gap-1",a),children:t&&!r?(0,l.jsx)(h,{status:"usable",name:"usable"}):(0,l.jsxs)(l.Fragment,{children:[o,c]})})}function h(e){let{status:t,name:s}=e;return(0,l.jsxs)(n.Exy,{size:"small",className:"flex items-center gap-0.5",children:[(0,l.jsx)(j,{status:t,name:s}),s]})}function j(e){let{status:t,name:s}=e,r=(0,i.useMemo)(()=>({usable:"".concat(s," is usable"),warning:"".concat(s," is almost usable"),unusable:"".concat(s," is unusable")}),[s]);return(0,l.jsx)(n.m_M,{content:r[t],children:"usable"===t?(0,l.jsx)(a.d5v,{className:"text-green-600 scale-75"}):"warning"===t?(0,l.jsx)(a.UvW,{className:"text-amber-600 scale-75"}):(0,l.jsx)(a.mC5,{className:"text-red-600 scale-75"})})}function g(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}function x(e){let{label:t,value:s}=e;return(0,l.jsxs)("div",{className:"flex gap-1",children:[(0,l.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,l.jsx)(n.EYj,{color:"subtle",className:"truncate",children:t})}),(0,l.jsx)("div",{className:"flex-1 flex justify-end items-center",children:(0,l.jsx)(n.EYj,{color:"subtle",className:"truncate",children:s})})]})}function f(){var e,t;let s=d(),{selectedId:a}=(0,n.i$h)("hostList"),r=(0,i.useMemo)(()=>s.find(e=>e.id===a),[a,s]),o=(0,i.useMemo)(()=>r&&"unknown"!==r.location.countryCode?{id:r.id,publicKey:r.id,location:r.location,v2Settings:r.settings,usable:r.usable}:null,[r]);return r?(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)(n.DZT,{size:"24",children:[(null==r||null==(e=r.location)?void 0:e.countryCode)?(0,l.jsx)("span",{className:"pr-1",children:(0,l.jsx)(n.J93,{countryCode:null==r||null==(t=r.location)?void 0:t.countryCode})}):null,null==r?void 0:r.addresses[0].address]}),(0,l.jsx)(n.hz$,{hosts:o?[o]:[],activeHost:o,onHostMapClick:()=>null,scale:180,showLegend:!1},a),(0,l.jsx)(n.wvv,{className:"mt-4 mb-2"}),(0,l.jsx)(n.EYj,{size:"16",weight:"medium",className:"mb-2",children:"Addresses"}),(0,l.jsx)("div",{className:"flex flex-col gap-2",children:r.addresses.map(e=>(0,l.jsx)(x,{label:e.protocol,value:(0,l.jsx)(n.Zjd,{className:"justify-end",value:e.address,maxLength:24})},e.address))}),(0,l.jsx)(n.wvv,{className:"mt-4 mb-2"}),(0,l.jsx)(n.EYj,{size:"16",weight:"medium",className:"mb-2",children:"Usability"}),(0,l.jsx)(m,{usable:r.usable,usability:r.usability,className:"w-full overflow-hidden flex-wrap"})]},null==r?void 0:r.id):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center overflow-hidden",children:(0,l.jsx)(n.EYj,{children:"Host not found"})})}function v(e){let{hosts:t}=e,s=(0,i.useDeferredValue)(t);return(0,i.useMemo)(()=>s.length>100?Object.values(s.reduce((e,t)=>{var s,l,n,a;let r=null==(s=t.location)?void 0:s.countryCode;return r&&"unknown"!==r&&t.location&&(e[r]?e[r].groupCount=(e[r].groupCount||0)+1:e[r]={type:"group",id:t.id,location:{latitude:null==(l=t.location)?void 0:l.latitude,longitude:null==(n=t.location)?void 0:n.longitude,countryCode:null==(a=t.location)?void 0:a.countryCode},groupCount:1}),e},{})):s.map(e=>e.location&&"unknown"!==e.location.countryCode?{id:e.id,publicKey:e.id,location:{latitude:e.location.latitude,longitude:e.location.longitude,countryCode:e.location.countryCode},v2Settings:e.settings,usable:e.usable}:null).filter(e=>null!==e),[s])}function y(e){let{hosts:t}=e,{setSelectedId:s}=(0,n.i$h)("hostList"),a=v({hosts:t.map(e=>e.original)});return(0,l.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,l.jsxs)(n.DZT,{size:"24",className:"mb-2",children:["Hosts (",t.length,")"]}),(0,l.jsx)(n.hz$,{hosts:a,activeHost:null,onHostMapClick:e=>s(e),scale:180,showLegend:!1})]})}function b(e){let{columnId:t,table:s,children:r}=e,[o,c]=(0,i.useState)(!1),u=s.getColumn(t),d=null==u?void 0:u.getIsFiltered();return(null==u?void 0:u.getCanFilter())?(0,l.jsx)(n.AMh,{trigger:(0,l.jsx)(n.$nd,{variant:"ghost",size:"none",icon:d?"contrast":"verySubtle",children:(0,l.jsx)(a.uG0,{})}),rootProps:{open:o,onOpenChange:c},contentProps:{align:"end",className:"w-64"},children:(0,l.jsxs)("div",{className:"p-3 space-y-3",children:[r,d&&(0,l.jsx)(n.$nd,{variant:"ghost",size:"small",onClick:()=>{u.setFilterValue(void 0),c(!1)},className:"w-full",children:"Clear Filter"})]})}):null}function p(e){let{columnId:t,table:s}=e,r=s.getColumn(t),i=null==r?void 0:r.getIsSorted();return(null==r?void 0:r.getCanSort())?(0,l.jsx)(n.$nd,{variant:"ghost",size:"none",icon:i?"contrast":"verySubtle",onClick:()=>{"asc"===i?null==r||r.toggleSorting(!0):"desc"===i?null==r||r.clearSorting():null==r||r.toggleSorting(!1)},children:"asc"===i?(0,l.jsx)(a.cgo,{}):"desc"===i?(0,l.jsx)(a.zYC,{}):(0,l.jsx)(a.nIb,{})}):null}function N(e){let{children:t,table:s,column:a,filter:r,className:i}=e;return(0,l.jsxs)("div",{className:(0,n.cn)("flex items-center gap-0.5 justify-end",i),children:[(0,l.jsx)(n.EYj,{className:"truncate",children:t}),r&&s&&a&&(0,l.jsx)(b,{columnId:a.id,table:s,children:r}),s&&a&&(0,l.jsx)(p,{columnId:a.id,table:s})]})}var w=s(93727);function C(e){let{table:t}=e,s=t.getColumn("location"),a=(0,i.useMemo)(()=>(null==s?void 0:s.getFacetedUniqueValues())||new Map,[s]),r=null==s?void 0:s.getFilterValue(),o=(0,i.useMemo)(()=>{let e=[{value:"",label:"All Countries"}];for(let[t]of a)t&&"unknown"!==t&&e.push({value:t,label:"".concat((0,w.y$)(t)," ").concat((0,w.qQ)(t))});return e.push({value:"unknown",label:"❓ Unknown"}),e},[a]);return(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsx)(n.l6P,{value:r||"",onChange:e=>{let t=e.target.value;null==s||s.setFilterValue(""===t?void 0:t)},children:o.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})})}let S=[{id:"publicKey",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Public Key"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.Zjd,{value:t(),type:"hostPublicKey"})},meta:{width:150}},{id:"usable",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Usable"})},accessorKey:"usable",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(n.m_M,{content:t.original.usable?"host is usable":"host is unusable",children:t.original.usable?(0,l.jsx)(a.Voo,{className:"text-green-500"}):(0,l.jsx)(a.g$$,{className:"text-red-500"})}),(0,l.jsx)(m,{usable:t.original.usable,usability:t.original.usability})]})},meta:{width:200}},{id:"blocked",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Blocked"})},accessorKey:"blocked",cell:e=>{let{row:t}=e,s=t.original.blocked;return(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(n.m_M,{content:s?"host is blocked":"host is not blocked",children:s?(0,l.jsx)(a.g$$,{className:"text-red-500"}):(0,l.jsx)(a.Voo,{className:"text-neutral-500"})})})},meta:{className:"justify-end"}},{id:"acceptingContracts",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Accepting Contracts"})},accessorKey:"settings.acceptingContracts",cell:e=>{let{row:t,getValue:s}=e;return(0,l.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,l.jsx)(j,{status:t.original.usability.acceptingContracts?"usable":"unusable",name:"accepting contracts"})})},meta:{className:"justify-end",width:80}},{id:"uptime",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Uptime"})},accessorKey:"recentUptime",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.uptime?"usable":"unusable",name:"recent uptime"}),(0,l.jsxs)(n.EYj,{children:[(100*t.original.recentUptime).toFixed(1),"%"]})]})},meta:{className:"justify-end",width:100}},{id:"location",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,filter:(0,l.jsx)(C,{table:t}),children:"Location"})},accessorKey:"location.countryCode",cell:e=>{var t,s;let{row:a}=e;return"unknown"===a.original.location.countryCode?(0,l.jsx)("div",{className:"py-1",children:(0,l.jsx)(n.EYj,{color:"verySubtle",children:"-"})}):(0,l.jsxs)("div",{className:"py-1",children:[(0,l.jsx)(n.J93,{countryCode:null==(t=a.original.location)?void 0:t.countryCode}),(0,l.jsx)(n.EYj,{className:"ml-1",children:null==(s=a.original.location)?void 0:s.countryCode})]})},meta:{className:"justify-end"}},{id:"totalStorage",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Total Storage"})},accessorKey:"settings.totalStorage",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:(0,w.p6)((0,w.g9)(t()))})},meta:{className:"justify-end"}},{id:"remainingStorage",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Remaining Storage"})},accessorKey:"settings.remainingStorage",cell:e=>{let{getValue:t}=e,s=(0,w.g9)(t()),a=(0,w._S)(10);return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:s.eq(0)?"unusable":s.lt(a)?"warning":"usable",name:"storage"}),(0,l.jsx)(n.EYj,{children:(0,w.p6)(s)})]})},meta:{className:"justify-end"}},{id:"storagePrice",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Price Storage"})},accessorKey:"settings.prices.storagePrice",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.storagePrice?"usable":"unusable",name:"storage price"}),(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:(0,w.Ri)({price:t.original.settings.prices.storagePrice})})]})},meta:{className:"justify-end"},sortingFn:(e,t)=>e.original.sortFields.storagePrice.minus(t.original.sortFields.storagePrice).toNumber()},{id:"ingressPrice",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Ingress/TB"})},accessorKey:"settings.prices.ingressPrice",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.ingressPrice?"usable":"unusable",name:"ingress price"}),(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:(0,w.gW)({price:t.original.settings.prices.ingressPrice})})]})},meta:{className:"justify-end"},sortingFn:(e,t)=>e.original.sortFields.ingressPrice.minus(t.original.sortFields.ingressPrice).toNumber()},{id:"egressPrice",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Egress/TB"})},accessorKey:"settings.prices.egressPrice",cell:e=>{let{row:t}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.egressPrice?"usable":"unusable",name:"egress price"}),(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:(0,w.LT)({price:t.original.settings.prices.egressPrice})})]})},meta:{className:"justify-end"},sortingFn:(e,t)=>e.original.sortFields.egressPrice.minus(t.original.sortFields.egressPrice).toNumber()},{id:"freeSectorPrice",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Free Sector Price"})},accessorKey:"settings.prices.freeSectorPrice",cell:e=>{let{row:t,getValue:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.freeSectorPrice?"usable":"unusable",name:"free sector price"}),(0,l.jsx)(n.kdO,{variant:"value",font:"sans",fixed:10,value:new c.g(s())})]})},meta:{className:"justify-end",width:160},sortingFn:(e,t)=>e.original.sortFields.freeSectorPrice.minus(t.original.sortFields.freeSectorPrice).toNumber()},{id:"maxContractDuration",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Max Contract Duration"})},accessorKey:"settings.maxContractDuration",cell:e=>{let{row:t,getValue:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.maxContractDuration?"usable":"unusable",name:"max contract duration"}),(0,l.jsxs)(n.EYj,{children:[(0,w.bu)(s()).toFixed(1)," weeks"]})]})},meta:{className:"justify-end",width:120}},{id:"maxCollateral",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Max Collateral"})},accessorKey:"settings.maxCollateral",cell:e=>{let{row:t,getValue:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.maxCollateral?"usable":"unusable",name:"max collateral"}),(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.g(s())})]})},meta:{className:"justify-end",width:120},sortingFn:(e,t)=>e.original.sortFields.maxCollateral.minus(t.original.sortFields.maxCollateral).toNumber()},{id:"protocolVersion",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Protocol Version"})},accessorKey:"settings.protocolVersion",cell:e=>{let{row:t,getValue:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.protocolVersion?"usable":"unusable",name:"protocol version"}),(0,l.jsx)(n.EYj,{children:s().join(".")})]})},meta:{className:"justify-end",width:120}},{id:"priceValidity",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Price Validity"})},accessorKey:"settings.prices.validUntil",cell:e=>{let{row:t,getValue:s}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(j,{status:t.original.usability.priceValidity?"usable":"unusable",name:"price validity"}),(0,l.jsx)(n.EYj,{children:new Date(s()).toLocaleString()})]})},meta:{className:"justify-end",width:220}},{id:"release",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Release"})},accessorKey:"settings.release",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:t()})},meta:{className:"justify-end",width:120}}],F=[{value:"hosts",label:"Hosts"},{value:"contracts",label:"Contracts"}];function P(e){let{value:t,onValueChange:s,className:a}=e;return(0,l.jsx)(n.l6P,{value:t,onChange:e=>s(e.target.value),className:a,"aria-label":"Select data view",children:F.map(e=>(0,l.jsx)(n.c$x,{value:e.value,children:e.label},e.value))})}var K=s(62942);function k(){let e=(0,K.useSearchParams)(),t=(0,K.useRouter)(),s=(0,K.usePathname)(),a=e.get("view"),{selectedId:o,setSelectedId:c,columnFilters:u,setColumnFilters:m,columnSorts:h,setColumnSorts:j}=(0,n.i$h)("hostList"),{offset:g,limit:x,setOffset:v,setLimit:b}=(0,n.i$h)("hostList"),p=(0,i.useCallback)(e=>{c(e)},[c]),N=d(),w=(0,n.uIQ)({data:N,columns:S,columnFilters:u,columnSorts:h,setColumnSorts:j,setColumnFilters:m,offset:g,limit:x,onRowClick:p,setOffset:v,setLimit:b});return(0,l.jsx)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:(0,l.jsxs)("div",{className:"flex flex-row flex-1 overflow-hidden w-full",children:[(0,l.jsx)("div",{className:"flex-1 h-full overflow-hidden p-4",children:(0,l.jsx)(n.bQt,{...w,heading:(0,l.jsx)(P,{value:a,onValueChange:l=>{let n=new URLSearchParams(Array.from(e.entries()));n.set("view",l),t.push("".concat(s,"?").concat(n.toString()))}})})}),(0,l.jsx)("div",{className:"py-4 pr-4",children:o?(0,l.jsx)(r,{showCloseButton:!0,onClose:()=>c(void 0),children:(0,l.jsx)(f,{})}):(0,l.jsx)(r,{showCloseButton:!1,onClose:()=>c(void 0),children:(0,l.jsx)(y,{hosts:w.rows})})})]})})}let A=[{id:"id",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"ID"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.Zjd,{value:t(),type:"contract"})},meta:{className:"justify-start",width:160}},{id:"status",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Status"})},accessorKey:"good",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(E,{value:t()?"Good":"Bad"})},meta:{className:"justify-end",width:80}},{id:"state",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"State"})},accessorKey:"state",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(Y,{value:t()})},meta:{className:"justify-end",width:80}},{id:"hostPublicKey",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Host Public Key"})},accessorKey:"hostKey",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.Zjd,{value:t(),type:"hostPublicKey"})},meta:{className:"justify-end",width:160}},{id:"location",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Host Location"})},accessorKey:"host.location.countryCode",cell:e=>{let{getValue:t}=e,s=t();return"unknown"===s?(0,l.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(n.J93,{countryCode:s}),(0,l.jsx)(n.EYj,{children:s})]})},meta:{className:"justify-end"}},{id:"hostUsable",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,className:"justify-start",children:"Host Usable"})},accessorKey:"hostUsable",cell:e=>{var t,s,r,i;let{row:o}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,l.jsx)(n.m_M,{content:(null==(t=o.original.host)?void 0:t.usable)?"host is usable":"host is unusable",children:(null==(s=o.original.host)?void 0:s.usable)?(0,l.jsx)(a.Voo,{className:"text-green-500"}):(0,l.jsx)(a.g$$,{className:"text-red-500"})}),(0,l.jsx)(m,{usable:(null==(r=o.original.host)?void 0:r.usable)||!1,usability:null==(i=o.original.host)?void 0:i.usability})]})},meta:{className:"justify-start",width:160}},{id:"hostBlocked",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Host Blocked"})},accessorKey:"host.blocked",cell:e=>{var t;let{row:s}=e,r=null==(t=s.original.host)?void 0:t.blocked;return(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(n.m_M,{content:r?"host is blocked":"host is not blocked",children:r?(0,l.jsx)(a.g$$,{className:"text-red-500"}):(0,l.jsx)(a.Voo,{className:"text-neutral-500"})})})},meta:{className:"justify-end"}},{id:"formation",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Formation"})},accessorKey:"formation",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(t()))})},meta:{className:"justify-end",width:140}},{id:"proofHeight",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Proof Height"})},accessorKey:"proofHeight",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:t().toLocaleString()})},meta:{className:"justify-end"}},{id:"expirationHeight",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Expiration Height"})},accessorKey:"expirationHeight",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:t().toLocaleString()})},meta:{className:"justify-end"}},{id:"nextPrune",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Next Prune"})},accessorKey:"nextPrune",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(t()))})},meta:{className:"justify-end",width:140}},{id:"lastBroadcastAttempt",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Last Broadcast Attempt"})},accessorKey:"lastBroadcastAttempt",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(t()))})},meta:{className:"justify-end",width:140}},{id:"capacity",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Capacity"})},accessorKey:"size",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:(0,w.p6)(t())})},meta:{className:"justify-end"}},{id:"dataSize",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Data Size"})},accessorKey:"capacity",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.EYj,{children:(0,w.p6)(t())})},meta:{className:"justify-end"}},{id:"spendingSectorRoots",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Spend Sector Roots"})},accessorKey:"spending.sectorRoots",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.spending.sectorRoots,l=t.original.sortingFields.spending.sectorRoots;return s.minus(l).toNumber()}},{id:"spendAppendSector",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Spend Append Sector"})},accessorKey:"spending.appendSector",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.spending.appendSector,l=t.original.sortingFields.spending.appendSector;return s.minus(l).toNumber()}},{id:"spendFreeSector",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Spend Free Sector"})},accessorKey:"spending.freeSector",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.spending.freeSector,l=t.original.sortingFields.spending.freeSector;return s.minus(l).toNumber()}},{id:"spendFundAccount",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Spend Fund Account"})},accessorKey:"spending.fundAccount",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.spending.fundAccount,l=t.original.sortingFields.spending.fundAccount;return s.minus(l).toNumber()}},{id:"initialAllowance",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Initial Allowance"})},accessorKey:"initialAllowance",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.spending.sectorRoots,l=t.original.sortingFields.spending.sectorRoots;return s.minus(l).toNumber()}},{id:"remainingAllowance",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Remaining Allowance"})},accessorKey:"remainingAllowance",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.remainingAllowance,l=t.original.sortingFields.remainingAllowance;return s.minus(l).toNumber()}},{id:"totalCollateral",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Total Collateral"})},accessorKey:"totalCollateral",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.totalCollateral,l=t.original.sortingFields.totalCollateral;return s.minus(l).toNumber()}},{id:"usedCollateral",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Used Collateral"})},accessorKey:"usedCollateral",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.usedCollateral,l=t.original.sortingFields.usedCollateral;return s.minus(l).toNumber()}},{id:"contractPrice",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Contract Price"})},accessorKey:"contractPrice",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.contractPrice,l=t.original.sortingFields.contractPrice;return s.minus(l).toNumber()}},{id:"minerFee",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Miner Fee"})},accessorKey:"minerFee",cell:e=>{let{getValue:t}=e;return(0,l.jsx)(n.kdO,{variant:"value",font:"sans",value:new c.A(t())})},meta:{className:"justify-end"},sortingFn:(e,t)=>{let s=e.original.sortingFields.minerFee,l=t.original.sortingFields.minerFee;return s.minus(l).toNumber()}},{id:"revisionNumber",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Revision Number"})},accessorKey:"revisionNumber",cell:e=>{var t;let{getValue:s}=e;return(0,l.jsx)(n.EYj,{children:null==(t=s())?void 0:t.toLocaleString()})},meta:{className:"justify-end"}},{id:"renewedFrom",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Renewed From"})},accessorKey:"renewedFrom",cell:e=>{let{getValue:t}=e,s=t();return"0000000000000000000000000000000000000000000000000000000000000000"===s?(0,l.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,l.jsx)(n.EYj,{children:s})},meta:{className:"justify-end"}},{id:"renewedTo",header:e=>{let{table:t,column:s}=e;return(0,l.jsx)(N,{table:t,column:s,children:"Renewed To"})},accessorKey:"renewedTo",cell:e=>{let{getValue:t}=e,s=t();return"0000000000000000000000000000000000000000000000000000000000000000"===s?(0,l.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,l.jsx)(n.EYj,{children:s})},meta:{className:"justify-end"}}];function E(e){let{value:t}=e;return(0,l.jsx)(n.Exy,{size:"small",variant:"active"===t?"green":"red",children:t})}function Y(e){let{value:t}=e,s="gray";return"active"===t?s="amber":"failed"===t?s="red":"complete"===t&&(s="gray"),(0,l.jsx)(n.Exy,{size:"small",variant:s,children:t})}function z(){var e;let t=(0,o.P3)(),s=(0,n.XDV)({api:(null==(e=t.data)?void 0:e.network)==="mainnet"?"https://api.siascan.com":"https://api.siascan.com/zen",params:{sortBy:"storage_price",dir:"asc",limit:1e3},payload:{online:!0}}),l=(0,o.n)(),a=(0,o.zE)(),r=(0,n.bK1)(),d=(0,i.useMemo)(()=>r.currency&&r.rate&&{currency:r.currency,rate:r.rate},[r.currency,r.rate]);return(0,i.useMemo)(()=>{var e;return(null==(e=l.data)?void 0:e.map(e=>{var t;let l=null==(t=a.data)?void 0:t.find(t=>t.publicKey===e.hostKey);return{...e,id:e.id,host:l?u(l,{geo:s.data,exchange:d}):void 0,exchange:d,sortingFields:{spending:{appendSector:new c.g(e.spending.appendSector),freeSector:new c.g(e.spending.freeSector),fundAccount:new c.g(e.spending.fundAccount),sectorRoots:new c.g(e.spending.sectorRoots)},remainingAllowance:new c.g(e.remainingAllowance),totalCollateral:new c.g(e.totalCollateral),contractPrice:new c.g(e.contractPrice),minerFee:new c.g(e.minerFee),usedCollateral:new c.g(e.usedCollateral),initialAllowance:new c.g(e.initialAllowance)}}}))||[]},[l.data,d,s.data,a.data])}function M(){var e,t,s;let{selectedId:a}=(0,n.i$h)("contractList"),r=z(),o=(0,i.useMemo)(()=>r.find(e=>e.id===a),[a,r]),c=(0,i.useMemo)(()=>{var e,t,s;return o?{id:o.hostKey,publicKey:o.hostKey,location:null==(e=o.host)?void 0:e.location,v2Settings:null==(t=o.host)?void 0:t.settings,usable:null==(s=o.host)?void 0:s.usable}:null},[o]);return o?(0,l.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,l.jsxs)(n.DZT,{size:"24",className:"mr-[50px] truncate",children:["Contract: ",null==o?void 0:o.id]}),(0,l.jsx)(n.hz$,{hosts:c?[c]:[],activeHost:null,onHostMapClick:()=>null,showLegend:!1,scale:180}),(0,l.jsx)(n.wvv,{className:"mb-2"}),(0,l.jsx)(n.EYj,{size:"16",weight:"medium",className:"mb-2",children:"Info"}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(x,{label:"State",value:(0,l.jsx)(Y,{value:o.state})}),(0,l.jsx)(x,{label:"Status",value:(0,l.jsx)(E,{value:o.good?"Good":"Bad"})}),(0,l.jsx)(x,{label:"Host public key",value:(0,l.jsx)(n.Zjd,{value:o.hostKey,type:"hostPublicKey"})}),null==(e=o.host)?void 0:e.addresses.map(e=>(0,l.jsx)(x,{label:e.protocol,value:(0,l.jsx)(n.Zjd,{value:e.address,maxLength:24})},e.address))]}),(0,l.jsx)(n.wvv,{className:"mt-4 mb-2"}),(0,l.jsx)(n.EYj,{size:"16",weight:"medium",className:"mb-2",children:"Usability"}),(0,l.jsx)(m,{usable:(null==(t=o.host)?void 0:t.usable)||!1,usability:null==(s=o.host)?void 0:s.usability,className:"w-full overflow-hidden flex-wrap"})]}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center overflow-hidden",children:(0,l.jsx)(n.EYj,{children:"Contract not found"})})}function $(e){let{contracts:t}=e,{setSelectedId:s}=(0,n.i$h)("contractList"),a=v({hosts:t.map(e=>{var t,s,l;return{...e.original,settings:null==(t=e.original.host)?void 0:t.settings,usable:null==(s=e.original.host)?void 0:s.usable,location:null==(l=e.original.host)?void 0:l.location}})});return(0,l.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,l.jsxs)(n.DZT,{size:"24",className:"mb-2",children:["Contracts (",t.length,")"]}),(0,l.jsx)(n.hz$,{hosts:a,activeHost:null,onHostMapClick:e=>s(e),scale:180,showLegend:!1})]})}function L(){let e=(0,K.useSearchParams)(),t=(0,K.useRouter)(),s=(0,K.usePathname)(),a=e.get("view"),{offset:o,limit:c,setOffset:u,setLimit:d,selectedId:m,setSelectedId:h,columnFilters:j,setColumnFilters:g,columnSorts:x,setColumnSorts:f}=(0,n.i$h)("contractList"),v=(0,i.useCallback)(e=>{h(e)},[h]),y=z(),b=(0,n.uIQ)({data:y,columns:A,columnFilters:j,setColumnFilters:g,columnSorts:x,setColumnSorts:f,offset:o,limit:c,onRowClick:v,setOffset:u,setLimit:d});return(0,l.jsx)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:(0,l.jsxs)("div",{className:"flex flex-row flex-1 overflow-hidden w-full",children:[(0,l.jsx)("div",{className:"flex-1 h-full overflow-hidden p-4",children:(0,l.jsx)(n.bQt,{...b,heading:(0,l.jsx)(P,{value:a,onValueChange:l=>{let n=new URLSearchParams(Array.from(e.entries()));n.set("view",l),t.push("".concat(s,"?").concat(n.toString()))}})})}),(0,l.jsx)("div",{className:"py-4 pr-4",children:m?(0,l.jsx)(r,{showCloseButton:!0,onClose:()=>h(void 0),children:(0,l.jsx)(M,{})}):(0,l.jsx)(r,{showCloseButton:!1,onClose:()=>h(void 0),children:(0,l.jsx)($,{contracts:b.rows})})})]})})}function R(){let e=(0,K.useSearchParams)(),t=e.get("view"),s=(0,K.useRouter)(),n=(0,K.usePathname)();return((0,i.useEffect)(()=>{if(!t){let t=new URLSearchParams(Array.from(e.entries()));t.set("view","hosts"),s.replace("".concat(n,"?").concat(t.toString()))}},[t,e,n,s]),t)?(0,l.jsxs)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:["hosts"===t&&(0,l.jsx)(k,{}),"contracts"===t&&(0,l.jsx)(L,{})]}):null}function D(){return(0,l.jsx)(R,{})}},62435:(e,t,s)=>{"use strict";s.d(t,{DM:()=>a,Ko:()=>h,NR:()=>m,OD:()=>n,V$:()=>f,Z:()=>j,_M:()=>u,bq:()=>c,dV:()=>l,hN:()=>d,kf:()=>o,ki:()=>g,np:()=>r,s7:()=>x,vb:()=>i});let l="/state",n="/syncer/connect",a="/txpool/recommendedfee",r="/contracts",i="/hosts",o="/settings/contracts",c="/settings/contracts",u="/settings/hosts",d="/settings/hosts",m="/settings/pricepinning",h="/settings/pricepinning",j="/wallet",g="/wallet/events",x="/wallet/pending",f="/wallet/send"}},e=>{e.O(0,[9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,7164,2121,587,1902,7358],()=>e(e.s=46217)),_N_E=e.O()}]);