(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5054],{14778:(e,l,t)=>{"use strict";t.d(l,{i:()=>c});var s=t(54568),a=t(2720),n=t(79423),i=t(7620),r=t(89964);function c(e){let{table:l,columns:t}=e,c=l.getState().sorting,o=(0,i.useMemo)(()=>c.map(e=>{var s;let a=l.getColumn(e.id),n=t.find(l=>l.id===e.id),i=e.id;return i=(null==n?void 0:n.header)&&"string"==typeof n.header?n.header:e.id.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim(),{id:e.id,header:i,direction:e.desc?"desc":"asc",sortIndex:null!=(s=null==a?void 0:a.getSortIndex())?s:-1}}),[c,l,t]);return 0===c.length?null:(0,s.jsx)(a.AMh,{trigger:(0,s.jsx)(a.$nd,{size:"small",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(a.EYj,{size:"12",weight:"medium",color:"subtle",children:"Order by"}),(0,s.jsx)(a.EYj,{size:"12",weight:"medium",color:"contrast",children:1===c.length?o[0].header:"".concat(c.length," columns")})]})}),contentProps:{align:"end",side:"bottom",className:"w-auto z-30",onOpenAutoFocus:e=>e.preventDefault()},children:(0,s.jsx)("div",{className:"p-1",children:o.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-1 justify-end min-w-0 p-1.5 rounded",children:[(0,s.jsx)(a.EYj,{size:"12",className:"truncate min-w-0 flex-1 text-right",children:e.header}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 shrink-0",children:[(0,s.jsx)(a.m_M,{content:"Remove this sort",side:"bottom",delayDuration:1200,children:(0,s.jsxs)(a.$nd,{variant:"ghost",size:"none",onClick:()=>(e=>{let t=l.getColumn(e);null==t||t.clearSorting()})(e.id),className:"group shrink-0 w-3.5 h-3.5 p-0 relative flex items-center justify-center",children:[(0,s.jsx)("span",{className:"text-[10px] leading-none font-medium absolute inset-0 flex items-center justify-center group-hover:hidden",children:e.sortIndex+1}),(0,s.jsx)(n.sn9,{className:"w-2.5 h-2.5 hidden group-hover:block absolute inset-0 m-auto"})]})}),(0,s.jsx)(a.$nd,{variant:"ghost",size:"none",icon:"contrast",onClick:()=>((e,t)=>{let s=l.getColumn(e);null==s||s.toggleSorting(!t,!0)})(e.id,"desc"===e.direction),className:"shrink-0",children:(0,s.jsx)(r.y,{direction:e.direction})})]})]},e.id))})})}},16326:(e,l,t)=>{"use strict";t.d(l,{A:()=>d});var s=t(54568),a=t(2720),n=t(79423),i=t(7620);function r(e){let{columnId:l,table:t,children:r}=e,[c,o]=(0,i.useState)(!1),d=t.getColumn(l),u=null==d?void 0:d.getIsFiltered();return(null==d?void 0:d.getCanFilter())?(0,s.jsx)(a.AMh,{trigger:(0,s.jsx)(a.$nd,{variant:"ghost",size:"none",icon:u?"contrast":"verySubtle",children:(0,s.jsx)(n.uG0,{})}),rootProps:{open:c,onOpenChange:o},contentProps:{align:"end",className:"w-64"},children:(0,s.jsxs)("div",{className:"p-3 space-y-3",children:[r,u&&(0,s.jsx)(a.$nd,{variant:"ghost",size:"small",onClick:()=>{d.setFilterValue(void 0),o(!1)},className:"w-full",children:"Clear Filter"})]})}):null}var c=t(89964);function o(e){var l;let{columnId:t,table:i}=e,r=i.getColumn(t),o=null==r?void 0:r.getIsSorted(),d=null==r?void 0:r.columnDef,u=null==d?void 0:d.sortKey,x=i.getState().sorting,m=null!=(l=null==r?void 0:r.getSortIndex())?l:-1,h=x.length>1;if(!u)return null;let j=e=>{e.stopPropagation(),"asc"===o?null==r||r.toggleSorting(!0,!0):"desc"===o||x.length>0&&e.shiftKey?null==r||r.toggleSorting(!1,!0):null==r||r.toggleSorting(!1,!1)};return(0,s.jsxs)("div",{className:"flex items-center gap-0.5 group",children:[o?(0,s.jsx)(a.m_M,{content:"Remove this sort",side:"bottom",delayDuration:1200,children:(0,s.jsx)(a.$nd,{size:"none",onClick:e=>{e.stopPropagation(),null==r||r.clearSorting()},className:"p-1 text-xxs",children:h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-2.5 h-2.5 flex items-center justify-center group-hover:hidden",children:m>=0?m+1:null}),(0,s.jsx)(n.sn9,{className:"w-2.5 h-2.5 hidden group-hover:block"})]}):(0,s.jsx)(n.sn9,{className:"w-2.5 h-2.5"})})}):null,!o&&x.length>0?(0,s.jsx)(a.m_M,{content:"Shift click to apply additional sort",side:"bottom",children:(0,s.jsx)(a.$nd,{variant:"ghost",size:"none",icon:"verySubtle",onClick:j,className:"shrink-0",children:(0,s.jsx)(c.y,{direction:!1})})}):(0,s.jsx)(a.$nd,{variant:"ghost",size:"none",icon:o?"contrast":"verySubtle",onClick:j,className:"shrink-0",children:(0,s.jsx)(c.y,{direction:"asc"===o?"asc":"desc"===o&&"desc"})})]})}function d(e){var l;let{children:t,table:n,column:i,filter:c,className:d}=e,u=!!(null==i||null==(l=i.columnDef)?void 0:l.sortKey);return(0,s.jsxs)("div",{className:(0,a.cn)("flex items-center gap-1 justify-end min-w-0",d),children:[(0,s.jsx)(a.EYj,{className:"truncate",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 shrink-0",children:[n&&i&&c&&(0,s.jsx)(r,{columnId:i.id,table:n,children:c}),n&&i&&u&&(0,s.jsx)(o,{columnId:i.id,table:n})]})]})}},24722:(e,l,t)=>{"use strict";t.d(l,{d:()=>c});var s=t(54568),a=t(2720),n=t(61242),i=t(48432),r=t(50257);function c(){let e=(0,n.bv)(),l=(0,a.mpY)({contracts:e},e=>({...e.contracts}));return(0,s.jsx)(a.BQi,{data:l,error:(0,s.jsx)(a.qq6,{message:"Error loading metrics. Please try again later."}),loading:(0,s.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,s.jsx)(r.B,{label:"Contracts",value:(0,s.jsx)(a.EAD,{className:"h-12 w-[150px]"})}),(0,s.jsx)(r.B,{label:"Bad Contracts",value:(0,s.jsx)(a.EAD,{className:"h-12 w-[150px]"})}),(0,s.jsx)(r.B,{label:"Renewing Contracts",value:(0,s.jsx)(a.EAD,{className:"h-12 w-[150px]"})}),(0,s.jsx)(r.B,{label:"Total Capacity",value:(0,s.jsx)(a.EAD,{className:"h-12 w-[150px]"})}),(0,s.jsx)(r.B,{label:"Total Size",value:(0,s.jsx)(a.EAD,{className:"h-12 w-[150px]"})})]}),notFound:(0,s.jsx)(a.QOE,{message:"No metrics found."}),loaded:e=>(0,s.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,s.jsx)(r.B,{label:"Contracts",value:e.contracts.toLocaleString()}),(0,s.jsx)(r.B,{label:"Bad Contracts",value:e.badContracts.toLocaleString()}),(0,s.jsx)(r.B,{label:"Renewing Contracts",value:e.renewing.toLocaleString()}),(0,s.jsx)(r.B,{label:"Total Capacity",value:(0,i.p6)(e.totalCapacity)}),(0,s.jsx)(r.B,{label:"Total Size",value:(0,i.p6)(e.totalSize)})]})})}},37968:(e,l,t)=>{"use strict";t.d(l,{w:()=>i});var s=t(54568),a=t(2720),n=t(79423);function i(e){let{customCloseAction:l,actions:t,onClose:i,children:r,heading:c,onSubmit:o}=e;return(0,s.jsx)(a.Zkm,{className:"relative h-full w-full",children:(0,s.jsxs)(o?"form":"div",{className:"relative h-full w-full overflow-hidden flex flex-col",onSubmit:o,children:[(0,s.jsxs)("div",{className:"h-[45px] z-10 flex items-center justify-between gap-2 bg-white dark:bg-graydark-200 py-2 px-2 border-b border-gray-200 dark:border-graydark-400",children:[c,l||(i?(0,s.jsx)(a.$nd,{className:"p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-blue-500 z-10",onClick:i,"aria-label":"Close drawer",variant:"ghost",icon:"hover",size:"none",children:(0,s.jsx)(n.sn9,{className:"w-5 h-5 text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100"})}):null)]}),t&&(0,s.jsx)("div",{className:"z-10 flex items-center justify-end gap-1 bg-white dark:bg-graydark-200 py-2 px-2 border-b border-gray-200 dark:border-graydark-400",children:t}),(0,s.jsx)(a.FKN,{className:"flex-1",children:(0,s.jsx)("div",{className:"p-4",children:r})})]})})}},45711:(e,l,t)=>{"use strict";t.d(l,{Wd:()=>o,fz:()=>r});var s=t(54568),a=t(2720),n=t(79423),i=t(7620);function r(e){let{usable:l,usability:t,className:n,showExpanded:r=!1}=e,o=(0,i.useMemo)(()=>t&&Object.keys(t).filter(e=>!t[e]).map(e=>(0,s.jsx)(c,{status:"unusable",name:d(e)},e)),[t]),u=(0,i.useMemo)(()=>t&&Object.keys(t).filter(e=>t[e]).map(e=>(0,s.jsx)(c,{status:"usable",name:d(e)},e)),[t]);return(0,s.jsx)("div",{className:(0,a.cn)("flex gap-1",n),children:l&&!r?(0,s.jsx)(c,{status:"usable",name:"usable"}):(0,s.jsxs)(s.Fragment,{children:[o,u]})})}function c(e){let{status:l,name:t}=e;return(0,s.jsxs)(a.Exy,{size:"small",className:"flex items-center gap-0.5",children:[(0,s.jsx)(o,{status:l,name:t}),t]})}function o(e){let{status:l,name:t}=e,r=(0,i.useMemo)(()=>({usable:"".concat(t," is usable"),warning:"".concat(t," is almost unusable"),unusable:"".concat(t," is unusable")}),[t]);return(0,s.jsx)(a.m_M,{content:r[l],children:"usable"===l?(0,s.jsx)(n.d5v,{className:"text-green-600 scale-75"}):"warning"===l?(0,s.jsx)(n.UvW,{className:"text-amber-600 scale-75"}):(0,s.jsx)(n.mC5,{className:"text-red-600 scale-75"})})}function d(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}},50257:(e,l,t)=>{"use strict";t.d(l,{B:()=>n});var s=t(54568),a=t(2720);function n(e){let{label:l,value:t,variant:n="row"}=e;return"column"===n?(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(a.EYj,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:l}),(0,s.jsx)(a.EYj,{color:"contrast",children:t})]}):(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,s.jsx)(a.EYj,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:l})}),(0,s.jsx)("div",{className:"flex-1 flex justify-end items-center",children:"string"==typeof t?t?(0,s.jsx)(a.EYj,{className:"truncate",children:t}):(0,s.jsx)(a.EYj,{color:"verySubtle",children:"-"}):t||(0,s.jsx)(a.EYj,{color:"verySubtle",children:"-"})})]})}},57227:(e,l,t)=>{Promise.resolve().then(t.bind(t,57980))},57980:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>Z});var s=t(54568),a=t(2720),n=t(7620),i=t(16326),r=t(68340),c=t(71564);function o(){let e=(0,a.i$h)("contractList"),[l,t]=(0,a.QPA)("contractsPanelId");return{...e,panelId:l,setPanelId:t}}var d=t(65473);function u(){let{columnFilters:e,setColumnFilters:l}=o();return(0,s.jsx)(d.h,{id:"status",labelPositive:"Good",labelNegative:"Bad",columnFilters:e,setColumnFilters:l})}let x=[(0,r.p)(),{id:"id",sortKey:"id",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,className:"justify-start",children:"ID"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:l.original.id,type:"contract"})},meta:{className:"justify-start",...c.pC}},{id:"status",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,filter:(0,s.jsx)(u,{}),children:"Status"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(m,{variant:l.original.good?"good":"bad"})},meta:{className:"justify-end",...c.E,filterLabelPositive:"Status is good",filterLabelNegative:"Status is bad"}},{id:"state",sortKey:"state",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"State"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(h,{value:l.original.state})},meta:{className:"justify-end",...c.E}},{id:"hostPublicKey",sortKey:"hostKey",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,className:"justify-start",children:"Host Public Key"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:l.original.hostKey,type:"hostPublicKey"})},meta:{className:"justify-start",...c.pC}},{id:"formation",sortKey:"formation",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Formation"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.EYj,{children:l.original.displayFields.formation})},meta:{className:"justify-end",...c.XK}},{id:"expirationHeight",sortKey:"expirationHeight",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Expiration Height"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.EYj,{children:l.original.displayFields.expirationHeight})},meta:{className:"justify-end",...c.XK}},{id:"capacity",sortKey:"capacity",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Capacity"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.EYj,{children:l.original.displayFields.capacity})},meta:{className:"justify-end",...c.E}},{id:"dataSize",sortKey:"size",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Data Size"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.EYj,{children:l.original.displayFields.dataSize})},meta:{className:"justify-end",...c.E}},{id:"initialAllowance",sortKey:"initialAllowance",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Initial Allowance"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.Pni,{...l.original.displayFields.initialAllowance})},meta:{className:"justify-end",...c.E}},{id:"remainingAllowance",sortKey:"remainingAllowance",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Remaining Allowance"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.Pni,{...l.original.displayFields.remainingAllowance})},meta:{className:"justify-end",...c.E}},{id:"totalCollateral",sortKey:"totalCollateral",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Total Collateral"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.Pni,{...l.original.displayFields.totalCollateral})},meta:{className:"justify-end",...c.E}},{id:"usedCollateral",sortKey:"usedCollateral",header:e=>{let{table:l,column:t}=e;return(0,s.jsx)(i.A,{table:l,column:t,children:"Used Collateral"})},cell:e=>{let{row:l}=e;return(0,s.jsx)(a.Pni,{...l.original.displayFields.usedCollateral})},meta:{className:"justify-end",...c.E}}];function m(e){let{variant:l}=e;return(0,s.jsx)(a.Exy,{size:"small",variant:"good"===l?"green":"red",children:"good"===l?"Good":"Bad"})}function h(e){let{value:l}=e,t="gray";return"active"===l?t="amber":"failed"===l?t="red":"complete"===l&&(t="gray"),(0,s.jsx)(a.Exy,{size:"small",variant:t,children:l})}var j=t(45711),g=t(50257),p=t(37968),v=t(92517),f=t(61242),y=t(84684),b=t(43416),w=t(48432);function N(e){var l,t,s;let{contract:n,exchange:i,currencyDisplay:r}=e;return{...n,id:n.id,exchange:i,displayFields:(l=n,t=r,s=i,{contractPrice:(0,a.vty)({sc:new b.g(l.contractPrice),currencyDisplay:t,exchange:s}),minerFee:(0,a.vty)({sc:new b.g(l.minerFee),currencyDisplay:t,exchange:s}),usedCollateral:(0,a.vty)({sc:new b.g(l.usedCollateral),currencyDisplay:t,exchange:s}),initialAllowance:(0,a.vty)({sc:new b.g(l.initialAllowance),currencyDisplay:t,exchange:s}),remainingAllowance:(0,a.vty)({sc:new b.g(l.remainingAllowance),currencyDisplay:t,exchange:s}),totalCollateral:(0,a.vty)({sc:new b.g(l.totalCollateral),currencyDisplay:t,exchange:s}),spendSectorRoots:(0,a.vty)({sc:new b.g(l.spending.sectorRoots),currencyDisplay:t,exchange:s}),spendAppendSector:(0,a.vty)({sc:new b.g(l.spending.appendSector),currencyDisplay:t,exchange:s}),spendFreeSector:(0,a.vty)({sc:new b.g(l.spending.freeSector),currencyDisplay:t,exchange:s}),spendFundAccount:(0,a.vty)({sc:new b.g(l.spending.fundAccount),currencyDisplay:t,exchange:s}),formation:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.formation)),proofHeight:l.proofHeight.toLocaleString(),expirationHeight:l.expirationHeight.toLocaleString(),nextPrune:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.nextPrune)),lastBroadcastAttempt:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.lastBroadcastAttempt)),capacity:(0,w.p6)(l.capacity),dataSize:(0,w.p6)(l.size),renewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedFrom?null:l.renewedFrom,renewedTo:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedTo?null:l.renewedTo,revisionNumber:l.revisionNumber.toLocaleString()})}}var S=t(80870),C=t(78633),F=t(79513);function A(){var e;let{panelId:l,setPanelId:t}=o(),i=function(e){var l;let t=(0,f.Lx)({disabled:!e,params:{contractid:e||""}}),s=null==(l=t.data)?void 0:l.hostKey,n=(0,S.K)(s),i=(0,a.sAn)(),{settings:r}=(0,y.IQ)();return(0,a.mpY)({contract:t,host:n},e=>{let{contract:l,host:t}=e;return function(e){let{contract:l,host:t,exchangeRate:s,currencyDisplay:a}=e;return{contract:N({contract:l,currencyDisplay:a,exchange:s.currency&&s.rate&&{currency:s.currency,rate:s.rate}}),host:t}}({contract:l,host:t,exchangeRate:i,currencyDisplay:r.currencyDisplay})})}(l),r=(0,S.K)(null==(e=i.data)?void 0:e.contract.hostKey),c=(0,n.useMemo)(()=>{var e,l;return(null==(e=i.data)?void 0:e.contract)?{id:i.data.contract.hostKey,publicKey:i.data.contract.hostKey,location:null==(l=r.data)?void 0:l.location,usable:i.data.contract.good}:null},[i,r]);return i?(0,s.jsx)(a.BQi,{data:i,loading:(0,s.jsx)(F.P,{withMap:!0,withActions:!1,onClose:()=>t(void 0)}),notFound:(0,s.jsx)(p.w,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Contract not found"})})}),loaded:e=>{var l;let{contract:n,host:i}=e;return(0,s.jsxs)(p.w,{onClose:()=>t(void 0),heading:(0,s.jsx)(C.R,{heading:"Contract",value:null==n?void 0:n.id,label:"contract"}),children:[(0,s.jsx)(a.hz$,{hosts:c?[c]:[],activeHost:c,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"}),(0,s.jsx)(v.V,{heading:"Info",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(g.B,{label:"State",value:(0,s.jsx)(h,{value:n.state})}),(0,s.jsx)(g.B,{label:"Status",value:(0,s.jsx)(m,{variant:n.good?"good":"bad"})}),(0,s.jsx)(g.B,{label:"Host Country",value:"unknown"===i.location.countryCode?null:"".concat((0,w.y$)(i.location.countryCode)," ").concat(i.location.countryCode)}),(0,s.jsx)(g.B,{label:"Host public key",value:(0,s.jsx)(a.Zjd,{value:n.hostKey,type:"hostPublicKey"})}),null==(l=i.addresses)?void 0:l.map(e=>(0,s.jsx)(g.B,{label:e.protocol,value:(0,s.jsx)(a.Zjd,{value:e.address,maxLength:24})},e.address+e.protocol))]})}),(0,s.jsx)(v.V,{heading:"Usability",children:(0,s.jsx)(j.fz,{usable:(null==i?void 0:i.usable)||!1,usability:null==i?void 0:i.usability,className:"w-full overflow-hidden flex-wrap"})}),(0,s.jsx)(v.V,{heading:"Storage",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(g.B,{label:"Capacity",value:n.displayFields.capacity}),(0,s.jsx)(g.B,{label:"Data Size",value:n.displayFields.dataSize})]})}),(0,s.jsx)(v.V,{heading:"Allowance",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(g.B,{label:"Initial Allowance",value:(0,s.jsx)(a.Pni,{...n.displayFields.initialAllowance})}),(0,s.jsx)(g.B,{label:"Remaining Allowance",value:(0,s.jsx)(a.Pni,{...n.displayFields.remainingAllowance})})]})}),(0,s.jsx)(v.V,{heading:"Collateral",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(g.B,{label:"Total Collateral",value:(0,s.jsx)(a.Pni,{...n.displayFields.totalCollateral})}),(0,s.jsx)(g.B,{label:"Used Collateral",value:(0,s.jsx)(a.Pni,{...n.displayFields.usedCollateral})})]})}),(0,s.jsx)(v.V,{heading:"Lifecycle",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(g.B,{label:"Formation",value:n.displayFields.formation}),(0,s.jsx)(g.B,{label:"Expiration Height",value:n.displayFields.expirationHeight}),(0,s.jsx)(g.B,{label:"Proof Height",value:n.displayFields.proofHeight}),(0,s.jsx)(g.B,{label:"Next Prune",value:n.displayFields.nextPrune}),(0,s.jsx)(g.B,{label:"Last Broadcast Attempt",value:n.displayFields.lastBroadcastAttempt}),(0,s.jsx)(g.B,{label:"Renewed From",value:n.displayFields.renewedFrom&&(0,s.jsx)(a.Zjd,{value:n.displayFields.renewedFrom,type:"contract"})}),(0,s.jsx)(g.B,{label:"Renewed To",value:n.displayFields.renewedTo&&(0,s.jsx)(a.Zjd,{value:n.displayFields.renewedTo,type:"contract"})}),(0,s.jsx)(g.B,{label:"Revision Number",value:n.displayFields.revisionNumber})]})}),(0,s.jsx)(v.V,{heading:"Spending",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(g.B,{label:"Contract Price",value:(0,s.jsx)(a.Pni,{...n.displayFields.contractPrice})}),(0,s.jsx)(g.B,{label:"Miner Fee",value:(0,s.jsx)(a.Pni,{...n.displayFields.minerFee})}),(0,s.jsx)(g.B,{label:"Spend Sector Roots",value:(0,s.jsx)(a.Pni,{...n.displayFields.spendSectorRoots})}),(0,s.jsx)(g.B,{label:"Spend Append Sector",value:(0,s.jsx)(a.Pni,{...n.displayFields.spendAppendSector})}),(0,s.jsx)(g.B,{label:"Spend Free Sector",value:(0,s.jsx)(a.Pni,{...n.displayFields.spendFreeSector})}),(0,s.jsx)(g.B,{label:"Spend Fund Account",value:(0,s.jsx)(a.Pni,{...n.displayFields.spendFundAccount})})]})})]})}}):(0,s.jsx)(p.w,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Contract not found"})})})}var P=t(24722);function E(e){let{table:l}=e,t=(0,n.useMemo)(()=>l.isSelection?l.selectedRows:l.rows,[l.isSelection,l.selectedRows,l.rows]);return(0,s.jsx)(p.w,{heading:(0,s.jsx)(a.EYj,{size:"18",weight:"medium",children:l.isSelection?"Selected contracts (".concat(t.length,")"):l.isFiltered?"Filtered contracts (".concat(t.length,")"):"All contracts"}),customCloseAction:l.isSelection?(0,s.jsx)(a.$nd,{onClick:()=>l.setRowSelection({}),children:"Clear selection"}):null,children:!l.isFiltered&&!l.isSelection&&(0,s.jsx)(P.d,{})})}var k=t(81477),B=t(45614);function z(e){return"status"===e.id?e.value?"Status is good":"Status is bad":"revisable"===e.id?e.value?"Revisable":"Not revisable":""}let D={namespace:"contracts/filterStatus",label:"Contracts filter by status"},K=[{id:"status",value:!0},{id:"status",value:!1}];function I(e){let{select:l,currentPage:t}=e;return(0,s.jsx)(B.L$,{currentPage:t,commandPage:D,children:K.map(e=>(0,s.jsx)(B.n7,{currentPage:t,commandPage:D,onSelect:()=>{l(e)},children:z(e)},e.id+e.value))})}function L(e){let{currentPage:l,select:t}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(I,{currentPage:l,select:t})})}let Y={namespace:"contracts",label:"Contracts"};function R(e){let{currentPage:l,parentPage:t,pushPage:a}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(B.Iu,{currentPage:l,parentPage:t,commandPage:Y,onSelect:()=>{a(D)},children:D.label})})}function H(e){let{currentPage:l,parentPage:t,pushPage:a,beforeSelect:i,afterSelect:r}=e,{addColumnFilter:c}=o(),d=(0,n.useCallback)(e=>{i&&i(),c(e),r&&r()},[c,i,r]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R,{parentPage:t,currentPage:l,pushPage:a,select:d}),(0,s.jsx)(L,{currentPage:l,select:d})]})}var $=t(86151);function M(){let{columnFilters:e,removeColumnFilter:l,removeLastColumnFilter:t}=o();return(0,s.jsx)($.W,{name:"contracts",columnFilters:e,removeColumnFilter:l,removeLastColumnFilter:t,getFilterLabel:z,children:e=>{let{currentPage:l,beforeSelect:t,afterSelect:a,pushPage:n}=e;return(0,s.jsx)(H,{currentPage:l,beforeSelect:t,afterSelect:a,pushPage:n})}})}var T=t(14778);function V(){let{offset:e,limit:l,setOffset:t,setLimit:i,panelId:r,setPanelId:c,columnFilters:d,setColumnFilters:u,columnSorts:m,setColumnSorts:h}=o(),j=(0,n.useCallback)(e=>{c(e)},[c]),g=function(){let{columnFilters:e,columnSorts:l,offset:t,limit:s}=o(),i=(0,n.useMemo)(()=>{var a,n,i;let r={offset:t,limit:s},c=null==(a=e.find(e=>"status"===e.id))?void 0:a.value;void 0!==c&&(r.good=c);let o=null==(n=e.find(e=>"revisable"===e.id))?void 0:n.value;if(void 0!==o&&(r.revisable=o),l.length>0){let e=[],t=[];for(let s of l){let l=x.find(e=>e.id===s.id),a=null==l?void 0:l.sortKey;void 0!==a&&(e.push(a),t.push(null!=(i=s.desc)&&i))}e.length>0&&(r.sortby=e,r.desc=t)}return r},[e,l,t,s]),r=(0,f.Kd)({params:i}),c=(0,a.sAn)(),{settings:d}=(0,y.IQ)();return(0,a.sEt)({contracts:r},e=>{let{contracts:l}=e;return l.map(e=>N({contract:e,currencyDisplay:d.currencyDisplay,exchange:c.currency&&c.rate&&{currency:c.currency,rate:c.rate}}))},{offset:t,filters:e})}(),p=(0,a.uIQ)({dataset:g,columns:x,columnFilters:d,columnSorts:m,setColumnFilters:u,setColumnSorts:h,enableMultiSort:!0,offset:e,limit:l,onRowClick:j,setOffset:t,setLimit:i});return(0,s.jsx)(k.P,{table:(0,s.jsx)(a.bQt,{...p,localStorage:"indexd/contracts",header:(0,s.jsx)(M,{}),actions:(0,s.jsx)(T.i,{table:p.table,columns:x}),noneOnPage:(0,s.jsx)(a.GB$,{message:"No contracts on this page, reset pagination to continue."}),noneYet:(0,s.jsx)(a.QOE,{message:"There are no contracts yet."}),noneMatchingFilters:(0,s.jsx)(a.hpd,{message:"No contracts matching filters."}),error:(0,s.jsx)(a.qq6,{message:"Error loading contracts. Please try again later."})}),panel:r?(0,s.jsx)(A,{}):(0,s.jsx)(E,{table:p})})}function Z(){return(0,s.jsx)(V,{})}},65473:(e,l,t)=>{"use strict";t.d(l,{h:()=>n});var s=t(54568),a=t(2720);function n(e){var l,t;let{table:n,id:i,labelPositive:r,labelNegative:c,columnFilters:o,setColumnFilters:d}=e,u=null==n||null==(l=n.getColumn(i))?void 0:l.columnDef.meta,x=r||(null==u?void 0:u.filterLabelPositive)||"Yes",m=c||(null==u?void 0:u.filterLabelNegative)||"No",h=null==(t=o.find(e=>e.id===i))?void 0:t.value;return(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)(a.l6P,{"aria-label":"".concat(i," filter"),value:void 0===h?"":String(h),onChange:e=>{if(""===e.target.value)return void d(e=>e.filter(e=>e.id!==i));let l="true"===e.target.value;d(e=>{let t=e.findIndex(e=>e.id===i);return -1!==t?e[t].value=l:e.push({id:i,value:l}),e})},children:[{value:"",label:"All"},{value:"true",label:x},{value:"false",label:m}].map(e=>(0,s.jsx)("option",{value:String(e.value),children:e.label},e.label))})})}},68340:(e,l,t)=>{"use strict";t.d(l,{p:()=>n});var s=t(54568),a=t(2720);let n=()=>({id:"select",header:e=>{let{table:l}=e;return(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"h-full flex items-center justify-start",children:(0,s.jsx)(a.Sc0,{checked:!!l.getIsAllRowsSelected()||!!l.getIsSomeRowsSelected()&&"indeterminate",onCheckedChange:e=>{l.getToggleAllRowsSelectedHandler()({target:{checked:!0===e}})}})})},cell:e=>{let{row:l}=e;return(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"flex items-center justify-center",children:(0,s.jsx)(a.Sc0,{checked:l.getIsSelected(),disabled:!l.getCanSelect(),onCheckedChange:e=>{l.getToggleSelectedHandler()({target:{checked:!0===e}})}})})},meta:{stopPropagation:!0,width:35}})},71564:(e,l,t)=>{"use strict";t.d(l,{E:()=>s,RQ:()=>r,XK:()=>a,pC:()=>i,xl:()=>n});let s={width:100},a={width:200},n={width:200},i={width:140},r={width:140}},78633:(e,l,t)=>{"use strict";t.d(l,{R:()=>n});var s=t(54568),a=t(2720);function n(e){let{heading:l,label:t,value:n}=e;return(0,s.jsxs)("div",{className:"flex items-center gap-1 overflow-hidden",children:[(0,s.jsx)("div",{className:"flex-none flex items-center gap-1",children:"string"==typeof l?(0,s.jsx)(a.EYj,{size:"18",weight:"medium",ellipsis:!0,children:l}):l}),(0,s.jsx)(a.Zjd,{fitWidth:!0,size:"18",weight:"medium",maxLength:200,value:n,label:t})]})}},79513:(e,l,t)=>{"use strict";t.d(l,{P:()=>r});var s=t(54568),a=t(2720),n=t(37968),i=t(92517);function r(e){let{withMap:l,withActions:t,onClose:r}=e;return(0,s.jsxs)(n.w,{onClose:r,heading:(0,s.jsxs)("div",{className:"flex items-center gap-3 w-full",children:[(0,s.jsx)(a.EAD,{className:"h-5 w-[70%]"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(a.EAD,{className:"h-5 w-5 rounded"})]}),actions:t?(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(a.EAD,{className:"h-4 w-24"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(a.EAD,{className:"h-7 w-8 rounded"}),(0,s.jsx)(a.EAD,{className:"h-7 w-8 rounded"}),(0,s.jsx)(a.EAD,{className:"h-7 w-20 rounded"})]})]}):null,children:[l&&(0,s.jsx)(a.hz$,{hosts:[],activeHost:null,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"}),(0,s.jsx)(i.V,{heading:(0,s.jsx)("div",{className:"flex items-center gap-2 py-1",children:(0,s.jsx)(a.EAD,{className:"h-5 w-12"})}),children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)("div",{className:"hidden"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.EAD,{className:"h-4 w-24"}),(0,s.jsx)(a.EAD,{className:"h-9 w-full"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.EAD,{className:"h-4 w-28"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(a.EAD,{className:"h-9 w-full"}),(0,s.jsx)(a.EAD,{className:"h-5 w-10"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(a.EAD,{className:"h-4 w-28"}),(0,s.jsx)(a.EAD,{className:"h-9 w-full"})]}),(0,s.jsx)("div",{className:"mt-2 flex flex-col gap-3",children:[0,1,2,3].map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(a.EAD,{className:"h-4 w-28"}),(0,s.jsx)(a.EAD,{className:"h-4 w-36"})]},e))})]})})]})}},80870:(e,l,t)=>{"use strict";t.d(l,{K:()=>r});var s=t(2720),a=t(61242),n=t(97944),i=t(84684);function r(e){let l=(0,a.qA)({disabled:!e,params:{hostkey:e||""}}),t=(0,s.sAn)(),{settings:r}=(0,i.IQ)();return(0,s.mpY)({host:l},e=>{let{host:l}=e;return function(e){let{host:l,exchangeRate:t,settings:s}=e;return(0,n.d)({host:l,currencyDisplay:s.currencyDisplay,exchange:t.currency&&t.rate&&{currency:t.currency,rate:t.rate}})}({host:l,exchangeRate:t,settings:r})})}},81477:(e,l,t)=>{"use strict";t.d(l,{P:()=>n});var s=t(54568),a=t(53995);function n(e){let{table:l,panel:t}=e;return(0,s.jsx)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:(0,s.jsxs)(a.YZ,{autoSaveId:"data-layout",direction:"horizontal",children:[(0,s.jsx)(a.Zk,{maxSize:75,className:"py-4 pl-4 pr-2",children:l}),(0,s.jsx)(a.TW,{}),(0,s.jsx)(a.Zk,{defaultSize:25,minSize:25,maxSize:50,className:"py-4 pl-2 pr-4",children:t})]})})}},86151:(e,l,t)=>{"use strict";t.d(l,{W:()=>o});var s=t(54568),a=t(2720),n=t(79423),i=t(71893),r=t(7620),c=t(23051);function o(e){let{name:l,columnFilters:t,removeColumnFilter:o,removeLastColumnFilter:d,getFilterLabel:u,children:x}=e,[m,h]=(0,r.useState)(!1),[j,g]=(0,r.useState)(""),[p,v]=(0,r.useState)([]),f=p[p.length-1],y=(0,r.useRef)(null),b=(0,r.useRef)(null),w=(0,r.useCallback)(e=>{v(l=>[...l,e])},[v]),N=(0,r.useCallback)(()=>{v([])},[v]);(0,r.useEffect)(()=>{let e=e=>{y.current&&!y.current.contains(e.target)&&h(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let S=(0,r.useCallback)(()=>{var e;null==(e=b.current)||e.focus()},[b]),C=(0,r.useCallback)(()=>{g(""),N()},[N]),{dialog:F}=(0,c.sp)();return(0,r.useEffect)(()=>{F&&h(!1)},[F]),(0,s.jsxs)("div",{className:"flex gap-1",children:[t.map(e=>(0,s.jsxs)(a.tWD,{children:[(0,s.jsx)(a.$nd,{variant:"active",state:"waiting",children:u(e)}),(0,s.jsx)(a.$nd,{variant:"active",size:"small",onClick:()=>o(e.id),children:(0,s.jsx)(n.sn9,{})})]},e.id)),(0,s.jsxs)(i.uB,{ref:y,label:"Command Menu",onFocus:()=>h(!0),onKeyDown:e=>{if(p.length>0)"Escape"!==e.key&&("Backspace"!==e.key||j)||(e.preventDefault(),v(e=>e.slice(0,-1)));else if(0===p.length&&("Backspace"!==e.key||j||d(),"Escape"===e.key&&!j)){var l;h(!1),null==(l=b.current)||l.blur()}},children:[(0,s.jsx)(i.uB.Input,{"aria-label":"filter ".concat(l),name:"filter-".concat(l,"-menu-input"),ref:b,value:j,onValueChange:g,className:(0,a.uS8)({variant:"ghost",focus:"none"}),placeholder:"Filter ".concat(l)}),m&&(0,s.jsx)(a.Zkm,{className:"absolute z-10 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,s.jsxs)(a.FKN,{children:[f&&(0,s.jsx)(a.JU7,{className:"px-1.5 py-1",children:f.label}),(0,s.jsx)(i.uB.List,{children:x({currentPage:f,beforeSelect:S,afterSelect:C,pushPage:w})})]})})]})]})}},89964:(e,l,t)=>{"use strict";t.d(l,{y:()=>n});var s=t(54568),a=t(79423);function n(e){let{direction:l}=e;return"asc"===l?(0,s.jsxs)("div",{className:"relative w-4 h-4",children:[(0,s.jsx)(a.cgo,{className:"absolute inset-0"}),(0,s.jsx)(a.zYC,{className:"absolute inset-0 opacity-30"})]}):"desc"===l?(0,s.jsxs)("div",{className:"relative w-4 h-4",children:[(0,s.jsx)(a.cgo,{className:"absolute inset-0 opacity-30"}),(0,s.jsx)(a.zYC,{className:"absolute inset-0"})]}):(0,s.jsx)(a.nIb,{})}},92517:(e,l,t)=>{"use strict";t.d(l,{V:()=>n});var s=t(54568),a=t(2720);function n(e){let{heading:l,children:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.wvv,{className:"first-of-type:hidden mt-4 mb-2"}),"string"==typeof l?(0,s.jsx)(a.EYj,{size:"16",weight:"medium",className:"mb-2",children:l}):l,t]})}},97944:(e,l,t)=>{"use strict";t.d(l,{d:()=>i});var s=t(43416),a=t(48432),n=t(2720);function i(e){let{host:l,currencyDisplay:t,exchange:i}=e,r={countryCode:l.countryCode,latitude:l.latitude,longitude:l.longitude};return{...l,id:l.publicKey,usable:Object.values(l.usability).every(e=>e),location:r,exchange:i,displayFields:function(e,l,t,i){var r;let c=(0,a.g9)(e.settings.remainingStorage),o=(0,a._S)(10),d=c.eq(0)?"unusable":c.lt(o)?"warning":"usable";return{uptime:"".concat((100*e.recentUptime).toFixed(1),"%"),totalStorage:(0,a.p6)((0,a.g9)(e.settings.totalStorage)),remainingStorage:(0,a.p6)(c),remainingStorageUsability:d,storagePrice:(0,n.vty)({sc:(0,a.Ri)({price:e.settings.prices.storagePrice}),currencyDisplay:t,exchange:i}),ingressPrice:(0,n.vty)({sc:(0,a.gW)({price:e.settings.prices.ingressPrice}),currencyDisplay:t,exchange:i}),egressPrice:(0,n.vty)({sc:(0,a.LT)({price:e.settings.prices.egressPrice}),currencyDisplay:t,exchange:i}),freeSectorPrice:(0,n.vty)({sc:new s.g(e.settings.prices.freeSectorPrice),currencyDisplay:t,exchange:i}),maxCollateral:(0,n.vty)({sc:new s.g(e.settings.prices.collateral),currencyDisplay:t,exchange:i}),maxContractDuration:"".concat((0,a.bu)(e.settings.maxContractDuration).toFixed(1)," weeks"),protocolVersion:"string"==typeof(r=e.settings).protocolVersion?r.protocolVersion.slice(1):"v".concat(r.protocolVersion[0],".").concat(r.protocolVersion[1],".").concat(r.protocolVersion[2]),priceValidity:new Date(e.settings.prices.validUntil).toLocaleString(),release:e.settings.release,countryName:(0,a.qQ)(null==l?void 0:l.countryCode),countryFlag:(0,a.y$)(null==l?void 0:l.countryCode)}}(l,r,t,i)}}}},e=>{e.O(0,[9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,1144,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,6322,2179,3995,2720,3051,587,18,7358],()=>e(e.s=57227)),_N_E=e.O()}]);