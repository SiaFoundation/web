(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5054],{24722:(e,t,l)=>{"use strict";l.d(t,{d:()=>o});var a=l(54568),n=l(2720),r=l(61242),s=l(48432),i=l(50257);function o(){let e=(0,r.bv)(),t=(0,n.mpY)({contracts:e},e=>({...e.contracts}));return(0,a.jsx)(n.BQi,{data:t,error:(0,a.jsx)(n.qq6,{message:"Error loading metrics. Please try again later."}),loading:(0,a.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,a.jsx)(i.B,{label:"Contracts",value:(0,a.jsx)(n.EAD,{className:"h-12 w-[150px]"})}),(0,a.jsx)(i.B,{label:"Bad Contracts",value:(0,a.jsx)(n.EAD,{className:"h-12 w-[150px]"})}),(0,a.jsx)(i.B,{label:"Renewing Contracts",value:(0,a.jsx)(n.EAD,{className:"h-12 w-[150px]"})}),(0,a.jsx)(i.B,{label:"Total Capacity",value:(0,a.jsx)(n.EAD,{className:"h-12 w-[150px]"})}),(0,a.jsx)(i.B,{label:"Total Size",value:(0,a.jsx)(n.EAD,{className:"h-12 w-[150px]"})})]}),notFound:(0,a.jsx)(n.QOE,{message:"No metrics found."}),loaded:e=>(0,a.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,a.jsx)(i.B,{label:"Contracts",value:e.contracts.toLocaleString()}),(0,a.jsx)(i.B,{label:"Bad Contracts",value:e.badContracts.toLocaleString()}),(0,a.jsx)(i.B,{label:"Renewing Contracts",value:e.renewing.toLocaleString()}),(0,a.jsx)(i.B,{label:"Total Capacity",value:(0,s.p6)(e.totalCapacity)}),(0,a.jsx)(i.B,{label:"Total Size",value:(0,s.p6)(e.totalSize)})]})})}},57227:(e,t,l)=>{Promise.resolve().then(l.bind(l,57980))},57980:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>_});var a=l(54568),n=l(2720),r=l(7620),s=l(16326),i=l(68340),o=l(71564);function c(){let e=(0,n.i$h)("contractList"),[t,l]=(0,n.QPA)("contractsPanelId");return{...e,panelId:t,setPanelId:l}}var d=l(65473);function u(){let{columnFilters:e,setColumnFilters:t}=c();return(0,a.jsx)(d.h,{id:"status",labelPositive:"Good",labelNegative:"Bad",columnFilters:e,setColumnFilters:t})}let m=[(0,i.p)(),{id:"id",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,className:"justify-start",children:"ID"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Zjd,{maxLength:100,value:t.original.id,type:"contract"})},meta:{className:"justify-start",...o.pC}},{id:"status",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,filter:(0,a.jsx)(u,{}),children:"Status"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(j,{variant:t.original.good?"good":"bad"})},meta:{className:"justify-end",...o.E,filterLabelPositive:"Status is good",filterLabelNegative:"Status is bad"}},{id:"state",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"State"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(x,{value:t.original.state})},meta:{className:"justify-end",...o.E}},{id:"hostPublicKey",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,className:"justify-start",children:"Host Public Key"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Zjd,{maxLength:100,value:t.original.hostKey,type:"hostPublicKey"})},meta:{className:"justify-start",...o.pC}},{id:"location",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Host Location"})},cell:e=>{var t,l,r;let{row:s}=e;return(null==(l=s.original.host)||null==(t=l.location)?void 0:t.countryCode)==="unknown"?(0,a.jsx)("div",{className:"py-1",children:(0,a.jsx)(n.EYj,{color:"verySubtle",children:"-"})}):(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{role:"img","aria-label":s.original.displayFields.countryName,children:s.original.displayFields.countryFlag}),(0,a.jsx)(n.EYj,{children:null==(r=s.original.host)?void 0:r.location.countryCode})]})},meta:{className:"justify-end",...o.E}},{id:"formation",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Formation"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.formation})},meta:{className:"justify-end",...o.XK}},{id:"proofHeight",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Proof Height"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.proofHeight})},meta:{className:"justify-end",...o.E}},{id:"expirationHeight",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Expiration Height"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.expirationHeight})},meta:{className:"justify-end",...o.XK}},{id:"nextPrune",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Next Prune"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.nextPrune})},meta:{className:"justify-end",...o.XK}},{id:"lastBroadcastAttempt",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Last Broadcast Attempt"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.lastBroadcastAttempt})},meta:{className:"justify-end",...o.XK}},{id:"capacity",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Capacity"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.capacity})},meta:{className:"justify-end",...o.E}},{id:"dataSize",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Data Size"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.dataSize})},meta:{className:"justify-end",...o.E}},{id:"spendingSectorRoots",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Spend Sector Roots"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.spendSectorRoots})},meta:{className:"justify-end",...o.E}},{id:"spendAppendSector",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Spend Append Sector"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.spendAppendSector})},meta:{className:"justify-end",...o.E}},{id:"spendFreeSector",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Spend Free Sector"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.spendFreeSector})},meta:{className:"justify-end",...o.E}},{id:"spendFundAccount",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Spend Fund Account"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.spendFundAccount})},meta:{className:"justify-end",...o.E}},{id:"initialAllowance",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Initial Allowance"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.initialAllowance})},meta:{className:"justify-end",...o.E}},{id:"remainingAllowance",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Remaining Allowance"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.remainingAllowance})},meta:{className:"justify-end",...o.E}},{id:"totalCollateral",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Total Collateral"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.totalCollateral})},meta:{className:"justify-end",...o.E}},{id:"usedCollateral",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Used Collateral"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.usedCollateral})},meta:{className:"justify-end",...o.E}},{id:"contractPrice",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Contract Price"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.contractPrice})},meta:{className:"justify-end",...o.E}},{id:"minerFee",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Miner Fee"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.Pni,{...t.original.displayFields.minerFee})},meta:{className:"justify-end",...o.E}},{id:"revisionNumber",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Revision Number"})},cell:e=>{let{row:t}=e;return(0,a.jsx)(n.EYj,{children:t.original.displayFields.revisionNumber})},meta:{className:"justify-end",...o.E}},{id:"renewedFrom",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Renewed From"})},cell:e=>{let{row:t}=e,l=t.original.displayFields.renewedFrom;return"-"===l?(0,a.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,a.jsx)(n.EYj,{children:l})},meta:{className:"justify-end",...o.pC}},{id:"renewedTo",header:e=>{let{table:t,column:l}=e;return(0,a.jsx)(s.A,{table:t,column:l,children:"Renewed To"})},cell:e=>{let{row:t}=e,l=t.original.displayFields.renewedTo;return"-"===l?(0,a.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,a.jsx)(n.EYj,{children:l})},meta:{className:"justify-end",...o.pC}}];function j(e){let{variant:t}=e;return(0,a.jsx)(n.Exy,{size:"small",variant:"good"===t?"green":"red",children:"good"===t?"Good":"Bad"})}function x(e){let{value:t}=e,l="gray";return"active"===t?l="amber":"failed"===t?l="red":"complete"===t&&(l="gray"),(0,a.jsx)(n.Exy,{size:"small",variant:l,children:t})}var h=l(45711),g=l(50257),p=l(37968),y=l(92517),v=l(61242),f=l(84684),b=l(43416),S=l(48432);function F(e){var t,l,a,r;let{contract:s,host:i,exchange:o,currencyDisplay:c}=e;return{...s,id:s.id,host:i,exchange:o,displayFields:(t=s,l=null==i?void 0:i.location,a=c,r=o,{contractPrice:(0,n.vty)({sc:new b.g(t.contractPrice),currencyDisplay:a,exchange:r}),minerFee:(0,n.vty)({sc:new b.g(t.minerFee),currencyDisplay:a,exchange:r}),usedCollateral:(0,n.vty)({sc:new b.g(t.usedCollateral),currencyDisplay:a,exchange:r}),initialAllowance:(0,n.vty)({sc:new b.g(t.initialAllowance),currencyDisplay:a,exchange:r}),remainingAllowance:(0,n.vty)({sc:new b.g(t.remainingAllowance),currencyDisplay:a,exchange:r}),totalCollateral:(0,n.vty)({sc:new b.g(t.totalCollateral),currencyDisplay:a,exchange:r}),spendSectorRoots:(0,n.vty)({sc:new b.g(t.spending.sectorRoots),currencyDisplay:a,exchange:r}),spendAppendSector:(0,n.vty)({sc:new b.g(t.spending.appendSector),currencyDisplay:a,exchange:r}),spendFreeSector:(0,n.vty)({sc:new b.g(t.spending.freeSector),currencyDisplay:a,exchange:r}),spendFundAccount:(0,n.vty)({sc:new b.g(t.spending.fundAccount),currencyDisplay:a,exchange:r}),countryFlag:(0,S.y$)(null==l?void 0:l.countryCode),countryName:(0,S.qQ)(null==l?void 0:l.countryCode),formation:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(t.formation)),proofHeight:t.proofHeight.toLocaleString(),expirationHeight:t.expirationHeight.toLocaleString(),nextPrune:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(t.nextPrune)),lastBroadcastAttempt:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(t.lastBroadcastAttempt)),capacity:(0,S.p6)(t.capacity),dataSize:(0,S.p6)(t.size),renewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"===t.renewedFrom?"-":t.renewedFrom,renewedTo:"0000000000000000000000000000000000000000000000000000000000000000"===t.renewedTo?"-":t.renewedTo,revisionNumber:t.revisionNumber.toLocaleString()})}}var w=l(80870),A=l(78633),N=l(79513);function C(){let{panelId:e,setPanelId:t}=c(),l=function(e){var t;let l=(0,v.Lx)({disabled:!e,params:{contractid:e||""}}),a=null==(t=l.data)?void 0:t.hostKey,r=(0,w.K)(a),s=(0,n.sAn)(),{settings:i}=(0,f.IQ)();return(0,n.mpY)({contract:l,host:r},e=>{let{contract:t,host:l}=e;return function(e){let{contract:t,host:l,exchangeRate:a,currencyDisplay:n}=e;return{contract:F({contract:t,host:l,currencyDisplay:n,exchange:a.currency&&a.rate&&{currency:a.currency,rate:a.rate}}),host:l}}({contract:t,host:l,exchangeRate:s,currencyDisplay:i.currencyDisplay})})}(e),s=(0,r.useMemo)(()=>{var e,t,a;return(null==(e=l.data)?void 0:e.contract)?{id:l.data.contract.hostKey,publicKey:l.data.contract.hostKey,location:null==(t=l.data.contract.host)?void 0:t.location,v2Settings:null==(a=l.data.contract.host)?void 0:a.v2Settings,usable:l.data.contract.good}:null},[l]);return l?(0,a.jsx)(n.BQi,{data:l,loading:(0,a.jsx)(N.P,{withMap:!0,withActions:!1,onClose:()=>t(void 0)}),notFound:(0,a.jsx)(p.w,{heading:null,children:(0,a.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,a.jsx)(n.EYj,{color:"subtle",children:"Contract not found"})})}),loaded:e=>{var l;let{contract:r,host:i}=e;return(0,a.jsxs)(p.w,{onClose:()=>t(void 0),heading:(0,a.jsx)(A.R,{heading:"Contract",value:null==r?void 0:r.id,label:"contract"}),children:[(0,a.jsx)(n.hz$,{hosts:s?[s]:[],activeHost:s,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"}),(0,a.jsx)(y.V,{heading:"Info",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.B,{label:"State",value:(0,a.jsx)(x,{value:r.state})}),(0,a.jsx)(g.B,{label:"Status",value:(0,a.jsx)(j,{variant:r.good?"good":"bad"})}),(0,a.jsx)(g.B,{label:"Host public key",value:(0,a.jsx)(n.Zjd,{value:r.hostKey,type:"hostPublicKey"})}),null==(l=i.addresses)?void 0:l.map(e=>(0,a.jsx)(g.B,{label:e.protocol,value:(0,a.jsx)(n.Zjd,{value:e.address,maxLength:24})},e.address+e.protocol))]})}),(0,a.jsx)(y.V,{heading:"Usability",children:(0,a.jsx)(h.fz,{usable:(null==i?void 0:i.usable)||!1,usability:null==i?void 0:i.usability,className:"w-full overflow-hidden flex-wrap"})})]})}}):(0,a.jsx)(p.w,{heading:null,children:(0,a.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,a.jsx)(n.EYj,{color:"subtle",children:"Contract not found"})})})}var E=l(39263),P=l(24722);function B(e){let{table:t}=e,{setPanelId:l}=c(),s=(0,r.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]),i=(0,E.V)({hosts:s.map(e=>{var t,l;return{...e.original,settings:null==(t=e.original.host)?void 0:t.v2Settings,location:null==(l=e.original.host)?void 0:l.location,usable:e.original.good}})});return(0,a.jsxs)(p.w,{heading:(0,a.jsx)(n.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected contracts (".concat(s.length,")"):t.isFiltered?"Filtered contracts (".concat(s.length,")"):"All contracts"}),customCloseAction:t.isSelection?(0,a.jsx)(n.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,children:[(0,a.jsx)(n.hz$,{hosts:i,activeHost:null,onHostMapClick:e=>l(e),scale:180,mapClassName:"-mt-[20px]"}),!t.isFiltered&&!t.isSelection&&(0,a.jsx)(P.d,{})]})}var Y=l(46826),K=l(81477),L=l(45614);function D(e){return"status"===e.id?e.value?"Status is good":"Status is bad":"revisable"===e.id?e.value?"Revisable":"Not revisable":""}let H={namespace:"contracts/filterStatus",label:"Contracts filter by status"},R=[{id:"status",value:!0},{id:"status",value:!1}];function T(e){let{select:t,currentPage:l}=e;return(0,a.jsx)(L.L$,{currentPage:l,commandPage:H,children:R.map(e=>(0,a.jsx)(L.n7,{currentPage:l,commandPage:H,onSelect:()=>{t(e)},children:D(e)},e.id+e.value))})}function z(e){let{currentPage:t,select:l}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(T,{currentPage:t,select:l})})}let k={namespace:"contracts",label:"Contracts"};function I(e){let{currentPage:t,parentPage:l,pushPage:n}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(L.Iu,{currentPage:t,parentPage:l,commandPage:k,onSelect:()=>{n(H)},children:H.label})})}function Q(e){let{currentPage:t,parentPage:l,pushPage:n,beforeSelect:s,afterSelect:i}=e,{addColumnFilter:o}=c(),d=(0,r.useCallback)(e=>{s&&s(),o(e),i&&i()},[o,s,i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{parentPage:l,currentPage:t,pushPage:n,select:d}),(0,a.jsx)(z,{currentPage:t,select:d})]})}var M=l(86151);function $(){let{columnFilters:e,removeColumnFilter:t,removeLastColumnFilter:l}=c();return(0,a.jsx)(M.W,{name:"contracts",columnFilters:e,removeColumnFilter:t,removeLastColumnFilter:l,getFilterLabel:D,children:e=>{let{currentPage:t,beforeSelect:l,afterSelect:n,pushPage:r}=e;return(0,a.jsx)(Q,{currentPage:t,beforeSelect:l,afterSelect:n,pushPage:r})}})}function O(){let{offset:e,limit:t,setOffset:l,setLimit:s,panelId:i,setPanelId:o,columnFilters:d,setColumnFilters:u,columnSorts:j,setColumnSorts:x}=c(),h=(0,r.useCallback)(e=>{o(e)},[o]),g=function(){let{columnFilters:e,offset:t,limit:l}=c(),a=(0,r.useMemo)(()=>{var a,n;let r={offset:t,limit:l},s=null==(a=e.find(e=>"status"===e.id))?void 0:a.value;void 0!==s&&(r.good=s);let i=null==(n=e.find(e=>"revisable"===e.id))?void 0:n.value;return void 0!==i&&(r.revisable=i),r},[e,t,l]),s=(0,v.Kd)({params:a}),i=(0,Y.O)(),o=(0,n.sAn)(),{settings:d}=(0,f.IQ)();return(0,n.sEt)({contracts:s},e=>{let{contracts:t}=e;return t.map(e=>{var t;let l=null==(t=i.data)?void 0:t.find(t=>t.publicKey===e.hostKey);return F({contract:e,host:l,currencyDisplay:d.currencyDisplay,exchange:o.currency&&o.rate&&{currency:o.currency,rate:o.rate}})})},{offset:t,filters:e})}(),p=(0,n.uIQ)({dataset:g,columns:m,columnFilters:d,setColumnFilters:u,columnSorts:j,setColumnSorts:x,offset:e,limit:t,onRowClick:h,setOffset:l,setLimit:s});return(0,a.jsx)(K.P,{table:(0,a.jsx)(n.bQt,{...p,header:(0,a.jsx)($,{}),noneOnPage:(0,a.jsx)(n.GB$,{message:"No contracts on this page, reset pagination to continue."}),noneYet:(0,a.jsx)(n.QOE,{message:"There are no contracts yet."}),noneMatchingFilters:(0,a.jsx)(n.hpd,{message:"No contracts matching filters."}),error:(0,a.jsx)(n.qq6,{message:"Error loading contracts. Please try again later."})}),panel:i?(0,a.jsx)(C,{}):(0,a.jsx)(B,{table:p})})}function _(){return(0,a.jsx)(O,{})}}},e=>{e.O(0,[9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,1144,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,6322,1893,3995,2720,1319,587,18,7358],()=>e(e.s=57227)),_N_E=e.O()}]);