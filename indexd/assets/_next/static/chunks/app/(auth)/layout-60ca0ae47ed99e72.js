(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9097],{20944:(e,s,n)=>{Promise.resolve().then(n.bind(n,51771))},51771:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>E});var t=n(54568),i=n(43416),r=n(61242),l=n(2720),a=n(47258),c=n(23051),d=n(48432);function o(){var e,s,n,i,o;let{openDialog:x}=(0,c.sp)(),j=(0,r.GU)({config:{swr:{revalidateOnFocus:!1}}}),u=(0,r.t$)({config:{swr:{revalidateOnFocus:!1}}}),h=(0,a.d)(),m=null==(e=j.data)?void 0:e.version,f="?"===m?"https://github.com/SiaFoundation/indexd/commits/":(null==m?void 0:m.match(/^v\d+\.\d+\.\d+/))?"https://github.com/SiaFoundation/indexd/releases/".concat(m):"https://github.com/SiaFoundation/indexd/tree/".concat(m),g=j.data?new Date().getTime()-new Date(null==(s=j.data)?void 0:s.startTime).getTime():0;return(0,t.jsxs)(l.qNN,{name:"indexd",peerCount:0,connectPeer:()=>x("connectPeer"),isSynced:h.isSynced,syncPercent:h.syncPercent,nodeBlockHeight:h.nodeBlockHeight,estimatedBlockHeight:h.estimatedBlockHeight,firstTimeSyncing:h.firstTimeSyncing,moreThan100BlocksToSync:h.moreThan100BlocksToSync,children:[(0,t.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,t.jsx)(l.JU7,{size:"14",color:"subtle",noWrap:!0,className:"w-[100px]",children:"Wallet address"}),(0,t.jsx)("div",{className:"flex-1 flex justify-end overflow-hidden -mr-0.5 pr-0.5",children:(0,t.jsx)(l.Zjd,{size:"14",maxLength:20,value:(null==(n=u.data)?void 0:n.address)||"",type:"address"})})]}),j.data&&(0,t.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,t.jsx)(l.JU7,{size:"14",color:"subtle",noWrap:!0,className:"w-[100px]",children:"Uptime"}),(0,t.jsx)("div",{className:"flex-1 flex justify-end overflow-hidden -mr-0.5 pr-0.5",children:(0,t.jsx)(l.EYj,{size:"14",children:(0,d.zK)(g,{format:"long"})})})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,t.jsx)(l.JU7,{size:"14",color:"subtle",noWrap:!0,className:"w-[100px]",children:"Network"}),(0,t.jsx)("div",{className:"flex-1 flex justify-end overflow-hidden -mr-0.5 pr-0.5",children:(0,t.jsx)(l.EYj,{size:"14",children:null==(i=j.data)?void 0:i.network})})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,t.jsx)(l.JU7,{size:"14",color:"subtle",noWrap:!0,className:"w-[100px]",children:"Version"}),(0,t.jsx)(l.N_E,{size:"14",href:f,underline:"hover",target:"_blank",ellipsis:!0,children:null==(o=j.data)?void 0:o.version})]})]})}var x=n(30650);n(7620);var j=n(79423),u=n(84684),h=n(17649);function m(){let{isUnlockedAndAuthedRoute:e}=(0,u.IQ)(),{openDialog:s}=(0,c.sp)(),n=(0,r.t$)(),[d,o]=(0,h.A)("v0/indexd/onboarding/maximized",{defaultValue:!0}),m=(0,a.d)(),g=function(){var e,s;let n=(0,r.XT)(),t=(0,r.Kd)();return{active:n.data&&t.data&&t.data.length<n.data.wantedContracts,count:(null==(e=t.data)?void 0:e.length)||0,required:(null==(s=n.data)?void 0:s.wantedContracts)||0}}();if(!e)return null;let p=new i.A(n.data?n.data.confirmed+n.data.unconfirmed:0),v=m.isSynced,b=p.gt(0),y=!g.active,w=[!0,v,b,y],N=w.length,k=w.filter(e=>e).length;return N===k?(0,t.jsx)(l.Di0,{}):d?(0,t.jsx)(l.Di0,{children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(l.Zkm,{className:"w-[400px] flex flex-col max-h-[600px]",children:(0,t.jsxs)(l.FKN,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-200 dark:border-graydark-300",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)(l.guG,{}),(0,t.jsx)(l.EYj,{size:"20",weight:"semibold",children:"Welcome to Sia"})]}),(0,t.jsx)(l.$nd,{"aria-label":"minimize onboarding wizard",variant:"ghost",onClick:()=>o(!1),children:(0,t.jsx)(j.pz,{})})]}),(0,t.jsx)("div",{className:"flex justify-between items-center px-3 py-2 border-b border-gray-200 dark:border-graydark-300",children:(0,t.jsx)(l.EYj,{size:"14",children:"Get set up by completing the following steps. Once they are complete, the daemon can start storing data."})}),(0,t.jsx)(f,{title:(0,t.jsx)(l.N_E,{href:x.J.config.index,ellipsis:!0,size:"14",underline:"hover",children:"Step 1: Configure your storage settings"}),description:"Specify your maximum pricing values and other settings.",action:(0,t.jsx)(l.N_E,{href:x.J.config.index,children:(0,t.jsx)(j.dm2,{})})}),(0,t.jsx)(f,{title:(0,t.jsx)(l.N_E,{href:x.J.node.index,underline:"hover",ellipsis:!0,size:"14",children:"Step 2: Wait for the blockchain to sync"}),description:"The blockchain will sync in the background, this takes some time. No user action required.",action:v?(0,t.jsx)(l.EYj,{color:"green",children:(0,t.jsx)(j.Voo,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.EYj,{ellipsis:!0,size:"14",children:[m.syncPercent,"%"]}),(0,t.jsx)(l.EYj,{color:"amber",children:(0,t.jsx)(j.RDb,{})})]})}),(0,t.jsx)(f,{title:(0,t.jsx)(l.N_E,{href:x.J.wallet.view,onClick:()=>s("addressDetails"),ellipsis:!0,size:"14",underline:"hover",children:"Step 3: Fund your wallet"}),description:"Fund your wallet to cover spending on storage.".concat(m.isWalletSynced?"":" Balance will not be accurate until wallet is finished scanning."),action:b?(0,t.jsx)(l.EYj,{color:"green",children:(0,t.jsx)(j.Voo,{})}):(0,t.jsxs)(t.Fragment,{children:[!m.isWalletSynced&&(0,t.jsx)(l.m_M,{content:"Wallet scanning progress ".concat(m.walletScanPercent,"%"),children:(0,t.jsxs)(l.EYj,{size:"14",children:[m.walletScanPercent,"%"]})}),(0,t.jsx)(l.N_E,{href:x.J.wallet.view,onClick:()=>s("addressDetails"),children:(0,t.jsx)(j.dm2,{})}),(0,t.jsx)(l.EYj,{color:"amber",children:(0,t.jsx)(j.vmK,{})})]})}),(0,t.jsx)(f,{title:(0,t.jsx)(l.N_E,{href:x.J.home,ellipsis:!0,size:"14",underline:"hover",children:"Step 4: Wait for storage contracts to form"}),description:"Once all other steps are complete, contracts will automatically form. No user action required.",action:y?(0,t.jsx)(l.EYj,{color:"green",children:(0,t.jsx)(j.Voo,{})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.EYj,{ellipsis:!0,size:"14",children:[g.count,"/",g.required]}),(0,t.jsx)(l.EYj,{color:"amber",children:(0,t.jsx)(j.RDb,{})})]})})]})})})}):(0,t.jsx)(l.Di0,{children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(l.$nd,{onClick:()=>o(!0),size:"large",className:"flex gap-3 !px-3",children:(0,t.jsxs)(l.EYj,{size:"14",className:"flex items-center gap-2",children:[(0,t.jsx)(l.guG,{}),"Setup: ",k,"/",N," steps complete"]})})})})}function f(e){let{title:s,action:n,description:i}=e;return(0,t.jsx)("div",{className:"border-t first:border-t-0 border-gray-200 dark:border-graydark-300 px-3 py-2",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,t.jsx)("div",{className:"flex-1 flex items-center",children:s}),n]}),(0,t.jsx)("div",{className:"pr-5",children:(0,t.jsx)(l.EYj,{size:"12",color:"subtle",children:i})})]})})}var g=n(81238);function p(e){let{size:s}=e,{toggleEnabled:n,enabled:i}=(0,g.F)();return(0,t.jsx)(l.m_M,{content:"Enable or disable forming contracts and maintaining data.",children:(0,t.jsx)("div",{children:(0,t.jsx)(l.dOG,{size:s,checked:i,onCheckedChange:n})})})}function v(){let e=(0,r.XT)();return!e.data||e.data.enabled?(0,t.jsx)(l.Di0,{}):(0,t.jsx)(l.Di0,{children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)(l.Zkm,{className:"w-[400px] flex flex-col gap-2 max-h-[600px] p-3",children:[(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)(l.EYj,{size:"18",weight:"medium",color:"contrast",children:(0,t.jsx)(j.D9c,{})}),(0,t.jsx)(l.EYj,{size:"18",weight:"medium",color:"contrast",children:"System is currently disabled"}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(p,{size:"medium"})]}),(0,t.jsx)(l.EYj,{size:"12",color:"subtle",children:"Enable the system to form contracts and maintain files. Make sure to configure your desired settings before enabling."})]})})})}function b(e){let{children:s}=e;return(0,t.jsxs)("div",{"data-testid":"docked-controls",className:"flex flex-col gap-2",children:[s,(0,t.jsx)(m,{}),(0,t.jsx)(v,{})]})}function y(){let e=(0,r.GU)({config:{swr:{revalidateOnFocus:!1}}});return e.data&&"mainnet"!==e.data.network?(0,t.jsx)(l.eFU,{testnetName:e.data.network}):null}var w=n(27541),N=n(78303);function k(){let{openDialog:e}=(0,c.sp)(),s=(0,w.useSearchParams)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.U3R,{title:"Hosts",route:(0,N.M)(x.J.hosts.index,s),children:(0,t.jsx)(j.bN0,{})}),(0,t.jsx)(l.U3R,{title:"Contracts",route:(0,N.M)(x.J.contracts.index,s),children:(0,t.jsx)(j.ox6,{})}),(0,t.jsx)(l.U3R,{title:"Connect keys",route:(0,N.M)(x.J.keys.index,s),children:(0,t.jsx)(j.RYV,{})}),(0,t.jsx)(l.U3R,{title:"Accounts",route:(0,N.M)(x.J.accounts.index,s),children:(0,t.jsx)(j.c2u,{})}),(0,t.jsx)(l.U3R,{title:"Alerts",route:(0,N.M)(x.J.alerts.index,s),children:(0,t.jsx)(j.XFE,{})}),(0,t.jsx)(l.U3R,{title:"Configuration",route:(0,N.M)(x.J.config.index,s),children:(0,t.jsx)(j.x8D,{})}),(0,t.jsx)(l.U3R,{title:"Metrics",route:(0,N.M)(x.J.metrics.index,s),children:(0,t.jsx)(j.KxP,{})}),(0,t.jsx)(l.U3R,{title:"Bug report",onClick:()=>e("bugReport"),children:(0,t.jsx)(j.Q5O,{})})]})}function E(e){let{children:s}=e,{isSynced:n}=(0,a.d)(),{openDialog:d}=(0,c.sp)(),j=(0,r.t$)();return(0,t.jsx)(l.tM8,{profile:(0,t.jsx)(o,{}),routes:x.J,isSynced:n,dockedControls:(0,t.jsx)(b,{}),connectivityRoute:x.b,openSettings:()=>d("settings"),banner:(0,t.jsx)(y,{}),sidenav:(0,t.jsx)(k,{}),walletBalanceSc:j.data&&{spendable:new i.A(j.data.spendable),confirmed:new i.A(j.data.confirmed),immature:new i.A(j.data.immature),unconfirmed:new i.A(j.data.unconfirmed)},children:s})}},78303:(e,s,n)=>{"use strict";n.d(s,{M:()=>r,l:()=>l});var t=n(27541),i=n(7620);function r(e,s){return"".concat(e,"?").concat(new URLSearchParams(s).toString())}function l(){let e=(0,t.useRouter)();return(0,i.useCallback)((s,n)=>{e.push(r(s,n))},[e])}},81238:(e,s,n)=>{"use strict";n.d(s,{F:()=>r});var t=n(61242),i=n(7620);function r(){var e;let s=(0,t.s3)(),n=(0,t.XT)();return{toggleEnabled:(0,i.useCallback)(async()=>{var e;n.data&&(await s.put({payload:{...n.data,enabled:!(null==(e=n.data)?void 0:e.enabled)}}),n.mutate(e=>e?{...e,enabled:!e.enabled}:e))},[n,s]),enabled:!!(null==(e=n.data)?void 0:e.enabled)}}}},e=>{e.O(0,[9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,1144,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,6322,2179,2720,3051,587,18,7358],()=>e(e.s=20944)),_N_E=e.O()}]);