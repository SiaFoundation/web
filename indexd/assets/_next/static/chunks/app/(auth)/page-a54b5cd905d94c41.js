(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2670],{46217:(e,t,l)=>{Promise.resolve().then(l.bind(l,69687))},46682:(e,t,l)=>{"use strict";l.d(t,{n:()=>d,SX:()=>o,zE:()=>m,bu:()=>h,rF:()=>g,P3:()=>r,aE:()=>x,zL:()=>j,eY:()=>p,dW:()=>y,R7:()=>b,eX:()=>f,KR:()=>c,NN:()=>u,vT:()=>v,iG:()=>N,YH:()=>w,Jz:()=>F});var s=l(26109),n=l(62435),i=l(98686),a=l(93727);function r(e){return(0,s.Av)({...e,route:n.dV})}function o(){let e=r({config:{swr:{revalidateOnFocus:!1}}});return(0,i.Ay)(e,()=>{var t;return(null==(t=e.data)?void 0:t.network)==="zen"?(0,a.Py)():(0,a.Nm)()},{refreshInterval:6e4,keepPreviousData:!0}).data||0}function c(e){return(0,s.yW)({...e,route:n.OD})}function u(e){return(0,s.Av)({...e,route:n.DM})}function d(e){return(0,s.Av)({...e,route:n.np})}function m(e){return(0,s.Av)({...e,route:n.vb})}function g(e){return(0,s.hz)({...e,route:n.jX})}function h(e){return(0,s.$Z)({...e,route:n.z6})}function x(e){return(0,s.Av)({...e,route:n.kf})}function j(e){return(0,s.hz)({...e,route:n.bq})}function p(e){return(0,s.Av)({...e,route:n._M})}function y(e){return(0,s.hz)({...e,route:n.hN})}function b(e){return(0,s.Av)({...e,route:n.NR})}function f(e){return(0,s.hz)({...e,route:n.Ko})}function v(e){return(0,s.Av)({...e,route:n.Z})}function N(e){return(0,s.Av)({...e,route:n.ki})}function w(e){return(0,s.Av)({...e,route:n.s7})}function F(e){return(0,s.yW)({...e,route:n.V$})}},62435:(e,t,l)=>{"use strict";l.d(t,{DM:()=>i,Ko:()=>x,NR:()=>h,OD:()=>n,V$:()=>b,Z:()=>j,_M:()=>m,bq:()=>d,dV:()=>s,hN:()=>g,jX:()=>o,kf:()=>u,ki:()=>p,np:()=>a,s7:()=>y,vb:()=>r,z6:()=>c});let s="/state",n="/syncer/connect",i="/txpool/recommendedfee",a="/contracts",r="/hosts",o="/hosts/blocklist",c="/hosts/blocklist/:hostkey",u="/settings/contracts",d="/settings/contracts",m="/settings/hosts",g="/settings/hosts",h="/settings/pricepinning",x="/settings/pricepinning",j="/wallet",p="/wallet/events",y="/wallet/pending",b="/wallet/send"},69687:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>X});var s=l(54568),n=l(42384),i=l(7620),a=l(31100);function r(e){let{usable:t,usability:l,className:a,showExpanded:r=!1}=e,c=(0,i.useMemo)(()=>l&&Object.keys(l).filter(e=>!l[e]).map(e=>(0,s.jsx)(o,{status:"unusable",name:u(e)},e)),[l]),d=(0,i.useMemo)(()=>l&&Object.keys(l).filter(e=>l[e]).map(e=>(0,s.jsx)(o,{status:"usable",name:u(e)},e)),[l]);return(0,s.jsx)("div",{className:(0,n.cn)("flex gap-1",a),children:t&&!r?(0,s.jsx)(o,{status:"usable",name:"usable"}):(0,s.jsxs)(s.Fragment,{children:[c,d]})})}function o(e){let{status:t,name:l}=e;return(0,s.jsxs)(n.Exy,{size:"small",className:"flex items-center gap-0.5",children:[(0,s.jsx)(c,{status:t,name:l}),l]})}function c(e){let{status:t,name:l}=e,r=(0,i.useMemo)(()=>({usable:"".concat(l," is usable"),warning:"".concat(l," is almost unusable"),unusable:"".concat(l," is unusable")}),[l]);return(0,s.jsx)(n.m_M,{content:r[t],children:"usable"===t?(0,s.jsx)(a.d5v,{className:"text-green-600 scale-75"}):"warning"===t?(0,s.jsx)(a.UvW,{className:"text-amber-600 scale-75"}):(0,s.jsx)(a.mC5,{className:"text-red-600 scale-75"})})}function u(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}function d(e){let{label:t,value:l}=e;return(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,s.jsx)(n.EYj,{color:"subtle",className:"truncate",children:t})}),(0,s.jsx)("div",{className:"flex-1 flex justify-end items-center",children:(0,s.jsx)(n.EYj,{color:"subtle",className:"truncate",children:l})})]})}function m(e){let{customCloseAction:t,actions:l,onClose:i,children:r,heading:o}=e;return(0,s.jsxs)(n.Zkm,{className:"relative h-full w-[350px] lg:w-[450px]",children:[(0,s.jsxs)("div",{className:"h-[45px] z-10 flex items-center justify-between gap-4 bg-white dark:bg-graydark-200 py-2 px-4 border-b border-gray-200 dark:border-graydark-400",children:[o,t||(i?(0,s.jsx)(n.$nd,{className:"p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-blue-500 z-10",onClick:i,"aria-label":"Close drawer",variant:"ghost",icon:"hover",size:"none",children:(0,s.jsx)(a.sn9,{className:"w-5 h-5 text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100"})}):null)]}),l&&(0,s.jsx)("div",{className:"z-10 flex items-center justify-start gap-1 bg-white dark:bg-graydark-200 py-1.5 px-2",children:l}),(0,s.jsx)("div",{className:"p-4 h-full w-full",children:r})]})}var g=l(46682),h=l(93727),x=l(62435),j=l(26109);function p(e){let{hosts:t}=e,l=(0,g.rF)(),a=(0,j.ej)(),r=(0,i.useCallback)(async()=>{let{error:e}=await l.put({payload:{hostKeys:t.map(e=>"publicKey"in e?e.publicKey:e.original.publicKey),reason:"blocked by user"}});e?(0,n.el3)({title:"Error blocking hosts",body:e}):(0,n.VE1)({title:"Blocked ".concat((0,h.td)(t.length,"host"))}),await a(e=>e.startsWith(x.vb))},[t,l,a]);return(0,s.jsx)(n.$nd,{onClick:r,children:"Block"})}function y(e){let{hosts:t}=e,l=(0,g.bu)(),a=(0,j.ej)(),r=(0,i.useCallback)(async()=>{await (0,n.qBJ)(t.map(e=>l.delete({params:{hostkey:"publicKey"in e?e.publicKey:e.original.publicKey}})),{toastError:e=>{let{successCount:t,errorCount:l,totalCount:s}=e;return{title:"Unblocked ".concat((0,h.td)(t,"host")),body:"Error unblocking ".concat(l,"/").concat(s," of total hosts.")}},toastSuccess:e=>{let{totalCount:t}=e;return{title:"Unblocked ".concat((0,h.td)(t,"host"))}}}),await a(e=>e.startsWith(x.vb))},[t,l,a]);return(0,s.jsx)(n.$nd,{onClick:r,children:"Unblock"})}function b(e){let{heading:t,children:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.wvv,{className:"mt-4 mb-2"}),(0,s.jsx)(n.EYj,{size:"16",weight:"medium",className:"mb-2",children:t}),l]})}var f=l(37653);function v(e,t){let{location:l,currencyDisplay:s,exchange:i}=t;return{...e,id:e.publicKey,usable:Object.values(e.usability).every(e=>e),location:l||{countryCode:"unknown",latitude:0,longitude:0},exchange:i,sortFields:{storagePrice:new f.g(e.settings.prices.storagePrice),ingressPrice:new f.g(e.settings.prices.ingressPrice),egressPrice:new f.g(e.settings.prices.egressPrice),freeSectorPrice:new f.g(e.settings.prices.freeSectorPrice),maxCollateral:new f.g(e.settings.prices.collateral)},displayFields:function(e,t,l,s){var i;let a=(0,h.g9)(e.settings.remainingStorage),r=(0,h._S)(10),o=a.eq(0)?"unusable":a.lt(r)?"warning":"usable";return{uptime:"".concat((100*e.recentUptime).toFixed(1),"%"),totalStorage:(0,h.p6)((0,h.g9)(e.settings.totalStorage)),remainingStorage:(0,h.p6)(a),remainingStorageUsability:o,storagePrice:(0,n.vty)({sc:(0,h.Ri)({price:e.settings.prices.storagePrice}),currencyDisplay:l,exchange:s}),ingressPrice:(0,n.vty)({sc:(0,h.gW)({price:e.settings.prices.ingressPrice}),currencyDisplay:l,exchange:s}),egressPrice:(0,n.vty)({sc:(0,h.LT)({price:e.settings.prices.egressPrice}),currencyDisplay:l,exchange:s}),freeSectorPrice:(0,n.vty)({sc:new f.g(e.settings.prices.freeSectorPrice),currencyDisplay:l,exchange:s}),maxCollateral:(0,n.vty)({sc:new f.g(e.settings.prices.collateral),currencyDisplay:l,exchange:s}),maxContractDuration:"".concat((0,h.bu)(e.settings.maxContractDuration).toFixed(1)," weeks"),protocolVersion:"string"==typeof(i=e.settings).protocolVersion?i.protocolVersion.slice(1):"v".concat(i.protocolVersion[0],".").concat(i.protocolVersion[1],".").concat(i.protocolVersion[2]),priceValidity:new Date(e.settings.prices.validUntil).toLocaleString(),release:e.settings.release,countryName:(0,h.qQ)(null==t?void 0:t.countryCode),countryFlag:(0,h.y$)(null==t?void 0:t.countryCode)}}(e,l,s,i)}}function N(){var e;let t=(0,g.P3)(),l=(0,n.XDV)({api:(null==(e=t.data)?void 0:e.network)==="mainnet"?"https://api.siascan.com":"https://api.siascan.com/zen",params:{sortBy:"storage_price",dir:"asc",limit:1e3},payload:{online:!0}}),s=(0,g.zE)({params:{limit:500}}),a=(0,n.bK1)(),r=(0,i.useMemo)(()=>a.currency&&a.rate&&{currency:a.currency,rate:a.rate},[a.currency,a.rate]),{settings:o}=(0,j.IQ)();return(0,i.useMemo)(()=>{var e;return(null==(e=s.data)?void 0:e.map(e=>{var t,s;let n=null==(s=l.data)||null==(t=s.find(t=>t.publicKey===e.publicKey))?void 0:t.location;return v(e,{location:n,currencyDisplay:o.currencyDisplay,exchange:r})}))||[]},[s.data,l.data,r,o.currencyDisplay])}function w(){var e,t;let{selectedId:l,setSelectedId:a}=(0,n.i$h)("hostList"),o=N(),c=(0,i.useMemo)(()=>o.find(e=>e.id===l),[l,o]),u=(0,i.useMemo)(()=>c&&"unknown"!==c.location.countryCode?{id:c.id,publicKey:c.publicKey,location:c.location,v2Settings:c.settings,usable:c.usable}:null,[c]);return c?(0,s.jsxs)(m,{onClose:()=>a(void 0),heading:(0,s.jsxs)(n.EYj,{size:"18",weight:"medium",ellipsis:!0,children:[(null==c||null==(e=c.location)?void 0:e.countryCode)?(0,s.jsx)("span",{className:"pr-1",children:(0,s.jsx)(n.J93,{countryCode:null==c||null==(t=c.location)?void 0:t.countryCode})}):null,null==c?void 0:c.addresses[0].address]}),actions:c.blocked?(0,s.jsx)(y,{hosts:[c]}):(0,s.jsx)(p,{hosts:[c]}),children:[(0,s.jsx)(n.hz$,{hosts:u?[u]:[],activeHost:u,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"},l),(0,s.jsx)(b,{heading:"Addresses",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.addresses.map(e=>(0,s.jsx)(d,{label:e.protocol,value:(0,s.jsx)(n.Zjd,{value:e.address,maxLength:24})},e.address+e.protocol))})}),(0,s.jsx)(b,{heading:"Usability",children:(0,s.jsx)(r,{usable:c.usable,usability:c.usability,className:"w-full overflow-hidden flex-wrap"})})]}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(n.EYj,{color:"subtle",children:"Host not found"})})})}function F(e){let{hosts:t}=e,l=(0,i.useDeferredValue)(t);return(0,i.useMemo)(()=>l.length>100?Object.values(l.reduce((e,t)=>{var l,s,n,i;let a=null==(l=t.location)?void 0:l.countryCode;return a&&"unknown"!==a&&t.location&&(e[a]?e[a].groupCount=(e[a].groupCount||0)+1:e[a]={type:"group",id:t.id,location:{latitude:null==(s=t.location)?void 0:s.latitude,longitude:null==(n=t.location)?void 0:n.longitude,countryCode:null==(i=t.location)?void 0:i.countryCode},groupCount:1}),e},{})):l.map(e=>e.location&&"unknown"!==e.location.countryCode?{id:e.id,publicKey:e.id,location:{latitude:e.location.latitude,longitude:e.location.longitude,countryCode:e.location.countryCode},v2Settings:e.settings,usable:e.usable}:null).filter(e=>null!==e),[l])}function S(e){let{table:t}=e,{setSelectedId:l}=(0,n.i$h)("hostList"),a=(0,i.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]),r=F({hosts:a.map(e=>e.original)});return(0,s.jsx)(m,{customCloseAction:t.isSelection?(0,s.jsx)(n.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,actions:t.isSelection?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{hosts:a}),(0,s.jsx)(y,{hosts:a})]}):null,heading:(0,s.jsx)(n.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected hosts (".concat(a.length,")"):t.isFiltered?"Filtered hosts (".concat(a.length,")"):"All hosts"}),children:(0,s.jsx)(n.hz$,{hosts:r,activeHost:null,onHostMapClick:e=>l(e),scale:180,mapClassName:"-mt-[20px]"})})}function C(e){let{columnId:t,table:l,children:r}=e,[o,c]=(0,i.useState)(!1),u=l.getColumn(t),d=null==u?void 0:u.getIsFiltered();return(null==u?void 0:u.getCanFilter())?(0,s.jsx)(n.AMh,{trigger:(0,s.jsx)(n.$nd,{variant:"ghost",size:"none",icon:d?"contrast":"verySubtle",children:(0,s.jsx)(a.uG0,{})}),rootProps:{open:o,onOpenChange:c},contentProps:{align:"end",className:"w-64"},children:(0,s.jsxs)("div",{className:"p-3 space-y-3",children:[r,d&&(0,s.jsx)(n.$nd,{variant:"ghost",size:"small",onClick:()=>{u.setFilterValue(void 0),c(!1)},className:"w-full",children:"Clear Filter"})]})}):null}function P(e){let{columnId:t,table:l}=e,i=l.getColumn(t),r=null==i?void 0:i.getIsSorted();return(null==i?void 0:i.getCanSort())?(0,s.jsx)(n.$nd,{variant:"ghost",size:"none",icon:r?"contrast":"verySubtle",onClick:()=>{"asc"===r?null==i||i.toggleSorting(!0):"desc"===r?null==i||i.clearSorting():null==i||i.toggleSorting(!1)},children:"asc"===r?(0,s.jsx)(a.cgo,{}):"desc"===r?(0,s.jsx)(a.zYC,{}):(0,s.jsx)(a.nIb,{})}):null}function k(e){let{children:t,table:l,column:i,filter:a,className:r}=e;return(0,s.jsxs)("div",{className:(0,n.cn)("flex items-center gap-0.5 justify-end",r),children:[(0,s.jsx)(n.EYj,{className:"truncate",children:t}),a&&l&&i&&(0,s.jsx)(C,{columnId:i.id,table:l,children:a}),l&&i&&(0,s.jsx)(P,{columnId:i.id,table:l})]})}function K(e){let{table:t}=e,l=t.getColumn("location"),a=(0,i.useMemo)(()=>(null==l?void 0:l.getFacetedUniqueValues())||new Map,[l]),r=null==l?void 0:l.getFilterValue(),o=(0,i.useMemo)(()=>{let e=[{value:"",label:"All Countries"}];for(let[t]of a)t&&"unknown"!==t&&e.push({value:t,label:"".concat((0,h.y$)(t)," ").concat((0,h.qQ)(t))});return e.push({value:"unknown",label:"â“ Unknown"}),e},[a]);return(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)(n.l6P,{"aria-label":"country filter",value:r||"",onChange:e=>{let t=e.target.value;null==l||l.setFilterValue(""===t?void 0:t)},children:o.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})})}function A(e){let{table:t}=e,l=t.getColumn("usable"),a=(0,i.useMemo)(()=>(null==l?void 0:l.getFacetedUniqueValues())||new Map,[l]),r=null==l?void 0:l.getFilterValue(),o=(0,i.useMemo)(()=>{let e=[];for(let[t,l]of a)!0===t?e.push({value:!0,label:"Usable (".concat(l,")")}):!1===t&&e.push({value:!1,label:"Unusable (".concat(l,")")});return e},[a]);return(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)(n.l6P,{"aria-label":"usable filter",value:void 0===r?"":String(r),onChange:e=>{let t=e.target.value;null==l||l.setFilterValue(""===t?void 0:"true"===t)},children:o.map(e=>(0,s.jsx)("option",{value:String(e.value),children:e.label},e.label))})})}function E(e){let{table:t}=e,l=t.getColumn("blocked"),a=(0,i.useMemo)(()=>(null==l?void 0:l.getFacetedUniqueValues())||new Map,[l]),r=null==l?void 0:l.getFilterValue(),o=(0,i.useMemo)(()=>{let e=[];for(let[t,l]of a)!1===t?e.push({value:!1,label:"Not Blocked (".concat(l,")")}):!0===t&&e.push({value:!0,label:"Blocked (".concat(l,")")});return e},[a]);return(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)(n.l6P,{"aria-label":"blocked filter",value:void 0===r?"":String(r),onChange:e=>{let t=e.target.value;null==l||l.setFilterValue("true"===t)},children:o.map(e=>(0,s.jsx)("option",{value:String(e.value),children:e.label},e.label))})})}let z=()=>({id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"h-full flex items-center justify-start",children:(0,s.jsx)(n.Sc0,{checked:!!t.getIsAllRowsSelected()||!!t.getIsSomeRowsSelected()&&"indeterminate",onCheckedChange:e=>{t.getToggleAllRowsSelectedHandler()({target:{checked:!0===e}})}})})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"flex items-center justify-center",children:(0,s.jsx)(n.Sc0,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),onCheckedChange:e=>{t.getToggleSelectedHandler()({target:{checked:!0===e}})}})})},meta:{stopPropagation:!0,width:35}}),M={minWidth:100,maxWidth:100},V={minWidth:200,maxWidth:220},R={minWidth:200,maxWidth:1500},Y={minWidth:140,maxWidth:650},$={minWidth:140,maxWidth:160},D=[z(),{id:"publicKey",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,className:"justify-start",children:"Public Key"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(n.Zjd,{maxLength:100,value:t(),type:"hostPublicKey"})},meta:{...Y}},{id:"usable",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,className:"justify-start",filter:(0,s.jsx)(A,{table:t}),children:"Usable"})},accessorKey:"usable",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(n.m_M,{content:t.original.usable?"host is usable":"host is unusable",children:t.original.usable?(0,s.jsx)(a.Voo,{className:"text-green-500"}):(0,s.jsx)(a.g$$,{className:"text-red-500"})}),(0,s.jsx)(r,{usable:t.original.usable,usability:t.original.usability})]})},meta:{...R}},{id:"blocked",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,className:"justify-start",filter:(0,s.jsx)(E,{table:t}),children:"Blocked"})},accessorKey:"blocked",cell:e=>{let{row:t}=e,l=t.original.blocked;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(n.m_M,{content:l?"host is blocked":"host is not blocked",children:l?(0,s.jsx)(a.g$$,{className:"text-red-500"}):(0,s.jsx)(a.Voo,{className:"text-neutral-300 dark:text-neutral-500"})}),l&&(0,s.jsx)(n.Exy,{size:"small",className:"ml-1",children:t.original.blockedReason})]})},meta:{className:"justify-start",...$}},{id:"acceptingContracts",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Accepting Contracts"})},accessorKey:"settings.acceptingContracts",cell:e=>{let{row:t,getValue:l}=e;return(0,s.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,s.jsx)(c,{status:t.original.usability.acceptingContracts?"usable":"unusable",name:"accepting contracts"})})},meta:{className:"justify-end",...M}},{id:"uptime",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Uptime"})},accessorKey:"recentUptime",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.uptime?"usable":"unusable",name:"recent uptime"}),(0,s.jsx)(n.EYj,{children:t.original.displayFields.uptime})]})},meta:{className:"justify-end",...M}},{id:"location",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,filter:(0,s.jsx)(K,{table:t}),children:"Location"})},accessorKey:"location.countryCode",cell:e=>{let{row:t}=e;return"unknown"===t.original.location.countryCode?(0,s.jsx)("div",{className:"py-1",children:(0,s.jsx)(n.EYj,{color:"verySubtle",children:"-"})}):(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)("span",{role:"img","aria-label":t.original.displayFields.countryName,children:t.original.displayFields.countryFlag}),(0,s.jsx)(n.EYj,{className:"ml-1",children:t.original.location.countryCode})]})},meta:{className:"justify-end",...M}},{id:"totalStorage",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Total Storage"})},accessorKey:"settings.totalStorage",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.totalStorage})},meta:{className:"justify-end",...M}},{id:"remainingStorage",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Remaining Storage"})},accessorKey:"settings.remainingStorage",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.displayFields.remainingStorageUsability,name:"storage"}),(0,s.jsx)(n.EYj,{children:t.original.displayFields.remainingStorage})]})},meta:{className:"justify-end",...M}},{id:"storagePrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Price Storage"})},accessorKey:"settings.prices.storagePrice",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.storagePrice?"usable":"unusable",name:"storage price"}),(0,s.jsx)(n.Pni,{...t.original.displayFields.storagePrice})]})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>e.original.sortFields.storagePrice.minus(t.original.sortFields.storagePrice).toNumber()},{id:"ingressPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Ingress/TB"})},accessorKey:"settings.prices.ingressPrice",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.ingressPrice?"usable":"unusable",name:"ingress price"}),(0,s.jsx)(n.Pni,{...t.original.displayFields.ingressPrice})]})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>e.original.sortFields.ingressPrice.minus(t.original.sortFields.ingressPrice).toNumber()},{id:"egressPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Egress/TB"})},accessorKey:"settings.prices.egressPrice",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.egressPrice?"usable":"unusable",name:"egress price"}),(0,s.jsx)(n.Pni,{...t.original.displayFields.egressPrice})]})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>e.original.sortFields.egressPrice.minus(t.original.sortFields.egressPrice).toNumber()},{id:"freeSectorPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Free Sector Price"})},accessorKey:"settings.prices.freeSectorPrice",cell:e=>{let{row:t,getValue:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.freeSectorPrice?"usable":"unusable",name:"free sector price"}),(0,s.jsx)(n.Pni,{...t.original.displayFields.freeSectorPrice})]})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>e.original.sortFields.freeSectorPrice.minus(t.original.sortFields.freeSectorPrice).toNumber()},{id:"maxContractDuration",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Max Contract Duration"})},accessorKey:"settings.maxContractDuration",cell:e=>{let{row:t,getValue:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.maxContractDuration?"usable":"unusable",name:"max contract duration"}),(0,s.jsx)(n.EYj,{children:t.original.displayFields.maxContractDuration})]})},meta:{className:"justify-end",...M}},{id:"maxCollateral",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Max Collateral"})},accessorKey:"settings.maxCollateral",cell:e=>{let{row:t,getValue:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.maxCollateral?"usable":"unusable",name:"max collateral"}),(0,s.jsx)(n.Pni,{...t.original.displayFields.maxCollateral})]})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>e.original.sortFields.maxCollateral.minus(t.original.sortFields.maxCollateral).toNumber()},{id:"protocolVersion",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Protocol Version"})},accessorKey:"settings.protocolVersion",cell:e=>{let{row:t,getValue:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.protocolVersion?"usable":"unusable",name:"protocol version"}),(0,s.jsx)(n.EYj,{children:t.original.displayFields.protocolVersion})]})},meta:{className:"justify-end",...M}},{id:"priceValidity",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Price Validity"})},accessorKey:"settings.prices.validUntil",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(c,{status:t.original.usability.priceValidity?"usable":"unusable",name:"price validity"}),(0,s.jsx)(n.EYj,{children:t.original.displayFields.priceValidity})]})},meta:{className:"justify-end",...V}},{id:"release",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Release"})},accessorKey:"settings.release",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.release})},meta:{className:"justify-end",minWidth:160,maxWidth:160}}],H=[{value:"hosts",label:"Hosts"},{value:"contracts",label:"Contracts"}];function U(e){let{value:t,onValueChange:l,className:i}=e;return(0,s.jsx)(n.l6P,{value:t,onChange:e=>l(e.target.value),className:i,"aria-label":"Select data view",children:H.map(e=>(0,s.jsx)(n.c$x,{value:e.value,children:e.label},e.value))})}var L=l(62942);function I(){let e=(0,L.useSearchParams)(),t=(0,L.useRouter)(),l=(0,L.usePathname)(),a=e.get("view"),{selectedId:r,setSelectedId:o,columnFilters:c,setColumnFilters:u,columnSorts:d,setColumnSorts:m}=(0,n.i$h)("hostList"),{offset:g,limit:h,setOffset:x,setLimit:j}=(0,n.i$h)("hostList"),p=(0,i.useCallback)(e=>{o(e)},[o]),y=N(),b=(0,n.uIQ)({data:y,columns:D,columnFilters:c,columnSorts:d,setColumnSorts:m,setColumnFilters:u,offset:g,limit:h,onRowClick:p,setOffset:x,setLimit:j});return(0,s.jsx)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:(0,s.jsxs)("div",{className:"flex flex-row flex-1 overflow-hidden w-full",children:[(0,s.jsx)("div",{className:"flex-1 h-full overflow-hidden p-4",children:(0,s.jsx)(n.bQt,{...b,heading:(0,s.jsx)(U,{value:a,onValueChange:s=>{let n=new URLSearchParams(Array.from(e.entries()));n.set("view",s),t.push("".concat(l,"?").concat(n.toString()))}})})}),(0,s.jsx)("div",{className:"py-4 pr-4",children:r?(0,s.jsx)(w,{}):(0,s.jsx)(S,{table:b})})]})})}let B=[z(),{id:"id",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,className:"justify-start",children:"ID"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(n.Zjd,{maxLength:100,value:t(),type:"contract"})},meta:{className:"justify-start",...Y}},{id:"status",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Status"})},accessorKey:"good",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(W,{variant:t()?"good":"bad"})},meta:{className:"justify-end",...M}},{id:"state",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"State"})},accessorKey:"state",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(T,{value:t()})},meta:{className:"justify-end",...M}},{id:"hostPublicKey",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,className:"justify-start",children:"Host Public Key"})},accessorKey:"hostKey",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(n.Zjd,{maxLength:100,value:t(),type:"hostPublicKey"})},meta:{className:"justify-start",...Y}},{id:"location",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Host Location"})},accessorKey:"host.location.countryCode",cell:e=>{var t,l,i;let{row:a,getValue:r}=e;return(null==(l=a.original.host)||null==(t=l.location)?void 0:t.countryCode)==="unknown"?(0,s.jsx)("div",{className:"py-1",children:(0,s.jsx)(n.EYj,{color:"verySubtle",children:"-"})}):(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{role:"img","aria-label":a.original.displayFields.countryName,children:a.original.displayFields.countryFlag}),(0,s.jsx)(n.EYj,{children:null==(i=a.original.host)?void 0:i.location.countryCode})]})},meta:{className:"justify-end",...M}},{id:"hostUsable",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,className:"justify-start",children:"Host Usable"})},accessorKey:"hostUsable",cell:e=>{var t,l,i,o;let{row:c}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(n.m_M,{content:(null==(t=c.original.host)?void 0:t.usable)?"host is usable":"host is unusable",children:(null==(l=c.original.host)?void 0:l.usable)?(0,s.jsx)(a.Voo,{className:"text-green-500"}):(0,s.jsx)(a.g$$,{className:"text-red-500"})}),(0,s.jsx)(r,{usable:(null==(i=c.original.host)?void 0:i.usable)||!1,usability:null==(o=c.original.host)?void 0:o.usability})]})},meta:{className:"justify-start",...R}},{id:"hostBlocked",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Host Blocked"})},accessorKey:"host.blocked",cell:e=>{var t;let{row:l}=e,i=null==(t=l.original.host)?void 0:t.blocked;return(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(n.m_M,{content:i?"host is blocked":"host is not blocked",children:i?(0,s.jsx)(a.g$$,{className:"text-red-500"}):(0,s.jsx)(a.Voo,{className:"text-neutral-500"})})})},meta:{className:"justify-end",...$}},{id:"formation",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Formation"})},accessorKey:"formation",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.formation})},meta:{className:"justify-end",...V}},{id:"proofHeight",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Proof Height"})},accessorKey:"proofHeight",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.proofHeight})},meta:{className:"justify-end",...M}},{id:"expirationHeight",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Expiration Height"})},accessorKey:"expirationHeight",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.expirationHeight})},meta:{className:"justify-end",...V}},{id:"nextPrune",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Next Prune"})},accessorKey:"nextPrune",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.nextPrune})},meta:{className:"justify-end",...V}},{id:"lastBroadcastAttempt",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Last Broadcast Attempt"})},accessorKey:"lastBroadcastAttempt",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.lastBroadcastAttempt})},meta:{className:"justify-end",...V}},{id:"capacity",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Capacity"})},accessorKey:"size",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.capacity})},meta:{className:"justify-end",...M}},{id:"dataSize",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Data Size"})},accessorKey:"capacity",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.dataSize})},meta:{className:"justify-end",...M}},{id:"spendingSectorRoots",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Spend Sector Roots"})},accessorKey:"spending.sectorRoots",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.spendSectorRoots})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.spending.sectorRoots,s=t.original.sortingFields.spending.sectorRoots;return l.minus(s).toNumber()}},{id:"spendAppendSector",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Spend Append Sector"})},accessorKey:"spending.appendSector",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.spendAppendSector})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.spending.appendSector,s=t.original.sortingFields.spending.appendSector;return l.minus(s).toNumber()}},{id:"spendFreeSector",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Spend Free Sector"})},accessorKey:"spending.freeSector",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.spendFreeSector})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.spending.freeSector,s=t.original.sortingFields.spending.freeSector;return l.minus(s).toNumber()}},{id:"spendFundAccount",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Spend Fund Account"})},accessorKey:"spending.fundAccount",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.spendFundAccount})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.spending.fundAccount,s=t.original.sortingFields.spending.fundAccount;return l.minus(s).toNumber()}},{id:"initialAllowance",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Initial Allowance"})},accessorKey:"initialAllowance",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.initialAllowance})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.spending.sectorRoots,s=t.original.sortingFields.spending.sectorRoots;return l.minus(s).toNumber()}},{id:"remainingAllowance",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Remaining Allowance"})},accessorKey:"remainingAllowance",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.remainingAllowance})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.remainingAllowance,s=t.original.sortingFields.remainingAllowance;return l.minus(s).toNumber()}},{id:"totalCollateral",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Total Collateral"})},accessorKey:"totalCollateral",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.totalCollateral})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.totalCollateral,s=t.original.sortingFields.totalCollateral;return l.minus(s).toNumber()}},{id:"usedCollateral",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Used Collateral"})},accessorKey:"usedCollateral",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.usedCollateral})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.usedCollateral,s=t.original.sortingFields.usedCollateral;return l.minus(s).toNumber()}},{id:"contractPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Contract Price"})},accessorKey:"contractPrice",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.contractPrice})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.contractPrice,s=t.original.sortingFields.contractPrice;return l.minus(s).toNumber()}},{id:"minerFee",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Miner Fee"})},accessorKey:"minerFee",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.Pni,{...t.original.displayFields.minerFee})},meta:{className:"justify-end",...M},sortingFn:(e,t)=>{let l=e.original.sortingFields.minerFee,s=t.original.sortingFields.minerFee;return l.minus(s).toNumber()}},{id:"revisionNumber",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Revision Number"})},accessorKey:"revisionNumber",cell:e=>{let{row:t}=e;return(0,s.jsx)(n.EYj,{children:t.original.displayFields.revisionNumber})},meta:{className:"justify-end",...M}},{id:"renewedFrom",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Renewed From"})},accessorKey:"renewedFrom",cell:e=>{let{row:t}=e,l=t.original.displayFields.renewedFrom;return"-"===l?(0,s.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,s.jsx)(n.EYj,{children:l})},meta:{className:"justify-end",...Y}},{id:"renewedTo",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(k,{table:t,column:l,children:"Renewed To"})},accessorKey:"renewedTo",cell:e=>{let{row:t}=e,l=t.original.displayFields.renewedTo;return"-"===l?(0,s.jsx)(n.EYj,{color:"verySubtle",children:"-"}):(0,s.jsx)(n.EYj,{children:l})},meta:{className:"justify-end",...Y}}];function W(e){let{variant:t}=e;return(0,s.jsx)(n.Exy,{size:"small",variant:"good"===t?"green":"red",children:"good"===t?"Good":"Bad"})}function T(e){let{value:t}=e,l="gray";return"active"===t?l="amber":"failed"===t?l="red":"complete"===t&&(l="gray"),(0,s.jsx)(n.Exy,{size:"small",variant:l,children:t})}function _(){var e;let t=(0,g.P3)(),l=(0,n.XDV)({api:(null==(e=t.data)?void 0:e.network)==="mainnet"?"https://api.siascan.com":"https://api.siascan.com/zen",params:{sortBy:"storage_price",dir:"asc",limit:1e3},payload:{online:!0}}),s=(0,g.n)({params:{limit:500}}),a=(0,g.zE)({params:{limit:500}}),r=(0,n.bK1)(),o=(0,i.useMemo)(()=>r.currency&&r.rate&&{currency:r.currency,rate:r.rate},[r.currency,r.rate]),{settings:c}=(0,j.IQ)();return(0,i.useMemo)(()=>{var e;return(null==(e=s.data)?void 0:e.map(e=>{var t,s,i;let r=null==(t=a.data)?void 0:t.find(t=>t.publicKey===e.hostKey),u=null==(i=l.data)||null==(s=i.find(t=>t.publicKey===e.hostKey))?void 0:s.location;return function(e,t){var l,s,i,a;let{location:r,host:o,exchange:c,currencyDisplay:u}=t;return{...e,id:e.id,host:o?v(o,{location:r,exchange:c,currencyDisplay:u}):void 0,exchange:c,sortingFields:{spending:{appendSector:new f.g(e.spending.appendSector),freeSector:new f.g(e.spending.freeSector),fundAccount:new f.g(e.spending.fundAccount),sectorRoots:new f.g(e.spending.sectorRoots)},remainingAllowance:new f.g(e.remainingAllowance),totalCollateral:new f.g(e.totalCollateral),contractPrice:new f.g(e.contractPrice),minerFee:new f.g(e.minerFee),usedCollateral:new f.g(e.usedCollateral),initialAllowance:new f.g(e.initialAllowance)},displayFields:(l=e,s=r,i=u,a=c,{contractPrice:(0,n.vty)({sc:new f.g(l.contractPrice),currencyDisplay:i,exchange:a}),minerFee:(0,n.vty)({sc:new f.g(l.minerFee),currencyDisplay:i,exchange:a}),usedCollateral:(0,n.vty)({sc:new f.g(l.usedCollateral),currencyDisplay:i,exchange:a}),initialAllowance:(0,n.vty)({sc:new f.g(l.initialAllowance),currencyDisplay:i,exchange:a}),remainingAllowance:(0,n.vty)({sc:new f.g(l.remainingAllowance),currencyDisplay:i,exchange:a}),totalCollateral:(0,n.vty)({sc:new f.g(l.totalCollateral),currencyDisplay:i,exchange:a}),spendSectorRoots:(0,n.vty)({sc:new f.g(l.spending.sectorRoots),currencyDisplay:i,exchange:a}),spendAppendSector:(0,n.vty)({sc:new f.g(l.spending.appendSector),currencyDisplay:i,exchange:a}),spendFreeSector:(0,n.vty)({sc:new f.g(l.spending.freeSector),currencyDisplay:i,exchange:a}),spendFundAccount:(0,n.vty)({sc:new f.g(l.spending.fundAccount),currencyDisplay:i,exchange:a}),countryFlag:(0,h.y$)(null==s?void 0:s.countryCode),countryName:(0,h.qQ)(null==s?void 0:s.countryCode),formation:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.formation)),proofHeight:l.proofHeight.toLocaleString(),expirationHeight:l.expirationHeight.toLocaleString(),nextPrune:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.nextPrune)),lastBroadcastAttempt:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.lastBroadcastAttempt)),capacity:(0,h.p6)(l.size),dataSize:(0,h.p6)(l.capacity),renewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedFrom?"-":l.renewedFrom,renewedTo:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedTo?"-":l.renewedTo,revisionNumber:l.revisionNumber.toLocaleString()})}}(e,{host:r,location:u,currencyDisplay:c.currencyDisplay,exchange:o})}))||[]},[s.data,o,l.data,a.data,c.currencyDisplay])}function Z(){var e,t,l;let{selectedId:a,setSelectedId:o}=(0,n.i$h)("contractList"),c=_(),u=(0,i.useMemo)(()=>c.find(e=>e.id===a),[a,c]),g=(0,i.useMemo)(()=>{var e,t,l;return u?{id:u.hostKey,publicKey:u.hostKey,location:null==(e=u.host)?void 0:e.location,v2Settings:null==(t=u.host)?void 0:t.settings,usable:null==(l=u.host)?void 0:l.usable}:null},[u]);return u?(0,s.jsxs)(m,{onClose:()=>o(void 0),heading:(0,s.jsxs)(n.EYj,{size:"18",weight:"medium",ellipsis:!0,children:["Contract: ",(0,n.xvE)(null==u?void 0:u.id,24)]}),children:[(0,s.jsx)(n.hz$,{hosts:g?[g]:[],activeHost:null,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"}),(0,s.jsx)(b,{heading:"Info",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(d,{label:"State",value:(0,s.jsx)(T,{value:u.state})}),(0,s.jsx)(d,{label:"Status",value:(0,s.jsx)(W,{variant:u.good?"good":"bad"})}),(0,s.jsx)(d,{label:"Host public key",value:(0,s.jsx)(n.Zjd,{value:u.hostKey,type:"hostPublicKey"})}),null==(e=u.host)?void 0:e.addresses.map(e=>(0,s.jsx)(d,{label:e.protocol,value:(0,s.jsx)(n.Zjd,{value:e.address,maxLength:24})},e.address+e.protocol))]})}),(0,s.jsx)(b,{heading:"Usability",children:(0,s.jsx)(r,{usable:(null==(t=u.host)?void 0:t.usable)||!1,usability:null==(l=u.host)?void 0:l.usability,className:"w-full overflow-hidden flex-wrap"})})]}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(n.EYj,{color:"subtle",children:"Contract not found"})})})}function q(e){let{table:t}=e,{setSelectedId:l}=(0,n.i$h)("contractList"),a=(0,i.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]),r=F({hosts:a.map(e=>{var t,l,s;return{...e.original,settings:null==(t=e.original.host)?void 0:t.settings,usable:null==(l=e.original.host)?void 0:l.usable,location:null==(s=e.original.host)?void 0:s.location}})});return(0,s.jsx)(m,{heading:(0,s.jsx)(n.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected contracts (".concat(a.length,")"):t.isFiltered?"Filtered contracts (".concat(a.length,")"):"All contracts"}),customCloseAction:t.isSelection?(0,s.jsx)(n.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,children:(0,s.jsx)(n.hz$,{hosts:r,activeHost:null,onHostMapClick:e=>l(e),scale:180,mapClassName:"-mt-[20px]"})})}function O(){let e=(0,L.useSearchParams)(),t=(0,L.useRouter)(),l=(0,L.usePathname)(),a=e.get("view"),{offset:r,limit:o,setOffset:c,setLimit:u,selectedId:d,setSelectedId:m,columnFilters:g,setColumnFilters:h,columnSorts:x,setColumnSorts:j}=(0,n.i$h)("contractList"),p=(0,i.useCallback)(e=>{m(e)},[m]),y=_(),b=(0,n.uIQ)({data:y,columns:B,columnFilters:g,setColumnFilters:h,columnSorts:x,setColumnSorts:j,offset:r,limit:o,onRowClick:p,setOffset:c,setLimit:u});return(0,s.jsx)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:(0,s.jsxs)("div",{className:"flex flex-row flex-1 overflow-hidden w-full",children:[(0,s.jsx)("div",{className:"flex-1 h-full overflow-hidden p-4",children:(0,s.jsx)(n.bQt,{...b,heading:(0,s.jsx)(U,{value:a,onValueChange:s=>{let n=new URLSearchParams(Array.from(e.entries()));n.set("view",s),t.push("".concat(l,"?").concat(n.toString()))}})})}),(0,s.jsx)("div",{className:"py-4 pr-4",children:d?(0,s.jsx)(Z,{}):(0,s.jsx)(q,{table:b})})]})})}function Q(){let e=(0,L.useSearchParams)(),t=e.get("view"),l=(0,L.useRouter)(),n=(0,L.usePathname)();return((0,i.useEffect)(()=>{if(!t){let t=new URLSearchParams(Array.from(e.entries()));t.set("view","hosts"),l.replace("".concat(n,"?").concat(t.toString()))}},[t,e,n,l]),t)?(0,s.jsxs)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:["hosts"===t&&(0,s.jsx)(I,{}),"contracts"===t&&(0,s.jsx)(O,{})]}):null}function X(){return(0,s.jsx)(Q,{})}}},e=>{e.O(0,[9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,7164,2384,587,1902,7358],()=>e(e.s=46217)),_N_E=e.O()}]);