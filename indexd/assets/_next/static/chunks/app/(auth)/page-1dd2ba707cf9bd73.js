(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2670],{46217:(e,t,l)=>{Promise.resolve().then(l.bind(l,47718))},47718:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>ev});var s=l(54568),a=l(12655),n=l(7620),i=l(3813);function r(e){let{usable:t,usability:l,className:i,showExpanded:r=!1}=e,o=(0,n.useMemo)(()=>l&&Object.keys(l).filter(e=>!l[e]).map(e=>(0,s.jsx)(c,{status:"unusable",name:d(e)},e)),[l]),u=(0,n.useMemo)(()=>l&&Object.keys(l).filter(e=>l[e]).map(e=>(0,s.jsx)(c,{status:"usable",name:d(e)},e)),[l]);return(0,s.jsx)("div",{className:(0,a.cn)("flex gap-1",i),children:t&&!r?(0,s.jsx)(c,{status:"usable",name:"usable"}):(0,s.jsxs)(s.Fragment,{children:[o,u]})})}function c(e){let{status:t,name:l}=e;return(0,s.jsxs)(a.Exy,{size:"small",className:"flex items-center gap-0.5",children:[(0,s.jsx)(o,{status:t,name:l}),l]})}function o(e){let{status:t,name:l}=e,r=(0,n.useMemo)(()=>({usable:"".concat(l," is usable"),warning:"".concat(l," is almost unusable"),unusable:"".concat(l," is unusable")}),[l]);return(0,s.jsx)(a.m_M,{content:r[t],children:"usable"===t?(0,s.jsx)(i.d5v,{className:"text-green-600 scale-75"}):"warning"===t?(0,s.jsx)(i.UvW,{className:"text-amber-600 scale-75"}):(0,s.jsx)(i.mC5,{className:"text-red-600 scale-75"})})}function d(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}function u(e){let{label:t,value:l,variant:n="row"}=e;return"column"===n?(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(a.EYj,{color:"subtle",className:"truncate",children:t}),(0,s.jsx)(a.EYj,{color:"subtle",children:l})]}):(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,s.jsx)(a.EYj,{color:"subtle",className:"truncate",children:t})}),(0,s.jsx)("div",{className:"flex-1 flex justify-end items-center",children:(0,s.jsx)(a.EYj,{color:"subtle",className:"truncate",children:l})})]})}function m(e){let{customCloseAction:t,actions:l,onClose:n,children:r,heading:c}=e;return(0,s.jsxs)(a.Zkm,{className:"relative h-full w-full",children:[(0,s.jsxs)("div",{className:"h-[45px] z-10 flex items-center justify-between gap-4 bg-white dark:bg-graydark-200 py-2 px-4 border-b border-gray-200 dark:border-graydark-400",children:[c,t||(n?(0,s.jsx)(a.$nd,{className:"p-2 rounded hover:bg-neutral-100 dark:hover:bg-neutral-800 focus:outline-none focus:ring-2 focus:ring-blue-500 z-10",onClick:n,"aria-label":"Close drawer",variant:"ghost",icon:"hover",size:"none",children:(0,s.jsx)(i.sn9,{className:"w-5 h-5 text-neutral-500 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100"})}):null)]}),l&&(0,s.jsx)("div",{className:"z-10 flex items-center justify-start gap-1 bg-white dark:bg-graydark-200 py-1.5 px-2",children:l}),(0,s.jsx)("div",{className:"p-4 h-full w-full",children:r})]})}var j=l(67814),h=l(93727),x=l(11832),y=l(26109);function g(e){let{hosts:t}=e,l=(0,j.Aq)(),i=(0,y.ej)(),r=(0,n.useCallback)(async()=>{let{error:e}=await l.put({payload:{hostKeys:t.map(e=>"publicKey"in e?e.publicKey:e.original.publicKey),reason:"blocked by user"}});e?(0,a.el3)({title:"Error blocking hosts",body:e}):(0,a.VE1)({title:"Blocked ".concat((0,h.td)(t.length,"host"))}),await i(e=>e.startsWith(x.qQ))},[t,l,i]);return(0,s.jsx)(a.$nd,{onClick:r,children:"Block"})}function p(e){let{hosts:t}=e,l=(0,j.SK)(),i=(0,y.ej)(),r=(0,n.useCallback)(async()=>{await (0,a.qBJ)(t.map(e=>l.delete({params:{hostkey:"publicKey"in e?e.publicKey:e.original.publicKey}})),{toastError:e=>{let{successCount:t,errorCount:l,totalCount:s}=e;return{title:"Unblocked ".concat((0,h.td)(t,"host")),body:"Error unblocking ".concat(l,"/").concat(s," of total hosts.")}},toastSuccess:e=>{let{totalCount:t}=e;return{title:"Unblocked ".concat((0,h.td)(t,"host"))}}}),await i(e=>e.startsWith(x.qQ))},[t,l,i]);return(0,s.jsx)(a.$nd,{onClick:r,children:"Unblock"})}function f(e){let{heading:t,children:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.wvv,{className:"mt-4 mb-2"}),(0,s.jsx)(a.EYj,{size:"16",weight:"medium",className:"mb-2",children:t}),l]})}var b=l(37653);function v(e,t){let{location:l,currencyDisplay:s,exchange:n}=t;return{...e,id:e.publicKey,usable:Object.values(e.usability).every(e=>e),location:l||{countryCode:"unknown",latitude:0,longitude:0},exchange:n,displayFields:function(e,t,l,s){var n;let i=(0,h.g9)(e.settings.remainingStorage),r=(0,h._S)(10),c=i.eq(0)?"unusable":i.lt(r)?"warning":"usable";return{uptime:"".concat((100*e.recentUptime).toFixed(1),"%"),totalStorage:(0,h.p6)((0,h.g9)(e.settings.totalStorage)),remainingStorage:(0,h.p6)(i),remainingStorageUsability:c,storagePrice:(0,a.vty)({sc:(0,h.Ri)({price:e.settings.prices.storagePrice}),currencyDisplay:l,exchange:s}),ingressPrice:(0,a.vty)({sc:(0,h.gW)({price:e.settings.prices.ingressPrice}),currencyDisplay:l,exchange:s}),egressPrice:(0,a.vty)({sc:(0,h.LT)({price:e.settings.prices.egressPrice}),currencyDisplay:l,exchange:s}),freeSectorPrice:(0,a.vty)({sc:new b.g(e.settings.prices.freeSectorPrice),currencyDisplay:l,exchange:s}),maxCollateral:(0,a.vty)({sc:new b.g(e.settings.prices.collateral),currencyDisplay:l,exchange:s}),maxContractDuration:"".concat((0,h.bu)(e.settings.maxContractDuration).toFixed(1)," weeks"),protocolVersion:"string"==typeof(n=e.settings).protocolVersion?n.protocolVersion.slice(1):"v".concat(n.protocolVersion[0],".").concat(n.protocolVersion[1],".").concat(n.protocolVersion[2]),priceValidity:new Date(e.settings.prices.validUntil).toLocaleString(),release:e.settings.release,countryName:(0,h.qQ)(null==t?void 0:t.countryCode),countryFlag:(0,h.y$)(null==t?void 0:t.countryCode)}}(e,l,s,n)}}function N(e){let t=(0,a.FIE)({disabled:!e,params:{id:e||""}}),l=(0,j.qA)({disabled:!e,params:{hostkey:e||""}}),s=(0,a.sAn)(),{settings:i}=(0,y.IQ)();return(0,n.useMemo)(()=>{var e;if(l.data)return v(l.data,{location:null==(e=t.data)?void 0:e.location,currencyDisplay:i.currencyDisplay,exchange:s.currency&&s.rate&&{currency:s.currency,rate:s.rate}})},[l.data,t.data,s.currency,s.rate,i.currencyDisplay])}function S(){let e=(0,a.i$h)("hostList"),[t,l]=(0,a.QPA)("hostsPanelId");return{...e,panelId:t,setPanelId:l}}function C(){var e,t;let{panelId:l,setPanelId:i}=S(),c=N(l),o=(0,n.useMemo)(()=>c&&"unknown"!==c.location.countryCode?{id:c.id,publicKey:c.publicKey,location:c.location,v2Settings:c.settings,usable:c.usable}:null,[c]);return c?(0,s.jsxs)(m,{onClose:()=>i(void 0),heading:(0,s.jsxs)(a.EYj,{size:"18",weight:"medium",ellipsis:!0,children:[(null==c||null==(e=c.location)?void 0:e.countryCode)?(0,s.jsx)("span",{className:"pr-1",children:(0,s.jsx)(a.J93,{countryCode:null==c||null==(t=c.location)?void 0:t.countryCode})}):null,null==c?void 0:c.addresses[0].address]}),actions:c.blocked?(0,s.jsx)(p,{hosts:[c]}):(0,s.jsx)(g,{hosts:[c]}),children:[(0,s.jsx)(a.hz$,{hosts:o?[o]:[],activeHost:o,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"},l),(0,s.jsx)(f,{heading:"Addresses",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.addresses.map(e=>(0,s.jsx)(u,{label:e.protocol,value:(0,s.jsx)(a.Zjd,{value:e.address,maxLength:24})},e.address+e.protocol))})}),(0,s.jsx)(f,{heading:"Usability",children:(0,s.jsx)(r,{usable:c.usable,usability:c.usability,className:"w-full overflow-hidden flex-wrap"})})]}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Host not found"})})})}function w(e){let{hosts:t}=e,l=(0,n.useDeferredValue)(t);return(0,n.useMemo)(()=>l.length>100?Object.values(l.reduce((e,t)=>{var l,s,a,n;let i=null==(l=t.location)?void 0:l.countryCode;return i&&"unknown"!==i&&t.location&&(e[i]?e[i].groupCount=(e[i].groupCount||0)+1:e[i]={type:"group",id:t.id,location:{latitude:null==(s=t.location)?void 0:s.latitude,longitude:null==(a=t.location)?void 0:a.longitude,countryCode:null==(n=t.location)?void 0:n.countryCode},groupCount:1}),e},{})):l.map(e=>e.location&&"unknown"!==e.location.countryCode?{id:e.id,publicKey:e.id,location:{latitude:e.location.latitude,longitude:e.location.longitude,countryCode:e.location.countryCode},v2Settings:e.settings,usable:e.usable}:null).filter(e=>null!==e),[l])}function F(e){let{table:t}=e,{setPanelId:l}=S(),i=(0,n.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]),r=w({hosts:i.map(e=>e.original)});return(0,s.jsx)(m,{customCloseAction:t.isSelection?(0,s.jsx)(a.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,actions:t.isSelection?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g,{hosts:i}),(0,s.jsx)(p,{hosts:i})]}):null,heading:(0,s.jsx)(a.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected hosts (".concat(i.length,")"):t.isFiltered?"Filtered hosts (".concat(i.length,")"):"All hosts"}),children:(0,s.jsx)(a.hz$,{hosts:r,activeHost:null,onHostMapClick:e=>l(e),scale:180,mapClassName:"-mt-[20px]"})})}function P(e){let{columnId:t,table:l,children:r}=e,[c,o]=(0,n.useState)(!1),d=l.getColumn(t),u=null==d?void 0:d.getIsFiltered();return(null==d?void 0:d.getCanFilter())?(0,s.jsx)(a.AMh,{trigger:(0,s.jsx)(a.$nd,{variant:"ghost",size:"none",icon:u?"contrast":"verySubtle",children:(0,s.jsx)(i.uG0,{})}),rootProps:{open:c,onOpenChange:o},contentProps:{align:"end",className:"w-64"},children:(0,s.jsxs)("div",{className:"p-3 space-y-3",children:[r,u&&(0,s.jsx)(a.$nd,{variant:"ghost",size:"small",onClick:()=>{d.setFilterValue(void 0),o(!1)},className:"w-full",children:"Clear Filter"})]})}):null}function k(e){let{columnId:t,table:l}=e,n=l.getColumn(t),r=null==n?void 0:n.getIsSorted();return(null==n?void 0:n.getCanSort())?(0,s.jsx)(a.$nd,{variant:"ghost",size:"none",icon:r?"contrast":"verySubtle",onClick:()=>{"asc"===r?null==n||n.toggleSorting(!0):"desc"===r?null==n||n.clearSorting():null==n||n.toggleSorting(!1)},children:"asc"===r?(0,s.jsx)(i.cgo,{}):"desc"===r?(0,s.jsx)(i.zYC,{}):(0,s.jsx)(i.nIb,{})}):null}function K(e){let{children:t,table:l,column:n,filter:i,sortable:r,className:c}=e;return(0,s.jsxs)("div",{className:(0,a.cn)("flex items-center gap-0.5 justify-end",c),children:[(0,s.jsx)(a.EYj,{className:"truncate",children:t}),l&&n&&i&&(0,s.jsx)(P,{columnId:n.id,table:l,children:i}),l&&n&&r&&(0,s.jsx)(k,{columnId:n.id,table:l})]})}function E(e){var t,l;let{table:n,id:i,labelPositive:r,labelNegative:c,columnFilters:o,setColumnFilters:d}=e,u=null==n||null==(t=n.getColumn(i))?void 0:t.columnDef.meta,m=r||(null==u?void 0:u.filterLabelPositive)||"Yes",j=c||(null==u?void 0:u.filterLabelNegative)||"No",h=null==(l=o.find(e=>e.id===i))?void 0:l.value;return(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsx)(a.l6P,{"aria-label":"".concat(i," filter"),value:void 0===h?"":String(h),onChange:e=>{if(""===e.target.value)return void d(e=>e.filter(e=>e.id!==i));let t="true"===e.target.value;d(e=>{let l=e.findIndex(e=>e.id===i);return -1!==l?e[l].value=t:e.push({id:i,value:t}),e})},children:[{value:"",label:"All"},{value:"true",label:m},{value:"false",label:j}].map(e=>(0,s.jsx)("option",{value:String(e.value),children:e.label},e.label))})})}function A(){let{columnFilters:e,setColumnFilters:t}=S();return(0,s.jsx)(E,{id:"usable",labelPositive:"Usable",labelNegative:"Unusable",columnFilters:e,setColumnFilters:t})}function Y(){let{columnFilters:e,setColumnFilters:t}=S();return(0,s.jsx)(E,{id:"blocked",labelPositive:"Blocked",labelNegative:"Not Blocked",columnFilters:e,setColumnFilters:t})}let U=()=>({id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"h-full flex items-center justify-start",children:(0,s.jsx)(a.Sc0,{checked:!!t.getIsAllRowsSelected()||!!t.getIsSomeRowsSelected()&&"indeterminate",onCheckedChange:e=>{t.getToggleAllRowsSelectedHandler()({target:{checked:!0===e}})}})})},cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"flex items-center justify-center",children:(0,s.jsx)(a.Sc0,{checked:t.getIsSelected(),disabled:!t.getCanSelect(),onCheckedChange:e=>{t.getToggleSelectedHandler()({target:{checked:!0===e}})}})})},meta:{stopPropagation:!0,width:35}}),D={minWidth:100,maxWidth:100},R={minWidth:200,maxWidth:220},L={minWidth:140,maxWidth:650},M=[U(),{id:"publicKey",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Public Key"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:t(),type:"hostPublicKey"})},meta:{...L}},{id:"usable",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",filter:(0,s.jsx)(A,{}),children:"Usable"})},accessorKey:"usable",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(a.m_M,{content:t.original.usable?"host is usable":"host is unusable",children:t.original.usable?(0,s.jsx)(i.Voo,{className:"text-green-500"}):(0,s.jsx)(i.g$$,{className:"text-red-500"})}),(0,s.jsx)(r,{usable:t.original.usable,usability:t.original.usability})]})},meta:{minWidth:200,maxWidth:1500,filterLabelPositive:"Usable",filterLabelNegative:"Unusable"}},{id:"blocked",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",filter:(0,s.jsx)(Y,{}),children:"Blocked"})},accessorKey:"blocked",cell:e=>{let{row:t}=e,l=t.original.blocked;return(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(a.m_M,{content:l?"host is blocked":"host is not blocked",children:l?(0,s.jsx)(i.g$$,{className:"text-red-500"}):(0,s.jsx)(i.Voo,{className:"text-neutral-300 dark:text-neutral-500"})}),l&&(0,s.jsx)(a.Exy,{size:"small",className:"ml-1",children:t.original.blockedReason})]})},meta:{className:"justify-start",minWidth:140,maxWidth:160,filterLabelPositive:"Blocked",filterLabelNegative:"Not Blocked"}},{id:"acceptingContracts",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Accepting Contracts"})},accessorKey:"settings.acceptingContracts",cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,s.jsx)(o,{status:t.original.usability.acceptingContracts?"usable":"unusable",name:"accepting contracts"})})},meta:{className:"justify-end",...D}},{id:"uptime",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Uptime"})},accessorKey:"recentUptime",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.uptime?"usable":"unusable",name:"recent uptime"}),(0,s.jsx)(a.EYj,{children:t.original.displayFields.uptime})]})},meta:{className:"justify-end",...D}},{id:"location",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Location"})},accessorKey:"location.countryCode",cell:e=>{let{row:t}=e;return"unknown"===t.original.location.countryCode?(0,s.jsx)("div",{className:"py-1",children:(0,s.jsx)(a.EYj,{color:"verySubtle",children:"-"})}):(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)("span",{role:"img","aria-label":t.original.displayFields.countryName,children:t.original.displayFields.countryFlag}),(0,s.jsx)(a.EYj,{className:"ml-1",children:t.original.location.countryCode})]})},meta:{className:"justify-end",...D}},{id:"totalStorage",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Total Storage"})},accessorKey:"settings.totalStorage",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.totalStorage})},meta:{className:"justify-end",...D}},{id:"remainingStorage",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Remaining Storage"})},accessorKey:"settings.remainingStorage",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.displayFields.remainingStorageUsability,name:"storage"}),(0,s.jsx)(a.EYj,{children:t.original.displayFields.remainingStorage})]})},meta:{className:"justify-end",...D}},{id:"storagePrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Price Storage"})},accessorKey:"settings.prices.storagePrice",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.storagePrice?"usable":"unusable",name:"storage price"}),(0,s.jsx)(a.Pni,{...t.original.displayFields.storagePrice})]})},meta:{className:"justify-end",...D}},{id:"ingressPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Ingress/TB"})},accessorKey:"settings.prices.ingressPrice",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.ingressPrice?"usable":"unusable",name:"ingress price"}),(0,s.jsx)(a.Pni,{...t.original.displayFields.ingressPrice})]})},meta:{className:"justify-end",...D}},{id:"egressPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Egress/TB"})},accessorKey:"settings.prices.egressPrice",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.egressPrice?"usable":"unusable",name:"egress price"}),(0,s.jsx)(a.Pni,{...t.original.displayFields.egressPrice})]})},meta:{className:"justify-end",...D}},{id:"freeSectorPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Free Sector Price"})},accessorKey:"settings.prices.freeSectorPrice",cell:e=>{let{row:t,getValue:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.freeSectorPrice?"usable":"unusable",name:"free sector price"}),(0,s.jsx)(a.Pni,{...t.original.displayFields.freeSectorPrice})]})},meta:{className:"justify-end",...D}},{id:"maxContractDuration",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Max Contract Duration"})},accessorKey:"settings.maxContractDuration",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.maxContractDuration?"usable":"unusable",name:"max contract duration"}),(0,s.jsx)(a.EYj,{children:t.original.displayFields.maxContractDuration})]})},meta:{className:"justify-end",minWidth:150,maxWidth:150}},{id:"maxCollateral",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Max Collateral"})},accessorKey:"settings.maxCollateral",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.maxCollateral?"usable":"unusable",name:"max collateral"}),(0,s.jsx)(a.Pni,{...t.original.displayFields.maxCollateral})]})},meta:{className:"justify-end",...D}},{id:"protocolVersion",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Protocol Version"})},accessorKey:"settings.protocolVersion",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.protocolVersion?"usable":"unusable",name:"protocol version"}),(0,s.jsx)(a.EYj,{children:t.original.displayFields.protocolVersion})]})},meta:{className:"justify-end",...D}},{id:"priceValidity",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Price Validity"})},accessorKey:"settings.prices.validUntil",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,s.jsx)(o,{status:t.original.usability.priceValidity?"usable":"unusable",name:"price validity"}),(0,s.jsx)(a.EYj,{children:t.original.displayFields.priceValidity})]})},meta:{className:"justify-end",...R}},{id:"release",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Release"})},accessorKey:"settings.release",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.release})},meta:{className:"justify-end",minWidth:160,maxWidth:160}}],z=[{value:"hosts",label:"Hosts"},{value:"contracts",label:"Contracts"},{value:"accounts",label:"Accounts"},{value:"alerts",label:"Alerts"},{value:"keys",label:"Connect Keys"}];function I(e){let{value:t,onValueChange:l,className:n}=e;return(0,s.jsx)(a.l6P,{value:t,onChange:e=>l(e.target.value),className:n,"aria-label":"Select data view",children:z.map(e=>(0,s.jsx)(a.c$x,{value:e.value,children:e.label},e.value))})}var H=l(62942);function V(){return(0,a.KVY)({params:{sortBy:"storage_price",dir:"asc",limit:1e3},payload:{online:!0}})}var $=l(69080);function T(e){let{table:t,panel:l}=e;return(0,s.jsxs)($.YZ,{autoSaveId:"data-layout",direction:"horizontal",children:[(0,s.jsx)($.Zk,{maxSize:75,className:"py-4 pl-4 pr-2",children:t}),(0,s.jsx)($.TW,{}),(0,s.jsx)($.Zk,{defaultSize:25,minSize:25,maxSize:50,className:"py-4 pl-2 pr-4",children:l})]})}function Q(){let e=(0,H.useSearchParams)(),t=(0,H.useRouter)(),l=(0,H.usePathname)(),i=e.get("view"),{panelId:r,setPanelId:c,columnFilters:o,setColumnFilters:d,columnSorts:u,setColumnSorts:m,offset:h,limit:x,setOffset:g,setLimit:p}=S(),f=(0,n.useCallback)(e=>{c(e)},[c]),b=function(){let e=V(),{columnFilters:t,offset:l,limit:s}=S(),i=(0,n.useMemo)(()=>{var e,a,n;let i={offset:l,limit:s},r=null==(e=t.find(e=>"usable"===e.id))?void 0:e.value;void 0!==r&&(i.usable=r);let c=null==(a=t.find(e=>"blocked"===e.id))?void 0:a.value;void 0!==c&&(i.blocked=c);let o=null==(n=t.find(e=>"activecontracts"===e.id))?void 0:n.value;return void 0!==o&&(i.activecontracts=o),i},[t,l,s]),r=(0,j.As)({params:i}),c=(0,a.sAn)(),{settings:o}=(0,y.IQ)();return(0,n.useMemo)(()=>{var t;return(null==(t=r.data)?void 0:t.map(t=>{var l,s;let a=null==(s=e.data)||null==(l=s.find(e=>e.publicKey===t.publicKey))?void 0:l.location;return v(t,{location:a,currencyDisplay:o.currencyDisplay,exchange:c.currency&&c.rate&&{currency:c.currency,rate:c.rate}})}))||[]},[r.data,e.data,c.currency,c.rate,o.currencyDisplay])}(),N=(0,a.uIQ)({data:b,columns:M,columnFilters:o,columnSorts:u,setColumnSorts:m,setColumnFilters:d,offset:h,limit:x,onRowClick:f,setOffset:g,setLimit:p});return(0,s.jsx)(T,{table:(0,s.jsx)(a.bQt,{...N,heading:(0,s.jsx)(I,{value:i,onValueChange:s=>{let a=new URLSearchParams(Array.from(e.entries()));a.set("view",s),t.push("".concat(l,"?").concat(a.toString()))}})}),panel:r?(0,s.jsx)(C,{}):(0,s.jsx)(F,{table:N})})}function B(){let e=(0,a.i$h)("contractList"),[t,l]=(0,a.QPA)("contractsPanelId");return{...e,panelId:t,setPanelId:l}}function W(){let{columnFilters:e,setColumnFilters:t}=B();return(0,s.jsx)(E,{id:"status",labelPositive:"Good",labelNegative:"Bad",columnFilters:e,setColumnFilters:t})}let Z=[U(),{id:"id",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"ID"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:t(),type:"contract"})},meta:{className:"justify-start",...L}},{id:"status",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,filter:(0,s.jsx)(W,{}),children:"Status"})},accessorKey:"good",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(_,{variant:t()?"good":"bad"})},meta:{className:"justify-end",...D,filterLabelPositive:"Status is good",filterLabelNegative:"Status is bad"}},{id:"state",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"State"})},accessorKey:"state",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(q,{value:t()})},meta:{className:"justify-end",...D}},{id:"hostPublicKey",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Host Public Key"})},accessorKey:"hostKey",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:t(),type:"hostPublicKey"})},meta:{className:"justify-start",...L}},{id:"location",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Host Location"})},accessorKey:"host.location.countryCode",cell:e=>{var t,l,n;let{row:i,getValue:r}=e;return(null==(l=i.original.host)||null==(t=l.location)?void 0:t.countryCode)==="unknown"?(0,s.jsx)("div",{className:"py-1",children:(0,s.jsx)(a.EYj,{color:"verySubtle",children:"-"})}):(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{role:"img","aria-label":i.original.displayFields.countryName,children:i.original.displayFields.countryFlag}),(0,s.jsx)(a.EYj,{children:null==(n=i.original.host)?void 0:n.location.countryCode})]})},meta:{className:"justify-end",...D}},{id:"formation",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Formation"})},accessorKey:"formation",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.formation})},meta:{className:"justify-end",...R}},{id:"proofHeight",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Proof Height"})},accessorKey:"proofHeight",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.proofHeight})},meta:{className:"justify-end",...D}},{id:"expirationHeight",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Expiration Height"})},accessorKey:"expirationHeight",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.expirationHeight})},meta:{className:"justify-end",...R}},{id:"nextPrune",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Next Prune"})},accessorKey:"nextPrune",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.nextPrune})},meta:{className:"justify-end",...R}},{id:"lastBroadcastAttempt",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Last Broadcast Attempt"})},accessorKey:"lastBroadcastAttempt",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.lastBroadcastAttempt})},meta:{className:"justify-end",...R}},{id:"capacity",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Capacity"})},accessorKey:"size",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.capacity})},meta:{className:"justify-end",...D}},{id:"dataSize",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Data Size"})},accessorKey:"capacity",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.dataSize})},meta:{className:"justify-end",...D}},{id:"spendingSectorRoots",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Spend Sector Roots"})},accessorKey:"spending.sectorRoots",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.spendSectorRoots})},meta:{className:"justify-end",...D}},{id:"spendAppendSector",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Spend Append Sector"})},accessorKey:"spending.appendSector",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.spendAppendSector})},meta:{className:"justify-end",...D}},{id:"spendFreeSector",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Spend Free Sector"})},accessorKey:"spending.freeSector",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.spendFreeSector})},meta:{className:"justify-end",...D}},{id:"spendFundAccount",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Spend Fund Account"})},accessorKey:"spending.fundAccount",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.spendFundAccount})},meta:{className:"justify-end",...D}},{id:"initialAllowance",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Initial Allowance"})},accessorKey:"initialAllowance",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.initialAllowance})},meta:{className:"justify-end",...D}},{id:"remainingAllowance",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Remaining Allowance"})},accessorKey:"remainingAllowance",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.remainingAllowance})},meta:{className:"justify-end",...D}},{id:"totalCollateral",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Total Collateral"})},accessorKey:"totalCollateral",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.totalCollateral})},meta:{className:"justify-end",...D}},{id:"usedCollateral",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Used Collateral"})},accessorKey:"usedCollateral",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.usedCollateral})},meta:{className:"justify-end",...D}},{id:"contractPrice",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Contract Price"})},accessorKey:"contractPrice",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.contractPrice})},meta:{className:"justify-end",...D}},{id:"minerFee",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Miner Fee"})},accessorKey:"minerFee",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Pni,{...t.original.displayFields.minerFee})},meta:{className:"justify-end",...D}},{id:"revisionNumber",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Revision Number"})},accessorKey:"revisionNumber",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.revisionNumber})},meta:{className:"justify-end",...D}},{id:"renewedFrom",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Renewed From"})},accessorKey:"renewedFrom",cell:e=>{let{row:t}=e,l=t.original.displayFields.renewedFrom;return"-"===l?(0,s.jsx)(a.EYj,{color:"verySubtle",children:"-"}):(0,s.jsx)(a.EYj,{children:l})},meta:{className:"justify-end",...L}},{id:"renewedTo",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,children:"Renewed To"})},accessorKey:"renewedTo",cell:e=>{let{row:t}=e,l=t.original.displayFields.renewedTo;return"-"===l?(0,s.jsx)(a.EYj,{color:"verySubtle",children:"-"}):(0,s.jsx)(a.EYj,{children:l})},meta:{className:"justify-end",...L}}];function _(e){let{variant:t}=e;return(0,s.jsx)(a.Exy,{size:"small",variant:"good"===t?"green":"red",children:"good"===t?"Good":"Bad"})}function q(e){let{value:t}=e,l="gray";return"active"===t?l="amber":"failed"===t?l="red":"complete"===t&&(l="gray"),(0,s.jsx)(a.Exy,{size:"small",variant:l,children:t})}function O(e,t){var l,s,n,i;let{host:r,exchange:c,currencyDisplay:o}=t;return{...e,id:e.id,host:r,exchange:c,displayFields:(l=e,s=null==r?void 0:r.location,n=o,i=c,{contractPrice:(0,a.vty)({sc:new b.g(l.contractPrice),currencyDisplay:n,exchange:i}),minerFee:(0,a.vty)({sc:new b.g(l.minerFee),currencyDisplay:n,exchange:i}),usedCollateral:(0,a.vty)({sc:new b.g(l.usedCollateral),currencyDisplay:n,exchange:i}),initialAllowance:(0,a.vty)({sc:new b.g(l.initialAllowance),currencyDisplay:n,exchange:i}),remainingAllowance:(0,a.vty)({sc:new b.g(l.remainingAllowance),currencyDisplay:n,exchange:i}),totalCollateral:(0,a.vty)({sc:new b.g(l.totalCollateral),currencyDisplay:n,exchange:i}),spendSectorRoots:(0,a.vty)({sc:new b.g(l.spending.sectorRoots),currencyDisplay:n,exchange:i}),spendAppendSector:(0,a.vty)({sc:new b.g(l.spending.appendSector),currencyDisplay:n,exchange:i}),spendFreeSector:(0,a.vty)({sc:new b.g(l.spending.freeSector),currencyDisplay:n,exchange:i}),spendFundAccount:(0,a.vty)({sc:new b.g(l.spending.fundAccount),currencyDisplay:n,exchange:i}),countryFlag:(0,h.y$)(null==s?void 0:s.countryCode),countryName:(0,h.qQ)(null==s?void 0:s.countryCode),formation:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.formation)),proofHeight:l.proofHeight.toLocaleString(),expirationHeight:l.expirationHeight.toLocaleString(),nextPrune:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.nextPrune)),lastBroadcastAttempt:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.lastBroadcastAttempt)),capacity:(0,h.p6)(l.size),dataSize:(0,h.p6)(l.capacity),renewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedFrom?"-":l.renewedFrom,renewedTo:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedTo?"-":l.renewedTo,revisionNumber:l.revisionNumber.toLocaleString()})}}function G(){var e;let{panelId:t,setPanelId:l}=B(),{contract:i,host:c}=function(e){var t;let l=(0,j.Lx)({disabled:!e,params:{contractid:e||""}}),s=N(null==(t=l.data)?void 0:t.hostKey),i=(0,a.sAn)(),{settings:r}=(0,y.IQ)();return{contract:(0,n.useMemo)(()=>l.data?O(l.data,{host:s,currencyDisplay:r.currencyDisplay,exchange:i.currency&&i.rate&&{currency:i.currency,rate:i.rate}}):null,[l.data,s,i.currency,i.rate,r.currencyDisplay]),host:s}}(t),o=(0,n.useMemo)(()=>{var e,t;return i?{id:i.hostKey,publicKey:i.hostKey,location:null==(e=i.host)?void 0:e.location,v2Settings:null==(t=i.host)?void 0:t.v2Settings}:null},[i]);return i?(0,s.jsxs)(m,{onClose:()=>l(void 0),heading:(0,s.jsxs)(a.EYj,{size:"18",weight:"medium",ellipsis:!0,children:["Contract: ",(0,a.xvE)(null==i?void 0:i.id,24)]}),children:[(0,s.jsx)(a.hz$,{hosts:o?[o]:[],activeHost:null,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"}),(0,s.jsx)(f,{heading:"Info",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(u,{label:"State",value:(0,s.jsx)(q,{value:i.state})}),(0,s.jsx)(u,{label:"Status",value:(0,s.jsx)(_,{variant:i.good?"good":"bad"})}),(0,s.jsx)(u,{label:"Host public key",value:(0,s.jsx)(a.Zjd,{value:i.hostKey,type:"hostPublicKey"})}),null==c||null==(e=c.addresses)?void 0:e.map(e=>(0,s.jsx)(u,{label:e.protocol,value:(0,s.jsx)(a.Zjd,{value:e.address,maxLength:24})},e.address+e.protocol))]})}),(0,s.jsx)(f,{heading:"Usability",children:(0,s.jsx)(r,{usable:(null==c?void 0:c.usable)||!1,usability:null==c?void 0:c.usability,className:"w-full overflow-hidden flex-wrap"})})]}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Contract not found"})})})}function J(e){let{table:t}=e,{setPanelId:l}=B(),i=(0,n.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]),r=w({hosts:i.map(e=>{var t,l;return{...e.original,settings:null==(t=e.original.host)?void 0:t.v2Settings,location:null==(l=e.original.host)?void 0:l.location}})});return(0,s.jsx)(m,{heading:(0,s.jsx)(a.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected contracts (".concat(i.length,")"):t.isFiltered?"Filtered contracts (".concat(i.length,")"):"All contracts"}),customCloseAction:t.isSelection?(0,s.jsx)(a.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,children:(0,s.jsx)(a.hz$,{hosts:r,activeHost:null,onHostMapClick:e=>l(e),scale:180,mapClassName:"-mt-[20px]"})})}function X(){let e=(0,H.useSearchParams)(),t=(0,H.useRouter)(),l=(0,H.usePathname)(),i=e.get("view"),{offset:r,limit:c,setOffset:o,setLimit:d,panelId:u,setPanelId:m,columnFilters:h,setColumnFilters:x,columnSorts:g,setColumnSorts:p}=B(),f=(0,n.useCallback)(e=>{m(e)},[m]),b=function(){let{columnFilters:e,offset:t,limit:l}=B(),s=(0,n.useMemo)(()=>{var s,a;let n={offset:t,limit:l},i=null==(s=e.find(e=>"status"===e.id))?void 0:s.value;void 0!==i&&(n.good=i);let r=null==(a=e.find(e=>"revisable"===e.id))?void 0:a.value;return void 0!==r&&(n.revisable=r),n},[e,t,l]),i=(0,j.Kd)({params:s}),r=V(),c=(0,a.sAn)(),{settings:o}=(0,y.IQ)();return(0,n.useMemo)(()=>{var e;return(null==(e=i.data)?void 0:e.map(e=>{var t;let l=null==(t=r.data)?void 0:t.find(t=>t.publicKey===e.hostKey);return O(e,{host:l,currencyDisplay:o.currencyDisplay,exchange:c.currency&&c.rate&&{currency:c.currency,rate:c.rate}})}))||[]},[i.data,c.rate,c.currency,r.data,o.currencyDisplay])}(),v=(0,a.uIQ)({data:b,columns:Z,columnFilters:h,setColumnFilters:x,columnSorts:g,setColumnSorts:p,offset:r,limit:c,onRowClick:f,setOffset:o,setLimit:d});return(0,s.jsx)(T,{table:(0,s.jsx)(a.bQt,{...v,heading:(0,s.jsx)(I,{value:i,onValueChange:s=>{let a=new URLSearchParams(Array.from(e.entries()));a.set("view",s),t.push("".concat(l,"?").concat(a.toString()))}})}),panel:u?(0,s.jsx)(G,{}):(0,s.jsx)(J,{table:v})})}let ee=[U(),{id:"publicKey",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Public key"})},accessorKey:"publicKey",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:t(),label:"account"})},meta:{className:"justify-start",...L}}];function et(e){let{table:t}=e,l=(0,n.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]);return(0,s.jsx)(m,{heading:(0,s.jsx)(a.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected accounts (".concat(l.length,")"):t.isFiltered?"Filtered accounts (".concat(l.length,")"):"All accounts"}),customCloseAction:t.isSelection?(0,s.jsx)(a.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,children:(0,s.jsx)(a.EYj,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on accounts yet"})})}var el=l(45028);function es(){let{limit:e,offset:t}=(0,el.M)(),l=(0,j.TK)({params:{limit:e,offset:t}});return(0,n.useMemo)(()=>{var e;return(null==(e=l.data)?void 0:e.map(e=>({id:e,publicKey:e})))||[]},[l.data])}var ea=l(6713);function en(){let{panelId:e,setPanelId:t}=(0,el.M)(),{openDialog:l}=(0,ea.sp)(),r=es(),c=(0,n.useMemo)(()=>r.find(t=>t.id===e),[e,r]);return c?(0,s.jsx)(m,{onClose:()=>t(void 0),heading:(0,s.jsxs)(a.EYj,{size:"18",weight:"medium",ellipsis:!0,children:["Account: ",(0,a.xvE)(null==c?void 0:c.publicKey,24)]}),actions:(0,s.jsxs)(a.$nd,{onClick:()=>l("accountDelete",c.id),variant:"red",children:[(0,s.jsx)(i.o67,{}),"Delete account"]}),children:(0,s.jsx)(a.EYj,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No further information on accounts yet"})}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Account not found"})})})}function ei(){let e=(0,H.useSearchParams)(),t=(0,H.useRouter)(),l=(0,H.usePathname)(),i=e.get("view"),{offset:r,limit:c,setOffset:o,setLimit:d,panelId:u,setPanelId:m,columnFilters:j,setColumnFilters:h,columnSorts:x,setColumnSorts:y}=(0,el.M)(),g=(0,n.useCallback)(e=>{m(e)},[m]),p=es(),f=(0,a.uIQ)({data:p,columns:ee,columnFilters:j,setColumnFilters:h,columnSorts:x,setColumnSorts:y,offset:r,limit:c,onRowClick:g,setOffset:o,setLimit:d});return(0,s.jsx)(T,{table:(0,s.jsx)(a.bQt,{...f,heading:(0,s.jsx)(I,{value:i,onValueChange:s=>{let a=new URLSearchParams(Array.from(e.entries()));a.set("view",s),t.push("".concat(l,"?").concat(a.toString()))}})}),panel:u?(0,s.jsx)(en,{}):(0,s.jsx)(et,{table:f})})}let er=[U(),{id:"key",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Key"})},accessorKey:"key",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:t(),label:"key"})},meta:{className:"justify-start",...L}},{id:"description",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Description"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.description})},meta:{className:"justify-start",...L}},{id:"totalUses",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Total uses"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.totalUses})},meta:{className:"justify-end",...D}},{id:"remainingUses",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Remaining uses"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.remainingUses})},meta:{className:"justify-end",...D}},{id:"maxPinnedData",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Max pinned data"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.maxPinnedData})},meta:{className:"justify-end",...D}},{id:"dateCreated",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Date created"})},accessorKey:"dateCreated",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.dateCreated})},meta:{className:"justify-end",...R}},{id:"lastUpdated",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Last updated"})},accessorKey:"lastUpdated",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.lastUpdated})},meta:{className:"justify-end",...R}},{id:"lastUsed",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Last used"})},accessorKey:"lastUsed",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.lastUsed})},meta:{className:"justify-end",...R}}];function ec(e){let{table:t}=e,{openDialog:l}=(0,ea.sp)(),r=(0,n.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]);return(0,s.jsx)(m,{heading:(0,s.jsx)(a.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected keys (".concat(r.length,")"):t.isFiltered?"Filtered keys (".concat(r.length,")"):"All keys"}),actions:(0,s.jsxs)(a.$nd,{variant:"accent",onClick:()=>l("connectKeyCreate"),children:[(0,s.jsx)(i.X4t,{}),"Create key"]}),customCloseAction:t.isSelection?(0,s.jsx)(a.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,children:(0,s.jsx)(a.EYj,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on keys yet"})})}var eo=l(74516);function ed(){let{limit:e,offset:t}=(0,eo.s)(),l=(0,j.P2)({params:{limit:e,offset:t}});return(0,n.useMemo)(()=>{var e;return(null==(e=l.data)?void 0:e.map(e=>({id:e.key,key:e.key,description:e.description,maxPinnedData:e.maxPinnedData,totalUses:e.totalUses,remainingUses:e.remainingUses,dateCreated:e.dateCreated,lastUpdated:e.lastUpdated,lastUsed:e.lastUsed,displayFields:{maxPinnedData:(0,h.p6)(e.maxPinnedData),dateCreated:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e.dateCreated)),lastUpdated:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e.lastUpdated)),lastUsed:e.lastUsed?Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e.lastUsed)):void 0}})))||[]},[l.data])}function eu(){let{panelId:e,setPanelId:t}=(0,eo.s)(),{openDialog:l}=(0,ea.sp)(),r=ed(),c=(0,n.useMemo)(()=>r.find(t=>t.id===e),[e,r]);return c?(0,s.jsx)(m,{onClose:()=>t(void 0),heading:(0,s.jsxs)(a.EYj,{size:"18",weight:"medium",ellipsis:!0,children:["Key: ",(0,a.xvE)(null==c?void 0:c.key,24)]}),actions:(0,s.jsxs)(a.$nd,{onClick:()=>l("connectKeyDelete",c.id),variant:"red",children:[(0,s.jsx)(i.o67,{}),"Delete key"]}),children:(0,s.jsx)(f,{heading:"Info",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(u,{label:"Description",value:c.description}),(0,s.jsx)(u,{label:"Total uses",value:c.totalUses}),(0,s.jsx)(u,{label:"Remaining uses",value:c.remainingUses}),(0,s.jsx)(u,{label:"Date created",value:c.displayFields.dateCreated}),(0,s.jsx)(u,{label:"Last updated",value:c.displayFields.lastUpdated}),(0,s.jsx)(u,{label:"Last used",value:c.displayFields.lastUsed})]})})}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Key not found"})})})}function em(){let e=(0,H.useSearchParams)(),t=(0,H.useRouter)(),l=(0,H.usePathname)(),i=e.get("view"),{offset:r,limit:c,setOffset:o,setLimit:d,panelId:u,setPanelId:m,columnFilters:j,setColumnFilters:h,columnSorts:x,setColumnSorts:y}=(0,eo.s)(),g=(0,n.useCallback)(e=>{m(e)},[m]),p=ed(),f=(0,a.uIQ)({data:p,columns:er,columnFilters:j,setColumnFilters:h,columnSorts:x,setColumnSorts:y,offset:r,limit:c,onRowClick:g,setOffset:o,setLimit:d});return(0,s.jsx)(T,{table:(0,s.jsx)(a.bQt,{...f,heading:(0,s.jsx)(I,{value:i,onValueChange:s=>{let a=new URLSearchParams(Array.from(e.entries()));a.set("view",s),t.push("".concat(l,"?").concat(a.toString()))}})}),panel:u?(0,s.jsx)(eu,{}):(0,s.jsx)(ec,{table:f})})}let ej=[U(),{id:"id",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"ID"})},accessorKey:"id",cell:e=>{let{getValue:t}=e;return(0,s.jsx)(a.Zjd,{maxLength:100,value:t(),label:"ID"})},meta:{className:"justify-start",...L}},{id:"type",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Type"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Exy,{children:t.original.type})},meta:{className:"justify-start",...D}},{id:"severity",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Severity"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.Exy,{children:t.original.severity})},meta:{className:"justify-start",...D}},{id:"message",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-start",children:"Message"})},cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.message})},meta:{className:"justify-start",...D}},{id:"timestamp",header:e=>{let{table:t,column:l}=e;return(0,s.jsx)(K,{table:t,column:l,className:"justify-end",children:"Timestamp"})},accessorKey:"timestamp",cell:e=>{let{row:t}=e;return(0,s.jsx)(a.EYj,{children:t.original.displayFields.timestamp})},meta:{className:"justify-end",...R}}];function eh(e){let{table:t}=e,l=(0,n.useMemo)(()=>t.isSelection?t.selectedRows:t.rows,[t.isSelection,t.selectedRows,t.rows]),r=(0,j.Y9)();return(0,s.jsx)(m,{heading:(0,s.jsx)(a.EYj,{size:"18",weight:"medium",children:t.isSelection?"Selected alerts (".concat(l.length,")"):t.isFiltered?"Filtered alerts (".concat(l.length,")"):"All alerts"}),actions:t.isSelection?(0,s.jsxs)(a.$nd,{onClick:async()=>{try{await r.post({payload:l.map(e=>e.id)}),(0,a.VE1)({title:"Alerts dismissed"}),t.setRowSelection({})}catch(e){console.error(e),(0,a.el3)({title:"Failed to dismiss alerts"})}},children:[(0,s.jsx)(i.VCH,{}),"Dismiss alerts"]}):null,customCloseAction:t.isSelection?(0,s.jsx)(a.$nd,{onClick:()=>t.setRowSelection({}),children:"Clear selection"}):null,children:(0,s.jsx)(a.EYj,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on alerts yet"})})}function ex(){let e=(0,a.i$h)("alertList"),[t,l]=(0,a.QPA)("alertsPanelId");return{...e,panelId:t,setPanelId:l}}function ey(){let{limit:e,offset:t}=ex(),l=(0,j.Al)({params:{limit:e,offset:t}});return(0,n.useMemo)(()=>{var e;return(null==(e=l.data)?void 0:e.map(e=>(function(e){var t,l;let s=e.data&&"hostKeys"in e.data?"lostSectors":"unknown",a="lostSectors"===s?{type:"lostSectors",hostKeys:null==(t=e.data)?void 0:t.hostKeys,hint:null==(l=e.data)?void 0:l.hint}:{type:"unknown",...e.data};return{id:e.id,severity:e.severity,message:e.message,type:s,data:a,timestamp:e.timestamp,displayFields:{timestamp:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e.timestamp))}}})(e)))||[]},[l.data])}function eg(e){var t;return(null==(t=e.data)?void 0:t.type)==="lostSectors"?"Lost sectors":"Unknown"}function ep(){let{panelId:e,setPanelId:t}=ex(),l=(0,j.Y9)(),r=ey(),c=(0,n.useMemo)(()=>r.find(t=>t.id===e),[e,r]);return c?(0,s.jsxs)(m,{onClose:()=>t(void 0),heading:(0,s.jsxs)(a.EYj,{size:"18",weight:"medium",ellipsis:!0,children:[eg(c)," alert"]}),actions:(0,s.jsxs)(a.$nd,{onClick:async()=>{try{await l.post({payload:[c.id]}),t(void 0),(0,a.VE1)({title:"Alert dismissed"})}catch(e){console.error(e),(0,a.el3)({title:"Failed to dismiss alert"})}},variant:"red",children:[(0,s.jsx)(i.VCH,{}),"Dismiss alert"]}),children:[(0,s.jsx)(f,{heading:"Info",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(u,{label:"Type",value:(0,s.jsx)(a.Exy,{children:eg(c)})}),(0,s.jsx)(u,{label:"Severity",value:c.severity}),(0,s.jsx)(u,{label:"Message",value:c.message}),(0,s.jsx)(u,{label:"Timestamp",value:c.displayFields.timestamp}),c.data&&"unknown"===c.data.type&&(0,s.jsx)("div",{className:"flex flex-col gap-2",children:(0,s.jsx)(u,{label:"Data",value:JSON.stringify(c.data)})}),c.data&&"lostSectors"===c.data.type&&(0,s.jsx)(u,{variant:"column",label:"Hint",value:c.data.hint})]})}),c.data&&"lostSectors"===c.data.type&&(0,s.jsx)(f,{heading:"Host keys",children:(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.data.hostKeys.map(e=>(0,s.jsx)(u,{label:"Host Key",value:(0,s.jsx)(a.Zjd,{value:e,type:"hostPublicKey"})},e))})})]}):(0,s.jsx)(m,{heading:null,children:(0,s.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,s.jsx)(a.EYj,{color:"subtle",children:"Alert not found"})})})}function ef(){let e=(0,H.useSearchParams)(),t=(0,H.useRouter)(),l=(0,H.usePathname)(),i=e.get("view"),{offset:r,limit:c,setOffset:o,setLimit:d,panelId:u,setPanelId:m,columnFilters:j,setColumnFilters:h,columnSorts:x,setColumnSorts:y}=ex(),g=(0,n.useCallback)(e=>{m(e)},[m]),p=ey(),f=(0,a.uIQ)({data:p,columns:ej,columnFilters:j,setColumnFilters:h,columnSorts:x,setColumnSorts:y,offset:r,limit:c,onRowClick:g,setOffset:o,setLimit:d});return(0,s.jsx)(T,{table:(0,s.jsx)(a.bQt,{...f,heading:(0,s.jsx)(I,{value:i,onValueChange:s=>{let a=new URLSearchParams(Array.from(e.entries()));a.set("view",s),t.push("".concat(l,"?").concat(a.toString()))}})}),panel:u?(0,s.jsx)(ep,{}):(0,s.jsx)(eh,{table:f})})}function eb(){let e=(0,H.useSearchParams)(),t=e.get("view"),l=(0,H.useRouter)(),a=(0,H.usePathname)();return((0,n.useEffect)(()=>{if(!t){let t=new URLSearchParams(Array.from(e.entries()));t.set("view","hosts"),l.replace("".concat(a,"?").concat(t.toString()))}},[t,e,a,l]),t)?(0,s.jsxs)("div",{className:"w-full h-full overflow-hidden flex flex-col",children:["hosts"===t&&(0,s.jsx)(Q,{}),"contracts"===t&&(0,s.jsx)(X,{}),"accounts"===t&&(0,s.jsx)(ei,{}),"alerts"===t&&(0,s.jsx)(ef,{}),"keys"===t&&(0,s.jsx)(em,{})]}):null}function ev(){return(0,s.jsx)(eb,{})}}},e=>{e.O(0,[9085,9030,5764,6017,2826,7421,8820,224,2550,5465,9589,751,7722,1144,4082,6712,1551,2273,9557,4114,7939,5312,1213,947,2991,8900,7164,9800,9080,2655,6713,587,1902,7358],()=>e(e.s=46217)),_N_E=e.O()}]);