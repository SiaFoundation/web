(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,323316,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(489842),l=e.i(226584),i=e.i(641331),s=e.i(530875),r=e.i(834726);e.i(519977);var n=e.i(219474);e.i(913272);var o=e.i(608970),c=e.i(860945);function d(){let e=(0,n.useAdminStatsContracts)(),d=(0,s.useRemoteData)({contracts:e},e=>({...e.contracts}));return(0,t.jsx)(a.RemoteDataStates,{data:d,error:(0,t.jsx)(l.StateError,{message:"Error loading metrics. Please try again later."}),loading:(0,t.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,t.jsx)(c.InfoRow,{label:"Contracts",value:(0,t.jsx)(r.Skeleton,{className:"h-12 w-[150px]"})}),(0,t.jsx)(c.InfoRow,{label:"Bad Contracts",value:(0,t.jsx)(r.Skeleton,{className:"h-12 w-[150px]"})}),(0,t.jsx)(c.InfoRow,{label:"Renewing Contracts",value:(0,t.jsx)(r.Skeleton,{className:"h-12 w-[150px]"})}),(0,t.jsx)(c.InfoRow,{label:"Total Capacity",value:(0,t.jsx)(r.Skeleton,{className:"h-12 w-[150px]"})}),(0,t.jsx)(c.InfoRow,{label:"Total Size",value:(0,t.jsx)(r.Skeleton,{className:"h-12 w-[150px]"})})]}),notFound:(0,t.jsx)(i.StateNoneYet,{message:"No metrics found."}),loaded:e=>(0,t.jsxs)("div",{className:"flex flex-col gap-5 w-full",children:[(0,t.jsx)(c.InfoRow,{label:"Contracts",value:e.contracts.toLocaleString()}),(0,t.jsx)(c.InfoRow,{label:"Bad Contracts",value:e.badContracts.toLocaleString()}),(0,t.jsx)(c.InfoRow,{label:"Renewing Contracts",value:e.renewing.toLocaleString()}),(0,t.jsx)(c.InfoRow,{label:"Total Capacity",value:(0,o.humanBytes)(e.totalCapacity)}),(0,t.jsx)(c.InfoRow,{label:"Total Size",value:(0,o.humanBytes)(e.totalSize)})]})})}e.s(["MetricsContracts",()=>d])},860945,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(1206);function l({label:e,value:l,variant:i="row"}){return"column"===i?(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(a.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e}),(0,t.jsx)(a.Text,{color:"contrast",children:l})]}):(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,t.jsx)(a.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e})}),(0,t.jsx)("div",{className:"flex-1 flex justify-end items-center",children:"string"==typeof l?l?(0,t.jsx)(a.Text,{className:"truncate",children:l}):(0,t.jsx)(a.Text,{color:"verySubtle",children:"-"}):l||(0,t.jsx)(a.Text,{color:"verySubtle",children:"-"})})]})}e.s(["InfoRow",()=>l])},167789,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(495733),l=e.i(184214),i=e.i(22550),s=e.i(339173),r=e.i(393128),n=e.i(367527);e.i(587154);var o=e.i(699221),c=e.i(770352),d=e.i(271645),u=e.i(423836);function m({name:e,columnFilters:m,removeColumnFilter:x,removeLastColumnFilter:p,getFilterLabel:g,children:h}){let[y,f]=(0,d.useState)(!1),[j,b]=(0,d.useState)(""),[v,C]=(0,d.useState)([]),S=v[v.length-1],w=(0,d.useRef)(null),P=(0,d.useRef)(null),N=(0,d.useCallback)(e=>{C(t=>[...t,e])},[C]),F=(0,d.useCallback)(()=>{C([])},[C]);(0,d.useEffect)(()=>{let e=e=>{w.current&&!w.current.contains(e.target)&&f(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let T=(0,d.useCallback)(()=>{P.current?.focus()},[P]),R=(0,d.useCallback)(()=>{b(""),F()},[F]),{dialog:I}=(0,u.useDialog)();return(0,d.useEffect)(()=>{I&&f(!1)},[I]),(0,t.jsxs)("div",{className:"flex gap-1",children:[m.map(e=>(0,t.jsxs)(n.ControlGroup,{children:[(0,t.jsx)(s.Button,{variant:"active",state:"waiting",children:g(e)}),(0,t.jsx)(s.Button,{variant:"active",size:"small",onClick:()=>x(e.id),children:(0,t.jsx)(o.Close16,{})})]},e.id)),(0,t.jsxs)(c.Command,{ref:w,label:"Command Menu",onFocus:()=>f(!0),onKeyDown:e=>{v.length>0?"Escape"!==e.key&&("Backspace"!==e.key||j)||(e.preventDefault(),C(e=>e.slice(0,-1))):0===v.length&&("Backspace"!==e.key||j||p(),"Escape"!==e.key||j||(f(!1),P.current?.blur()))},children:[(0,t.jsx)(c.Command.Input,{"aria-label":`filter ${e}`,name:`filter-${e}-menu-input`,ref:P,value:j,onValueChange:b,className:(0,a.textFieldStyles)({variant:"ghost",focus:"none"}),placeholder:`Filter ${e}`}),y&&(0,t.jsx)(i.Panel,{className:"absolute z-10 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,t.jsxs)(r.ScrollArea,{children:[S&&(0,t.jsx)(l.Label,{className:"px-1.5 py-1",children:S.label}),(0,t.jsx)(c.Command.List,{children:(0,t.jsx)(h,{currentPage:S,beforeSelect:T,afterSelect:R,pushPage:N})})]})})]})]})}e.s(["FilterMenu",()=>m])},735665,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(349023);function l({table:e,id:l,labelPositive:i,labelNegative:s,columnFilters:r,setColumnFilters:n}){let o=e?.getColumn(l)?.columnDef.meta,c=i||o?.filterLabelPositive||"Yes",d=s||o?.filterLabelNegative||"No",u=r.find(e=>e.id===l)?.value;return(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(a.Select,{"aria-label":`${l} filter`,value:void 0===u?"":String(u),onChange:e=>{if(""===e.target.value)return void n(e=>e.filter(e=>e.id!==l));let t="true"===e.target.value;n(e=>{let a=e.findIndex(e=>e.id===l);return -1!==a?e[a].value=t:e.push({id:l,value:t}),e})},children:[{value:"",label:"All"},{value:"true",label:c},{value:"false",label:d}].map(e=>(0,t.jsx)("option",{value:String(e.value),children:e.label},e.label))})})}e.s(["ColumnBooleanFilter",()=>l])},743962,36360,366846,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(434480),l=e.i(812247),i=e.i(757615);e.i(587154);var s=e.i(699221),r=e.i(271645);function n({usable:e,usability:a,className:l,showExpanded:s=!1}){let n=(0,r.useMemo)(()=>a&&Object.keys(a).filter(e=>!a[e]).map(e=>(0,t.jsx)(o,{status:"unusable",name:d(e)},e)),[a]),c=(0,r.useMemo)(()=>a&&Object.keys(a).filter(e=>a[e]).map(e=>(0,t.jsx)(o,{status:"usable",name:d(e)},e)),[a]);return(0,t.jsx)("div",{className:(0,i.cn)("flex gap-1",l),children:e&&!s?(0,t.jsx)(o,{status:"usable",name:"usable"}):(0,t.jsxs)(t.Fragment,{children:[n,c]})})}function o({status:e,name:l}){return(0,t.jsxs)(a.Badge,{size:"small",className:"flex items-center gap-0.5",children:[(0,t.jsx)(c,{status:e,name:l}),l]})}function c({status:e,name:a}){let i=(0,r.useMemo)(()=>({usable:`${a} is usable`,warning:`${a} is almost unusable`,unusable:`${a} is unusable`}),[a]);return(0,t.jsx)(l.Tooltip,{content:i[e],children:"usable"===e?(0,t.jsx)(s.CheckmarkOutline16,{className:"text-green-600 scale-75"}):"warning"===e?(0,t.jsx)(s.Warning16,{className:"text-amber-600 scale-75"}):(0,t.jsx)(s.CloseOutline16,{className:"text-red-600 scale-75"})})}function d(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}e.s(["UsabilityBadges",()=>n,"UsabilityIndicator",()=>c],743962);var u=e.i(652345),m=e.i(530875);e.i(519977);var x=e.i(219474),p=e.i(828073);e.i(913272);var g=e.i(635309),h=e.i(617526),y=e.i(818537),f=e.i(608970),j=e.i(897740),b=e.i(705543),v=e.i(893868);function C({host:e,currencyDisplay:t,exchange:a}){var l,i,s,r,n;let o,c,d,u={countryCode:e.countryCode,latitude:e.latitude,longitude:e.longitude};return{...e,id:e.publicKey,usable:Object.values(e.usability).every(e=>e),location:u,exchange:a,displayFields:(l=e,i=u,s=t,r=a,o=(0,j.sectorsToBytes)(l.settings.remainingStorage),c=(0,h.GBToBytes)(10),d=o.eq(0)?"unusable":o.lt(c)?"warning":"usable",{uptime:`${(100*l.recentUptime).toFixed(1)}%`,totalStorage:(0,f.humanBytes)((0,j.sectorsToBytes)(l.settings.totalStorage)),remainingStorage:(0,f.humanBytes)(o),remainingStorageUsability:d,storagePrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:(0,g.storagePriceInHastingsPerTBPerMonth)({price:l.settings.prices.storagePrice}),currencyDisplay:s,exchange:r}),ingressPrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:(0,g.ingressPriceInHastingsPerTBPerMonth)({price:l.settings.prices.ingressPrice}),currencyDisplay:s,exchange:r}),egressPrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:(0,g.egressPriceInHastingsPerTBPerMonth)({price:l.settings.prices.egressPrice}),currencyDisplay:s,exchange:r}),freeSectorPrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:new p.BigNumber(l.settings.prices.freeSectorPrice),currencyDisplay:s,exchange:r}),maxCollateral:(0,v.getCurrencyDisplayPropsPreferred)({sc:new p.BigNumber(l.settings.prices.collateral),currencyDisplay:s,exchange:r}),maxContractDuration:`${(0,b.blocksToWeeks)(l.settings.maxContractDuration).toFixed(1)} weeks`,protocolVersion:"string"==typeof(n=l.settings).protocolVersion?n.protocolVersion.slice(1):`v${n.protocolVersion[0]}.${n.protocolVersion[1]}.${n.protocolVersion[2]}`,priceValidity:new Date(l.settings.prices.validUntil).toLocaleString(),release:l.settings.release,countryName:(0,y.getCountryName)(i?.countryCode),countryFlag:(0,y.countryCodeEmoji)(i?.countryCode)})}}e.s(["transformHost",()=>C],36360),e.i(563386);var S=e.i(165158);function w(e){let t=(0,x.useAdminHost)({disabled:!e,params:{hostkey:e||""}}),a=(0,u.useActiveDaemonExplorerExchangeRate)(),{settings:l}=(0,S.useAppSettings)();return(0,m.useRemoteData)({host:t},({host:e})=>(function({host:e,exchangeRate:t,settings:a}){return C({host:e,currencyDisplay:a.currencyDisplay,exchange:t.currency&&t.rate&&{currency:t.currency,rate:t.rate}})})({host:e,exchangeRate:a,settings:l}))}e.s(["useHost",()=>w],366846)},889589,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(339173),l=e.i(295478),i=e.i(1206),s=e.i(812247);e.i(587154);var r=e.i(699221),n=e.i(271645),o=e.i(139169);function c({table:e,columns:c}){let d=e.getState().sorting,u=(0,n.useMemo)(()=>d.map(t=>{let a=e.getColumn(t.id),l=c.find(e=>e.id===t.id),i=t.id;return i=l?.header&&"string"==typeof l.header?l.header:t.id.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim(),{id:t.id,header:i,direction:t.desc?"desc":"asc",sortIndex:a?.getSortIndex()??-1}}),[d,e,c]);return 0===d.length?null:(0,t.jsx)(l.Popover,{trigger:(0,t.jsx)(a.Button,{size:"small",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(i.Text,{size:"12",weight:"medium",color:"subtle",children:"Order by"}),(0,t.jsx)(i.Text,{size:"12",weight:"medium",color:"contrast",children:1===d.length?u[0].header:`${d.length} columns`})]})}),contentProps:{align:"end",side:"bottom",className:"w-auto z-30",onOpenAutoFocus:e=>e.preventDefault()},children:(0,t.jsx)("div",{className:"p-1",children:u.map(l=>(0,t.jsxs)("div",{className:"flex items-center gap-1 justify-end min-w-0 p-1.5 rounded",children:[(0,t.jsx)(i.Text,{size:"12",className:"truncate min-w-0 flex-1 text-right",children:l.header}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 shrink-0",children:[(0,t.jsx)(s.Tooltip,{content:"Remove this sort",side:"bottom",delayDuration:1200,children:(0,t.jsxs)(a.Button,{variant:"ghost",size:"none",onClick:()=>{var t;let a;return t=l.id,a=e.getColumn(t),void a?.clearSorting()},className:"group shrink-0 w-3.5 h-3.5 p-0 relative flex items-center justify-center",children:[(0,t.jsx)("span",{className:"text-[10px] leading-none font-medium absolute inset-0 flex items-center justify-center group-hover:hidden",children:l.sortIndex+1}),(0,t.jsx)(r.Close16,{className:"w-2.5 h-2.5 hidden group-hover:block absolute inset-0 m-auto"})]})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"none",icon:"contrast",onClick:()=>{var t,a;let i;return t=l.id,a="desc"===l.direction,i=e.getColumn(t),void i?.toggleSorting(!a,!0)},className:"shrink-0",children:(0,t.jsx)(o.SortIcon,{direction:l.direction})})]})]},l.id))})})}e.s(["SortControl",()=>c])},571433,e=>{"use strict";var t=e.i(843476);e.i(387020);var a=e.i(217099),l=e.i(226584),i=e.i(799163),s=e.i(641331),r=e.i(755337),n=e.i(926622),o=e.i(271645),c=e.i(434480),d=e.i(1206),u=e.i(865085),m=e.i(383283),x=e.i(706141),p=e.i(74045),g=e.i(623923),h=e.i(885116),y=e.i(279969);function f(){let e=(0,h.useDataTableParams)("contractList"),[t,a]=(0,y.useParamStr)("contractsPanelId");return{...e,panelId:t,setPanelId:a}}var j=e.i(735665);function b(){let{columnFilters:e,setColumnFilters:a}=f();return(0,t.jsx)(j.ColumnBooleanFilter,{id:"status",labelPositive:"Good",labelNegative:"Bad",columnFilters:e,setColumnFilters:a})}let v=[(0,p.selectColumn)(),{id:"id",sortKey:"id",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,className:"justify-start",children:"ID"}),cell:({row:e})=>(0,t.jsx)(u.ValueCopyable,{maxLength:100,value:e.original.id,type:"contract"}),meta:{className:"justify-start",...g.hashColumnWidth}},{id:"status",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,filter:(0,t.jsx)(b,{}),children:"Status"}),cell:({row:e})=>(0,t.jsx)(C,{variant:e.original.good?"good":"bad"}),meta:{className:"justify-end",...g.smallColumnWidth,filterLabelPositive:"Status is good",filterLabelNegative:"Status is bad"}},{id:"state",sortKey:"state",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"State"}),cell:({row:e})=>(0,t.jsx)(S,{value:e.original.state}),meta:{className:"justify-end",...g.smallColumnWidth}},{id:"hostPublicKey",sortKey:"hostKey",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,className:"justify-start",children:"Host Public Key"}),cell:({row:e})=>(0,t.jsx)(u.ValueCopyable,{maxLength:100,value:e.original.hostKey,type:"hostPublicKey"}),meta:{className:"justify-start",...g.hashColumnWidth}},{id:"formation",sortKey:"formation",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Formation"}),cell:({row:e})=>(0,t.jsx)(d.Text,{children:e.original.displayFields.formation}),meta:{className:"justify-end",...g.timestampColumnWidth}},{id:"expirationHeight",sortKey:"expirationHeight",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Expiration Height"}),cell:({row:e})=>(0,t.jsx)(d.Text,{children:e.original.displayFields.expirationHeight}),meta:{className:"justify-end",...g.timestampColumnWidth}},{id:"capacity",sortKey:"capacity",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Capacity"}),cell:({row:e})=>(0,t.jsx)(d.Text,{children:e.original.displayFields.capacity}),meta:{className:"justify-end",...g.smallColumnWidth}},{id:"dataSize",sortKey:"size",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Data Size"}),cell:({row:e})=>(0,t.jsx)(d.Text,{children:e.original.displayFields.dataSize}),meta:{className:"justify-end",...g.smallColumnWidth}},{id:"initialAllowance",sortKey:"initialAllowance",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Initial Allowance"}),cell:({row:e})=>(0,t.jsx)(m.ValueWithTooltip,{...e.original.displayFields.initialAllowance}),meta:{className:"justify-end",...g.smallColumnWidth}},{id:"remainingAllowance",sortKey:"remainingAllowance",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Remaining Allowance"}),cell:({row:e})=>(0,t.jsx)(m.ValueWithTooltip,{...e.original.displayFields.remainingAllowance}),meta:{className:"justify-end",...g.smallColumnWidth}},{id:"totalCollateral",sortKey:"totalCollateral",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Total Collateral"}),cell:({row:e})=>(0,t.jsx)(m.ValueWithTooltip,{...e.original.displayFields.totalCollateral}),meta:{className:"justify-end",...g.smallColumnWidth}},{id:"usedCollateral",sortKey:"usedCollateral",header:({table:e,column:a})=>(0,t.jsx)(x.TableHeader,{table:e,column:a,children:"Used Collateral"}),cell:({row:e})=>(0,t.jsx)(m.ValueWithTooltip,{...e.original.displayFields.usedCollateral}),meta:{className:"justify-end",...g.smallColumnWidth}}];function C({variant:e}){return(0,t.jsx)(c.Badge,{size:"small",variant:"good"===e?"green":"red",children:"good"===e?"Good":"Bad"})}function S({value:e}){let a="gray";return"active"===e?a="amber":"failed"===e?a="red":"complete"===e&&(a="gray"),(0,t.jsx)(c.Badge,{size:"small",variant:a,children:e})}var w=e.i(765477),P=e.i(489842),N=e.i(743962),F=e.i(860945),T=e.i(540491),R=e.i(929232),I=e.i(652345),D=e.i(530875);e.i(519977);var B=e.i(219474);e.i(563386);var A=e.i(165158),k=e.i(828073);e.i(913272);var H=e.i(608970),K=e.i(893868);function V({contract:e,exchange:t,currencyDisplay:a}){var l,i,s;return{...e,id:e.id,exchange:t,displayFields:(l=e,i=a,s=t,{contractPrice:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.contractPrice),currencyDisplay:i,exchange:s}),minerFee:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.minerFee),currencyDisplay:i,exchange:s}),usedCollateral:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.usedCollateral),currencyDisplay:i,exchange:s}),initialAllowance:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.initialAllowance),currencyDisplay:i,exchange:s}),remainingAllowance:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.remainingAllowance),currencyDisplay:i,exchange:s}),totalCollateral:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.totalCollateral),currencyDisplay:i,exchange:s}),spendSectorRoots:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.spending.sectorRoots),currencyDisplay:i,exchange:s}),spendAppendSector:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.spending.appendSector),currencyDisplay:i,exchange:s}),spendFreeSector:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.spending.freeSector),currencyDisplay:i,exchange:s}),spendFundAccount:(0,K.getCurrencyDisplayPropsPreferred)({sc:new k.BigNumber(l.spending.fundAccount),currencyDisplay:i,exchange:s}),formation:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.formation)),proofHeight:l.proofHeight.toLocaleString(),expirationHeight:l.expirationHeight.toLocaleString(),nextPrune:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.nextPrune)),lastBroadcastAttempt:Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(l.lastBroadcastAttempt)),capacity:(0,H.humanBytes)(l.capacity),dataSize:(0,H.humanBytes)(l.size),renewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedFrom?null:l.renewedFrom,renewedTo:"0000000000000000000000000000000000000000000000000000000000000000"===l.renewedTo?null:l.renewedTo,revisionNumber:l.revisionNumber.toLocaleString()})}}var W=e.i(366846),z=e.i(750560),L=e.i(756894),M=e.i(818537);function E(){let{panelId:e,setPanelId:a}=f(),l=function(e){let t=(0,B.useAdminContract)({disabled:!e,params:{contractid:e||""}}),a=t.data?.hostKey,l=(0,W.useHost)(a),i=(0,I.useActiveDaemonExplorerExchangeRate)(),{settings:s}=(0,A.useAppSettings)();return(0,D.useRemoteData)({contract:t,host:l},({contract:e,host:t})=>(function({contract:e,host:t,exchangeRate:a,currencyDisplay:l}){return{contract:V({contract:e,currencyDisplay:l,exchange:a.currency&&a.rate&&{currency:a.currency,rate:a.rate}}),host:t}})({contract:e,host:t,exchangeRate:i,currencyDisplay:s.currencyDisplay}))}(e),i=(0,W.useHost)(l.data?.contract.hostKey),s=(0,o.useMemo)(()=>l.data?.contract?{id:l.data.contract.hostKey,publicKey:l.data.contract.hostKey,location:i.data?.location,usable:l.data.contract.good}:null,[l,i]);return l?(0,t.jsx)(P.RemoteDataStates,{data:l,loading:(0,t.jsx)(L.SidePanelSkeleton,{withMap:!0,withActions:!1,onClose:()=>a(void 0)}),notFound:(0,t.jsx)(T.SidePanel,{heading:null,children:(0,t.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,t.jsx)(d.Text,{color:"subtle",children:"Contract not found"})})}),loaded:({contract:e,host:l})=>(0,t.jsxs)(T.SidePanel,{onClose:()=>a(void 0),heading:(0,t.jsx)(z.SidePanelHeadingCopyable,{heading:"Contract",value:e?.id,label:"contract"}),children:[(0,t.jsx)(w.HostMap,{hosts:s?[s]:[],activeHost:s,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"}),(0,t.jsx)(R.SidePanelSection,{heading:"Info",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(F.InfoRow,{label:"State",value:(0,t.jsx)(S,{value:e.state})}),(0,t.jsx)(F.InfoRow,{label:"Status",value:(0,t.jsx)(C,{variant:e.good?"good":"bad"})}),(0,t.jsx)(F.InfoRow,{label:"Host Country",value:"unknown"===l.location.countryCode?null:`${(0,M.countryCodeEmoji)(l.location.countryCode)} ${l.location.countryCode}`}),(0,t.jsx)(F.InfoRow,{label:"Host public key",value:(0,t.jsx)(u.ValueCopyable,{value:e.hostKey,type:"hostPublicKey"})}),l.addresses?.map(e=>(0,t.jsx)(F.InfoRow,{label:e.protocol,value:(0,t.jsx)(u.ValueCopyable,{value:e.address,maxLength:24})},e.address+e.protocol))]})}),(0,t.jsx)(R.SidePanelSection,{heading:"Usability",children:(0,t.jsx)(N.UsabilityBadges,{usable:l?.usable||!1,usability:l?.usability,className:"w-full overflow-hidden flex-wrap"})}),(0,t.jsx)(R.SidePanelSection,{heading:"Storage",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(F.InfoRow,{label:"Capacity",value:e.displayFields.capacity}),(0,t.jsx)(F.InfoRow,{label:"Data Size",value:e.displayFields.dataSize})]})}),(0,t.jsx)(R.SidePanelSection,{heading:"Allowance",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(F.InfoRow,{label:"Initial Allowance",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.initialAllowance})}),(0,t.jsx)(F.InfoRow,{label:"Remaining Allowance",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.remainingAllowance})})]})}),(0,t.jsx)(R.SidePanelSection,{heading:"Collateral",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(F.InfoRow,{label:"Total Collateral",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.totalCollateral})}),(0,t.jsx)(F.InfoRow,{label:"Used Collateral",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.usedCollateral})})]})}),(0,t.jsx)(R.SidePanelSection,{heading:"Lifecycle",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(F.InfoRow,{label:"Formation",value:e.displayFields.formation}),(0,t.jsx)(F.InfoRow,{label:"Expiration Height",value:e.displayFields.expirationHeight}),(0,t.jsx)(F.InfoRow,{label:"Proof Height",value:e.displayFields.proofHeight}),(0,t.jsx)(F.InfoRow,{label:"Next Prune",value:e.displayFields.nextPrune}),(0,t.jsx)(F.InfoRow,{label:"Last Broadcast Attempt",value:e.displayFields.lastBroadcastAttempt}),(0,t.jsx)(F.InfoRow,{label:"Renewed From",value:e.displayFields.renewedFrom&&(0,t.jsx)(u.ValueCopyable,{value:e.displayFields.renewedFrom,type:"contract"})}),(0,t.jsx)(F.InfoRow,{label:"Renewed To",value:e.displayFields.renewedTo&&(0,t.jsx)(u.ValueCopyable,{value:e.displayFields.renewedTo,type:"contract"})}),(0,t.jsx)(F.InfoRow,{label:"Revision Number",value:e.displayFields.revisionNumber})]})}),(0,t.jsx)(R.SidePanelSection,{heading:"Spending",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(F.InfoRow,{label:"Contract Price",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.contractPrice})}),(0,t.jsx)(F.InfoRow,{label:"Miner Fee",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.minerFee})}),(0,t.jsx)(F.InfoRow,{label:"Spend Sector Roots",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.spendSectorRoots})}),(0,t.jsx)(F.InfoRow,{label:"Spend Append Sector",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.spendAppendSector})}),(0,t.jsx)(F.InfoRow,{label:"Spend Free Sector",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.spendFreeSector})}),(0,t.jsx)(F.InfoRow,{label:"Spend Fund Account",value:(0,t.jsx)(m.ValueWithTooltip,{...e.displayFields.spendFundAccount})})]})})]})}):(0,t.jsx)(T.SidePanel,{heading:null,children:(0,t.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,t.jsx)(d.Text,{color:"subtle",children:"Contract not found"})})})}var $=e.i(339173),U=e.i(323316);function O({table:e}){let a=(0,o.useMemo)(()=>e.isSelection?e.selectedRows:e.rows,[e.isSelection,e.selectedRows,e.rows]);return(0,t.jsx)(T.SidePanel,{heading:(0,t.jsx)(d.Text,{size:"18",weight:"medium",children:e.isSelection?`Selected contracts (${a.length})`:e.isFiltered?`Filtered contracts (${a.length})`:"All contracts"}),customCloseAction:e.isSelection?(0,t.jsx)($.Button,{onClick:()=>e.setRowSelection({}),children:"Clear selection"}):null,children:!e.isFiltered&&!e.isSelection&&(0,t.jsx)(U.MetricsContracts,{})})}var G=e.i(367887),Y=e.i(66084),Z=e.i(931502);function q(e){return"status"===e.id?e.value?"Status is good":"Status is bad":"revisable"===e.id?e.value?"Revisable":"Not revisable":""}let J={namespace:"contracts/filterStatus",label:"Contracts filter by status"},Q=[{id:"status",value:!0},{id:"status",value:!1}];function X({select:e,currentPage:a}){return(0,t.jsx)(Z.CommandGroup,{currentPage:a,commandPage:J,children:Q.map(l=>(0,t.jsx)(Z.CommandItemSearch,{currentPage:a,commandPage:J,onSelect:()=>{e(l)},children:q(l)},l.id+l.value))})}function _({currentPage:e,select:a}){return(0,t.jsx)(X,{currentPage:e,select:a})}let ee={namespace:"contracts",label:"Contracts"};function et({currentPage:e,parentPage:a,pushPage:l}){return(0,t.jsx)(Z.CommandItemNav,{currentPage:e,parentPage:a,commandPage:ee,onSelect:()=>{l(J)},children:J.label})}function ea({currentPage:e,parentPage:a,pushPage:l,beforeSelect:i,afterSelect:s}){let{addColumnFilter:r}=f(),n=(0,o.useCallback)(e=>{i&&i(),r(e),s&&s()},[r,i,s]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et,{parentPage:a,currentPage:e,pushPage:l,select:n}),(0,t.jsx)(_,{currentPage:e,select:n})]})}var el=e.i(167789);function ei(){let{columnFilters:e,removeColumnFilter:a,removeLastColumnFilter:l}=f();return(0,t.jsx)(el.FilterMenu,{name:"contracts",columnFilters:e,removeColumnFilter:a,removeLastColumnFilter:l,getFilterLabel:q,children:({currentPage:e,beforeSelect:a,afterSelect:l,pushPage:i})=>(0,t.jsx)(ea,{currentPage:e,beforeSelect:a,afterSelect:l,pushPage:i})})}var es=e.i(889589);function er(){let{offset:e,limit:c,setOffset:d,setLimit:u,panelId:m,setPanelId:x,columnFilters:p,setColumnFilters:g,columnSorts:h,setColumnSorts:y}=f(),j=(0,o.useCallback)(e=>{x(e)},[x]),b=function(){let{columnFilters:e,columnSorts:t,offset:a,limit:l}=f(),i=(0,o.useMemo)(()=>{let i={offset:a,limit:l},s=e.find(e=>"status"===e.id)?.value;void 0!==s&&(i.good=s);let r=e.find(e=>"revisable"===e.id)?.value;if(void 0!==r&&(i.revisable=r),t.length>0){let e=[],a=[];for(let l of t){let t=v.find(e=>e.id===l.id),i=t?.sortKey;void 0!==i&&(e.push(i),a.push(l.desc??!1))}e.length>0&&(i.sortby=e,i.desc=a)}return i},[e,t,a,l]),s=(0,B.useAdminContracts)({params:i}),r=(0,I.useActiveDaemonExplorerExchangeRate)(),{settings:n}=(0,A.useAppSettings)();return(0,G.useRemoteDataset)({contracts:s},({contracts:e})=>e.map(e=>V({contract:e,currencyDisplay:n.currencyDisplay,exchange:r.currency&&r.rate&&{currency:r.currency,rate:r.rate}})),{offset:a,filters:e})}(),C=(0,n.useDataTable)({dataset:b,columns:v,columnFilters:p,columnSorts:h,setColumnFilters:g,setColumnSorts:y,enableMultiSort:!0,offset:e,limit:c,onRowClick:j,setOffset:d,setLimit:u});return(0,t.jsx)(Y.Layout,{table:(0,t.jsx)(a.DataTable,{...C,localStorage:"indexd/contracts",header:(0,t.jsx)(ei,{}),actions:(0,t.jsx)(es.SortControl,{table:C.table,columns:v}),noneOnPage:(0,t.jsx)(r.StateNoneOnPage,{message:"No contracts on this page, reset pagination to continue."}),noneYet:(0,t.jsx)(s.StateNoneYet,{message:"There are no contracts yet."}),noneMatchingFilters:(0,t.jsx)(i.StateNoneMatching,{message:"No contracts matching filters."}),error:(0,t.jsx)(l.StateError,{message:"Error loading contracts. Please try again later."})}),panel:m?(0,t.jsx)(E,{}):(0,t.jsx)(O,{table:C})})}function en(){return(0,t.jsx)(er,{})}e.s(["default",()=>en],571433)}]);