(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,860945,e=>{"use strict";var a=e.i(843476);e.i(387020);var s=e.i(1206);function t({label:e,value:t,variant:i="row"}){return"column"===i?(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(s.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e}),(0,a.jsx)(s.Text,{color:"contrast",children:t})]}):(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,a.jsx)(s.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e})}),(0,a.jsx)("div",{className:"flex-1 flex justify-end items-center",children:"string"==typeof t?t?(0,a.jsx)(s.Text,{className:"truncate",children:t}):(0,a.jsx)(s.Text,{color:"verySubtle",children:"-"}):t||(0,a.jsx)(s.Text,{color:"verySubtle",children:"-"})})]})}e.s(["InfoRow",()=>t])},913749,e=>{"use strict";var a=e.i(843476);e.i(387020);var s=e.i(339173),t=e.i(696542),i=e.i(1206),l=e.i(223216),n=e.i(630958),r=e.i(402627),d=e.i(320201),o=e.i(540491),c=e.i(653145),u=e.i(271645);e.i(587154);var m=e.i(699221);function x({heading:e,onClose:x,remoteValues:j,fields:h,onSave:y,actionsLeft:g,actionsRight:f,render:b}){let p=(0,c.useForm)({mode:"all"});(0,n.useFormInit)({form:p,remoteValues:j}),(0,r.useFormServerSynced)({form:p,remoteValues:j});let{changeCount:v}=(0,d.useFormChangeCount)({form:p}),C=v>0,S=(0,u.useCallback)(async e=>{await y(e),p.reset(e)},[y,p]),k=(0,l.useOnInvalid)(h);return(0,a.jsx)(o.SidePanel,{onClose:x,heading:e,onSubmit:p.handleSubmit(S,k),actions:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[g,(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[C?(0,a.jsxs)(i.Text,{color:"subtle",size:"12",children:[v," change",1===v?"":"s"]}):null,(0,a.jsx)(s.Button,{onClick:()=>p.reset(j),variant:"ghost",disabled:!C,tip:"Reset all changes",children:(0,a.jsx)(m.Reset16,{})}),(0,a.jsx)(t.FormSubmitButton,{variant:p.formState.isDirty?"accent":"gray",size:"small",form:p,requireChanges:!0,children:(0,a.jsx)(m.Save16,{})})]}),f]}),children:b(p,h)})}e.s(["EditablePanel",()=>x])},833231,e=>{"use strict";var a=e.i(843476);e.i(387020);var s=e.i(217099),t=e.i(641331),i=e.i(226584),l=e.i(799163),n=e.i(926622),r=e.i(755337),d=e.i(271645),o=e.i(1206),c=e.i(865085),u=e.i(706141),m=e.i(74045),x=e.i(623923);let j=[(0,m.selectColumn)(),{id:"key",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-start",children:"Key"}),cell:({row:e})=>(0,a.jsx)(c.ValueCopyable,{maxLength:100,value:e.original.key,label:"key"}),meta:{className:"justify-start",...x.hashColumnWidth}},{id:"description",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-start",children:"Description"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.description}),meta:{className:"justify-start",...x.hashColumnWidth}},{id:"quota",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-start",children:"Quota"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.quota}),meta:{className:"justify-start",...x.smallColumnWidth}},{id:"remainingUses",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Remaining uses"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.remainingUses}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"pinnedData",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Pinned data"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.pinnedData}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"dateCreated",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Date created"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.dateCreated}),meta:{className:"justify-end",...x.timestampColumnWidth}},{id:"lastUpdated",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Last updated"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.lastUpdated}),meta:{className:"justify-end",...x.timestampColumnWidth}},{id:"lastUsed",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Last used"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.lastUsed||"-"}),meta:{className:"justify-end",...x.timestampColumnWidth}}];var h=e.i(339173),y=e.i(540491);e.i(587154);var g=e.i(486378),f=e.i(423836);function b({keys:e}){let{openDialog:s}=(0,f.useDialog)(),t=(0,d.useMemo)(()=>e.map(e=>"key"in e?e:e.original),[e]);return(0,a.jsxs)(h.Button,{onClick:()=>s("keyQuotaReassign",void 0,{keyQuotaReassign:{keys:t}}),children:[(0,a.jsx)(g.GaugeIcon,{size:16}),"Reassign quota"]})}function p({table:e}){let s=(0,d.useMemo)(()=>e.isSelection?e.selectedRows:e.rows,[e.isSelection,e.selectedRows,e.rows]);return(0,a.jsx)(y.SidePanel,{heading:(0,a.jsx)(o.Text,{size:"18",weight:"medium",children:e.isSelection?`Selected keys (${s.length})`:e.isFiltered?`Filtered keys (${s.length})`:"All keys"}),customCloseAction:e.isSelection?(0,a.jsx)(h.Button,{onClick:()=>e.setRowSelection({}),children:"Clear selection"}):null,actions:e.isSelection?(0,a.jsx)(b,{keys:s}):null,children:(0,a.jsx)(o.Text,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on keys yet"})})}var v=e.i(530875),C=e.i(489842),S=e.i(699221),k=e.i(542974),N=e.i(860945),T=e.i(750560);e.i(519977);var w=e.i(219474),F=e.i(435654),R=e.i(877438),P=e.i(33200);e.i(563386);var D=e.i(455030);e.i(253894);var K=e.i(110094),A=e.i(913749),U=e.i(756894),I=e.i(2480),W=e.i(929232),B=e.i(10458),H=e.i(515366),L=e.i(942717);function z(){let{panelId:e,setPanelId:s}=(0,k.useKeysParams)(),{buildAddColumnFilterParams:t}=(0,B.useAccountsParams)(),i=(0,L.useNavigateWithParams)(),{openDialog:l}=(0,f.useDialog)(),n=(0,w.useAdminConnectKeyUpdate)(),r=(0,D.useMutate)(),c=(0,w.useAdminQuotas)(),u=(0,w.useAdminConnectKey)({disabled:!e,params:{key:e}}),m=(0,d.useMemo)(()=>(0,I.getFields)(c.data),[c.data]),x=(0,v.useRemoteData)({connectKey:u},({connectKey:e})=>(0,I.transformDown)(e)),j=(0,d.useCallback)(async e=>{if(!x.data)return;let a=await n.put({payload:{...x.data.connectKey,...(0,I.transformUpForm)(e)}});a.error?(0,P.triggerErrorToast)({title:"Error saving key",body:a.error}):((0,P.triggerSuccessToast)({title:"Key updated"}),await r(e=>e.startsWith(K.adminConnectKeysRoute)))},[n,r,x.data]);return(0,a.jsx)(C.RemoteDataStates,{data:x,loading:(0,a.jsx)(U.SidePanelSkeleton,{withActions:!0,onClose:()=>s(void 0)}),notFound:(0,a.jsx)(y.SidePanel,{heading:null,children:(0,a.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,a.jsx)(o.Text,{color:"subtle",children:"Key not found"})})}),loaded:({connectKey:e,values:n})=>(0,a.jsx)(A.EditablePanel,{heading:(0,a.jsx)(T.SidePanelHeadingCopyable,{heading:"Key",value:e.key,label:"key"}),onClose:()=>s(void 0),remoteValues:n,fields:m,onSave:j,actionsLeft:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(h.Button,{onClick:()=>l("connectKeyDelete",e.key),children:(0,a.jsx)(S.TrashCan16,{})}),(0,a.jsxs)(h.Button,{onClick:()=>{i(H.routes.accounts.index,t({id:"connectkey",value:e.key}))},children:[(0,a.jsx)(S.Filter16,{}),"Accounts"]})]}),render:(s,t)=>(0,a.jsx)(W.SidePanelSection,{heading:"Info",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(R.FieldText,{name:"description",form:s,fields:t}),(0,a.jsx)(F.FieldSelect,{name:"quota",form:s,fields:t}),(0,a.jsx)(N.InfoRow,{label:"Remaining uses",value:e.remainingUses.toString()}),(0,a.jsx)(N.InfoRow,{label:"Pinned data",value:e.displayFields.pinnedData}),(0,a.jsx)(N.InfoRow,{label:"Date created",value:e.displayFields.dateCreated}),(0,a.jsx)(N.InfoRow,{label:"Last updated",value:e.displayFields.lastUpdated}),(0,a.jsx)(N.InfoRow,{label:"Last used",value:e.displayFields.lastUsed})]})})},e.key)})}var E=e.i(367887),M=e.i(66084);function q(){let{openDialog:e}=(0,f.useDialog)();return(0,a.jsxs)(h.Button,{variant:"accent",onClick:()=>e("connectKeyCreate"),children:[(0,a.jsx)(S.Add16,{}),"Create key"]})}function O(){let{offset:e,limit:o,setOffset:c,setLimit:u,panelId:m,setPanelId:x,columnFilters:h,setColumnFilters:y,columnSorts:g,setColumnSorts:f}=(0,k.useKeysParams)(),b=(0,d.useCallback)(e=>{x(e)},[x]),v=function(){let{limit:e,offset:a}=(0,k.useKeysParams)(),s=(0,w.useAdminConnectKeys)({params:{limit:e,offset:a}});return(0,E.useRemoteDataset)({keys:s},({keys:e})=>e.map(I.transformDownData),{offset:a})}(),C=(0,n.useDataTable)({dataset:v,columns:j,columnFilters:h,setColumnFilters:y,columnSorts:g,setColumnSorts:f,offset:e,limit:o,onRowClick:b,setOffset:c,setLimit:u});return(0,a.jsx)(M.Layout,{table:(0,a.jsx)(s.DataTable,{...C,localStorage:"indexd/keys",actions:(0,a.jsx)(q,{}),noneOnPage:(0,a.jsx)(r.StateNoneOnPage,{message:"No keys on this page, reset pagination to continue."}),noneYet:(0,a.jsx)(t.StateNoneYet,{message:"There are no keys yet."}),noneMatchingFilters:(0,a.jsx)(l.StateNoneMatching,{message:"No keys matching filters."}),error:(0,a.jsx)(i.StateError,{message:"Error loading keys. Please try again later."})}),panel:m?(0,a.jsx)(z,{}):(0,a.jsx)(p,{table:C})})}function Q(){return(0,a.jsx)(O,{})}e.s(["default",()=>Q],833231)}]);