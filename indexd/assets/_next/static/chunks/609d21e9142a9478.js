(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,860945,e=>{"use strict";var a=e.i(843476);e.i(387020);var t=e.i(1206);function n({label:e,value:n,variant:s="row"}){return"column"===s?(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(t.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e}),(0,a.jsx)(t.Text,{color:"contrast",children:n})]}):(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,a.jsx)(t.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e})}),(0,a.jsx)("div",{className:"flex-1 flex justify-end items-center",children:"string"==typeof n?n?(0,a.jsx)(t.Text,{className:"truncate",children:n}):(0,a.jsx)(t.Text,{color:"verySubtle",children:"-"}):n||(0,a.jsx)(t.Text,{color:"verySubtle",children:"-"})})]})}e.s(["InfoRow",()=>n])},167789,e=>{"use strict";var a=e.i(843476);e.i(387020);var t=e.i(495733),n=e.i(184214),s=e.i(22550),l=e.i(339173),i=e.i(393128),c=e.i(367527);e.i(587154);var r=e.i(699221),o=e.i(770352),u=e.i(271645),d=e.i(423836);function m({name:e,columnFilters:m,removeColumnFilter:x,removeLastColumnFilter:h,getFilterLabel:j,children:f}){let[g,v]=(0,u.useState)(!1),[p,y]=(0,u.useState)(""),[b,S]=(0,u.useState)([]),P=b[b.length-1],C=(0,u.useRef)(null),N=(0,u.useRef)(null),D=(0,u.useCallback)(e=>{S(a=>[...a,e])},[S]),R=(0,u.useCallback)(()=>{S([])},[S]);(0,u.useEffect)(()=>{let e=e=>{C.current&&!C.current.contains(e.target)&&v(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let A=(0,u.useCallback)(()=>{N.current?.focus()},[N]),T=(0,u.useCallback)(()=>{y(""),R()},[R]),{dialog:w}=(0,d.useDialog)();return(0,u.useEffect)(()=>{w&&v(!1)},[w]),(0,a.jsxs)("div",{className:"flex gap-1",children:[m.map(e=>(0,a.jsxs)(c.ControlGroup,{children:[(0,a.jsx)(l.Button,{variant:"active",state:"waiting",children:j(e)}),(0,a.jsx)(l.Button,{variant:"active",size:"small",onClick:()=>x(e.id),children:(0,a.jsx)(r.Close16,{})})]},e.id)),(0,a.jsxs)(o.Command,{ref:C,label:"Command Menu",onFocus:()=>v(!0),onKeyDown:e=>{b.length>0?"Escape"!==e.key&&("Backspace"!==e.key||p)||(e.preventDefault(),S(e=>e.slice(0,-1))):0===b.length&&("Backspace"!==e.key||p||h(),"Escape"!==e.key||p||(v(!1),N.current?.blur()))},children:[(0,a.jsx)(o.Command.Input,{"aria-label":`filter ${e}`,name:`filter-${e}-menu-input`,ref:N,value:p,onValueChange:y,className:(0,t.textFieldStyles)({variant:"ghost",focus:"none"}),placeholder:`Filter ${e}`}),g&&(0,a.jsx)(s.Panel,{className:"absolute z-10 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,a.jsxs)(i.ScrollArea,{children:[P&&(0,a.jsx)(n.Label,{className:"px-1.5 py-1",children:P.label}),(0,a.jsx)(o.Command.List,{children:(0,a.jsx)(f,{currentPage:P,beforeSelect:A,afterSelect:T,pushPage:D})})]})})]})]})}e.s(["FilterMenu",()=>m])},416070,e=>{"use strict";var a=e.i(843476);e.i(387020);var t=e.i(489842),n=e.i(226584),s=e.i(641331),l=e.i(530875),i=e.i(834726);e.i(519977);var c=e.i(219474),r=e.i(860945);function o(){let e=(0,c.useAdminStatsAccounts)(),o=(0,l.useRemoteData)({accounts:e},e=>({...e.accounts}));return(0,a.jsx)(t.RemoteDataStates,{data:o,error:(0,a.jsx)(n.StateError,{message:"Error loading metrics. Please try again later."}),loading:(0,a.jsx)("div",{className:"flex flex-col gap-5 w-full",children:(0,a.jsx)(r.InfoRow,{label:"Registered Accounts",value:(0,a.jsx)(i.Skeleton,{className:"h-12 w-[150px]"})})}),notFound:(0,a.jsx)(s.StateNoneYet,{message:"No metrics found."}),loaded:e=>(0,a.jsx)("div",{className:"flex flex-col gap-5 w-full",children:(0,a.jsx)(r.InfoRow,{label:"Registered Accounts",value:e.registered.toLocaleString()})})})}e.s(["MetricsAccounts",()=>o])},299282,e=>{"use strict";var a=e.i(843476);e.i(387020);var t=e.i(217099),n=e.i(755337),s=e.i(641331),l=e.i(799163),i=e.i(226584),c=e.i(926622),r=e.i(271645),o=e.i(1206),u=e.i(865085),d=e.i(706141),m=e.i(74045),x=e.i(623923);let h=[(0,m.selectColumn)(),{id:"publicKey",header:({table:e,column:t})=>(0,a.jsx)(d.TableHeader,{table:e,column:t,className:"justify-start",children:"Public key"}),cell:({row:e})=>(0,a.jsx)(u.ValueCopyable,{maxLength:100,value:e.original.publicKey,label:"account"}),meta:{className:"justify-start",...x.hashColumnWidth}},{id:"description",header:({table:e,column:t})=>(0,a.jsx)(d.TableHeader,{table:e,column:t,className:"justify-start",children:"Description"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.description}),meta:{className:"justify-start",...x.hashColumnWidth}},{id:"serviceAccount",header:({table:e,column:t})=>(0,a.jsx)(d.TableHeader,{table:e,column:t,className:"justify-end",children:"Service account"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.serviceAccount?"Yes":"No"}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"maxPinnedData",header:({table:e,column:t})=>(0,a.jsx)(d.TableHeader,{table:e,column:t,className:"justify-end",children:"Max pinned data"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.maxPinnedData}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"pinnedData",header:({table:e,column:t})=>(0,a.jsx)(d.TableHeader,{table:e,column:t,className:"justify-end",children:"Pinned data"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.pinnedData}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"lastUsed",header:({table:e,column:t})=>(0,a.jsx)(d.TableHeader,{table:e,column:t,className:"justify-end",children:"Last used"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.lastUsed||"-"}),meta:{className:"justify-end",...x.timestampColumnWidth}}];var j=e.i(339173),f=e.i(540491),g=e.i(416070);function v({table:e}){let t=(0,r.useMemo)(()=>e.isSelection?e.selectedRows:e.rows,[e.isSelection,e.selectedRows,e.rows]);return(0,a.jsx)(f.SidePanel,{heading:(0,a.jsx)(o.Text,{size:"18",weight:"medium",children:e.isSelection?`Selected accounts (${t.length})`:e.isFiltered?`Filtered accounts (${t.length})`:"All accounts"}),customCloseAction:e.isSelection?(0,a.jsx)(j.Button,{onClick:()=>e.setRowSelection({}),children:"Clear selection"}):null,children:e.isSelection?(0,a.jsx)(o.Text,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on selected accounts yet"}):e.isFiltered?(0,a.jsx)(o.Text,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on filtered accounts yet"}):(0,a.jsx)(g.MetricsAccounts,{})})}var p=e.i(489842),y=e.i(530875),b=e.i(423836);e.i(587154);var S=e.i(699221),P=e.i(10458),C=e.i(860945),N=e.i(929232),D=e.i(750560);e.i(519977);var R=e.i(219474),A=e.i(756894);e.i(913272);var T=e.i(608970);function w(e){return{id:e.accountKey,publicKey:e.accountKey,description:e.description,serviceAccount:e.serviceAccount,maxPinnedData:e.maxPinnedData,pinnedData:e.pinnedData,lastUsed:e.lastUsed,logoURL:e.logoURL,serviceURL:e.serviceURL,displayFields:{maxPinnedData:(0,T.humanBytes)(e.maxPinnedData),pinnedData:(0,T.humanBytes)(e.pinnedData),lastUsed:e.lastUsed?Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e.lastUsed)):void 0}}}function F(){let{panelId:e,setPanelId:t}=(0,P.useAccountsParams)(),{openDialog:n}=(0,b.useDialog)(),s=(0,R.useAdminAccount)({disabled:!e,params:{accountkey:e}}),l=(0,y.useRemoteData)({account:s},({account:e})=>w(e));return(0,a.jsx)(p.RemoteDataStates,{data:l,loading:(0,a.jsx)(A.SidePanelSkeleton,{withActions:!0,onClose:()=>t(void 0)}),notFound:(0,a.jsx)(f.SidePanel,{heading:null,children:(0,a.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,a.jsx)(o.Text,{color:"subtle",children:"Account not found"})})}),loaded:e=>(0,a.jsx)(f.SidePanel,{onClose:()=>t(void 0),heading:(0,a.jsx)(D.SidePanelHeadingCopyable,{heading:"Account",value:e.id,label:"account"}),actions:(0,a.jsxs)(j.Button,{onClick:()=>n("accountDelete",e.id),variant:"red",children:[(0,a.jsx)(S.TrashCan16,{}),"Delete account"]}),children:(0,a.jsx)(N.SidePanelSection,{heading:"Info",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(C.InfoRow,{label:"Description",value:e.description,variant:"column"}),(0,a.jsx)(C.InfoRow,{label:"Service account",value:e.serviceAccount?"Yes":"No"}),(0,a.jsx)(C.InfoRow,{label:"Max pinned data",value:e.displayFields.maxPinnedData}),(0,a.jsx)(C.InfoRow,{label:"Pinned data",value:e.displayFields.pinnedData}),(0,a.jsx)(C.InfoRow,{label:"Last used",value:e.displayFields.lastUsed}),(0,a.jsx)(C.InfoRow,{label:"Logo URL",value:e.logoURL}),(0,a.jsx)(C.InfoRow,{label:"Service URL",value:e.serviceURL})]})})})})}var k=e.i(367887),L=e.i(66084),U=e.i(931502);let I={namespace:"accounts/filterConnectKey",label:"Accounts filter by connect key"};function K({select:e,currentPage:t}){let{openDialog:n}=(0,b.useDialog)();return(0,a.jsx)(U.CommandGroup,{currentPage:t,commandPage:I,children:(0,a.jsx)(U.CommandItemSearch,{currentPage:t,commandPage:I,onSelect:()=>{e(),n("accountFilterConnectKey")},children:"Filter by connect key"})})}function M({select:e,currentPage:t,parentPage:n,commandPage:s}){let{openDialog:l}=(0,b.useDialog)();return(0,a.jsx)(U.CommandItemNav,{currentPage:t,parentPage:n,commandPage:s,onSelect:()=>{e(),l("accountFilterConnectKey")},children:I.label})}function B({select:e,currentPage:t}){return(0,a.jsx)(K,{currentPage:t,select:e})}let E={namespace:"accounts",label:"Accounts"};function H({currentPage:e,parentPage:t,select:n}){return(0,a.jsx)(M,{currentPage:e,parentPage:t,commandPage:E,select:n})}function W({currentPage:e,parentPage:t,pushPage:n,beforeSelect:s,afterSelect:l}){let{addColumnFilter:i}=(0,P.useAccountsParams)(),c=(0,r.useCallback)(e=>{s&&s(),e&&i(e),l&&l()},[i,s,l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H,{parentPage:t,currentPage:e,pushPage:n,select:c}),(0,a.jsx)(B,{currentPage:e,select:c})]})}var $=e.i(906852);function z(e){return"connectkey"===e.id?`Connect key is ${(0,$.truncate)(e.value,10)}`:""}var Y=e.i(167789);function O(){let{columnFilters:e,removeColumnFilter:t,removeLastColumnFilter:n}=(0,P.useAccountsParams)();return(0,a.jsx)(Y.FilterMenu,{name:"accounts",columnFilters:e,removeColumnFilter:t,removeLastColumnFilter:n,getFilterLabel:z,children:({currentPage:e,beforeSelect:t,afterSelect:n,pushPage:s})=>(0,a.jsx)(W,{currentPage:e,beforeSelect:t,afterSelect:n,pushPage:s})})}function G(){let{offset:e,limit:o,setOffset:u,setLimit:d,panelId:m,setPanelId:x,columnFilters:j,setColumnFilters:f,columnSorts:g,setColumnSorts:p}=(0,P.useAccountsParams)(),y=(0,r.useCallback)(e=>{x(e)},[x]),b=function(){let{limit:e,offset:a,columnFilters:t}=(0,P.useAccountsParams)(),n=(0,r.useMemo)(()=>{let n={offset:a,limit:e},s=t.find(e=>"connectkey"===e.id)?.value;return void 0!==s&&(n.connectkey=s),n},[t,a,e]),s=(0,R.useAdminAccounts)({params:n});return(0,k.useRemoteDataset)({accounts:s},({accounts:e})=>e.map(w),{offset:a,filters:t})}(),S=(0,c.useDataTable)({dataset:b,columns:h,columnFilters:j,setColumnFilters:f,columnSorts:g,setColumnSorts:p,offset:e,limit:o,onRowClick:y,setOffset:u,setLimit:d});return(0,a.jsx)(L.Layout,{table:(0,a.jsx)(t.DataTable,{...S,localStorage:"indexd/accounts",header:(0,a.jsx)(O,{}),noneOnPage:(0,a.jsx)(n.StateNoneOnPage,{message:"No accounts on this page, reset pagination to continue."}),noneYet:(0,a.jsx)(s.StateNoneYet,{message:"There are no accounts yet."}),noneMatchingFilters:(0,a.jsx)(l.StateNoneMatching,{message:"No accounts matching filters."}),error:(0,a.jsx)(i.StateError,{message:"Error loading accounts. Please try again later."})}),panel:m?(0,a.jsx)(F,{}):(0,a.jsx)(v,{table:S})})}function V(){return(0,a.jsx)(G,{})}e.s(["default",()=>V],299282)}]);