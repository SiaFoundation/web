(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,860945,e=>{"use strict";var a=e.i(843476);e.i(387020);var s=e.i(1206);function t({label:e,value:t,variant:l="row"}){return"column"===l?(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)(s.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e}),(0,a.jsx)(s.Text,{color:"contrast",children:t})]}):(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,a.jsx)(s.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e})}),(0,a.jsx)("div",{className:"flex-1 flex justify-end items-center",children:"string"==typeof t?t?(0,a.jsx)(s.Text,{className:"truncate",children:t}):(0,a.jsx)(s.Text,{color:"verySubtle",children:"-"}):t||(0,a.jsx)(s.Text,{color:"verySubtle",children:"-"})})]})}e.s(["InfoRow",()=>t])},833231,e=>{"use strict";var a=e.i(843476);e.i(387020);var s=e.i(217099),t=e.i(641331),l=e.i(226584),i=e.i(799163),n=e.i(926622),d=e.i(755337),r=e.i(271645),o=e.i(1206),c=e.i(865085),u=e.i(706141),m=e.i(74045),x=e.i(623923);let h=[(0,m.selectColumn)(),{id:"key",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-start",children:"Key"}),cell:({row:e})=>(0,a.jsx)(c.ValueCopyable,{maxLength:100,value:e.original.key,label:"key"}),meta:{className:"justify-start",...x.hashColumnWidth}},{id:"description",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-start",children:"Description"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.description}),meta:{className:"justify-start",...x.hashColumnWidth}},{id:"totalUses",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Total uses"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.totalUses}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"remainingUses",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Remaining uses"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.remainingUses}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"pinnedData",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Pinned data"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.pinnedData}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"maxPinnedData",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Max pinned data"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.maxPinnedData}),meta:{className:"justify-end",...x.smallColumnWidth}},{id:"dateCreated",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Date created"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.dateCreated}),meta:{className:"justify-end",...x.timestampColumnWidth}},{id:"lastUpdated",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Last updated"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.lastUpdated}),meta:{className:"justify-end",...x.timestampColumnWidth}},{id:"lastUsed",header:({table:e,column:s})=>(0,a.jsx)(u.TableHeader,{table:e,column:s,className:"justify-end",children:"Last used"}),cell:({row:e})=>(0,a.jsx)(o.Text,{children:e.original.displayFields.lastUsed||"-"}),meta:{className:"justify-end",...x.timestampColumnWidth}}];var j=e.i(339173),y=e.i(540491);function f({table:e}){let s=(0,r.useMemo)(()=>e.isSelection?e.selectedRows:e.rows,[e.isSelection,e.selectedRows,e.rows]);return(0,a.jsx)(y.SidePanel,{heading:(0,a.jsx)(o.Text,{size:"18",weight:"medium",children:e.isSelection?`Selected keys (${s.length})`:e.isFiltered?`Filtered keys (${s.length})`:"All keys"}),customCloseAction:e.isSelection?(0,a.jsx)(j.Button,{onClick:()=>e.setRowSelection({}),children:"Clear selection"}):null,children:(0,a.jsx)(o.Text,{color:"subtle",className:"flex justify-center pt-[50px]",children:"No information on keys yet"})})}var g=e.i(530875),b=e.i(489842),p=e.i(423836);e.i(587154);var v=e.i(699221),C=e.i(542974),N=e.i(860945),T=e.i(750560);e.i(519977);var S=e.i(219474),k=e.i(86330),F=e.i(877438),w=e.i(33200);e.i(563386);var P=e.i(455030);e.i(253894);var D=e.i(110094),R=e.i(696542),K=e.i(223216),U=e.i(630958),A=e.i(402627),W=e.i(320201),H=e.i(653145);function B({heading:e,onClose:s,remoteValues:t,fields:l,onSave:i,actionsLeft:n,actionsRight:d,render:c}){let u=(0,H.useForm)({mode:"all"});(0,U.useFormInit)({form:u,remoteValues:t}),(0,A.useFormServerSynced)({form:u,remoteValues:t});let{changeCount:m}=(0,W.useFormChangeCount)({form:u}),x=m>0,h=(0,r.useCallback)(async e=>{await i(e),u.reset(e)},[i,u]),f=(0,K.useOnInvalid)(l);return(0,a.jsx)(y.SidePanel,{onClose:s,heading:e,onSubmit:u.handleSubmit(h,f),actions:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[n,(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[x?(0,a.jsxs)(o.Text,{color:"subtle",size:"12",children:[m," change",1===m?"":"s"]}):null,(0,a.jsx)(j.Button,{onClick:()=>u.reset(t),variant:"ghost",disabled:!x,tip:"Reset all changes",children:(0,a.jsx)(v.Reset16,{})}),(0,a.jsx)(R.FormSubmitButton,{variant:u.formState.isDirty?"accent":"gray",size:"small",form:u,requireChanges:!0,children:(0,a.jsx)(v.Save16,{})})]}),d]}),children:c(u,l)})}var I=e.i(756894),L=e.i(2480),z=e.i(929232),M=e.i(10458),O=e.i(515366),E=e.i(942717);let V=(0,L.getFields)();function Y(){let{panelId:e,setPanelId:s}=(0,C.useKeysParams)(),{buildAddColumnFilterParams:t}=(0,M.useAccountsParams)(),l=(0,E.useNavigateWithParams)(),{openDialog:i}=(0,p.useDialog)(),n=(0,S.useAdminConnectKeyUpdate)(),d=(0,P.useMutate)(),c=(0,S.useAdminConnectKey)({disabled:!e,params:{key:e}}),u=(0,g.useRemoteData)({connectKey:c},({connectKey:e})=>(0,L.transformDown)(e)),m=(0,r.useCallback)(async e=>{if(!u.data)return;let a=await n.put({payload:{...u.data.connectKey,...(0,L.transformUpForm)(e)}});a.error?(0,w.triggerErrorToast)({title:"Error saving key",body:a.error}):((0,w.triggerSuccessToast)({title:"Key updated"}),await d(e=>e.startsWith(D.adminConnectKeysRoute)))},[n,d,u.data]);return(0,a.jsx)(b.RemoteDataStates,{data:u,loading:(0,a.jsx)(I.SidePanelSkeleton,{withActions:!0,onClose:()=>s(void 0)}),notFound:(0,a.jsx)(y.SidePanel,{heading:null,children:(0,a.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,a.jsx)(o.Text,{color:"subtle",children:"Key not found"})})}),loaded:({connectKey:e,values:n})=>(0,a.jsx)(B,{heading:(0,a.jsx)(T.SidePanelHeadingCopyable,{heading:"Key",value:e.key,label:"key"}),onClose:()=>s(void 0),remoteValues:n,fields:V,onSave:m,actionsLeft:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(j.Button,{onClick:()=>i("connectKeyDelete",e.key),children:(0,a.jsx)(v.TrashCan16,{})}),(0,a.jsxs)(j.Button,{onClick:()=>{l(O.routes.accounts.index,t({id:"connectkey",value:e.key}))},children:[(0,a.jsx)(v.Filter16,{}),"Accounts"]})]}),render:(s,t)=>(0,a.jsx)(z.SidePanelSection,{heading:"Info",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(F.FieldText,{name:"description",form:s,fields:t}),(0,a.jsx)(k.FieldNumber,{name:"maxPinnedDataGB",form:s,fields:t}),(0,a.jsx)(k.FieldNumber,{name:"remainingUses",form:s,fields:t}),(0,a.jsx)(N.InfoRow,{label:"Total uses",value:e.displayFields.totalUses}),(0,a.jsx)(N.InfoRow,{label:"Pinned data",value:e.displayFields.pinnedData}),(0,a.jsx)(N.InfoRow,{label:"Date created",value:e.displayFields.dateCreated}),(0,a.jsx)(N.InfoRow,{label:"Last updated",value:e.displayFields.lastUpdated}),(0,a.jsx)(N.InfoRow,{label:"Last used",value:e.displayFields.lastUsed})]})})},e.key)})}var $=e.i(367887),q=e.i(66084);function G(){let{openDialog:e}=(0,p.useDialog)();return(0,a.jsxs)(j.Button,{variant:"accent",onClick:()=>e("connectKeyCreate"),children:[(0,a.jsx)(v.Add16,{}),"Create key"]})}function J(){let{offset:e,limit:o,setOffset:c,setLimit:u,panelId:m,setPanelId:x,columnFilters:j,setColumnFilters:y,columnSorts:g,setColumnSorts:b}=(0,C.useKeysParams)(),p=(0,r.useCallback)(e=>{x(e)},[x]),v=function(){let{limit:e,offset:a}=(0,C.useKeysParams)(),s=(0,S.useAdminConnectKeys)({params:{limit:e,offset:a}});return(0,$.useRemoteDataset)({keys:s},({keys:e})=>e.map(L.transformDownData),{offset:a})}(),N=(0,n.useDataTable)({dataset:v,columns:h,columnFilters:j,setColumnFilters:y,columnSorts:g,setColumnSorts:b,offset:e,limit:o,onRowClick:p,setOffset:c,setLimit:u});return(0,a.jsx)(q.Layout,{table:(0,a.jsx)(s.DataTable,{...N,localStorage:"indexd/keys",actions:(0,a.jsx)(G,{}),noneOnPage:(0,a.jsx)(d.StateNoneOnPage,{message:"No keys on this page, reset pagination to continue."}),noneYet:(0,a.jsx)(t.StateNoneYet,{message:"There are no keys yet."}),noneMatchingFilters:(0,a.jsx)(i.StateNoneMatching,{message:"No keys matching filters."}),error:(0,a.jsx)(l.StateError,{message:"Error loading keys. Please try again later."})}),panel:m?(0,a.jsx)(Y,{}):(0,a.jsx)(f,{table:N})})}function Q(){return(0,a.jsx)(J,{})}e.s(["default",()=>Q],833231)}]);