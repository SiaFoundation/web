(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,860945,e=>{"use strict";var t=e.i(843476);e.i(387020);var s=e.i(1206);function l({label:e,value:l,variant:a="row"}){return"column"===a?(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(s.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e}),(0,t.jsx)(s.Text,{color:"contrast",children:l})]}):(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)("div",{className:"flex-1 flex justify-start items-center",children:(0,t.jsx)(s.Text,{color:"verySubtle",size:"14",weight:"medium",className:"truncate",children:e})}),(0,t.jsx)("div",{className:"flex-1 flex justify-end items-center",children:"string"==typeof l?l?(0,t.jsx)(s.Text,{className:"truncate",children:l}):(0,t.jsx)(s.Text,{color:"verySubtle",children:"-"}):l||(0,t.jsx)(s.Text,{color:"verySubtle",children:"-"})})]})}e.s(["InfoRow",()=>l])},167789,e=>{"use strict";var t=e.i(843476);e.i(387020);var s=e.i(495733),l=e.i(184214),a=e.i(22550),i=e.i(339173),n=e.i(393128),r=e.i(367527);e.i(587154);var o=e.i(699221),c=e.i(770352),d=e.i(271645),u=e.i(423836);function m({name:e,columnFilters:m,removeColumnFilter:g,removeLastColumnFilter:x,getFilterLabel:h,children:p}){let[b,j]=(0,d.useState)(!1),[y,f]=(0,d.useState)(""),[v,C]=(0,d.useState)([]),P=v[v.length-1],S=(0,d.useRef)(null),k=(0,d.useRef)(null),N=(0,d.useCallback)(e=>{C(t=>[...t,e])},[C]),T=(0,d.useCallback)(()=>{C([])},[C]);(0,d.useEffect)(()=>{let e=e=>{S.current&&!S.current.contains(e.target)&&j(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let F=(0,d.useCallback)(()=>{k.current?.focus()},[k]),w=(0,d.useCallback)(()=>{f(""),T()},[T]),{dialog:B}=(0,u.useDialog)();return(0,d.useEffect)(()=>{B&&j(!1)},[B]),(0,t.jsxs)("div",{className:"flex gap-1",children:[m.map(e=>(0,t.jsxs)(r.ControlGroup,{children:[(0,t.jsx)(i.Button,{variant:"active",state:"waiting",children:h(e)}),(0,t.jsx)(i.Button,{variant:"active",size:"small",onClick:()=>g(e.id),children:(0,t.jsx)(o.Close16,{})})]},e.id)),(0,t.jsxs)(c.Command,{ref:S,label:"Command Menu",onFocus:()=>j(!0),onKeyDown:e=>{v.length>0?"Escape"!==e.key&&("Backspace"!==e.key||y)||(e.preventDefault(),C(e=>e.slice(0,-1))):0===v.length&&("Backspace"!==e.key||y||x(),"Escape"!==e.key||y||(j(!1),k.current?.blur()))},children:[(0,t.jsx)(c.Command.Input,{"aria-label":`filter ${e}`,name:`filter-${e}-menu-input`,ref:k,value:y,onValueChange:f,className:(0,s.textFieldStyles)({variant:"ghost",focus:"none"}),placeholder:`Filter ${e}`}),b&&(0,t.jsx)(a.Panel,{className:"absolute z-10 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,t.jsxs)(n.ScrollArea,{children:[P&&(0,t.jsx)(l.Label,{className:"px-1.5 py-1",children:P.label}),(0,t.jsx)(c.Command.List,{children:(0,t.jsx)(p,{currentPage:P,beforeSelect:F,afterSelect:w,pushPage:N})})]})})]})]})}e.s(["FilterMenu",()=>m])},743962,36360,366846,e=>{"use strict";var t=e.i(843476);e.i(387020);var s=e.i(434480),l=e.i(812247),a=e.i(757615);e.i(587154);var i=e.i(699221),n=e.i(271645);function r({usable:e,usability:s,className:l,showExpanded:i=!1}){let r=(0,n.useMemo)(()=>s&&Object.keys(s).filter(e=>!s[e]).map(e=>(0,t.jsx)(o,{status:"unusable",name:d(e)},e)),[s]),c=(0,n.useMemo)(()=>s&&Object.keys(s).filter(e=>s[e]).map(e=>(0,t.jsx)(o,{status:"usable",name:d(e)},e)),[s]);return(0,t.jsx)("div",{className:(0,a.cn)("flex gap-1",l),children:e&&!i?(0,t.jsx)(o,{status:"usable",name:"usable"}):(0,t.jsxs)(t.Fragment,{children:[r,c]})})}function o({status:e,name:l}){return(0,t.jsxs)(s.Badge,{size:"small",className:"flex items-center gap-0.5",children:[(0,t.jsx)(c,{status:e,name:l}),l]})}function c({status:e,name:s}){let a=(0,n.useMemo)(()=>({usable:`${s} is usable`,warning:`${s} is almost unusable`,unusable:`${s} is unusable`}),[s]);return(0,t.jsx)(l.Tooltip,{content:a[e],children:"usable"===e?(0,t.jsx)(i.CheckmarkOutline16,{className:"text-green-600 scale-75"}):"warning"===e?(0,t.jsx)(i.Warning16,{className:"text-amber-600 scale-75"}):(0,t.jsx)(i.CloseOutline16,{className:"text-red-600 scale-75"})})}function d(e){return e.replace(/([A-Z])/g," $1").toLowerCase()}e.s(["UsabilityBadges",()=>r,"UsabilityIndicator",()=>c],743962);var u=e.i(652345),m=e.i(530875);e.i(519977);var g=e.i(219474),x=e.i(828073);e.i(913272);var h=e.i(635309),p=e.i(617526),b=e.i(818537),j=e.i(608970),y=e.i(897740),f=e.i(705543),v=e.i(893868);function C({host:e,currencyDisplay:t,exchange:s}){var l,a,i,n,r;let o,c,d,u={countryCode:e.countryCode,latitude:e.latitude,longitude:e.longitude};return{...e,id:e.publicKey,usable:Object.values(e.usability).every(e=>e),location:u,exchange:s,displayFields:(l=e,a=u,i=t,n=s,o=(0,y.sectorsToBytes)(l.settings.remainingStorage),c=(0,p.GBToBytes)(10),d=o.eq(0)?"unusable":o.lt(c)?"warning":"usable",{uptime:`${(100*l.recentUptime).toFixed(1)}%`,totalStorage:(0,j.humanBytes)((0,y.sectorsToBytes)(l.settings.totalStorage)),remainingStorage:(0,j.humanBytes)(o),remainingStorageUsability:d,storagePrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:(0,h.storagePriceInHastingsPerTBPerMonth)({price:l.settings.prices.storagePrice}),currencyDisplay:i,exchange:n}),ingressPrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:(0,h.ingressPriceInHastingsPerTBPerMonth)({price:l.settings.prices.ingressPrice}),currencyDisplay:i,exchange:n}),egressPrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:(0,h.egressPriceInHastingsPerTBPerMonth)({price:l.settings.prices.egressPrice}),currencyDisplay:i,exchange:n}),freeSectorPrice:(0,v.getCurrencyDisplayPropsPreferred)({sc:new x.BigNumber(l.settings.prices.freeSectorPrice),currencyDisplay:i,exchange:n}),maxCollateral:(0,v.getCurrencyDisplayPropsPreferred)({sc:new x.BigNumber(l.settings.prices.collateral),currencyDisplay:i,exchange:n}),maxContractDuration:`${(0,f.blocksToWeeks)(l.settings.maxContractDuration).toFixed(1)} weeks`,protocolVersion:"string"==typeof(r=l.settings).protocolVersion?r.protocolVersion.slice(1):`v${r.protocolVersion[0]}.${r.protocolVersion[1]}.${r.protocolVersion[2]}`,priceValidity:new Date(l.settings.prices.validUntil).toLocaleString(),release:l.settings.release,countryName:(0,b.getCountryName)(a?.countryCode),countryFlag:(0,b.countryCodeEmoji)(a?.countryCode)})}}e.s(["transformHost",()=>C],36360),e.i(563386);var P=e.i(165158);function S(e){let t=(0,g.useAdminHost)({disabled:!e,params:{hostkey:e||""}}),s=(0,u.useActiveDaemonExplorerExchangeRate)(),{settings:l}=(0,P.useAppSettings)();return(0,m.useRemoteData)({host:t},({host:e})=>(function({host:e,exchangeRate:t,settings:s}){return C({host:e,currencyDisplay:s.currencyDisplay,exchange:t.currency&&t.rate&&{currency:t.currency,rate:t.rate}})})({host:e,exchangeRate:s,settings:l}))}e.s(["useHost",()=>S],366846)},735665,e=>{"use strict";var t=e.i(843476);e.i(387020);var s=e.i(349023);function l({table:e,id:l,labelPositive:a,labelNegative:i,columnFilters:n,setColumnFilters:r}){let o=e?.getColumn(l)?.columnDef.meta,c=a||o?.filterLabelPositive||"Yes",d=i||o?.filterLabelNegative||"No",u=n.find(e=>e.id===l)?.value;return(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(s.Select,{"aria-label":`${l} filter`,value:void 0===u?"":String(u),onChange:e=>{if(""===e.target.value)return void r(e=>e.filter(e=>e.id!==l));let t="true"===e.target.value;r(e=>{let s=e.findIndex(e=>e.id===l);return -1!==s?e[s].value=t:e.push({id:l,value:t}),e})},children:[{value:"",label:"All"},{value:"true",label:c},{value:"false",label:d}].map(e=>(0,t.jsx)("option",{value:String(e.value),children:e.label},e.label))})})}e.s(["ColumnBooleanFilter",()=>l])},889589,e=>{"use strict";var t=e.i(843476);e.i(387020);var s=e.i(339173),l=e.i(295478),a=e.i(1206),i=e.i(812247);e.i(587154);var n=e.i(699221),r=e.i(271645),o=e.i(139169);function c({table:e,columns:c}){let d=e.getState().sorting,u=(0,r.useMemo)(()=>d.map(t=>{let s=e.getColumn(t.id),l=c.find(e=>e.id===t.id),a=t.id;return a=l?.header&&"string"==typeof l.header?l.header:t.id.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()).trim(),{id:t.id,header:a,direction:t.desc?"desc":"asc",sortIndex:s?.getSortIndex()??-1}}),[d,e,c]);return 0===d.length?null:(0,t.jsx)(l.Popover,{trigger:(0,t.jsx)(s.Button,{size:"small",children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(a.Text,{size:"12",weight:"medium",color:"subtle",children:"Order by"}),(0,t.jsx)(a.Text,{size:"12",weight:"medium",color:"contrast",children:1===d.length?u[0].header:`${d.length} columns`})]})}),contentProps:{align:"end",side:"bottom",className:"w-auto z-30",onOpenAutoFocus:e=>e.preventDefault()},children:(0,t.jsx)("div",{className:"p-1",children:u.map(l=>(0,t.jsxs)("div",{className:"flex items-center gap-1 justify-end min-w-0 p-1.5 rounded",children:[(0,t.jsx)(a.Text,{size:"12",className:"truncate min-w-0 flex-1 text-right",children:l.header}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 shrink-0",children:[(0,t.jsx)(i.Tooltip,{content:"Remove this sort",side:"bottom",delayDuration:1200,children:(0,t.jsxs)(s.Button,{variant:"ghost",size:"none",onClick:()=>{var t;let s;return t=l.id,s=e.getColumn(t),void s?.clearSorting()},className:"group shrink-0 w-3.5 h-3.5 p-0 relative flex items-center justify-center",children:[(0,t.jsx)("span",{className:"text-[10px] leading-none font-medium absolute inset-0 flex items-center justify-center group-hover:hidden",children:l.sortIndex+1}),(0,t.jsx)(n.Close16,{className:"w-2.5 h-2.5 hidden group-hover:block absolute inset-0 m-auto"})]})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"none",icon:"contrast",onClick:()=>{var t,s;let a;return t=l.id,s="desc"===l.direction,a=e.getColumn(t),void a?.toggleSorting(!s,!0)},className:"shrink-0",children:(0,t.jsx)(o.SortIcon,{direction:l.direction})})]})]},l.id))})})}e.s(["SortControl",()=>c])},128383,e=>{"use strict";var t=e.i(843476);e.i(387020);var s=e.i(217099),l=e.i(226584),a=e.i(799163),i=e.i(755337),n=e.i(641331),r=e.i(926622),o=e.i(765477),c=e.i(1206),d=e.i(865085),u=e.i(448084),m=e.i(489842),g=e.i(383283),x=e.i(812247);e.i(587154);var h=e.i(699221),p=e.i(271645),b=e.i(743962),j=e.i(860945),y=e.i(540491),f=e.i(339173),v=e.i(423836);function C({hosts:e}){let{openDialog:s}=(0,v.useDialog)(),l=(0,p.useMemo)(()=>e.map(e=>"publicKey"in e?e:e.original),[e]);return(0,t.jsxs)(f.Button,{onClick:()=>s("hostBlocklistAdd",void 0,{hostBlocklistAdd:{hosts:l}}),children:[(0,t.jsx)(h.CloseOutline16,{}),"Block ",1===e.length?"host":"hosts"]})}var P=e.i(209292);e.i(519977);var S=e.i(219474);e.i(913272);var k=e.i(599159);e.i(563386);var N=e.i(455030);e.i(253894);var T=e.i(110094);function F({hosts:e}){let s=(0,S.useAdminHostsBlocklistDelete)(),l=(0,N.useMutate)(),a=(0,p.useCallback)(async()=>{await (0,P.handleBatchOperation)(e.map(e=>s.delete({params:{hostkey:"publicKey"in e?e.publicKey:e.original.publicKey}})),{toastError:({successCount:e,errorCount:t,totalCount:s})=>({title:`Unblocked ${(0,k.pluralize)(e,"host")}`,body:`Error unblocking ${t}/${s} of total hosts.`}),toastSuccess:({totalCount:e})=>({title:`Unblocked ${(0,k.pluralize)(e,"host")}`})}),await l(e=>e.startsWith(T.adminHostsRoute)),await Promise.all(e.map(e=>l(t=>t.startsWith(T.adminHostRoute.replace(":hostkey","publicKey"in e?e.publicKey:e.original.publicKey)))))},[e,s,l]);return(0,t.jsxs)(f.Button,{onClick:a,children:[(0,t.jsx)(h.CheckmarkOutline16,{}),"Unblock ",1===e.length?"host":"hosts"]})}var w=e.i(929232),B=e.i(366846),I=e.i(885116),R=e.i(279969);function H(){let e=(0,I.useDataTableParams)("hostList"),[t,s]=(0,R.useParamStr)("hostsPanelId");return{...e,panelId:t,setPanelId:s}}var U=e.i(750560),D=e.i(756894),K=e.i(434480);function M({host:e}){return e.blocked&&e.blockedReasons&&0!==e.blockedReasons.length?(0,t.jsx)("div",{className:"flex items-center justify-start gap-1",children:e.blockedReasons.map(e=>(0,t.jsx)(x.Tooltip,{content:`block reason: ${e}`,children:(0,t.jsx)(K.Badge,{size:"small",children:e},e)},e))}):null}function A(){let{panelId:e,setPanelId:s}=H(),l=(0,B.useHost)(e),a=(0,p.useMemo)(()=>l.data&&l.data?.location.countryCode!=="unknown"?{id:l.data.id,publicKey:l.data.publicKey,location:l.data.location,v2Settings:l.data.settings,usable:l.data.usable}:null,[l]);return(0,t.jsx)(m.RemoteDataStates,{data:l,loading:(0,t.jsx)(D.SidePanelSkeleton,{withMap:!0,withActions:!0,onClose:()=>s(void 0)}),notFound:(0,t.jsx)(y.SidePanel,{heading:null,children:(0,t.jsx)("div",{className:"flex justify-center pt-[50px]",children:(0,t.jsx)(c.Text,{color:"subtle",children:"Host not found"})})}),loaded:l=>(0,t.jsxs)(y.SidePanel,{onClose:()=>s(void 0),heading:l?(0,t.jsx)(U.SidePanelHeadingCopyable,{heading:(0,t.jsx)(c.Text,{size:"18",weight:"medium",ellipsis:!0,children:l.location?.countryCode?(0,t.jsx)("span",{className:"pr-1",children:(0,t.jsx)(u.CountryFlag,{countryCode:l.location?.countryCode})}):null}),value:l.addresses[0].address,label:"host"}):null,actions:l?l.blocked?(0,t.jsx)(F,{hosts:[l]}):(0,t.jsx)(C,{hosts:[l]}):null,children:[(0,t.jsx)(o.HostMap,{hosts:a?[a]:[],activeHost:a,onHostMapClick:()=>null,scale:180,mapClassName:"-mt-[20px]"},e),(0,t.jsx)(w.SidePanelSection,{heading:"Info",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(j.InfoRow,{label:"Public Key",value:(0,t.jsx)(d.ValueCopyable,{value:l.id,type:"hostPublicKey"})}),(0,t.jsx)(j.InfoRow,{label:"Location",value:"unknown"!==l.location.countryCode&&(0,t.jsxs)(c.Text,{children:[l.displayFields.countryFlag," ",l.location.countryCode]})}),(0,t.jsx)(j.InfoRow,{label:"Uptime",value:l.displayFields.uptime}),(0,t.jsx)(j.InfoRow,{label:"Release",value:l.displayFields.release}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(j.InfoRow,{label:"Blocked",value:(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsx)(x.Tooltip,{content:l.blocked?"host is blocked":"host is not blocked",children:l.blocked?(0,t.jsx)(h.CloseFilled16,{className:"text-red-500"}):(0,t.jsx)(h.CheckmarkFilled16,{className:"text-neutral-300 dark:text-neutral-500"})})})}),(0,t.jsx)(M,{host:l})]})]})}),(0,t.jsx)(w.SidePanelSection,{heading:"Usability",children:(0,t.jsx)(b.UsabilityBadges,{usable:l.usable,usability:l.usability,className:"w-full overflow-hidden flex-wrap"})}),(0,t.jsx)(w.SidePanelSection,{heading:"Addresses",children:(0,t.jsx)("div",{className:"flex flex-col gap-2",children:l.addresses.map(e=>(0,t.jsx)(j.InfoRow,{label:e.protocol,value:(0,t.jsx)(d.ValueCopyable,{value:e.address,maxLength:24})},e.address+e.protocol))})}),(0,t.jsx)(w.SidePanelSection,{heading:"Storage",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(j.InfoRow,{label:"Total Storage",value:l.displayFields.totalStorage}),(0,t.jsx)(j.InfoRow,{label:"Remaining Storage",value:l.displayFields.remainingStorage})]})}),(0,t.jsx)(w.SidePanelSection,{heading:"Pricing & Limits",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(j.InfoRow,{label:"Storage Price",value:(0,t.jsx)(g.ValueWithTooltip,{...l.displayFields.storagePrice})}),(0,t.jsx)(j.InfoRow,{label:"Ingress Price",value:(0,t.jsx)(g.ValueWithTooltip,{...l.displayFields.ingressPrice})}),(0,t.jsx)(j.InfoRow,{label:"Egress Price",value:(0,t.jsx)(g.ValueWithTooltip,{...l.displayFields.egressPrice})}),(0,t.jsx)(j.InfoRow,{label:"Free Sector Price",value:(0,t.jsx)(g.ValueWithTooltip,{...l.displayFields.freeSectorPrice})}),(0,t.jsx)(j.InfoRow,{label:"Max Collateral",value:(0,t.jsx)(g.ValueWithTooltip,{...l.displayFields.maxCollateral})}),(0,t.jsx)(j.InfoRow,{label:"Max Contract Duration",value:l.displayFields.maxContractDuration}),(0,t.jsx)(j.InfoRow,{label:"Protocol Version",value:l.displayFields.protocolVersion}),(0,t.jsx)(j.InfoRow,{label:"Price Validity",value:l.displayFields.priceValidity})]})})]})})}function V({table:e}){let{setPanelId:s}=H(),l=(0,p.useMemo)(()=>e.isSelection?e.selectedRows:e.rows,[e.isSelection,e.selectedRows,e.rows]),a=function({hosts:e}){let t=(0,p.useDeferredValue)(e);return(0,p.useMemo)(()=>t.length>100?Object.values(t.reduce((e,t)=>{let s=t.location?.countryCode;return s&&"unknown"!==s&&t.location&&(e[s]?e[s].groupCount=(e[s].groupCount||0)+1:e[s]={type:"group",id:t.id,location:{latitude:t.location?.latitude,longitude:t.location?.longitude,countryCode:t.location?.countryCode},groupCount:1}),e},{})):t.map(e=>e.location&&"unknown"!==e.location.countryCode?{id:e.id,publicKey:e.id,location:{latitude:e.location.latitude,longitude:e.location.longitude,countryCode:e.location.countryCode},v2Settings:e.settings,usable:e.usable}:null).filter(e=>null!==e),[t])}({hosts:l.map(e=>e.original)});return(0,t.jsx)(y.SidePanel,{customCloseAction:e.isSelection?(0,t.jsx)(f.Button,{onClick:()=>e.setRowSelection({}),children:"Clear selection"}):null,actions:e.isSelection?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C,{hosts:l}),(0,t.jsx)(F,{hosts:l})]}):null,heading:(0,t.jsx)(c.Text,{size:"18",weight:"medium",children:e.isSelection?`Selected hosts (${l.length})`:e.isFiltered?`Filtered hosts (${l.length})`:"All hosts"}),children:(0,t.jsx)(o.HostMap,{hosts:a,activeHost:null,onHostMapClick:e=>s(e),scale:180,mapClassName:"-mt-[20px]"})})}var W=e.i(706141),$=e.i(735665);function L(){let{columnFilters:e,setColumnFilters:s}=H();return(0,t.jsx)($.ColumnBooleanFilter,{id:"usable",labelPositive:"Usable",labelNegative:"Unusable",columnFilters:e,setColumnFilters:s})}function z(){let{columnFilters:e,setColumnFilters:s}=H();return(0,t.jsx)($.ColumnBooleanFilter,{id:"blocked",labelPositive:"Blocked",labelNegative:"Not Blocked",columnFilters:e,setColumnFilters:s})}var E=e.i(74045),O=e.i(623923);let G=[(0,E.selectColumn)(),{id:"publicKey",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,className:"justify-start",children:"Public Key"}),cell:({row:e})=>(0,t.jsx)(d.ValueCopyable,{maxLength:100,value:e.original.id,type:"hostPublicKey"}),meta:{...O.hashColumnWidth}},{id:"usable",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,className:"justify-start",filter:(0,t.jsx)(L,{}),children:"Usable"}),cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(x.Tooltip,{content:e.original.usable?"host is usable":"host is unusable",children:e.original.usable?(0,t.jsx)(h.CheckmarkFilled16,{className:"text-green-500"}):(0,t.jsx)(h.CloseFilled16,{className:"text-red-500"})}),(0,t.jsx)(b.UsabilityBadges,{usable:e.original.usable,usability:e.original.usability})]}),meta:{...O.hostUsableColumnWidth,filterLabelPositive:"Usable",filterLabelNegative:"Unusable"}},{id:"blocked",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,className:"justify-start",filter:(0,t.jsx)(z,{}),children:"Blocked"}),cell:({row:e})=>{let s=e.original.blocked;return(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(x.Tooltip,{content:s?"host is blocked":"host is not blocked",children:s?(0,t.jsx)(h.CloseFilled16,{className:"text-red-500"}):(0,t.jsx)(h.CheckmarkFilled16,{className:"text-neutral-300 dark:text-neutral-500"})}),(0,t.jsx)(M,{host:e.original})]})},meta:{className:"justify-start",...O.hostBlockedColumnWidth,filterLabelPositive:"Blocked",filterLabelNegative:"Not Blocked"}},{id:"acceptingContracts",sortKey:"settings.acceptingContracts",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Accepting Contracts"}),cell:({row:e})=>(0,t.jsx)("div",{className:"flex items-center justify-end gap-1",children:(0,t.jsx)(b.UsabilityIndicator,{status:e.original.usability.acceptingContracts?"usable":"unusable",name:"accepting contracts"})}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"uptime",sortKey:"recentUptime",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Uptime"}),cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(b.UsabilityIndicator,{status:e.original.usability.uptime?"usable":"unusable",name:"recent uptime"}),(0,t.jsx)(c.Text,{children:e.original.displayFields.uptime})]}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"location",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Location"}),cell:({row:e})=>"unknown"===e.original.location.countryCode?(0,t.jsx)("div",{className:"py-1",children:(0,t.jsx)(c.Text,{color:"verySubtle",children:"-"})}):(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsx)("span",{role:"img","aria-label":e.original.displayFields.countryName,children:e.original.displayFields.countryFlag}),(0,t.jsx)(c.Text,{className:"ml-1",children:e.original.location.countryCode})]}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"totalStorage",sortKey:"settings.totalStorage",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Total Storage"}),cell:({row:e})=>(0,t.jsx)(c.Text,{children:e.original.displayFields.totalStorage}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"remainingStorage",sortKey:"settings.remainingStorage",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Remaining Storage"}),cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(b.UsabilityIndicator,{status:e.original.displayFields.remainingStorageUsability,name:"storage"}),(0,t.jsx)(c.Text,{children:e.original.displayFields.remainingStorage})]}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"storagePrice",sortKey:"settings.prices.storagePrice",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Price Storage"}),cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(b.UsabilityIndicator,{status:e.original.usability.storagePrice?"usable":"unusable",name:"storage price"}),(0,t.jsx)(g.ValueWithTooltip,{...e.original.displayFields.storagePrice})]}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"ingressPrice",sortKey:"settings.prices.ingressPrice",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Ingress/TB"}),cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(b.UsabilityIndicator,{status:e.original.usability.ingressPrice?"usable":"unusable",name:"ingress price"}),(0,t.jsx)(g.ValueWithTooltip,{...e.original.displayFields.ingressPrice})]}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"egressPrice",sortKey:"settings.prices.egressPrice",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Egress/TB"}),cell:({row:e})=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,t.jsx)(b.UsabilityIndicator,{status:e.original.usability.egressPrice?"usable":"unusable",name:"egress price"}),(0,t.jsx)(g.ValueWithTooltip,{...e.original.displayFields.egressPrice})]}),meta:{className:"justify-end",...O.smallColumnWidth}},{id:"release",header:({table:e,column:s})=>(0,t.jsx)(W.TableHeader,{table:e,column:s,children:"Release"}),cell:({row:e})=>(0,t.jsx)(c.Text,{children:e.original.displayFields.release}),meta:{className:"justify-end",width:160}}];var Y=e.i(652345),Z=e.i(367887),q=e.i(36360),J=e.i(165158),Q=e.i(66084),X=e.i(931502);function _(e){switch(e.id){case"usable":return e.value?"Usable":"Unusable";case"blocked":return e.value?"Blocked":"Not Blocked";case"activecontracts":return e.value?"Active Contracts":"No Active Contracts";default:return""}}let ee={namespace:"hosts/filterUsable",label:"Hosts filter by usable"},et=[{id:"usable",value:!0},{id:"usable",value:!1}];function es({select:e,currentPage:s}){return(0,t.jsx)(X.CommandGroup,{currentPage:s,commandPage:ee,children:et.map(l=>(0,t.jsx)(X.CommandItemSearch,{currentPage:s,commandPage:ee,onSelect:()=>{e(l)},children:_(l)},l.id+l.value))})}let el={namespace:"hosts/filterBlocked",label:"Hosts filter by blocked"},ea=[{id:"blocked",value:!0},{id:"blocked",value:!1}];function ei({select:e,currentPage:s}){return(0,t.jsx)(X.CommandGroup,{currentPage:s,commandPage:el,children:ea.map(l=>(0,t.jsx)(X.CommandItemSearch,{currentPage:s,commandPage:el,onSelect:()=>{e(l)},children:_(l)},l.id+l.value))})}let en={namespace:"hosts/filterActiveContracts",label:"Hosts filter by active contracts"},er=[{id:"activecontracts",value:!0},{id:"activecontracts",value:!1}];function eo({select:e,currentPage:s}){return(0,t.jsx)(X.CommandGroup,{currentPage:s,commandPage:en,children:er.map(l=>(0,t.jsx)(X.CommandItemSearch,{currentPage:s,commandPage:en,onSelect:()=>{e(l)},children:_(l)},l.id+l.value))})}function ec({currentPage:e,select:s}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(es,{currentPage:e,select:s}),(0,t.jsx)(ei,{currentPage:e,select:s}),(0,t.jsx)(eo,{currentPage:e,select:s})]})}let ed={namespace:"hosts",label:"Hosts"};function eu({currentPage:e,parentPage:s,pushPage:l}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(X.CommandItemNav,{currentPage:e,parentPage:s,commandPage:ed,onSelect:()=>{l(ee)},children:ee.label}),(0,t.jsx)(X.CommandItemNav,{currentPage:e,parentPage:s,commandPage:ed,onSelect:()=>{l(el)},children:el.label}),(0,t.jsx)(X.CommandItemNav,{currentPage:e,parentPage:s,commandPage:ed,onSelect:()=>{l(en)},children:en.label})]})}function em({currentPage:e,parentPage:s,pushPage:l,beforeSelect:a,afterSelect:i}){let{addColumnFilter:n}=H(),r=(0,p.useCallback)(e=>{a&&a(),n(e),i&&i()},[n,a,i]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eu,{parentPage:s,currentPage:e,pushPage:l,select:r}),(0,t.jsx)(ec,{currentPage:e,select:r})]})}var eg=e.i(167789);function ex(){let{columnFilters:e,removeColumnFilter:s,removeLastColumnFilter:l}=H();return(0,t.jsx)(eg.FilterMenu,{name:"hosts",columnFilters:e,removeColumnFilter:s,removeLastColumnFilter:l,getFilterLabel:_,children:({currentPage:e,beforeSelect:s,afterSelect:l,pushPage:a})=>(0,t.jsx)(em,{currentPage:e,beforeSelect:s,afterSelect:l,pushPage:a})})}var eh=e.i(889589);function ep(){let{panelId:e,setPanelId:o,columnFilters:c,setColumnFilters:d,columnSorts:u,setColumnSorts:m,offset:g,limit:x,setOffset:h,setLimit:b}=H(),j=(0,p.useCallback)(e=>{o(e)},[o]),y=function(){let{columnFilters:e,columnSorts:t,offset:s,limit:l}=H(),a=(0,p.useMemo)(()=>{let a={offset:s,limit:l},i=e.find(e=>"usable"===e.id)?.value;a.usable=void 0===i||i;let n=e.find(e=>"blocked"===e.id)?.value;void 0!==n&&(a.blocked=n);let r=e.find(e=>"activecontracts"===e.id)?.value;if(void 0!==r&&(a.activecontracts=r),t.length>0){let e=[],s=[];for(let l of t){let t=G.find(e=>e.id===l.id),a=t?.sortKey;void 0!==a&&(e.push(a),s.push(l.desc??!1))}e.length>0&&(a.sortby=e,a.desc=s)}return a},[e,t,s,l]),i=(0,S.useAdminHosts)({params:a}),n=(0,Y.useActiveDaemonExplorerExchangeRate)(),{settings:r}=(0,J.useAppSettings)();return(0,Z.useRemoteDataset)({hosts:i},({hosts:e})=>e.map(e=>(0,q.transformHost)({host:e,currencyDisplay:r.currencyDisplay,exchange:n.currency&&n.rate&&{currency:n.currency,rate:n.rate}})),{offset:s,filters:e})}(),f=(0,r.useDataTable)({dataset:y,columns:G,columnFilters:c,columnSorts:u,setColumnFilters:d,setColumnSorts:m,enableMultiSort:!0,offset:g,limit:x,onRowClick:j,setOffset:h,setLimit:b});return(0,t.jsx)(Q.Layout,{table:(0,t.jsx)(s.DataTable,{...f,localStorage:"indexd/hosts",header:(0,t.jsx)(ex,{}),actions:(0,t.jsx)(eh.SortControl,{table:f.table,columns:G}),noneOnPage:(0,t.jsx)(i.StateNoneOnPage,{message:"No hosts on this page, reset pagination to continue."}),noneYet:(0,t.jsx)(n.StateNoneYet,{message:"There are no hosts in the database."}),noneMatchingFilters:(0,t.jsx)(a.StateNoneMatching,{message:"No hosts matching filters."}),error:(0,t.jsx)(l.StateError,{message:"Error loading hosts. Please try again later."})}),panel:e?(0,t.jsx)(A,{}):(0,t.jsx)(V,{table:f})})}function eb(){return(0,t.jsx)(ep,{})}e.s(["default",()=>eb],128383)}]);