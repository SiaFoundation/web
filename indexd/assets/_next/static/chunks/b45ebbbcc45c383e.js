(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,223931,679849,e=>{"use strict";e.i(387020);var t=e.i(565241);e.i(519977);var n=e.i(219474);function i(){let e=(0,n.useAdminState)();return e.data?.network==="zen"?t.webLinks.explore.testnetZen:t.webLinks.explore.mainnet}e.s(["useSiascanUrl",()=>i],223931),e.i(913272);let r=(0,e.i(612433).secondsInMilliseconds)(15);e.s(["defaultDatasetRefreshInterval",0,r],679849)},673213,e=>{"use strict";e.i(913272);var t=e.i(612433);e.i(563386);var n=e.i(165158);e.i(519977);var i=e.i(219474);function r(){let{isUnlockedAndAuthedRoute:e}=(0,n.useAppSettings)(),r=(0,i.useAdminState)({config:{swr:{refreshInterval:e=>e?.synced?(0,t.secondsInMilliseconds)(60):(0,t.secondsInMilliseconds)(10)}}}),a=(0,i.useAdminEstimatedNetworkBlockHeight)(),o=r.data?r.data?.syncHeight:0,s=r.data?r.data?.scanHeight:0,c=e&&o&&a?Number((100*Math.min(o/a,1)).toFixed(1)):0,u=e&&o&&s?Number((100*Math.min(s??0/a,1)).toFixed(1)):0;return{isSynced:!!r.data?.synced,isWalletSynced:!!(r.data?.synced&&s&&s>=o-1),blockHeight:r.data?.synced?o:a,nodeBlockHeight:o,estimatedBlockHeight:a,walletScanHeight:s,syncPercent:c,walletScanPercent:u,moreThan100BlocksToSync:!!o&&!!a&&a-o>100,firstTimeSyncing:!!o&&!!a&&a-o>5e4}}e.s(["useSyncStatus",()=>r])},737966,e=>{"use strict";var t=e.i(843476);e.i(387020);var n=e.i(367887),i=e.i(673297);e.i(519977);var r=e.i(219474),a=e.i(271645),o=e.i(618566),s=e.i(223931),c=e.i(679849),u=e.i(673213),l=e.i(1206),d=e.i(865085),m=e.i(782570),g=e.i(695407),p=e.i(611050),h=e.i(812247),P=e.i(434480);e.i(913272);var x=e.i(608970),f=e.i(778159);e.i(587154);var y=e.i(699221);let v=[{id:"transactionId",label:"transaction ID",category:"general",render:({data:{id:e},context:n})=>e?(0,t.jsx)(d.ValueCopyable,{size:"12",value:e,label:"transaction ID",type:"transaction",siascanUrl:n.siascanUrl}):null},{id:"type",label:"type",category:"general",fixed:!0,render:({data:{txType:e}})=>(0,t.jsx)(P.Badge,{size:"small",children:(0,f.getTxTypeLabel)(e)})},{id:"height",label:"height",category:"general",contentClassName:"justify-end",render:({data:{height:e,pending:n,maturityHeight:i,isMature:r}})=>n?(0,t.jsx)(l.Text,{size:"12",ellipsis:!0,children:(0,t.jsx)(m.LoadingDots,{})}):e?e&&i&&i>e?(0,t.jsx)(h.Tooltip,{content:r?"The maturity height has been reached.":"The maturity height has not been reached, therefore the output is still locked.",children:(0,t.jsxs)("div",{className:"flex flex-col gap-[5px]",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(l.Text,{size:"12",font:"mono",ellipsis:!0,color:r?"green":"red",className:"flex gap-1 items-center",children:[r?(0,t.jsx)(y.Unlocked16,{}):(0,t.jsx)(y.Locked16,{}),i.toLocaleString()]})}),(0,t.jsxs)("div",{className:"flex justify-between items-end gap-1",children:[(0,t.jsx)("div",{className:"pl-[8px] pb-[6px]",children:(0,t.jsx)("div",{className:"border-l border-b border-gray-800 dark:border-graydark-800 h-[20px] w-[7px]"})}),(0,t.jsx)(l.Text,{size:"12",font:"mono",color:"subtle",ellipsis:!0,children:e.toLocaleString()})]})]})}):(0,t.jsx)(l.Text,{size:"12",font:"mono",ellipsis:!0,children:e.toLocaleString()}):null},{id:"timestamp",label:"timestamp",category:"general",contentClassName:"justify-end",render:({data:{timestamp:e,pending:n}})=>n?(0,t.jsx)(l.Text,{size:"12",ellipsis:!0,children:(0,t.jsx)(m.LoadingDots,{})}):(0,t.jsx)(l.Text,{size:"12",ellipsis:!0,children:(0,x.humanDate)(e,{timeStyle:"short"})})},{id:"amount",label:"amount",category:"general",contentClassName:"w-[120px] justify-end",render:({data:{amountSc:e,amountSf:n}})=>e?(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[!e.isZero()&&(0,t.jsx)(g.ValueCurrency,{displayBoth:!0,size:"12",value:e}),!!n&&(0,t.jsx)(p.ValueSf,{size:"12",value:n})]}):null},{id:"fee",label:"fee",category:"general",contentClassName:"w-[120px] justify-end",render:({data:{fee:e}})=>e?(0,t.jsx)(g.ValueCurrency,{displayBoth:!0,size:"12",variant:"value",value:e}):null},{id:"contractId",label:"contract ID",category:"general",render:({data:{contractId:e},context:n})=>e?(0,t.jsx)(d.ValueCopyable,{size:"12",value:e,label:"contract ID",siascanUrl:n.siascanUrl}):null}];var S=e.i(802407),T=e.i(529594);let w=["transactionId","type","height","timestamp","amount","fee"],C=[],B=[],b=(0,a.createContext)({});function R({children:e}){let l=function(){let e=(0,o.useSearchParams)(),t=Number(e.get("limit")||50),l=Number(e.get("offset")||0),d=(0,r.useAdminWalletEvents)({params:{limit:t,offset:l},config:{swr:{refreshInterval:c.defaultDatasetRefreshInterval}}}),m=(0,r.useAdminWalletPending)({config:{swr:{refreshInterval:c.defaultDatasetRefreshInterval}}}),g=(0,u.useSyncStatus)(),p=(0,n.useRemoteDataset)({events:d,pending:m},({events:e,pending:t})=>{if(!e||!t)return[];let n=t.map(e=>{let t=(0,S.calculateScValue)(e),n=(0,T.getEventFee)(e);return{id:e.id,timestamp:0,pending:!0,type:e.type,txType:(0,T.getEventTxType)(e),isMature:!1,amountSc:t,fee:n}}),i=e.map(e=>{let t=(0,S.calculateScValue)(e),n=(0,T.getEventFee)(e),i=(0,T.getEventContractId)(e),r=e.maturityHeight<=g.nodeBlockHeight;return{id:e.id,type:e.type,txType:(0,T.getEventTxType)(e),timestamp:new Date(e.timestamp).getTime(),maturityHeight:e.maturityHeight,isMature:r,height:e.index.height,pending:!1,amountSc:t,fee:n,contractId:i}});return 0===l?[...n.reverse(),...i]:[...i]},{offset:l,filters:B}),{configurableColumns:h,visibleColumnIds:P,visibleColumns:x,sortableColumns:f,toggleColumnVisibility:y,setColumnsVisible:b,setColumnsHidden:R,toggleSort:k,setSortDirection:M,setSortField:A,sortField:j,sortDirection:I,resetDefaultColumnVisibility:F}=(0,i.useTableState)("indexd/v0/events",{columns:v,columnsDefaultVisible:w,sortOptions:C,defaultSortField:"id"}),H=(0,s.useSiascanUrl)(),E=(0,a.useMemo)(()=>({siascanUrl:H}),[H]);return{dataset:p,offset:l,limit:t,datasetPageTotal:p.data?.length||0,defaultPageSize:50,cellContext:E,configurableColumns:h,visibleColumnIds:P,sortableColumns:f,toggleColumnVisibility:y,setColumnsVisible:b,setColumnsHidden:R,toggleSort:k,setSortDirection:M,setSortField:A,sortField:j,sortDirection:I,resetDefaultColumnVisibility:F,filters:B,visibleColumns:x}}();return(0,t.jsx)(b.Provider,{value:l,children:e})}e.s(["TransactionsProvider",()=>R,"useTransactions",0,()=>(0,a.useContext)(b)],737966)},827209,e=>{e.v("/_next/static/media/background-pattern.23d411a1.jpg")},733262,e=>{e.v("/_next/static/media/shard.97a7a6ec.png")},233525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},618566,(e,t,n)=>{t.exports=e.r(976562)},253894,110094,95541,e=>{"use strict";e.s(["adminAccountRoute",0,"/account/:accountkey","adminAccountsRoute",0,"/accounts","adminAlertsDismissRoute",0,"/alerts/dismiss","adminAlertsIdRoute",0,"/alerts/:id","adminAlertsRoute",0,"/alerts","adminConnectKeyAddRoute",0,"/apps/connect/keys","adminConnectKeyDeleteRoute",0,"/apps/connect/keys/:key","adminConnectKeyRoute",0,"/apps/connect/keys/:key","adminConnectKeyUpdateRoute",0,"/apps/connect/keys","adminConnectKeysRoute",0,"/apps/connect/keys","adminContractRoute",0,"/contract/:contractid","adminContractsRoute",0,"/contracts","adminExplorerExchangeRateSiacoinRoute",0,"/explorer/exchange-rate/siacoin/:currency","adminHostRoute",0,"/host/:hostkey","adminHostScanRoute",0,"/host/:hostkey/scan","adminHostsBlocklistDeleteRoute",0,"/hosts/blocklist/:hostkey","adminHostsBlocklistRoute",0,"/hosts/blocklist","adminHostsBlocklistUpdateRoute",0,"/hosts/blocklist","adminHostsRoute",0,"/hosts","adminSettingsContractsRoute",0,"/settings/contracts","adminSettingsContractsUpdateRoute",0,"/settings/contracts","adminSettingsHostsRoute",0,"/settings/hosts","adminSettingsHostsUpdateRoute",0,"/settings/hosts","adminSettingsPricePinningRoute",0,"/settings/pricepinning","adminSettingsPricePinningUpdateRoute",0,"/settings/pricepinning","adminStateRoute",0,"/state","adminStatsAccountsRoute",0,"/stats/accounts","adminStatsContractsRoute",0,"/stats/contracts","adminStatsSectorsRoute",0,"/stats/sectors","adminSyncerConnectRoute",0,"/syncer/connect","adminTxpoolRecommendedFeeRoute",0,"/txpool/recommendedfee","adminWalletEventsRoute",0,"/wallet/events","adminWalletPendingRoute",0,"/wallet/pending","adminWalletRoute",0,"/wallet","adminWalletSendRoute",0,"/wallet/send"],110094),e.s(["appAuthCheckRoute",0,"/auth/check","appAuthConnectApproveRoute",0,"/auth/connect/:requestID","appAuthConnectRoute",0,"/auth/connect","appAuthConnectStatusRoute",0,"/auth/connect/:requestID/status","appHostsRoute",0,"/hosts","appSlabsRoute",0,"/slabs","appSlabsSlabIdRoute",0,"/slabs/:slabid"],95541),e.s([],253894)},519977,219474,e=>{"use strict";e.i(563386);var t=e.i(514877),n=e.i(863393),i=e.i(854563),r=e.i(640571);e.i(253894);var a=e.i(110094),o=e.i(283599);e.i(913272);var s=e.i(886013);function c(e){return(0,n.useGetSwr)({...e,route:a.adminStateRoute})}function u(){let e=c({config:{swr:{revalidateOnFocus:!1}}});return(0,o.default)(e,()=>e.data?.network==="zen"?(0,s.getTestnetZenBlockHeight)():(0,s.getMainnetBlockHeight)(),{refreshInterval:6e4,keepPreviousData:!0}).data||0}function l(e){return(0,r.usePostFunc)({...e,route:a.adminSyncerConnectRoute})}function d(e){return(0,n.useGetSwr)({...e,route:a.adminTxpoolRecommendedFeeRoute})}function m(e){return(0,n.useGetSwr)({...e,route:a.adminAccountRoute})}function g(e){return(0,n.useGetSwr)({...e,route:a.adminAccountsRoute})}function p(e){return(0,t.useDeleteFunc)({...e,route:a.adminAccountRoute})}function h(e){return(0,n.useGetSwr)({...e,route:a.adminContractRoute})}function P(e){return(0,n.useGetSwr)({...e,route:a.adminContractsRoute})}function x(e){return(0,n.useGetSwr)({...e,route:a.adminHostRoute})}function f(e){return(0,n.useGetSwr)({...e,route:a.adminHostsRoute})}function y(e){return(0,i.usePutFunc)({...e,route:a.adminHostsBlocklistUpdateRoute})}function v(e){return(0,t.useDeleteFunc)({...e,route:a.adminHostsBlocklistDeleteRoute})}function S(e){return(0,n.useGetSwr)({...e,route:a.adminSettingsContractsRoute})}function T(e){return(0,i.usePutFunc)({...e,route:a.adminSettingsContractsUpdateRoute})}function w(e){return(0,n.useGetSwr)({...e,route:a.adminSettingsHostsRoute})}function C(e){return(0,i.usePutFunc)({...e,route:a.adminSettingsHostsUpdateRoute})}function B(e){return(0,n.useGetSwr)({...e,route:a.adminSettingsPricePinningRoute})}function b(e){return(0,i.usePutFunc)({...e,route:a.adminSettingsPricePinningUpdateRoute})}function R(e){return(0,n.useGetSwr)({...e,route:a.adminWalletRoute})}function k(e){return(0,n.useGetSwr)({...e,route:a.adminWalletEventsRoute})}function M(e){return(0,n.useGetSwr)({...e,route:a.adminWalletPendingRoute})}function A(e){return(0,r.usePostFunc)({...e,route:a.adminWalletSendRoute})}function j(e){return(0,n.useGetSwr)({...e,route:a.adminConnectKeyRoute})}function I(e){return(0,n.useGetSwr)({...e,route:a.adminConnectKeysRoute})}function F(e){return(0,r.usePostFunc)({...e,route:a.adminConnectKeyAddRoute})}function H(e){return(0,i.usePutFunc)({...e,route:a.adminConnectKeyUpdateRoute})}function E(e){return(0,t.useDeleteFunc)({...e,route:a.adminConnectKeyDeleteRoute})}function D(e){return(0,n.useGetSwr)({...e,route:a.adminAlertsIdRoute})}function W(e){return(0,n.useGetSwr)({...e,route:a.adminAlertsRoute})}function N(e){return(0,r.usePostFunc)({...e,route:a.adminAlertsDismissRoute})}function q(e){return(0,n.useGetSwr)({...e,route:a.adminStatsSectorsRoute})}function U(e){return(0,n.useGetSwr)({...e,route:a.adminStatsAccountsRoute})}function G(e){return(0,n.useGetSwr)({...e,route:a.adminStatsContractsRoute})}e.s(["useAdminAccount",()=>m,"useAdminAccountDelete",()=>p,"useAdminAccounts",()=>g,"useAdminAlert",()=>D,"useAdminAlerts",()=>W,"useAdminAlertsDismiss",()=>N,"useAdminConnectKey",()=>j,"useAdminConnectKeyAdd",()=>F,"useAdminConnectKeyDelete",()=>E,"useAdminConnectKeyUpdate",()=>H,"useAdminConnectKeys",()=>I,"useAdminContract",()=>h,"useAdminContracts",()=>P,"useAdminEstimatedNetworkBlockHeight",()=>u,"useAdminHost",()=>x,"useAdminHosts",()=>f,"useAdminHostsBlocklistDelete",()=>v,"useAdminHostsBlocklistUpdate",()=>y,"useAdminSettingsContracts",()=>S,"useAdminSettingsContractsUpdate",()=>T,"useAdminSettingsHosts",()=>w,"useAdminSettingsHostsUpdate",()=>C,"useAdminSettingsPricePinning",()=>B,"useAdminSettingsPricePinningUpdate",()=>b,"useAdminState",()=>c,"useAdminStatsAccounts",()=>U,"useAdminStatsContracts",()=>G,"useAdminStatsSectors",()=>q,"useAdminSyncerConnect",()=>l,"useAdminWallet",()=>R,"useAdminWalletEvents",()=>k,"useAdminWalletPending",()=>M,"useAdminWalletSend",()=>A,"useTxpoolRecommendedFee",()=>d],219474),e.i(95541),e.s([],519977)},515366,e=>{"use strict";e.i(253894);let t=e.i(110094).adminStateRoute;e.s(["connectivityRoute",0,t,"routes",0,{home:"/",hosts:{index:"/hosts"},contracts:{index:"/contracts"},keys:{index:"/keys"},accounts:{index:"/accounts"},alerts:{index:"/alerts"},config:{index:"/config",hosts:"/config#hosts",contracts:"/config#contracts",pricing:"/config#pricing"},wallet:{view:"/wallet"},node:{index:"/node"},metrics:{index:"/metrics"},login:"/login"}])},920653,e=>{"use strict";var t=e.i(843476),n=e.i(271645);e.i(387020);var i=e.i(241022),r=e.i(33200),a=e.i(320201),o=e.i(630958),s=e.i(402627),c=e.i(223216);e.i(913272);var u=e.i(705543),l=e.i(982593),d=e.i(483081),m=e.i(828073);let g={wantedContracts:void 0,periodWeeks:void 0,renewWindowWeeks:void 0,maxEgressPriceTB:void 0,maxIngressPriceTB:void 0,maxStoragePriceTBMonth:void 0,minCollateral:void 0,minProtocolVersion:void 0,pinnedCurrency:"",shouldPinMaxStoragePrice:!1,maxStoragePriceTBMonthPinned:void 0,shouldPinMaxEgressPrice:!1,maxEgressPriceTBPinned:void 0,shouldPinMaxIngressPrice:!1,maxIngressPriceTBPinned:void 0,shouldPinMinCollateral:!1,minCollateralPinned:void 0};function p({contracts:e,hosts:t,pricePinning:n}){let i;return{...(i=new m.default((0,u.blocksToWeeks)(e.period)),{periodWeeks:i,renewWindowWeeks:new m.default((0,u.blocksToWeeks)(e.renewWindow)),wantedContracts:new m.default(e.wantedContracts)}),...{maxStoragePriceTBMonth:(0,l.toSiacoins)((0,d.valuePerBytePerBlockToPerTBPerMonth)(new m.default(t.maxStoragePrice)),6),maxIngressPriceTB:(0,l.toSiacoins)((0,d.valuePerByteToPerTB)(new m.default(t.maxIngressPrice)),6),maxEgressPriceTB:(0,l.toSiacoins)((0,d.valuePerByteToPerTB)(new m.default(t.maxEgressPrice)),6),minCollateral:(0,l.toSiacoins)((0,d.valuePerBytePerBlockToPerTBPerMonth)(new m.default(t.minCollateral)),6),minProtocolVersion:t.minProtocolVersion.slice(1)},...{pinnedCurrency:n.currency,shouldPinMaxStoragePrice:!!n.maxStoragePrice,maxStoragePriceTBMonthPinned:new m.default(n.maxStoragePrice),shouldPinMaxIngressPrice:!!n.maxIngressPrice,maxIngressPriceTBPinned:new m.default(n.maxIngressPrice),shouldPinMaxEgressPrice:!!n.maxEgressPrice,maxEgressPriceTBPinned:new m.default(n.maxEgressPrice),shouldPinMinCollateral:!!n.minCollateral,minCollateralPinned:new m.default(n.minCollateral)}}}e.i(563386);var h=e.i(409755),P=e.i(455030);e.i(519977);var x=e.i(219474);e.i(253894);var f=e.i(110094),y=e.i(612433);function v(e){let{contracts:t,hosts:n,pricePinning:i}=e;return!!t.data&&!t.error&&!!n.data&&!n.error&&!!i.data&&!i.error&&e}var S=e.i(653145),T=e.i(246719),w=e.i(283102),C=e.i(138505),B=e.i(652345);function b(e){let t=(0,S.useWatch)({control:e.control,name:"pinnedCurrency"}),{rate:n}=(0,B.useDaemonExplorerExchangeRate)({currency:t||void 0});return{rate:n,pinnedCurrency:t}}var R=e.i(539143);function k(){let e=(0,R.useDaemonExplorerHostMetrics)({config:{swr:{revalidateOnFocus:!1}}}),t=e.data?.v2Settings.prices.storagePrice,i=e.data?.v2Settings.prices.ingressPrice,r=e.data?.v2Settings.prices.egressPrice,a=(0,n.useMemo)(()=>t?new m.default((0,d.valuePerBytePerBlockToPerTBPerMonth)((0,l.toSiacoins)(t)).toFixed(0)):void 0,[t]),o=(0,n.useMemo)(()=>i?new m.default((0,d.valuePerByteToPerTB)((0,l.toSiacoins)(i)).toFixed(0)):void 0,[i]),s=(0,n.useMemo)(()=>r?new m.default((0,d.valuePerByteToPerTB)((0,l.toSiacoins)(r)).toFixed(0)):void 0,[r]);return(0,n.useMemo)(()=>a&&o&&s?{storageMedian:a,ingressMedian:o,egressMedian:s}:{},[a,o,s])}function M({form:e,fields:n}){let{storageMedian:i}=k();return(0,t.jsx)(t.Fragment,{children:i&&(0,t.jsx)(w.TipNumber,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,l.toHastings)(i),onClick:()=>{(0,C.formSetField)({form:e,fields:n,name:"maxStoragePriceTBMonth",value:i,options:!0})}})})}function A({form:e,fields:n}){let{storageMedian:i}=k(),{rate:r}=b(e);return(0,t.jsx)(t.Fragment,{children:i&&r&&(0,t.jsx)(w.TipNumber,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,l.toHastings)(i),onClick:()=>{(0,C.formSetField)({form:e,fields:n,name:"maxStoragePriceTBMonthPinned",value:i.times(r),options:!0})}})})}function j({form:e,fields:n}){let{ingressMedian:i}=k();return(0,t.jsx)(t.Fragment,{children:i&&(0,t.jsx)(w.TipNumber,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,l.toHastings)(i),onClick:()=>{(0,C.formSetField)({form:e,fields:n,name:"maxIngressPriceTB",value:i,options:!0})}})})}function I({form:e,fields:n}){let{rate:i}=b(e),{ingressMedian:r}=k();return(0,t.jsx)(t.Fragment,{children:r&&i&&(0,t.jsx)(w.TipNumber,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,l.toHastings)(r),onClick:()=>{(0,C.formSetField)({form:e,fields:n,name:"maxIngressPriceTBPinned",value:r.times(i),options:!0})}})})}function F({form:e,fields:n}){let{egressMedian:i}=k();return(0,t.jsx)(t.Fragment,{children:i&&(0,t.jsx)(w.TipNumber,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,l.toHastings)(i),onClick:()=>{(0,C.formSetField)({form:e,fields:n,name:"maxEgressPriceTB",value:i,options:!0})}})})}function H({form:e,fields:n}){let{rate:i}=b(e),{egressMedian:r}=k();return(0,t.jsx)(t.Fragment,{children:r&&i&&(0,t.jsx)(w.TipNumber,{type:"siacoin",label:"Network median price",tip:"Data provided by explorer.",decimalsLimit:0,value:(0,l.toHastings)(r),onClick:()=>{(0,C.formSetField)({form:e,fields:n,name:"maxEgressPriceTBPinned",value:r.times(i),options:!0})}})})}function E(e,t){return(n,i)=>!i[e]||(t?t(n,i):!!n||"required")}let D=(0,n.createContext)({});function W({children:e}){let w=function(){let e,w,C,B,b,R,k,{hosts:D,contracts:W,pricePinning:N,resources:q}=(e=(0,x.useAdminSettingsContracts)({config:{swr:{refreshInterval:(0,y.minutesInMilliseconds)(1)}}}),w=(0,x.useAdminSettingsHosts)({config:{swr:{refreshInterval:(0,y.minutesInMilliseconds)(1)}}}),C=(0,x.useAdminSettingsPricePinning)({config:{swr:{refreshInterval:(0,y.minutesInMilliseconds)(1)}}}),{resources:(0,n.useMemo)(()=>({contracts:{data:e.data,error:e.error},hosts:{data:w.data,error:w.error},pricePinning:{data:C.data,error:C.error}}),[e.data,e.error,w.data,w.error,C.data,C.error]),contracts:e,hosts:w,pricePinning:C}),{form:U,fields:G}=(B=(0,S.useForm)({mode:"all",defaultValues:g}),b=(0,S.useWatch)({control:B.control,name:"maxStoragePriceTBMonth"}),R=(0,S.useWatch)({control:B.control,name:"maxEgressPriceTB"}),k=(0,S.useWatch)({control:B.control,name:"maxIngressPriceTB"}),{form:B,fields:(0,n.useMemo)(()=>({wantedContracts:{type:"number",category:"contracts",title:"Wanted contracts",description:(0,t.jsx)(t.Fragment,{children:"The number of contracts you would like to have."}),units:"contracts",validation:{required:"required"}},periodWeeks:{type:"number",category:"contracts",title:"Period",description:(0,t.jsx)(t.Fragment,{children:"The length of the storage contracts."}),units:"weeks",suggestion:new m.default(6),suggestionTip:"Typically 6 weeks.",validation:{required:"required"}},renewWindowWeeks:{type:"number",category:"contracts",title:"Renew window",description:(0,t.jsx)(t.Fragment,{children:"The number of weeks prior to contract expiration that Sia will attempt to renew your contracts."}),units:"weeks",decimalsLimit:6,suggestion:new m.default(2),suggestionTip:"Typically 2 weeks.",validation:{required:"required"}},shouldPinMaxStoragePrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxStoragePriceTBMonth:{category:"pricing",type:"siacoin",title:"Max storage price",description:(0,t.jsx)(t.Fragment,{children:"The max allowed price a host is allowed to charge to store 1 TB worth of data per month. Choose whether to set the price in siacoin per TB per month or to pin the siacoin price to a fixed fiat value per TB per month."}),units:"SC/TB/month",decimalsLimitSc:6,validation:{required:"required"},after:({form:e,fields:n})=>(0,t.jsx)(M,{form:e,fields:n})},maxStoragePriceTBMonthPinned:{title:"",description:"",units:"/TB/month",type:"fiat",category:"pricing",validation:{validate:{required:E("shouldPinMaxStoragePrice",(e,t)=>!t.shouldPinMaxStoragePrice||!!e||"required"),currency:E("shouldPinMaxStoragePrice",(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:E("shouldPinMaxStoragePrice",(e,t)=>!t.shouldPinMaxStoragePrice||e?.gt(0)||"must be greater than 0")}},after:({form:e,fields:n})=>(0,t.jsx)(A,{form:e,fields:n})},shouldPinMaxIngressPrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxIngressPriceTB:{category:"pricing",type:"siacoin",title:"Max ingress price",description:(0,t.jsx)(t.Fragment,{children:"The max allowed price a host is allowed to charge for uploading 1 TB worth of data. Choose whether to set the price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),units:"SC/TB",decimalsLimitSc:6,validation:{required:"required"},after:({form:e,fields:n})=>(0,t.jsx)(j,{form:e,fields:n})},maxIngressPriceTBPinned:{title:"",description:"",units:"/TB",type:"fiat",category:"pricing",validation:{validate:{required:E("shouldPinMaxIngressPrice",(e,t)=>!t.shouldPinMaxIngressPrice||!!e||"required"),currency:E("shouldPinMaxIngressPrice",(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:E("shouldPinMaxIngressPrice",(e,t)=>!t.shouldPinMaxIngressPrice||e?.gt(0)||"must be greater than 0")}},after:({form:e,fields:n})=>(0,t.jsx)(I,{form:e,fields:n})},shouldPinMaxEgressPrice:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},maxEgressPriceTB:{category:"pricing",type:"siacoin",title:"Max egress price",description:(0,t.jsx)(t.Fragment,{children:"The max allowed price to download 1 TB. Choose whether to set the price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),units:"SC/TB",decimalsLimitSc:6,validation:{required:"required"},after:({form:e,fields:n})=>(0,t.jsx)(F,{form:e,fields:n})},maxEgressPriceTBPinned:{title:"",description:"",units:"/TB",type:"fiat",category:"pricing",validation:{validate:{required:E("shouldPinMaxEgressPrice",(e,t)=>!t.shouldPinMaxEgressPrice||!!e||"required"),currency:E("shouldPinMaxEgressPrice",(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:E("shouldPinMaxEgressPrice",(e,t)=>!t.shouldPinMaxEgressPrice||e?.gt(0)||"must be greater than 0")}},after:({form:e,fields:n})=>(0,t.jsx)(H,{form:e,fields:n})},shouldPinMinCollateral:{title:"",description:"",type:"boolean",category:"pricing",validation:{}},minCollateral:{category:"pricing",type:"siacoin",title:"Min collateral",description:(0,t.jsx)(t.Fragment,{children:"The minimum amount of collateral indexd expects a host to lock up per TB per month. Additionally, we expect hosts to lock up at least 2x their storage price. Whichever value is higher is the absolute minimum. Choose whether to set the minimum collateral in siacoin or to pin the minimum collateral to a fixed fiat value."}),units:"SC/TB/month",decimalsLimitSc:6,validation:{required:"required"}},minCollateralPinned:{title:"",description:"",type:"fiat",category:"pricing",units:"/TB/month",validation:{validate:{required:E("shouldPinMinCollateral",(e,t)=>!t.shouldPinMinCollateral||!!e||"required"),currency:E("shouldPinMinCollateral",(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:E("shouldPinMinCollateral",(e,t)=>!t.shouldPinMinCollateral||e?.gt(0)||"must be greater than 0")}}},pinnedCurrency:{category:"pricing",title:"Pinned currency",description:"Currency to use for fields where price pinning is enabled.",type:"select",options:[...T.currencyOptions.map(({id:e,label:t})=>({label:t,value:e})),{label:"none",value:""}],validation:{required:"required"}},minProtocolVersion:{category:"other",type:"text",title:"Min protocol version",description:"The minimum protocol version to accept contracts.",validation:{validate:{version:e=>!e||/^[0-9]+\.[0-9]+\.[0-9]+$/.test(e)||"invalid version"}}}}),[]),maxStoragePriceTBMonth:b,maxEgressPriceTB:R,maxIngressPriceTB:k}),L=(0,n.useMemo)(()=>{let e=v(q);if(e)return p({hosts:e.hosts.data,contracts:e.contracts.data,pricePinning:e.pricePinning.data})},[q]),K=(0,n.useMemo)(()=>(function({contracts:e,hosts:t,pricePinning:n}){return!!(e.error||t.error||n.error)})(q),[q]),z=(0,n.useCallback)(async()=>{let e=await D.mutate(),t=await W.mutate(),n=await N.mutate();e&&t&&n?U.reset(p({hosts:e,contracts:t,pricePinning:n})):(0,r.triggerErrorToast)({title:"Error fetching settings"})},[U,D,W,N]);(0,o.useFormInit)({form:U,remoteValues:L}),(0,s.useFormServerSynced)({form:U,remoteValues:L});let{changeCount:V}=(0,a.useFormChangeCount)({form:U}),O=function({resources:e,revalidateAndResetForm:t}){let i=(0,x.useAdminSettingsContractsUpdate)(),a=(0,x.useAdminSettingsHostsUpdate)(),o=(0,x.useAdminSettingsPricePinningUpdate)(),s=(0,P.useMutate)();return(0,n.useCallback)(async n=>{let c=v(e);if(!c)return;let{payloads:m}=function({resources:e,values:t}){let n={...e.contracts.data,wantedContracts:Math.round(t.wantedContracts.toNumber()),period:Math.round((0,u.weeksToBlocks)(t.periodWeeks.toNumber())),renewWindow:Math.round((0,u.weeksToBlocks)(t.renewWindowWeeks.toNumber()))};return{payloads:{contracts:n,hosts:{...e.hosts.data,maxStoragePrice:(0,l.toHastings)((0,d.valuePerTBPerMonthToPerBytePerBlock)(t.maxStoragePriceTBMonth)).toString(),maxIngressPrice:(0,l.toHastings)((0,d.valuePerTBToPerByte)(t.maxIngressPriceTB)).toString(),maxEgressPrice:(0,l.toHastings)((0,d.valuePerTBToPerByte)(t.maxEgressPriceTB)).toString(),minCollateral:(0,l.toHastings)((0,d.valuePerTBPerMonthToPerBytePerBlock)(t.minCollateral)).toString(),minProtocolVersion:`v${t.minProtocolVersion}`},pricePinning:{...e.pricePinning.data,currency:t.pinnedCurrency,maxStoragePrice:t.shouldPinMaxStoragePrice?t.maxStoragePriceTBMonthPinned.toNumber():0,maxEgressPrice:t.shouldPinMaxEgressPrice?t.maxEgressPriceTBPinned.toNumber():0,maxIngressPrice:t.shouldPinMaxIngressPrice?t.maxIngressPriceTBPinned.toNumber():0,minCollateral:t.shouldPinMinCollateral?t.minCollateralPinned.toNumber():0}}}}({resources:c,values:n}),g=[i.put({payload:m.contracts}),a.put({payload:m.hosts}),o.put({payload:m.pricePinning})],p=(await Promise.all(g)).find(e=>e.error);p?(0,r.triggerErrorToast)({title:"Error updating configuration",body:p.error}):((0,r.triggerSuccessToast)({title:"Configuration has been saved"}),(async()=>{await (0,h.delay)(5e3),s(e=>e.startsWith(f.adminHostsRoute))})(),await t())},[e,i,a,o,t,s])}({resources:q,revalidateAndResetForm:z}),_=(0,c.useOnInvalid)(G),Z=(0,n.useMemo)(()=>U.handleSubmit(O,_),[U,O,_]),$=(0,n.useRef)(null),J=(0,n.useCallback)(async e=>{$.current&&(0,i.nodeToImage)($.current,e)},[]);return{onSubmit:Z,revalidateAndResetForm:z,form:U,fields:G,changeCount:V,remoteError:K,configRef:$,takeScreenshot:J}}();return(0,t.jsx)(D.Provider,{value:w,children:e})}e.s(["ConfigProvider",()=>W,"useConfig",0,()=>(0,n.useContext)(D)],920653)},299453,e=>{"use strict";var t=e.i(843476),n=e.i(423836);let i=(0,e.i(271645).createContext)({});function r({children:e}){return(0,t.jsx)(i.Provider,{value:{},children:e})}var a=e.i(920653),o=e.i(737966);function s({children:e}){return(0,t.jsx)(r,{children:(0,t.jsx)(a.ConfigProvider,{children:(0,t.jsx)(n.DialogProvider,{children:(0,t.jsxs)(o.TransactionsProvider,{children:[(0,t.jsx)(n.Dialogs,{}),e]})})})})}e.s(["Providers",()=>s],299453)},269796,e=>{e.v(t=>Promise.all(["static/chunks/fe79089c0f6716c7.js"].map(t=>e.l(t))).then(()=>t(641159)))}]);