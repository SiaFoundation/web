(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85645,e=>{"use strict";e.i(37869);let t=(0,e.i(41399).secondsInMilliseconds)(15);e.s(["defaultDatasetRefreshInterval",0,t])},7190,75901,e=>{"use strict";e.i(94066);var t=e.i(14843),r=e.i(34961),n=e.i(72543),a=e.i(77461),i=e.i(27454),o=e.i(26598),s=e.i(50323);e.i(77587);var l=e.i(27871);e.i(37869);var u=e.i(43348);function c(e){return(0,t.useGetSwr)({...e,route:l.hostStateRoute})}function d(e){return(0,t.useGetSwr)({...e,route:l.consensusTipStateRoute})}function m(e){return(0,t.useGetSwr)({...e,route:l.consensusNetworkRoute})}function f(e){return(0,t.useGetSwr)({...e,route:l.indexTipRoute})}function p(){let e=m({config:{swr:{revalidateOnFocus:!1}}});return(0,s.default)(e,()=>e.data?.name==="zen"?(0,u.getTestnetZenBlockHeight)():(0,u.getMainnetBlockHeight)(),{refreshInterval:6e4,keepPreviousData:!0}).data||0}function h(e){return(0,t.useGetSwr)({...e,route:l.syncerPeersRoute})}function g(e){return(0,n.usePutFunc)({...e,route:l.syncerPeersRoute},async e=>{e(e=>e===l.syncerPeersRoute)})}function v(e){return(0,t.useGetSwr)({...e,route:l.walletRoute})}function y(e){return(0,t.useGetSwr)({...e,route:l.walletEventsRoute})}function x(e){return(0,t.useGetSwr)({...e,route:l.walletPendingRoute})}function b(e){return(0,r.usePostFunc)({...e,route:l.walletSendRoute},async e=>{await (0,i.delay)(2e3),e(e=>e.startsWith(l.walletPendingRoute))})}function S(e){return(0,t.useGetSwr)({...e,route:l.tpoolFeeRoute})}function C(e){return(0,r.usePostSwr)({...e,route:l.contractsRoute})}function P(e){return(0,r.usePostSwr)({...e,route:l.v2ContractsRoute})}function w(e){return(0,n.usePutFunc)({...e,route:l.contractsIdIntegrityRoute})}function j(e){return(0,t.useGetSwr)({...e,route:l.metricsIntervalRoute})}function T(e){return(0,t.useGetSwr)({...e,route:l.settingsRoute})}function E(e){return(0,o.usePatchFunc)({...e,route:l.settingsRoute},async e=>{await e(e=>e.startsWith(l.settingsRoute)||e.startsWith(l.hostStateRoute))})}function I(e){return(0,n.usePutSwr)({...e,payload:{},route:l.settingsDdnsUpdateRoute})}let D="/settings/pinned";function k(e){return(0,t.useGetSwr)({...e,route:D})}function R(e){return(0,n.usePutFunc)({...e,route:D},async e=>{e(e=>e.startsWith(D))})}function N(e){return(0,t.useGetSwr)({...e,route:l.volumesRoute})}function F(e){return(0,t.useGetSwr)({...e,route:l.volumesIdRoute})}function A(e){return(0,r.usePostFunc)({...e,route:l.volumesRoute},async e=>{e(e=>e.startsWith(l.volumesRoute))})}function M(e){return(0,n.usePutFunc)({...e,route:l.volumesIdRoute},async e=>{e(e=>e.startsWith(l.volumesRoute))})}function B(e){return(0,a.useDeleteFunc)({...e,route:l.volumesIdRoute},async e=>{e(e=>e.startsWith(l.volumesRoute))})}function O(e){return(0,n.usePutFunc)({...e,route:l.volumesIdResizeRoute},async e=>{await (0,i.delay)(1e4),e(e=>e.startsWith(l.volumesRoute))})}function V(e){return(0,a.useDeleteFunc)({...e,route:l.volumesIdCancelRoute},async e=>{await (0,i.delay)(3e3),e(e=>e.startsWith(l.volumesRoute))})}function L(e){return(0,t.useGetSwr)({...e,route:l.systemDirRoute})}function z(e){return(0,n.usePutFunc)({...e,route:l.systemDirRoute})}function _(e){return(0,t.useGetSwr)({...e,route:l.alertsRoute})}function W(e){return(0,r.usePostFunc)({...e,route:l.alertsDismissRoute},async e=>{e(e=>e.startsWith(l.alertsRoute))})}function H(e){return(0,r.usePostFunc)({...e,route:l.systemBackupRoute})}e.s(["useAlerts",()=>_,"useAlertsDismiss",()=>W,"useConsensusNetwork",()=>m,"useConsensusTipState",()=>d,"useContracts",()=>C,"useContractsIntegrityCheck",()=>w,"useContractsV2",()=>P,"useEstimatedNetworkBlockHeight",()=>p,"useHostState",()=>c,"useIndexTip",()=>f,"useMetricsPeriod",()=>j,"useSettings",()=>T,"useSettingsDdnsUpdate",()=>I,"useSettingsPinned",()=>k,"useSettingsPinnedUpdate",()=>R,"useSettingsUpdate",()=>E,"useSyncerConnect",()=>g,"useSyncerPeers",()=>h,"useSystemBackup",()=>H,"useSystemDirectory",()=>L,"useSystemDirectoryCreate",()=>z,"useTxPoolFee",()=>S,"useVolume",()=>F,"useVolumeCancel",()=>V,"useVolumeCreate",()=>A,"useVolumeDelete",()=>B,"useVolumeResize",()=>O,"useVolumeUpdate",()=>M,"useVolumes",()=>N,"useWallet",()=>v,"useWalletEvents",()=>y,"useWalletPending",()=>x,"useWalletSend",()=>b],75901),e.s([],7190)},20960,e=>{"use strict";e.s(["cx",0,function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t))for(r=0;r<t.length;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n);else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}(e))&&(n&&(n+=" "),n+=t);return n}],20960)},8433,10483,e=>{"use strict";let t,r;var n=e.i(91788);function a(e,t,r){var a=this,i=(0,n.useRef)(null),o=(0,n.useRef)(0),s=(0,n.useRef)(null),l=(0,n.useRef)([]),u=(0,n.useRef)(),c=(0,n.useRef)(),d=(0,n.useRef)(e),m=(0,n.useRef)(!0);(0,n.useEffect)(function(){d.current=e},[e]);var f=!t&&0!==t&&"undefined"!=typeof window;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var p=!!(r=r||{}).leading,h=!("trailing"in r)||!!r.trailing,g="maxWait"in r,v=g?Math.max(+r.maxWait||0,t):null;return(0,n.useEffect)(function(){return m.current=!0,function(){m.current=!1}},[]),(0,n.useMemo)(function(){var e=function(e){var t=l.current,r=u.current;return l.current=u.current=null,o.current=e,c.current=d.current.apply(r,t)},r=function(e,t){f&&cancelAnimationFrame(s.current),s.current=f?requestAnimationFrame(e):setTimeout(e,t)},n=function(e){if(!m.current)return!1;var r=e-i.current;return!i.current||r>=t||r<0||g&&e-o.current>=v},y=function(t){return s.current=null,h&&l.current?e(t):(l.current=u.current=null,c.current)},x=function e(){var a=Date.now();if(n(a))return y(a);if(m.current){var s=t-(a-i.current);r(e,g?Math.min(s,v-(a-o.current)):s)}},b=function(){var d=Date.now(),f=n(d);if(l.current=[].slice.call(arguments),u.current=a,i.current=d,f){if(!s.current&&m.current)return o.current=i.current,r(x,t),p?e(i.current):c.current;if(g)return r(x,t),e(i.current)}return s.current||r(x,t),c.current};return b.cancel=function(){s.current&&(f?cancelAnimationFrame(s.current):clearTimeout(s.current)),o.current=0,l.current=i.current=u.current=s.current=null},b.isPending=function(){return!!s.current},b.flush=function(){return s.current?y(Date.now()):c.current},b},[p,g,t,v,h,f])}function i(e,t){return e===t}function o(e){return"function"==typeof e?function(){return e}:e}function s(e,t,r){var s,l,u=r&&r.equalityFn||i,c=(l=(s=(0,n.useState)(o(e)))[1],[s[0],(0,n.useCallback)(function(e){return l(o(e))},[])]),d=c[0],m=c[1],f=a((0,n.useCallback)(function(e){return m(e)},[m]),t,r),p=(0,n.useRef)(e);return u(p.current,e)||(f(e),p.current=e),[d,f]}e.s(["useDebounce",()=>s,"useDebouncedCallback",()=>a],8433);var l=/[\\\/_+.#"@\[\(\{&]/,u=/[\\\/_+.#"@\[\(\{&]/g,c=/[\s-]/,d=/[\s-]/g;function m(e){return e.toLowerCase().replace(d," ")}function f(){return(f=Object.assign.bind()).apply(null,arguments)}function p(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function h(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function g(...e){return(0,n.useCallback)(h(...e),e)}let v=(null==globalThis?void 0:globalThis.document)?n.useLayoutEffect:()=>{},y=n["useId".toString()]||(()=>void 0),x=0;function b(e){let[t,r]=n.useState(y());return v(()=>{e||r(e=>null!=e?e:String(x++))},[e]),e||(t?`radix-${t}`:"")}function S(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e}),(0,n.useMemo)(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}var C=e.i(30943);let P=(0,n.forwardRef)((e,t)=>{let{children:r,...a}=e,i=n.Children.toArray(r),o=i.find(T);if(o){let e=o.props.children,r=i.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):(0,n.isValidElement)(e)?e.props.children:null);return(0,n.createElement)(w,f({},a,{ref:t}),(0,n.isValidElement)(e)?(0,n.cloneElement)(e,void 0,r):null)}return(0,n.createElement)(w,f({},a,{ref:t}),r)});P.displayName="Slot";let w=(0,n.forwardRef)((e,t)=>{let{children:r,...a}=e;return(0,n.isValidElement)(r)?(0,n.cloneElement)(r,{...function(e,t){let r={...t};for(let n in t){let a=e[n],i=t[n];/^on[A-Z]/.test(n)?r[n]=(...e)=>{null==i||i(...e),null==a||a(...e)}:"style"===n?r[n]={...a,...i}:"className"===n&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props),ref:h(t,r.ref)}):n.Children.count(r)>1?n.Children.only(null):null});w.displayName="SlotClone";let j=({children:e})=>(0,n.createElement)(n.Fragment,null,e);function T(e){return(0,n.isValidElement)(e)&&e.type===j}let E=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=(0,n.forwardRef)((e,r)=>{let{asChild:a,...i}=e,o=a?P:t;return(0,n.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,n.createElement)(o,f({},i,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function I(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e}),(0,n.useMemo)(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}let D="dismissableLayer.update",k=(0,n.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),R=(0,n.forwardRef)((e,r)=>{let a,i,o,s,l,u,{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:h,onInteractOutside:v,onDismiss:y,...x}=e,b=(0,n.useContext)(k),[S,C]=(0,n.useState)(null),[,P]=(0,n.useState)({}),w=g(r,e=>C(e)),j=Array.from(b.layers),[T]=[...b.layersWithOutsidePointerEventsDisabled].slice(-1),R=j.indexOf(T),A=S?j.indexOf(S):-1,M=b.layersWithOutsidePointerEventsDisabled.size>0,B=A>=R,O=(a=I(e=>{let t=e.target,r=[...b.branches].some(e=>e.contains(t));B&&!r&&(null==m||m(e),null==v||v(e),e.defaultPrevented||null==y||y())}),i=(0,n.useRef)(!1),o=(0,n.useRef)(()=>{}),(0,n.useEffect)(()=>{let e=e=>{if(e.target&&!i.current){let r={originalEvent:e};function t(){F("dismissableLayer.pointerDownOutside",a,r,{discrete:!0})}"touch"===e.pointerType?(document.removeEventListener("click",o.current),o.current=t,document.addEventListener("click",o.current,{once:!0})):t()}i.current=!1},t=window.setTimeout(()=>{document.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),document.removeEventListener("pointerdown",e),document.removeEventListener("click",o.current)}},[a]),{onPointerDownCapture:()=>i.current=!0}),V=(s=I(e=>{let t=e.target;![...b.branches].some(e=>e.contains(t))&&(null==h||h(e),null==v||v(e),e.defaultPrevented||null==y||y())}),l=(0,n.useRef)(!1),(0,n.useEffect)(()=>{let e=e=>{e.target&&!l.current&&F("dismissableLayer.focusOutside",s,{originalEvent:e},{discrete:!1})};return document.addEventListener("focusin",e),()=>document.removeEventListener("focusin",e)},[s]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1});return u=I(e=>{A===b.layers.size-1&&(null==d||d(e),!e.defaultPrevented&&y&&(e.preventDefault(),y()))}),(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[u]),(0,n.useEffect)(()=>{if(S)return c&&(0===b.layersWithOutsidePointerEventsDisabled.size&&(t=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),b.layersWithOutsidePointerEventsDisabled.add(S)),b.layers.add(S),N(),()=>{c&&1===b.layersWithOutsidePointerEventsDisabled.size&&(document.body.style.pointerEvents=t)}},[S,c,b]),(0,n.useEffect)(()=>()=>{S&&(b.layers.delete(S),b.layersWithOutsidePointerEventsDisabled.delete(S),N())},[S,b]),(0,n.useEffect)(()=>{let e=()=>P({});return document.addEventListener(D,e),()=>document.removeEventListener(D,e)},[]),(0,n.createElement)(E.div,f({},x,{ref:w,style:{pointerEvents:M?B?"auto":"none":void 0,...e.style},onFocusCapture:p(e.onFocusCapture,V.onFocusCapture),onBlurCapture:p(e.onBlurCapture,V.onBlurCapture),onPointerDownCapture:p(e.onPointerDownCapture,O.onPointerDownCapture)}))});function N(){let e=new CustomEvent(D);document.dispatchEvent(e)}function F(e,t,r,{discrete:n}){let a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});if(t&&a.addEventListener(e,t,{once:!0}),n)a&&(0,C.flushSync)(()=>a.dispatchEvent(i));else a.dispatchEvent(i)}function A(e){let t=(0,n.useRef)(e);return(0,n.useEffect)(()=>{t.current=e}),(0,n.useMemo)(()=>(...e)=>{var r;return null==(r=t.current)?void 0:r.call(t,...e)},[])}let M="focusScope.autoFocusOnMount",B="focusScope.autoFocusOnUnmount",O={bubbles:!1,cancelable:!0},V=(0,n.forwardRef)((e,t)=>{let{loop:r=!1,trapped:a=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[l,u]=(0,n.useState)(null),c=A(i),d=A(o),m=(0,n.useRef)(null),p=g(t,e=>u(e)),h=(0,n.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,n.useEffect)(()=>{if(a){function e(e){if(h.paused||!l)return;let t=e.target;l.contains(t)?m.current=t:_(m.current,{select:!0})}function t(e){!h.paused&&l&&(l.contains(e.relatedTarget)||_(m.current,{select:!0}))}return document.addEventListener("focusin",e),document.addEventListener("focusout",t),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}},[a,l,h.paused]),(0,n.useEffect)(()=>{if(l){W.add(h);let e=document.activeElement;if(!l.contains(e)){let t=new CustomEvent(M,O);l.addEventListener(M,c),l.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(_(n,{select:t}),document.activeElement!==r)return}(L(l).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&_(l))}return()=>{l.removeEventListener(M,c),setTimeout(()=>{let t=new CustomEvent(B,O);l.addEventListener(B,d),l.dispatchEvent(t),t.defaultPrevented||_(null!=e?e:document.body,{select:!0}),l.removeEventListener(B,d),W.remove(h)},0)}}},[l,c,d,h]);let v=(0,n.useCallback)(e=>{if(!r&&!a||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var i;let t,a=e.currentTarget,[o,s]=[z(t=L(i=a),i),z(t.reverse(),i)];o&&s?e.shiftKey||n!==s?e.shiftKey&&n===o&&(e.preventDefault(),r&&_(s,{select:!0})):(e.preventDefault(),r&&_(o,{select:!0})):n===a&&e.preventDefault()}},[r,a,h.paused]);return(0,n.createElement)(E.div,f({tabIndex:-1},s,{ref:p,onKeyDown:v}))});function L(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function z(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function _(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}let W=(r=[],{add(e){let t=r[0];e!==t&&(null==t||t.pause()),(r=H(r,e)).unshift(e)},remove(e){var t;null==(t=(r=H(r,e))[0])||t.resume()}});function H(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}let U=(0,n.forwardRef)((e,t)=>{var r;let{container:a=null==globalThis||null==(r=globalThis.document)?void 0:r.body,...i}=e;return a?C.default.createPortal((0,n.createElement)(E.div,f({},i,{ref:t})),a):null}),q=(null==globalThis?void 0:globalThis.document)?n.useLayoutEffect:()=>{},G=e=>{let{present:t,children:r}=e,a=function(e){var t,r;let[a,i]=(0,n.useState)(),o=(0,n.useRef)({}),s=(0,n.useRef)(e),l=(0,n.useRef)("none"),[u,c]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,n.useReducer)((e,t)=>{let n=r[e][t];return null!=n?n:e},t));return(0,n.useEffect)(()=>{let e=$(o.current);l.current="mounted"===u?e:"none"},[u]),q(()=>{let t=o.current,r=s.current;if(r!==e){let n=l.current,a=$(t);e?c("MOUNT"):"none"===a||(null==t?void 0:t.display)==="none"?c("UNMOUNT"):r&&n!==a?c("ANIMATION_OUT"):c("UNMOUNT"),s.current=e}},[e,c]),q(()=>{if(a){let e=e=>{let t=$(o.current).includes(e.animationName);e.target===a&&t&&(0,C.flushSync)(()=>c("ANIMATION_END"))},t=e=>{e.target===a&&(l.current=$(o.current))};return a.addEventListener("animationstart",t),a.addEventListener("animationcancel",e),a.addEventListener("animationend",e),()=>{a.removeEventListener("animationstart",t),a.removeEventListener("animationcancel",e),a.removeEventListener("animationend",e)}}c("ANIMATION_END")},[a,c]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:(0,n.useCallback)(e=>{e&&(o.current=getComputedStyle(e)),i(e)},[])}}(t),i="function"==typeof r?r({present:a.isPresent}):n.Children.only(r),o=g(a.ref,i.ref);return"function"==typeof r||a.isPresent?(0,n.cloneElement)(i,{ref:o}):null};function $(e){return(null==e?void 0:e.animationName)||"none"}G.displayName="Presence";let K=0;function Z(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Y=e.i(89280),X=e.i(86636),Q=e.i(90631),J=(0,e.i(52606).createSidecarMedium)(),ee=function(){},et=n.forwardRef(function(e,t){var r=n.useRef(null),a=n.useState({onScrollCapture:ee,onWheelCapture:ee,onTouchMoveCapture:ee}),i=a[0],o=a[1],s=e.forwardProps,l=e.children,u=e.className,c=e.removeScrollBar,d=e.enabled,m=e.shards,f=e.sideCar,p=e.noIsolation,h=e.inert,g=e.allowPinchZoom,v=e.as,y=(0,Y.__rest)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=(0,Q.useMergeRefs)([r,t]),b=(0,Y.__assign)((0,Y.__assign)({},y),i);return n.createElement(n.Fragment,null,d&&n.createElement(f,{sideCar:J,removeScrollBar:c,shards:m,noIsolation:p,inert:h,setCallbacks:o,allowPinchZoom:!!g,lockRef:r}),s?n.cloneElement(n.Children.only(l),(0,Y.__assign)((0,Y.__assign)({},b),{ref:x})):n.createElement(void 0===v?"div":v,(0,Y.__assign)({},b,{className:u,ref:x}),l))});et.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},et.classNames={fullWidth:X.fullWidthClassName,zeroRight:X.zeroRightClassName};var er=e.i(30409);e.i(25543);var en=e.i(89949);e.i(86719);var ea=e.i(60171),ei=!1;if("undefined"!=typeof window)try{var eo=Object.defineProperty({},"passive",{get:function(){return ei=!0,!0}});window.addEventListener("test",eo,eo),window.removeEventListener("test",eo,eo)}catch(e){ei=!1}var es=!!ei&&{passive:!1},el=function(e){var t=window.getComputedStyle(e);return"hidden"!==t.overflowY&&(t.overflowY!==t.overflowX||"visible"!==t.overflowY)},eu=function(e){var t=window.getComputedStyle(e);return"hidden"!==t.overflowX&&(t.overflowY!==t.overflowX||"visible"!==t.overflowX)},ec=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),ed(e,r)){var n=em(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body)return!1},ed=function(e,t){return"v"===e?el(t):eu(t)},em=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},ef=function(e,t,r,n,a){var i,o=(i=window.getComputedStyle(t).direction,"h"===e&&"rtl"===i?-1:1),s=o*n,l=r.target,u=t.contains(l),c=!1,d=s>0,m=0,f=0;do{var p=em(e,l),h=p[0],g=p[1]-p[2]-o*h;(h||g)&&ed(e,l)&&(m+=g,f+=h),l=l.parentNode}while(!u&&l!==document.body||u&&(t.contains(l)||t===l))return d&&(a&&0===m||!a&&s>m)?c=!0:!d&&(a&&0===f||!a&&-s>f)&&(c=!0),c},ep=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eh=function(e){return[e.deltaX,e.deltaY]},eg=function(e){return e&&"current"in e?e.current:e},ev=0,ey=[];let ex=(0,er.exportSidecar)(J,function(e){var t=n.useRef([]),r=n.useRef([0,0]),a=n.useRef(),i=n.useState(ev++)[0],o=n.useState(function(){return(0,ea.styleSingleton)()})[0],s=n.useRef(e);n.useEffect(function(){s.current=e},[e]),n.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(0,Y.__spreadArray)([e.lockRef.current],(e.shards||[]).map(eg),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=n.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var n,i=ep(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-i[0],u="deltaY"in e?e.deltaY:o[1]-i[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var m=ec(d,c);if(!m)return!0;if(m?n=d:(n="v"===d?"h":"v",m=ec(d,c)),!m)return!1;if(!a.current&&"changedTouches"in e&&(l||u)&&(a.current=n),!n)return!0;var f=a.current||n;return ef(f,t,e,"h"===f?l:u,!0)},[]),u=n.useCallback(function(e){if(ey.length&&ey[ey.length-1]===o){var r="deltaY"in e?eh(e):ep(e),n=t.current.filter(function(t){var n;return t.name===e.type&&t.target===e.target&&(n=t.delta,n[0]===r[0]&&n[1]===r[1])})[0];if(n&&n.should)return void e.preventDefault();if(!n){var a=(s.current.shards||[]).map(eg).filter(Boolean).filter(function(t){return t.contains(e.target)});(a.length>0?l(e,a[0]):!s.current.noIsolation)&&e.preventDefault()}}},[]),c=n.useCallback(function(e,r,n,a){var i={name:e,delta:r,target:n,should:a};t.current.push(i),setTimeout(function(){t.current=t.current.filter(function(e){return e!==i})},1)},[]),d=n.useCallback(function(e){r.current=ep(e),a.current=void 0},[]),m=n.useCallback(function(t){c(t.type,eh(t),t.target,l(t,e.lockRef.current))},[]),f=n.useCallback(function(t){c(t.type,ep(t),t.target,l(t,e.lockRef.current))},[]);n.useEffect(function(){return ey.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:f}),document.addEventListener("wheel",u,es),document.addEventListener("touchmove",u,es),document.addEventListener("touchstart",d,es),function(){ey=ey.filter(function(e){return e!==o}),document.removeEventListener("wheel",u,es),document.removeEventListener("touchmove",u,es),document.removeEventListener("touchstart",d,es)}},[]);var p=e.removeScrollBar,h=e.inert;return n.createElement(n.Fragment,null,h?n.createElement(o,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,p?n.createElement(en.RemoveScrollBar,{gapMode:"margin"}):null)});var eb=n.forwardRef(function(e,t){return n.createElement(et,(0,Y.__assign)({},e,{ref:t,sideCar:ex}))});eb.classNames=et.classNames;var eS=e.i(69131);let eC="Dialog",[eP,ew]=function(e,t=[]){let r=[],a=()=>{let t=r.map(e=>(0,n.createContext)(e));return function(r){let a=(null==r?void 0:r[e])||t;return(0,n.useMemo)(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return a.scopeName=e,[function(t,a){let i=(0,n.createContext)(a),o=r.length;function s(t){let{scope:r,children:a,...s}=t,l=(null==r?void 0:r[e][o])||i,u=(0,n.useMemo)(()=>s,Object.values(s));return(0,n.createElement)(l.Provider,{value:u},a)}return r=[...r,a],s.displayName=t+"Provider",[s,function(r,s){let l=(null==s?void 0:s[e][o])||i,u=(0,n.useContext)(l);if(u)return u;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:n})=>{let a=r(e)[`__scope${n}`];return{...t,...a}},{});return(0,n.useMemo)(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(a,...t)]}(eC),[ej,eT]=eP(eC),eE="DialogPortal",[eI,eD]=eP(eE,{forceMount:void 0}),ek="DialogOverlay",eR=(0,n.forwardRef)((e,t)=>{let r=eD(ek,e.__scopeDialog),{forceMount:a=r.forceMount,...i}=e,o=eT(ek,e.__scopeDialog);return o.modal?(0,n.createElement)(G,{present:a||o.open},(0,n.createElement)(eN,f({},i,{ref:t}))):null}),eN=(0,n.forwardRef)((e,t)=>{let{__scopeDialog:r,...a}=e,i=eT(ek,r);return(0,n.createElement)(eb,{as:P,allowPinchZoom:!0,shards:[i.contentRef]},(0,n.createElement)(E.div,f({"data-state":eL(i.open)},a,{ref:t,style:{pointerEvents:"auto",...a.style}})))}),eF="DialogContent",eA=(0,n.forwardRef)((e,t)=>{let r=eD(eF,e.__scopeDialog),{forceMount:a=r.forceMount,...i}=e,o=eT(eF,e.__scopeDialog);return(0,n.createElement)(G,{present:a||o.open},o.modal?(0,n.createElement)(eM,f({},i,{ref:t})):(0,n.createElement)(eB,f({},i,{ref:t})))}),eM=(0,n.forwardRef)((e,t)=>{let r=eT(eF,e.__scopeDialog),a=(0,n.useRef)(null),i=g(t,r.contentRef,a);return(0,n.useEffect)(()=>{let e=a.current;if(e)return(0,eS.hideOthers)(e)},[]),(0,n.createElement)(eO,f({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:p(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=r.triggerRef.current)||t.focus()}),onPointerDownOutside:p(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:p(e.onFocusOutside,e=>e.preventDefault())}))}),eB=(0,n.forwardRef)((e,t)=>{let r=eT(eF,e.__scopeDialog),a=(0,n.useRef)(!1);return(0,n.createElement)(eO,f({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var n,i;null==(n=e.onCloseAutoFocus)||n.call(e,t),t.defaultPrevented||(a.current||null==(i=r.triggerRef.current)||i.focus(),t.preventDefault()),a.current=!1},onInteractOutside:t=>{var n,i;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||(a.current=!0);let o=t.target;(null==(i=r.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault()}}))}),eO=(0,n.forwardRef)((e,t)=>{let{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,l=eT(eF,r),u=g(t,(0,n.useRef)(null));return(0,n.useEffect)(()=>{var e,t;let r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=r[0])?e:Z()),document.body.insertAdjacentElement("beforeend",null!=(t=r[1])?t:Z()),K++,()=>{1===K&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),K--}},[]),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(V,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:i,onUnmountAutoFocus:o},(0,n.createElement)(R,f({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":eL(l.open)},s,{ref:u,onDismiss:()=>l.onOpenChange(!1)}))),!1)}),eV="DialogTitle";function eL(e){return e?"open":"closed"}let[ez,e_]=function(e,t){let r=(0,n.createContext)(t);function a(e){let{children:t,...a}=e,i=(0,n.useMemo)(()=>a,Object.values(a));return(0,n.createElement)(r.Provider,{value:i},t)}return a.displayName=e+"Provider",[a,function(a){let i=(0,n.useContext)(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${a}\` must be used within \`${e}\``)}]}("DialogTitleWarning",{contentName:eF,titleName:eV,docsSlug:"dialog"}),eW=e=>{let{__scopeDialog:t,children:r,open:a,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,l=(0,n.useRef)(null),u=(0,n.useRef)(null),[c=!1,d]=function({prop:e,defaultProp:t,onChange:r=()=>{}}){let[a,i]=function({defaultProp:e,onChange:t}){let r=(0,n.useState)(e),[a]=r,i=(0,n.useRef)(a),o=S(t);return(0,n.useEffect)(()=>{i.current!==a&&(o(a),i.current=a)},[a,i,o]),r}({defaultProp:t,onChange:r}),o=void 0!==e,s=o?e:a,l=S(r);return[s,(0,n.useCallback)(t=>{if(o){let r="function"==typeof t?t(e):t;r!==e&&l(r)}else i(t)},[o,e,i,l])]}({prop:a,defaultProp:i,onChange:o});return(0,n.createElement)(ej,{scope:t,triggerRef:l,contentRef:u,contentId:b(),titleId:b(),descriptionId:b(),open:c,onOpenChange:d,onOpenToggle:(0,n.useCallback)(()=>d(e=>!e),[d]),modal:s},r)},eH=e=>{let{__scopeDialog:t,forceMount:r,children:a,container:i}=e,o=eT(eE,t);return(0,n.createElement)(eI,{scope:t,forceMount:r},n.Children.map(a,e=>(0,n.createElement)(G,{present:r||o.open},(0,n.createElement)(U,{asChild:!0,container:i},e))))};var eU='[cmdk-group=""]',eq='[cmdk-group-items=""]',eG='[cmdk-item=""]',e$=`${eG}:not([aria-disabled="true"])`,eK="cmdk-item-select",eZ="data-value",eY=(e,t)=>(function e(t,r,n,a,i,o,s){if(o===r.length)return i===t.length?1:.99;var m=`${i},${o}`;if(void 0!==s[m])return s[m];for(var f,p,h,g,v=a.charAt(o),y=n.indexOf(v,i),x=0;y>=0;)(f=e(t,r,n,a,y+1,o+1,s))>x&&(y===i?f*=1:l.test(t.charAt(y-1))?(f*=.8,(h=t.slice(i,y-1).match(u))&&i>0&&(f*=Math.pow(.999,h.length))):c.test(t.charAt(y-1))?(f*=.9,(g=t.slice(i,y-1).match(d))&&i>0&&(f*=Math.pow(.999,g.length))):(f*=.17,i>0&&(f*=Math.pow(.999,y-i))),t.charAt(y)!==r.charAt(o)&&(f*=.9999)),(f<.1&&n.charAt(y-1)===a.charAt(o+1)||a.charAt(o+1)===a.charAt(o)&&n.charAt(y-1)!==a.charAt(o))&&.1*(p=e(t,r,n,a,y+1,o+2,s))>f&&(f=.1*p),f>x&&(x=f),y=n.indexOf(v,y+1);return s[m]=x,x})(e,t,m(e),m(t),0,0,{}),eX=n.createContext(void 0),eQ=n.createContext(void 0),eJ=n.createContext(void 0),e0=n.forwardRef((e,t)=>{let r=n.useRef(null),a=te(()=>{var t,r,n;return{search:"",value:null!=(n=null!=(r=e.value)?r:null==(t=e.defaultValue)?void 0:t.toLowerCase())?n:"",filtered:{count:0,items:new Map,groups:new Set}}}),i=te(()=>new Set),o=te(()=>new Map),s=te(()=>new Map),l=te(()=>new Set),u=e5(e),{label:c,children:d,value:m,onValueChange:f,filter:p,shouldFilter:h,vimBindings:g=!0,...v}=e,y=n.useId(),x=n.useId(),b=n.useId(),S=ta();e4(()=>{if(void 0!==m){let e=m.trim().toLowerCase();a.current.value=e,S(6,I),C.emit()}},[m]);let C=n.useMemo(()=>({subscribe:e=>(l.current.add(e),()=>l.current.delete(e)),snapshot:()=>a.current,setState:(e,t,r)=>{var n,i,o;if(!Object.is(a.current[e],t)){if(a.current[e]=t,"search"===e)E(),j(),S(1,T);else if("value"===e)if((null==(n=u.current)?void 0:n.value)!==void 0){null==(o=(i=u.current).onValueChange)||o.call(i,null!=t?t:"");return}else r||S(5,I);C.emit()}},emit:()=>{l.current.forEach(e=>e())}}),[]),P=n.useMemo(()=>({value:(e,t)=>{t!==s.current.get(e)&&(s.current.set(e,t),a.current.filtered.items.set(e,w(t)),S(2,()=>{j(),C.emit()}))},item:(e,t)=>(i.current.add(e),t&&(o.current.has(t)?o.current.get(t).add(e):o.current.set(t,new Set([e]))),S(3,()=>{E(),j(),a.current.value||T(),C.emit()}),()=>{s.current.delete(e),i.current.delete(e),a.current.filtered.items.delete(e);let t=D();S(4,()=>{E(),(null==t?void 0:t.getAttribute("id"))===e&&T(),C.emit()})}),group:e=>(o.current.has(e)||o.current.set(e,new Set),()=>{s.current.delete(e),o.current.delete(e)}),filter:()=>u.current.shouldFilter,label:c||e["aria-label"],commandRef:r,listId:y,inputId:b,labelId:x}),[]);function w(e){var t,r;let n=null!=(r=null==(t=u.current)?void 0:t.filter)?r:eY;return e?n(e,a.current.search):0}function j(){if(!r.current||!a.current.search||!1===u.current.shouldFilter)return;let e=a.current.filtered.items,t=[];a.current.filtered.groups.forEach(r=>{let n=o.current.get(r),a=0;n.forEach(t=>{a=Math.max(e.get(t),a)}),t.push([r,a])});let n=r.current.querySelector('[cmdk-list-sizer=""]');k().sort((t,r)=>{var n,a;let i=t.getAttribute(eZ),o=r.getAttribute(eZ);return(null!=(n=e.get(o))?n:0)-(null!=(a=e.get(i))?a:0)}).forEach(e=>{let t=e.closest(eq);t?t.appendChild(e.parentElement===t?e:e.closest(`${eq} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${eq} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=r.current.querySelector(`${eU}[${eZ}="${e[0]}"]`);null==t||t.parentElement.appendChild(t)})}function T(){let e=k().find(e=>!e.ariaDisabled),t=null==e?void 0:e.getAttribute(eZ);C.setState("value",t||void 0)}function E(){if(!a.current.search||!1===u.current.shouldFilter){a.current.filtered.count=i.current.size;return}a.current.filtered.groups=new Set;let e=0;for(let t of i.current){let r=w(s.current.get(t));a.current.filtered.items.set(t,r),r>0&&e++}for(let[e,t]of o.current)for(let r of t)if(a.current.filtered.items.get(r)>0){a.current.filtered.groups.add(e);break}a.current.filtered.count=e}function I(){var e,t,r;let n=D();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(eU))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function D(){var e;return null==(e=r.current)?void 0:e.querySelector(`${eG}[aria-selected="true"]`)}function k(){return Array.from(r.current.querySelectorAll(e$))}function R(e){let t=k()[e];t&&C.setState("value",t.getAttribute(eZ))}function N(e){var t;let r=D(),n=k(),a=n.findIndex(e=>e===r),i=n[a+e];null!=(t=u.current)&&t.loop&&(i=a+e<0?n[n.length-1]:a+e===n.length?n[0]:n[a+e]),i&&C.setState("value",i.getAttribute(eZ))}function F(e){let t=D(),r=null==t?void 0:t.closest(eU),n;for(;r&&!n;)n=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,eU):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,eU))?void 0:r.querySelector(e$);n?C.setState("value",n.getAttribute(eZ)):N(e)}let A=()=>R(k().length-1),M=e=>{e.preventDefault(),e.metaKey?A():e.altKey?F(1):N(1)},B=e=>{e.preventDefault(),e.metaKey?R(0):e.altKey?F(-1):N(-1)};return n.createElement("div",{ref:tt([r,t]),...v,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=v.onKeyDown)||t.call(v,e),!e.defaultPrevented)switch(e.key){case"n":case"j":g&&e.ctrlKey&&M(e);break;case"ArrowDown":M(e);break;case"p":case"k":g&&e.ctrlKey&&B(e);break;case"ArrowUp":B(e);break;case"Home":e.preventDefault(),R(0);break;case"End":e.preventDefault(),A();break;case"Enter":if(!e.nativeEvent.isComposing){e.preventDefault();let t=D();if(t){let e=new Event(eK);t.dispatchEvent(e)}}}}},n.createElement("label",{"cmdk-label":"",htmlFor:P.inputId,id:P.labelId,style:ti},c),n.createElement(eQ.Provider,{value:C},n.createElement(eX.Provider,{value:P},d)))}),e1=n.forwardRef((e,t)=>{var r,a;let i=n.useId(),o=n.useRef(null),s=n.useContext(eJ),l=n.useContext(eX),u=e5(e),c=null!=(a=null==(r=u.current)?void 0:r.forceMount)?a:null==s?void 0:s.forceMount;e4(()=>l.item(i,null==s?void 0:s.id),[]);let d=tn(i,o,[e.value,e.children,o]),m=n.useContext(eQ),f=tr(e=>e.value&&e.value===d.current),p=tr(e=>!!c||!1===l.filter()||!e.search||e.filtered.items.get(i)>0);function h(){var e,t;g(),null==(t=(e=u.current).onSelect)||t.call(e,d.current)}function g(){m.setState("value",d.current,!0)}if(n.useEffect(()=>{let t=o.current;if(!(!t||e.disabled))return t.addEventListener(eK,h),()=>t.removeEventListener(eK,h)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:v,value:y,onSelect:x,forceMount:b,...S}=e;return n.createElement("div",{ref:tt([o,t]),...S,id:i,"cmdk-item":"",role:"option","aria-disabled":v||void 0,"aria-selected":f||void 0,"data-disabled":v||void 0,"data-selected":f||void 0,onPointerMove:v?void 0:g,onClick:v?void 0:h},e.children)}),e9=n.forwardRef((e,t)=>{let{heading:r,children:a,forceMount:i,...o}=e,s=n.useId(),l=n.useRef(null),u=n.useRef(null),c=n.useId(),d=n.useContext(eX),m=tr(e=>!!i||!1===d.filter()||!e.search||e.filtered.groups.has(s));e4(()=>d.group(s),[]),tn(s,l,[e.value,e.heading,u]);let f=n.useMemo(()=>({id:s,forceMount:i}),[i]),p=n.createElement(eJ.Provider,{value:f},a);return n.createElement("div",{ref:tt([l,t]),...o,"cmdk-group":"",role:"presentation",hidden:!m||void 0},r&&n.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),n.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},p))}),e2=n.forwardRef((e,t)=>{let{alwaysRender:r,...a}=e,i=n.useRef(null),o=tr(e=>!e.search);return r||o?n.createElement("div",{ref:tt([i,t]),...a,"cmdk-separator":"",role:"separator"}):null}),e6=n.forwardRef((e,t)=>{let{onValueChange:r,...a}=e,i=null!=e.value,o=n.useContext(eQ),s=tr(e=>e.search),l=tr(e=>e.value),u=n.useContext(eX),c=n.useMemo(()=>{var e;let t=null==(e=u.commandRef.current)?void 0:e.querySelector(`${eG}[${eZ}="${l}"]`);return null==t?void 0:t.getAttribute("id")},[l,u.commandRef]);return n.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),n.createElement("input",{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":c,id:u.inputId,type:"text",value:i?e.value:s,onChange:e=>{i||o.setState("search",e.target.value),null==r||r(e.target.value)}})}),e8=n.forwardRef((e,t)=>{let{children:r,...a}=e,i=n.useRef(null),o=n.useRef(null),s=n.useContext(eX);return n.useEffect(()=>{if(o.current&&i.current){let e=o.current,t=i.current,r,n=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return n.observe(e),()=>{cancelAnimationFrame(r),n.unobserve(e)}}},[]),n.createElement("div",{ref:tt([i,t]),...a,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:s.listId,"aria-labelledby":s.inputId},n.createElement("div",{ref:o,"cmdk-list-sizer":""},r))}),e7=n.forwardRef((e,t)=>{let{open:r,onOpenChange:a,overlayClassName:i,contentClassName:o,container:s,...l}=e;return n.createElement(eW,{open:r,onOpenChange:a},n.createElement(eH,{container:s},n.createElement(eR,{"cmdk-overlay":"",className:i}),n.createElement(eA,{"aria-label":e.label,"cmdk-dialog":"",className:o},n.createElement(e0,{ref:t,...l}))))}),e3=Object.assign(e0,{List:e8,Item:e1,Input:e6,Group:e9,Separator:e2,Dialog:e7,Empty:n.forwardRef((e,t)=>{let r=n.useRef(!0),a=tr(e=>0===e.filtered.count);return n.useEffect(()=>{r.current=!1},[]),r.current||!a?null:n.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),Loading:n.forwardRef((e,t)=>{let{progress:r,children:a,...i}=e;return n.createElement("div",{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},n.createElement("div",{"aria-hidden":!0},a))})});function e5(e){let t=n.useRef(e);return e4(()=>{t.current=e}),t}var e4="undefined"==typeof window?n.useEffect:n.useLayoutEffect;function te(e){let t=n.useRef();return void 0===t.current&&(t.current=e()),t}function tt(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function tr(e){let t=n.useContext(eQ),r=()=>e(t.snapshot());return n.useSyncExternalStore(t.subscribe,r,r)}function tn(e,t,r){let a=n.useRef(),i=n.useContext(eX);return e4(()=>{var n;let o=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim().toLowerCase();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim().toLowerCase():a.current}})();i.value(e,o),null==(n=t.current)||n.setAttribute(eZ,o),a.current=o}),a}var ta=()=>{let[e,t]=n.useState(),r=te(()=>new Map);return e4(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}},ti={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};e.s(["Command",()=>e3,"useCommandState",()=>tr],10483)},2636,38053,6890,91435,78467,e=>{"use strict";e.s(["VolumeCreateDialog",()=>et],2636);var t=e.i(91398);e.i(86663);var r=e.i(48708),n=e.i(8854),a=e.i(26768),i=e.i(79476),o=e.i(35929),s=e.i(86411);e.i(7190);var l=e.i(75901);e.i(37869);var u=e.i(28787),c=e.i(59999),d=e.i(35251),m=e.i(63761),f=e.i(91788),p=e.i(58021),h=e.i(8433),g=e.i(41490),v=e.i(40410),y=e.i(10483),x=e.i(7880),b=e.i(34530),S=e.i(20960);function C({currentPage:e,parentPage:r,commandPage:n,className:a,...i}){let o=(0,y.useCommandState)(e=>e.search);if(r?.namespace===e?.namespace&&!o)return(0,t.jsx)(y.Command.Item,{className:(0,S.cx)((0,x.itemStyles)(),"group",a),value:`${n?.label} ${i.children.toString()}`,...i})}function P({currentPage:e,commandPage:r,className:n,...a}){let i=(0,y.useCommandState)(e=>e.search),o=r.namespace.startsWith(e?.namespace||"");if(i&&o||r.namespace===e?.namespace)return(0,t.jsx)(y.Command.Item,{className:(0,S.cx)((0,x.itemStyles)(),"group",n),value:`${r.label} ${a.children.toString()}`,...a})}function w({currentPage:e,commandPage:r,className:n,...a}){let i=(0,y.useCommandState)(e=>e.search),o=r.namespace.startsWith(e?.namespace||"");if(i&&o||!e||r.namespace===e?.namespace)return(0,t.jsx)(y.Command.Item,{className:(0,S.cx)((0,x.itemStyles)(),"group",n),value:`${r.label} ${a.children.toString()}`,...a})}function j({heading:e,currentPage:r,commandPage:n,...a}){let i=(0,y.useCommandState)(e=>e.search);return(0,t.jsx)(y.Command.Group,{heading:i&&r?.namespace!==n.namespace&&(0,t.jsx)(b.Label,{className:"px-1",size:"12",children:n.label}),...a})}e.s(["CommandGroup",()=>j,"CommandItemNav",()=>C,"CommandItemRootAndSearch",()=>w,"CommandItemSearch",()=>P],38053);var T=e.i(929);e.i(71487);var E=e.i(79317),I=e.i(76993);function D({search:e}){return(0,t.jsxs)(T.Text,{color:"verySubtle",className:"flex flex-col gap-2 justify-center items-center mt-5 mb-3",children:[(0,t.jsx)(T.Text,{color:"verySubtle",className:"flex gap-2 justify-center items-center",children:(0,t.jsx)(I.Folder16,{})}),(0,t.jsx)(T.Text,{size:"12",color:"verySubtle",className:"flex justify-center",children:e?"No matching directory.":"Select a directory to get started."})]})}function k(){let e=(0,l.useHostState)({config:{swr:{revalidateOnFocus:!1,keepPreviousData:!0}}});return e.data?.os==="windows"?"\\":"/"}e.i(19513);var R=e.i(29144),N=e.i(72374),F=e.i(66738),A=e.i(6582);let M=function(e,t){for(var r=e.length;r--&&(0,A.default)(t,e[r],0)>-1;);return r},B=function(e,t){for(var r=-1,n=e.length;++r<n&&(0,A.default)(t,e[r],0)>-1;);return r};var O=e.i(93815),V=e.i(48554);let L=function(e,t,r){if((e=(0,V.default)(e))&&(r||void 0===t))return(0,N.default)(e);if(!e||!(t=(0,R.default)(t)))return e;var n=(0,O.default)(e),a=(0,O.default)(t),i=B(n,a),o=M(n,a)+1;return(0,F.default)(n,i,o).join("")};var z=e.i(77563);let _=function(e,t,r){if((e=(0,V.default)(e))&&(r||void 0===t))return e.slice(0,(0,z.default)(e)+1);if(!e||!(t=(0,R.default)(t)))return e;var n=(0,O.default)(e),a=M(n,(0,O.default)(t))+1;return(0,F.default)(n,0,a).join("")};function W({currentPath:e,childPath:t,separator:r}){return"\\"===e&&t.endsWith(":")?t+r:H(e,t,r)}function H(e,t,r){e=e===r?e:_(e,r),t=L(t,r);let n="";return(n=e.length?t.length&&t!==r?e===r?r+t:e+r+t:e:t).endsWith(":")?n+r:n}function U(){return(0,t.jsxs)(T.Text,{color:"verySubtle",className:"flex flex-col gap-2 justify-center items-center mt-5 mb-3",children:[(0,t.jsx)(T.Text,{color:"verySubtle",className:"flex gap-2 justify-center items-center",children:(0,t.jsx)(I.Folder16,{})}),(0,t.jsx)(T.Text,{size:"12",color:"verySubtle",className:"flex justify-center",children:"Error loading directory."})]})}var q=e.i(77786);function G({path:e,onCreate:r}){let a=k(),i=(0,l.useSystemDirectoryCreate)(),[o,s]=(0,f.useState)(""),u=(0,f.useCallback)(async()=>{let t=await i.put({payload:{path:W({currentPath:e,childPath:o,separator:a})}});t.error?(0,n.triggerErrorToast)({title:"Error creating directory",body:t.error}):(r(o),s(""))},[i,o,r,e,a]);return(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden w-full",children:[(0,t.jsx)(T.Text,{color:"verySubtle",className:"group-data-[selected=true]:text-gray-1000 dark:group-data-[selected=true]:text-graydark-1000",children:(0,t.jsx)(I.FolderAdd16,{})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(q.TextField,{focus:"none",variant:"ghost",placeholder:"type new directory name",className:"!pl-0 font-normal h-5",value:o,onChange:e=>{s(e.currentTarget.value)},onKeyUp:e=>{e.stopPropagation(),"Enter"===e.key&&u()},size:"small"})})]})}function $({path:e,setPath:r,commandPage:n,currentPage:a,beforeSelect:i,afterSelect:o}){let s=k();return(0,t.jsx)(P,{commandPage:n,currentPage:a,onSelect:()=>{e&&(i&&i(),r(function(e,t){if(e.endsWith(":\\"))return t;let r=`${e.split(t).slice(0,-1).join(t)}`;return""===r?t:r.endsWith(":")?r+t:r}(e,s)),o&&o())},value:"..",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,t.jsx)(T.Text,{color:"verySubtle",className:"group-data-[selected=true]:text-gray-1000 dark:group-data-[selected=true]:text-graydark-1000",children:(0,t.jsx)(E.FolderIcon,{size:16})}),(0,t.jsx)(T.Text,{ellipsis:!0,children:".."})]})},"..")}let K={namespace:"volumes/directorySelect",label:"Directory select"};function Z({path:e,dir:r,setPath:n,currentPage:a,beforeSelect:i,afterSelect:o}){let s=k(),l=r.data?.path===s,u=r.data?.path==="\\";return(0,t.jsxs)(j,{currentPage:a,commandPage:K,children:[r.isValidating||!r.data||r.error||l?null:(0,t.jsx)($,{path:r.data.path,setPath:n,currentPage:a,commandPage:K,afterSelect:o,beforeSelect:i}),(0,t.jsxs)(y.Command.Empty,{children:[!r.isValidating&&r.error?(0,t.jsx)(U,{}):null,r.isValidating||r.error||r.data?.directories?.length?null:(0,t.jsx)(D,{search:e})]}),!r.isValidating&&!r.error&&r.data?.directories?.length?r.data.directories.map(e=>(0,t.jsx)(P,{commandPage:K,currentPage:a,onSelect:()=>{i&&i(),n(W({currentPath:r.data.path,childPath:e,separator:s})),o&&o()},value:e,children:(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,t.jsx)(T.Text,{color:"verySubtle",className:"group-data-[selected=true]:text-gray-1000 dark:group-data-[selected=true]:text-graydark-1000",children:(0,t.jsx)(E.FolderIcon,{size:16})}),(0,t.jsx)(T.Text,{ellipsis:!0,children:e})]})},e)):null,!u&&!r.isValidating&&!r.error&&(0,t.jsx)(P,{commandPage:K,currentPage:a,value:"create new directory",children:(0,t.jsx)(G,{path:r.data?.path,onCreate:e=>{r.mutate(t=>({...t,directories:t?.directories?.concat(e)||[e]}))}})})]})}function Y({path:e,dir:r,onChange:n}){return(0,t.jsx)(y.Command,{label:"Select volume",shouldFilter:!1,children:(0,t.jsx)(g.Panel,{className:"h-[200px] p-1 overflow-hidden",children:(0,t.jsx)(v.ScrollArea,{keyToResetScrollbars:e,children:(0,t.jsx)(y.Command.List,{children:(0,t.jsx)(Z,{path:e,dir:r,setPath:n,currentPage:K})})})})})}var X=e.i(75109);function Q({label:e,newSizeGB:r,currentSizeGB:n=0,maxSizeGB:a=0}){let i=n<r,o=n>r,s=r>a;return(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"relative w-full h-1 rounded-lg bg-gray-300 dark:bg-graydark-300 overflow-hidden",children:[(0,t.jsx)("div",{className:(0,S.cx)("absolute h-1 rounded-tl-lg rounded-bl-lg",void 0!==r&&o?"bg-red-500 dark:bg-red-500":"bg-gray-700 dark:bg-graydark-800",i?"z-10":"z-0"),style:{width:a?`${n/a*100}%`:"0%"}}),(0,t.jsx)("div",{className:(0,S.cx)("absolute h-1 rounded-tl-lg rounded-bl-lg",s?"bg-amber-500 dark:bg-amber-500":void 0!==r&&i?"bg-green-500 dark:bg-green-500":"bg-gray-700 dark:bg-graydark-800",o?"z-10":"z-0"),style:{width:a?`${r/a*100}%`:"0%"}})]}),(0,t.jsxs)("div",{className:"h-4 flex justify-between",children:[e||(0,t.jsx)("div",{}),void 0!==r&&a?(0,t.jsx)(T.Text,{size:"12",color:"subtle",children:`${(r/a*100).toFixed(0)}% of ${(0,c.humanBytes)((0,u.GBToBytes)(a))} available`}):null]})]})}let J=new m.default(10),ee={size:void 0,name:"",path:"~",immediatePath:"~"};function et({trigger:e,open:g,onOpenChange:v}){let{closeDialog:y}=(0,X.useDialog)(),x=(0,l.useVolumeCreate)(),b=k(),S=(0,p.useForm)({mode:"all",defaultValues:ee}),C=(0,p.useWatch)({control:S.control,name:"path"}),P=(0,p.useWatch)({control:S.control,name:"immediatePath"}),w=(0,p.useWatch)({control:S.control,name:"name"}),j=(0,p.useWatch)({control:S.control,name:"size"}),T=(0,h.useDebouncedCallback)(()=>{C!==P&&S.setValue("path",P)},500);(0,f.useEffect)(()=>{T()},[P]),(0,f.useEffect)(()=>{C!==P&&S.setValue("immediatePath",C)},[C]);let E=(0,f.useCallback)(async e=>{let t=await x.post({payload:{localPath:H(C,w,b),maxSectors:(0,d.GBToSectors)(e.size).toNumber()}});t.error?(0,n.triggerErrorToast)({title:"Error creating volume",body:t.error}):((0,n.triggerSuccessToast)({title:"New volume created"}),S.reset(ee),y())},[S,x,y,w,C,b]),I=(0,l.useSystemDirectory)({disabled:!g,params:{path:""===C?b:C},config:{swr:{shouldRetryOnError:!1}}});(0,f.useEffect)(()=>{I.error&&S.setError("immediatePath",{message:"Directory does not exist"})},[I.error]),(0,f.useEffect)(()=>{I.data&&I.data.path!==C&&S.setValue("path",I.data.path)},[I.data]);let D=(0,f.useMemo)(()=>j||new m.default(0),[j]),R=(0,f.useMemo)(()=>I.data?(0,u.bytesToGB)(I.data.freeBytes):new m.default(0),[I.data]),N=(0,f.useMemo)(()=>(0,u.bytesToGB)(I.data?.freeBytes||new m.default(0)),[I.data]),F=(0,f.useMemo)(()=>{var e,t;return e=J.toNumber(),t=N.toNumber(),{name:{type:"text",title:"Name",placeholder:"data.dat",validation:{required:"required"}},immediatePath:{type:"text",title:"Location",placeholder:"Enter a directory or select one below",validation:{required:"required",validate:{}}},path:{type:"text",title:"Location",validation:{required:"required",validate:{req:e=>"\\"!==e||"directory within a drive required"}}},size:{type:"number",title:"Size",decimalsLimit:0,units:"GB",placeholder:"1,000",validation:{required:"required",validate:{between:r=>{let n=`Must be between ${(0,c.humanBytes)((0,u.GBToBytes)(e))} and ${(0,c.humanBytes)((0,u.GBToBytes)(t),{fixed:3})}`;return r<=t&&r>=e||n},nospace:()=>t>e||"not enough space in directory"}}}}},[N]),A=(0,s.useOnInvalid)(F);return(0,f.useEffect)(()=>{S.register("path",F.path.validation)},[S,F.path.validation]),(0,t.jsx)(r.Dialog,{title:"Create Volume",description:"Create a new volume. Select a system directory and specific the size of the volume.",trigger:e,open:g,onOpenChange:e=>{e||S.reset(ee),v(e)},contentVariants:{className:"w-[400px]"},onSubmit:S.handleSubmit(E,A),controls:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(o.FormSubmitButton,{form:S,children:"Create"})}),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(i.FieldText,{name:"name",form:S,fields:F}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(i.FieldText,{name:"immediatePath",form:S,fields:F})}),(0,t.jsx)(Y,{path:C,dir:I,onChange:e=>S.setValue("path",e,{shouldDirty:!0,shouldTouch:!0,shouldValidate:!0})})]}),(0,t.jsx)(a.FieldNumber,{name:"size",form:S,fields:F}),(0,t.jsx)(Q,{newSizeGB:D.toNumber(),currentSizeGB:0,maxSizeGB:R.toNumber()})]})})}e.s(["VolumeResizeDialog",()=>eo],6890);var er=e.i(67419),en=e.i(51281),ea=e.i(44953);let ei=new m.default(10);function eo({trigger:e,open:i,onOpenChange:h}){let{id:g}=(0,X.useDialog)(),v=k(),y=(0,l.useVolume)({disabled:!i||!g,params:{id:g}}),x=(0,l.useSystemDirectory)({disabled:!i||!y.data,params:{path:y.data?.localPath.split(v).slice(0,-1).join(v)}}),S=(0,l.useVolumeResize)(),C={size:y.data?(0,d.sectorsToGB)(y.data.totalSectors):new m.default(0)},P=(0,p.useForm)({mode:"all",defaultValues:C}),w=(0,p.useWatch)({control:P.control,name:"size"}),{closeAndReset:j,handleOpenChange:E}=(0,ea.useDialogFormHelpers)({form:P,onOpenChange:h,defaultValues:C,initKey:[y.isLoading]}),I=(0,f.useCallback)(async e=>{let t=await S.put({params:{id:Number(g)},payload:{maxSectors:(0,d.GBToSectors)(e.size).toNumber()}});t.error?(0,n.triggerErrorToast)({title:"Error resizing volume",body:t.error}):((0,n.triggerSuccessToast)({title:"Volume resizing initiated"}),j())},[g,S,j]),D=(0,f.useMemo)(()=>w||new m.default(0),[w]),R=(0,f.useMemo)(()=>y.data?(0,d.sectorsToGB)(y.data.totalSectors):new m.default(0),[y.data]),N=(0,f.useMemo)(()=>x.data?(0,u.bytesToGB)(x.data.freeBytes):new m.default(0),[x.data]),F=(0,f.useMemo)(()=>R.plus(N),[R,N]),A=R.lt(D),M=R.minus(D).abs().gte(1),B=(0,f.useMemo)(()=>{var e,t;return e=ei.toNumber(),t=F.toNumber(),{size:{type:"number",title:"New size",decimalsLimit:0,units:"GB",placeholder:"1,000",validation:{required:"required",validate:{between:r=>{let n=`Must be between ${(0,c.humanBytes)((0,u.GBToBytes)(e))} and ${(0,c.humanBytes)((0,u.GBToBytes)(t),{fixed:3})}`;return r?.lte(t)&&r?.gte(e)||n}}}}}},[F]),O=(0,s.useOnInvalid)(B);return(0,t.jsx)(r.Dialog,{title:"Resize Volume",trigger:e,open:i,onOpenChange:E,contentVariants:{className:"max-w-[400px]"},onSubmit:P.handleSubmit(I,O),controls:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsx)(o.FormSubmitButton,{form:P,children:"Resize"})}),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsxs)(er.Paragraph,{size:"14",children:["Grow or shrink the volume. When growing a volume, make sure to check that there is enough space on-disk. When shrinking a volume, any data that needs to be moved will be placed into other volumes, meaning that no data will be lost. If ",(0,t.jsx)(en.Code,{children:"hostd"})," is unable to migrate the data, an error will be returned and the operation will be stopped."]}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(b.Label,{children:"Volume"}),(0,t.jsx)(T.Text,{font:"mono",ellipsis:!0,children:y.data?.localPath})]}),(0,t.jsx)(a.FieldNumber,{name:"size",form:P,fields:B}),(0,t.jsx)(Q,{currentSizeGB:R.toNumber(),newSizeGB:D.toNumber(),maxSizeGB:F.toNumber(),label:M?(0,t.jsx)(T.Text,{size:"12",color:"subtle",children:A?`Increase by ${(0,c.humanBytes)((0,u.GBToBytes)(D.minus(R)))}`:`Decrease by ${(0,c.humanBytes)((0,u.GBToBytes)(R.minus(D)))}`}):(0,t.jsx)(T.Text,{size:"12",color:"subtle",children:`Current size is ${(0,c.humanBytes)((0,u.GBToBytes)(R))}`})})]})})}e.s(["VolumeDeleteDialog",()=>ec],91435);var es=e.i(6348),el=e.i(53031);let eu={path:"",force:!1};function ec({trigger:e,open:a,onOpenChange:u}){let{id:m,closeDialog:h}=(0,X.useDialog)(),g=(0,l.useVolumeDelete)(),v=(0,l.useVolume)({disabled:!a||!m,params:{id:m}}),y=(0,d.sectorsToBytes)(v.data?.totalSectors),x=(0,d.sectorsToBytes)(v.data?.usedSectors),b=v.data?.localPath,S=(0,p.useForm)({mode:"all",defaultValues:eu}),C=(0,f.useCallback)(async e=>{let t=await g.delete({params:{id:v.data?.id,force:e.force}});t.error?(0,n.triggerErrorToast)({title:"Error deleting volume",body:t.error}):((0,n.triggerSuccessToast)({title:"Volume is now being permanently deleted"}),S.reset(),h())},[S,v.data,g,h]),P=(0,f.useMemo)(()=>({path:{type:"text",title:"Path",placeholder:b,validation:{required:"required",validate:{equals:e=>e===b||"directory path does not match"}}},force:{type:"boolean",title:"Force",validation:{}}}),[b]),w=(0,s.useOnInvalid)(P);return(0,t.jsx)(r.Dialog,{title:"Delete Volume",trigger:e,open:a,onOpenChange:e=>{e||S.reset(eu),u(e)},contentVariants:{className:"w-[400px]"},onSubmit:S.handleSubmit(C,w),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(er.Paragraph,{size:"14",children:"Are you sure you would like to delete the volume?"}),(0,t.jsxs)(er.Paragraph,{size:"14",children:[(0,t.jsx)(en.Code,{children:"hostd"})," will move"," ",(0,t.jsx)(T.Text,{weight:"semibold",children:(0,c.humanBytes)(x)})," of stored data and will lose ",(0,t.jsx)(T.Text,{weight:"semibold",children:(0,c.humanBytes)(y)})," ","of storage capacity. It is not recommended to remove or resize volumes when contracts are about to expire."]}),(0,t.jsx)(er.Paragraph,{size:"14",children:"Enter the volume path to confirm the removal."}),(0,t.jsx)(i.FieldText,{name:"path",form:S,fields:P}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(el.FieldSwitch,{name:"force",size:"medium",form:S,fields:P}),(0,t.jsx)(es.InfoTip,{children:(0,t.jsx)("div",{className:"flex gap-1 max-w-[200px]",children:(0,t.jsx)(er.Paragraph,{size:"14",children:"Force deleting a volume will remove the volume even if the data can NOT be relocated - this will result in severe data loss and contract failure. Be extremely careful when using this option."})})})]}),(0,t.jsx)(o.FormSubmitButton,{variant:"red",form:S,children:"Delete"})]})})}e.s(["HostdSendSiacoinDialog",()=>em],78467);var ed=e.i(20156);function em(){let{dialog:e,onOpenChange:r}=(0,X.useDialog)(),n=(0,l.useWallet)(),a=(0,l.useWalletSend)(),i=(0,l.useTxPoolFee)(),o=(0,f.useMemo)(()=>i.data?new m.default(i.data).times(1200):void 0,[i.data]),s=(0,f.useCallback)(async({address:e,hastings:t,includeFee:r})=>{let n=await a.post({payload:{address:e,amount:t.toString(),subtractMinerFee:r}});return n.error?{error:n.error}:{transactionId:n.data}},[a]);return(0,t.jsx)(ed.WalletSendSiacoinDialog,{balance:n.data?new m.default(n.data.spendable):void 0,send:s,fee:o,open:"sendSiacoin"===e,onOpenChange:r})}},89673,e=>{"use strict";e.i(86663);var t=e.i(95551);e.i(7190);var r=e.i(75901);function n(){let e=(0,r.useConsensusNetwork)();return e.data?.name==="zen"?t.webLinks.explore.testnetZen:t.webLinks.explore.mainnet}e.s(["useSiascanUrl",()=>n])},29389,e=>{"use strict";e.i(94066);var t=e.i(82156);e.i(7190);var r=e.i(75901);e.i(37869);var n=e.i(41399);function a(){let{isUnlockedAndAuthedRoute:e}=(0,t.useAppSettings)(),n=(0,r.useConsensusTipState)({config:{swr:{refreshInterval:e=>i(e)?6e4:1e4}}}),a=i(n.data),o=(0,r.useEstimatedNetworkBlockHeight)(),s=n.data?n.data?.index.height:0,l=(0,r.useIndexTip)({config:{swr:{refreshInterval:e=>e?.height>=s?6e4:1e4}}}),u=e&&s&&o?Number((100*Math.min(s/o,1)).toFixed(1)):0,c=e&&s&&l.data?Number((100*Math.min(l.data.height/o,1)).toFixed(1)):0;return{isSynced:a,isWalletSynced:a&&l.data?.height>=s-1,nodeBlockHeight:s,estimatedBlockHeight:o,syncPercent:u,walletScanPercent:c,moreThan100BlocksToSync:!!s&&!!o&&o-s>100,firstTimeSyncing:!!s&&!!o&&o-s>5e4}}function i(e){return!!e?.prevTimestamps[0]&&new Date(e?.prevTimestamps[0]).getTime()>Date.now()-(0,n.hoursInMilliseconds)(12)}e.s(["useSyncStatus",()=>a])},32241,e=>{"use strict";var t=e.i(91398);e.i(86663);var r=e.i(15222),n=e.i(75821),a=e.i(275);e.i(7190);var i=e.i(75901),o=e.i(91788),s=e.i(17837),l=e.i(89673),u=e.i(85645),c=e.i(29389),d=e.i(929),m=e.i(91952),f=e.i(38921),p=e.i(33478),h=e.i(16517),g=e.i(26069),v=e.i(29976);e.i(37869);var y=e.i(59999),x=e.i(31363);e.i(71487);var b=e.i(76993);let S=[{id:"id",label:"ID",category:"general",render:({data:e,context:r})=>e.id?(0,t.jsx)(m.ValueCopyable,{size:"12",value:e.id,type:e.entityType,siascanUrl:r.siascanUrl}):null},{id:"type",label:"type",category:"general",fixed:!0,render:({data:{txType:e}})=>(0,t.jsx)(v.Badge,{size:"small",children:(0,x.getTxTypeLabel)(e)})},{id:"height",label:"height",category:"general",contentClassName:"justify-end",render:({data:{height:e,pending:r,maturityHeight:n,isMature:a}})=>r?(0,t.jsx)(d.Text,{size:"12",ellipsis:!0,children:(0,t.jsx)(f.LoadingDots,{})}):e?e&&n&&n>e?(0,t.jsx)(g.Tooltip,{content:a?"The maturity height has been reached.":"The maturity height has not been reached, therefore the output is still locked.",children:(0,t.jsxs)("div",{className:"flex flex-col gap-[5px]",children:[(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)(d.Text,{size:"12",font:"mono",ellipsis:!0,color:a?"green":"red",className:"flex gap-1 items-center",children:[a?(0,t.jsx)(b.Unlocked16,{}):(0,t.jsx)(b.Locked16,{}),n.toLocaleString()]})}),(0,t.jsxs)("div",{className:"flex justify-between items-end gap-1",children:[(0,t.jsx)("div",{className:"pl-[8px] pb-[6px]",children:(0,t.jsx)("div",{className:"border-l border-b border-gray-800 dark:border-graydark-800 h-[20px] w-[7px]"})}),(0,t.jsx)(d.Text,{size:"12",font:"mono",color:"subtle",ellipsis:!0,children:e.toLocaleString()})]})]})}):(0,t.jsx)(d.Text,{size:"12",font:"mono",ellipsis:!0,children:e.toLocaleString()}):null},{id:"timestamp",label:"timestamp",category:"general",contentClassName:"justify-end",render:({data:{timestamp:e,pending:r}})=>r?(0,t.jsx)(d.Text,{size:"12",ellipsis:!0,children:(0,t.jsx)(f.LoadingDots,{})}):(0,t.jsx)(d.Text,{size:"12",ellipsis:!0,children:(0,y.humanDate)(e,{timeStyle:"short"})})},{id:"amount",label:"amount",category:"general",contentClassName:"w-[120px] justify-end",render:({data:{amountSc:e,amountSf:r}})=>e?(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[!e.isZero()&&(0,t.jsx)(p.ValueCurrency,{displayBoth:!0,size:"12",value:e}),!!r&&(0,t.jsx)(h.ValueSf,{size:"12",value:r})]}):null},{id:"fee",label:"fee",category:"general",contentClassName:"w-[120px] justify-end",render:({data:{fee:e}})=>e?(0,t.jsx)(p.ValueCurrency,{displayBoth:!0,size:"12",variant:"value",value:e}):null},{id:"contractId",label:"contract ID",category:"general",render:({data:{contractId:e},context:r})=>e?(0,t.jsx)(m.ValueCopyable,{size:"12",value:e,label:"contract ID",siascanUrl:r.siascanUrl}):null}];var C=e.i(32869),P=e.i(84147),w=e.i(41399);let j=["id","type","height","timestamp","amount","fee"],T=[],E=(0,o.createContext)({});function I({children:e}){let d=function(){let e=(0,s.useSearchParams)(),t=Number(e.get("limit")||50),d=Number(e.get("offset")||0),m=(0,i.useWalletEvents)({params:{limit:t,offset:d},config:{swr:{refreshInterval:u.defaultDatasetRefreshInterval}}}),f=(0,i.useWalletPending)({config:{swr:{refreshInterval:u.defaultDatasetRefreshInterval}}}),{filters:p,setFilter:h,removeFilter:g,removeLastFilter:v,resetFilters:y}=(0,n.useServerFilters)(),x=(0,c.useSyncStatus)(),b=(0,o.useMemo)(()=>{if(!m.data||!f.data)return null;let e=f.data.map(e=>{let t=(0,C.calculateScValue)(e),r=(0,P.getEventFee)(e);return{id:e.id,type:e.type,txType:(0,P.getEventTxType)(e),entityType:(0,P.getEventIdEntityType)(e),timestamp:0,pending:!0,isMature:!1,amountSc:t,fee:r}}),t=m.data.map(e=>{let t=(0,C.calculateScValue)(e),r=(0,P.getEventFee)(e),n=(0,P.getEventContractId)(e),a=e.maturityHeight<=x.nodeBlockHeight;return{id:e.id,type:e.type,txType:(0,P.getEventTxType)(e),entityType:(0,P.getEventIdEntityType)(e),timestamp:new Date(e.timestamp).getTime(),maturityHeight:e.maturityHeight,isMature:a,height:e.index.height,pending:!1,amountSc:t,fee:r,contractId:n}});return 0===d?[...e.reverse(),...t]:[...t]},[m.data,f.data,x.nodeBlockHeight,d]),{configurableColumns:E,visibleColumnIds:I,visibleColumns:D,sortableColumns:k,toggleColumnVisibility:R,setColumnsVisible:N,setColumnsHidden:F,toggleSort:A,setSortDirection:M,setSortField:B,sortField:O,sortDirection:V,resetDefaultColumnVisibility:L}=(0,a.useTableState)("hostd/v2/events",{columns:S,columnsDefaultVisible:j,sortOptions:T,defaultSortField:"id"}),z=(0,l.useSiascanUrl)(),_=(0,o.useMemo)(()=>({siascanUrl:z}),[z]),W=(0,o.useMemo)(()=>new Date(new Date().getTime()-(0,w.daysInMilliseconds)(30)).toISOString(),[]),H=(0,i.useMetricsPeriod)({params:{interval:"daily",start:W}}),U=(0,o.useMemo)(()=>(H.data||[]).map(e=>({sc:Number(e.wallet.balance),timestamp:new Date(e.timestamp).getTime()})).sort((e,t)=>e.timestamp>=t.timestamp?1:-1),[H.data]),q=m.isValidating||f.isValidating,G=m.error||f.error,$=(0,r.useDatasetState)({datasetPage:b,isValidating:q,error:G,filters:p,offset:d});return{balances:U,metrics:H,datasetPage:b,error:G,datasetState:$,offset:d,limit:t,datasetPageTotal:b?.length||0,defaultPageSize:50,cellContext:_,configurableColumns:E,visibleColumnIds:I,sortableColumns:k,toggleColumnVisibility:R,setColumnsVisible:N,setColumnsHidden:F,toggleSort:A,setSortDirection:M,setSortField:B,sortField:O,sortDirection:V,resetDefaultColumnVisibility:L,filters:p,setFilter:h,removeFilter:g,removeLastFilter:v,resetFilters:y,visibleColumns:D}}();return(0,t.jsx)(E.Provider,{value:d,children:e})}e.s(["TransactionsProvider",()=>I,"useTransactions",0,()=>(0,o.useContext)(E)],32241)},29045,e=>{"use strict";e.s(["HostdTransactionDetailsDialog",()=>o]);var t=e.i(91398),r=e.i(91788);e.i(86663);var n=e.i(5521),a=e.i(75109),i=e.i(32241);function o(){let{id:e,dialog:o,onOpenChange:s}=(0,a.useDialog)(),{datasetPage:l}=(0,i.useTransactions)(),u=(0,r.useMemo)(()=>l?.find(t=>t.id===e),[l,e]);return(0,t.jsx)(n.TransactionDetailsDialog,{id:e,transaction:u,open:"transactionDetails"===o,onOpenChange:s})}},97018,82575,16288,e=>{"use strict";e.s(["columnsDefaultVisible",0,["contractId","status","usageTotal","lockedCollateral","timeline"],"defaultSortField",0,"timeline","sortOptions",0,[{id:"status",serverId:"status",label:"status",category:"general"},{id:"timeline",serverId:"negotiationHeight",label:"timeline",category:"time"},{id:"negotiationHeight",serverId:"negotiationHeight",label:"negotiation height",category:"time"},{id:"proofWindowHeightEnd",serverId:"expirationHeight",label:"expiration height",category:"time"}]],97018);var t=e.i(91398);e.i(86663);var r=e.i(929),n=e.i(91952),a=e.i(50529),i=e.i(26069),o=e.i(29976),s=e.i(80811),l=e.i(82129),u=e.i(33478),c=e.i(7379);e.i(71487);var d=e.i(76993);e.i(37869);var m=e.i(8358),f=e.i(59999),p=e.i(57184),h=e.i(54413),g=e.i(8854),v=e.i(51281),y=e.i(70765);e.i(7190);var x=e.i(75901),b=e.i(91788),S=e.i(51600);function C({id:e,status:n,contentProps:a,buttonProps:o}){let s=(0,x.useContractsIntegrityCheck)(),l=(0,b.useCallback)(async()=>{let r=await s.put({params:{id:e}});r.error?(0,g.triggerErrorToast)({title:"Error starting integrity check",body:r.error}):(0,g.triggerSuccessToast)({title:"Integrity check started",body:(0,t.jsxs)(t.Fragment,{children:["Depending on contract data size this operation can take a while. Check ",(0,t.jsx)(v.Code,{children:"hostd"})," ",(0,t.jsx)(y.Link,{href:S.routes.alerts.index,children:"alerts"})," for status updates."]}),options:{duration:12e3}})},[e,s]),u=["active","pending"].includes(n);return(0,t.jsxs)(p.DropdownMenu,{trigger:(0,t.jsx)(h.Button,{"aria-label":"contract context menu",icon:"hover",size:"none",...o,children:(0,t.jsx)(d.CaretDown16,{})}),contentProps:{onClick:e=>e.stopPropagation(),align:"start",...a},children:[(0,t.jsx)("div",{className:"px-1.5 py-1",children:(0,t.jsxs)(r.Text,{size:"14",weight:"medium",color:"subtle",children:["Contract ",e.slice(0,24),"..."]})}),(0,t.jsx)(p.DropdownMenuLabel,{children:"Actions"}),(0,t.jsx)(i.Tooltip,{content:u?"Trigger a data integrity check":"Data integrity check only available for active or pending contracts",children:(0,t.jsx)("div",{children:(0,t.jsxs)(p.DropdownMenuItem,{disabled:!u,onSelect:()=>l(),children:[(0,t.jsx)(p.DropdownMenuLeftSlot,{children:(0,t.jsx)(d.DataCheck16,{})}),"Integrity check"]})})})]})}let P=[{id:"actions",label:"",fixed:!0,contentClassName:"!pl-3 !pr-4",cellClassName:"w-[20px] !pl-0 !pr-0",heading:({context:{multiSelect:e}})=>(0,t.jsx)(c.Checkbox,{onClick:e.onSelectPage,checked:e.isPageAllSelected}),render:({data:{id:e,status:r}})=>(0,t.jsx)(C,{id:e,status:r})},{id:"contractId",label:"contract ID",category:"general",render:({data:e,context:o})=>{let{id:s,renewedFrom:l,isRenewedFrom:u,renewedTo:c,isRenewedTo:m}=e;return(0,t.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,t.jsx)(n.ValueCopyable,{size:"12",value:(0,a.stripPrefix)(s),type:"contract",siascanUrl:o.siascanUrl}),u&&(0,t.jsx)(i.Tooltip,{content:"Renewed from",align:"start",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.Text,{color:"subtle",children:(0,t.jsx)(d.ArrowUpLeft16,{className:"scale-75"})}),(0,t.jsx)(n.ValueCopyable,{testId:"renewedFrom",color:"subtle",size:"10",type:"contract",value:(0,a.stripPrefix)(l),siascanUrl:o.siascanUrl})]})}),m&&(0,t.jsx)(i.Tooltip,{content:"Renewed to",align:"start",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.Text,{color:"subtle",children:(0,t.jsx)(d.ArrowDownRight16,{className:"scale-75"})}),(0,t.jsx)(n.ValueCopyable,{testId:"renewedTo",color:"subtle",size:"10",value:(0,a.stripPrefix)(c),type:"contract",siascanUrl:o.siascanUrl})]})})]})}},{id:"status",label:"status",category:"general",render:({data:{status:e}})=>{var r;return(0,t.jsx)(o.Badge,{variant:"active"===(r=e)?"amber":"failed"===r?"red":"pending"===r?"amber":"rejected"===r?"red":"renewed"===r||"successful"===r?"green":void 0,children:e})}},{id:"version",label:"version",category:"general",render:({data:{version:e}})=>(0,t.jsxs)(o.Badge,{variant:"gray",children:["v",e]})},{id:"timeline",label:"timeline",category:"time",render:({data:e,context:{currentHeight:r,contractsTimeRange:n}})=>{let{contractHeightStart:a,contractHeightEnd:i,proofWindowHeightStart:o,proofWindowHeightEnd:l,resolutionHeight:u,status:c,payoutHeight:d}=e;return 0===a?null:(0,t.jsx)("div",{className:"w-[400px]",children:(0,t.jsx)(s.ContractTimeline,{currentHeight:r,contractHeightStart:a,contractHeightEnd:"rejected"===c?void 0:i,proofWindowHeightStart:"rejected"===c?void 0:o,proofWindowHeightEnd:"rejected"===c?void 0:l,resolutionHeight:u,payoutHeight:d,range:n})})}},{id:"negotiationHeight",label:"negotiation height",category:"time",contentClassName:"w-[120px] justify-end",render:({data:{negotiationHeight:e},context:{currentHeight:n}})=>(0,t.jsx)(r.Text,{size:"12",children:(0,f.humanDate)((0,m.blockHeightToTime)(n,e))})},{id:"contractHeightStart",label:"formation height",category:"time",contentClassName:"w-[120px] justify-end",render:({data:{contractHeightStart:e},context:{currentHeight:n}})=>(0,t.jsx)(r.Text,{size:"12",children:(0,f.humanDate)((0,m.blockHeightToTime)(n,e))})},{id:"proofWindowHeightEnd",label:"expiration height",category:"time",contentClassName:"w-[120px] justify-end",render:({data:{proofWindowHeightEnd:e},context:{currentHeight:n}})=>(0,t.jsx)(r.Text,{size:"12",children:(0,f.humanDate)((0,m.blockHeightToTime)(n,e))})},{id:"resolutionHeight",label:"resolution height",category:"time",contentClassName:"w-[120px] justify-end",render:({data:{resolutionHeight:e},context:{currentHeight:n}})=>0===e?(0,t.jsx)(r.Text,{size:"12",color:"subtle",children:"-"}):(0,t.jsx)(r.Text,{size:"12",children:(0,f.humanDate)((0,m.blockHeightToTime)(n,e))})},{id:"payoutHeight",label:"payout height",category:"time",contentClassName:"w-[120px] justify-end",render:({data:{payoutHeight:e},context:{currentHeight:n}})=>0===e?(0,t.jsx)(r.Text,{size:"12",color:"subtle",children:"-"}):(0,t.jsx)(r.Text,{size:"12",children:(0,f.humanDate)((0,m.blockHeightToTime)(n,e))})},{id:"filesize",label:"data size",category:"general",contentClassName:"w-[120px] justify-end",render:({data:{filesize:e}})=>(0,t.jsx)(l.ValueNum,{size:"12",value:e,variant:"value",format:e=>(0,f.humanBytes)(e.toNumber())})},{id:"fileMerkleRoot",label:"merkle root",category:"general",contentClassName:"w-[120px] justify-end",render:({data:{fileMerkleRoot:e}})=>(0,t.jsx)(n.ValueCopyable,{size:"12",value:(0,a.stripPrefix)(e)})},{id:"payout",label:"payout",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{payoutHeight:e,payout:n}})=>0===e?(0,t.jsx)(r.Text,{size:"12",color:"subtle",children:"-"}):null===n?(0,t.jsx)(r.Text,{size:"12",color:"subtle",children:"unknown"}):(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:n})},{id:"remainingRenterFunds",label:"remaining renter funds",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{remainingRenterFunds:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e})},{id:"lockedCollateral",label:"locked collateral",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{lockedCollateral:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e})},{id:"usageRiskedCollateral",label:"risked collateral",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.riskedCollateral})},{id:"usageTotal",label:"total usage",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.total})},{id:"usageStorage",label:"storage usage",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.storage})},{id:"usageIngress",label:"ingress usage",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.ingress})},{id:"usageEgress",label:"egress usage",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.egress})},{id:"usageAccountFunding",label:"account funding usage",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.accountFunding})},{id:"usageRpc",label:"RPC usage",category:"financial",contentClassName:"w-[120px] justify-end",render:({data:{usage:e}})=>(0,t.jsx)(u.ValueCurrency,{displayBoth:!0,size:"12",value:e.rpc})}].map(e=>{var r;return{...e,..."financial"===(r=e).category?{icon:(0,t.jsx)(d.Money16,{className:"relative opacity-50 scale-75"}),label:r.label,tip:`financial: ${r.label}`}:{label:r.label,tip:r.label}}});e.s(["columns",0,P],82575);var w=e.i(63761);function j({versionMode:e,response:t,responseV2:r}){return(0,b.useMemo)(()=>"v1"===e?t.data?t.data.contracts?.map(e=>{var t;let r,n,a,i,o,s,l;return t=e,r=new w.default(t.usage.accountFunding||0),n=new w.default(t.usage.egress||0),a=new w.default(t.usage.ingress||0),i=new w.default(t.usage.riskedCollateral||0),o=new w.default(t.usage.rpc||0),s=new w.default(t.usage.storage||0),l=r.plus(n).plus(a).plus(o).plus(s),{id:t.revision.parentID,version:1,status:t.status,fileMerkleRoot:t.revision.fileMerkleRoot,filesize:new w.default(t.revision.filesize||0),usage:{total:l,accountFunding:r,egress:n,ingress:a,riskedCollateral:i,rpc:o,storage:s},lockedCollateral:new w.default(t.lockedCollateral||0),payout:new w.default("active"===t.status||t.resolutionHeight>0?t.revision.validProofOutputs[1].value:t.revision.missedProofOutputs[1].value),remainingRenterFunds:new w.default(t.revision.validProofOutputs?.[0].value||0),negotiationHeight:t.negotiationHeight,formationConfirmed:t.formationConfirmed,revisionConfirmed:t.revisionConfirmed,contractHeightStart:t.negotiationHeight,contractHeightEnd:t.revision.windowStart,proofWindowHeightStart:t.revision.windowStart,proofWindowHeightEnd:t.revision.windowEnd,resolutionHeight:t.resolutionHeight,payoutHeight:t.resolutionHeight>0?t.resolutionHeight+144:t.revision.windowEnd+144,renewedTo:t.renewedTo,renewedFrom:t.renewedFrom,isRenewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"!==t.renewedFrom,isRenewedTo:"0000000000000000000000000000000000000000000000000000000000000000"!==t.renewedTo}})||[]:void 0:r.data?r.data.contracts?.map(e=>{var t;let r,n,a,i,o,s,l;return t=e,r=new w.default(t.usage.accountFunding||0),n=new w.default(t.usage.egress||0),a=new w.default(t.usage.ingress||0),i=new w.default(t.usage.collateral||0),o=new w.default(t.usage.rpc||0),s=new w.default(t.usage.storage||0),l=r.plus(n).plus(a).plus(o).plus(s),{id:t.id,version:2,status:t.status,fileMerkleRoot:t.fileMerkleRoot,filesize:new w.default(t.filesize||0),usage:{total:l,accountFunding:r,egress:n,ingress:a,riskedCollateral:i,rpc:o,storage:s},lockedCollateral:new w.default(t.totalCollateral||0),remainingRenterFunds:new w.default(t.renterOutput.value),negotiationHeight:t.negotiationHeight,formationConfirmed:t.formationIndex.height>0,revisionConfirmed:t.revisionConfirmed,contractHeightStart:t.formationIndex.height,contractHeightEnd:t.proofHeight,proofWindowHeightStart:t.proofHeight,proofWindowHeightEnd:t.expirationHeight,resolutionHeight:t.resolutionIndex.height,payoutHeight:t.resolutionIndex.height>0?t.resolutionIndex.height+144:t.expirationHeight+144,payout:"renewed"===t.status?null:new w.default("active"===t.status||t.resolutionIndex.height>0?t.hostOutput.value:t.missedHostValue),renewedTo:t.renewedTo,renewedFrom:t.renewedFrom,isRenewedFrom:"0000000000000000000000000000000000000000000000000000000000000000"!==t.renewedFrom,isRenewedTo:"0000000000000000000000000000000000000000000000000000000000000000"!==t.renewedTo}})||[]:void 0,[e,t.data,r.data])}e.s(["useDataset",()=>j],16288)},37279,e=>{"use strict";var t=e.i(91398);e.i(86663);var r=e.i(275),n=e.i(15222),a=e.i(11014),i=e.i(65132),o=e.i(83571),s=e.i(75821);e.i(7190);var l=e.i(75901),u=e.i(91788),c=e.i(97018),d=e.i(82575),m=e.i(16288),f=e.i(29389),p=e.i(89673),h=e.i(85645),g=e.i(42431);let v=(0,u.createContext)({});function y({children:e}){let y=function(){let{limit:e,offset:t}=(0,o.usePaginationOffset)(50),{filters:v,setFilter:y,removeFilter:x,removeLastFilter:b,resetFilters:S}=(0,s.useServerFilters)(),[C,P]=(0,g.default)("hostd/v0/contracts/versionMode",{defaultValue:"v2"}),w=(0,u.useCallback)(e=>{P(e),S()},[S,P]),{configurableColumns:j,visibleColumnIds:T,visibleColumns:E,sortableColumns:I,toggleColumnVisibility:D,setColumnsVisible:k,setColumnsHidden:R,toggleSort:N,setSortDirection:F,setSortField:A,sortField:M,sortDirection:B,resetDefaultColumnVisibility:O}=(0,r.useTableState)("hostd/v0/contracts",{columns:d.columns,columnsDefaultVisible:c.columnsDefaultVisible,sortOptions:c.sortOptions,defaultSortField:c.defaultSortField}),V=(0,l.useContracts)({disabled:"v2"===C,payload:{limit:e,offset:t,sortField:c.sortOptions.find(e=>e.id===M)?.serverId,sortDesc:"desc"===B,contractIDs:v.filter(e=>"filterContractId"===e.id).map(e=>e.value),statuses:v.filter(e=>e.id.startsWith("filterStatus")).map(e=>e.value)},config:{swr:{refreshInterval:h.defaultDatasetRefreshInterval}}}),L=(0,l.useContractsV2)({disabled:"v1"===C,payload:{limit:e,offset:t,sortField:c.sortOptions.find(e=>e.id===M)?.serverId,sortDesc:"desc"===B,contractIDs:v.filter(e=>"filterContractId"===e.id).map(e=>e.value),statuses:v.filter(e=>e.id.startsWith("filterStatus")).map(e=>e.value)},config:{swr:{refreshInterval:h.defaultDatasetRefreshInterval}}}),z=(0,m.useDataset)({versionMode:C,response:V,responseV2:L}),{estimatedBlockHeight:_,isSynced:W,nodeBlockHeight:H}=(0,f.useSyncStatus)(),U=W?H:_,{range:q}=(0,u.useMemo)(()=>(0,a.getContractsTimeRangeBlockHeight)(U,z||[]),[U,z]),G=(0,i.useMultiSelect)(z),$=(0,u.useMemo)(()=>{if(z)return z.map(e=>({...e,onClick:t=>G.onSelect(e.id,t),isSelected:!!G.selection[e.id]}))},[z,G]),K=V.isValidating,Z=V.error,Y=(0,n.useDatasetState)({datasetPage:$,isValidating:K,error:Z,filters:v,offset:t}),X=(0,p.useSiascanUrl)();return{datasetState:Y,offset:t,limit:e,cellContext:(0,u.useMemo)(()=>({contractsTimeRange:q,currentHeight:U,siascanUrl:X,multiSelect:G}),[q,U,X,G]),datasetPage:$,datasetPageTotal:$?.length||0,datasetFilteredTotal:"v1"===C?V.data?.count||0:L.data?.count||0,visibleColumns:E,configurableColumns:j,visibleColumnIds:T,sortableColumns:I,toggleColumnVisibility:D,setColumnsVisible:k,setColumnsHidden:R,toggleSort:N,setSortDirection:F,setSortField:A,sortField:M,sortDirection:B,resetDefaultColumnVisibility:O,filters:v,setFilter:y,removeFilter:x,removeLastFilter:b,resetFilters:S,multiSelect:G,versionMode:C,setVersionMode:w}}();return(0,t.jsx)(v.Provider,{value:y,children:e})}e.s(["ContractsProvider",()=>y,"useContracts",0,()=>(0,u.useContext)(v)])},19485,53701,25743,88188,e=>{"use strict";e.s(["ContractsFilterContractIdDialog",()=>_,"filterContractId",()=>V],19485);var t=e.i(91398);e.i(86663);var r=e.i(48708),n=e.i(99865),a=e.i(37279);e.i(50461);var i=e.i(91788),o=e.i(89158),s=e.i(46149),l=e.i(42706),u=e.i(90983),c=e.i(16121),d=e.i(40087),m=(e.i(34980),e.i(86670));function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function h(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=function(e){return Array.isArray(e)&&0===e.length},v=function(e){return"function"==typeof e},y=function(e){return null!==e&&"object"==typeof e},x=function(e){return"[object String]"===Object.prototype.toString.call(e)},b=function(e){return y(e)&&v(e.then)};function S(e,t,r,n){void 0===n&&(n=0);for(var a=(0,c.default)(t);e&&n<a.length;)e=e[a[n++]];return void 0===e?r:e}function C(e,t,r){for(var n=(0,u.default)(e),a=n,i=0,o=(0,c.default)(t);i<o.length-1;i++){var s=o[i],l=S(e,o.slice(0,i+1));if(l&&(y(l)||Array.isArray(l)))a=a[s]=(0,u.default)(l);else{var d=o[i+1];a=a[s]=String(Math.floor(Number(d)))===d&&Number(d)>=0?[]:{}}}return(0===i?e:a)[o[i]]===r?e:(void 0===r?delete a[o[i]]:a[o[i]]=r,0===i&&void 0===r&&delete n[o[i]],n)}var P=(0,i.createContext)(void 0);function w(e,t){switch(t.type){case"SET_VALUES":return f({},e,{values:t.payload});case"SET_TOUCHED":return f({},e,{touched:t.payload});case"SET_ERRORS":if((0,o.default)(e.errors,t.payload))return e;return f({},e,{errors:t.payload});case"SET_STATUS":return f({},e,{status:t.payload});case"SET_ISSUBMITTING":return f({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return f({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return f({},e,{values:C(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return f({},e,{touched:C(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return f({},e,{errors:C(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return f({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return f({},e,{touched:function e(t,r,n,a){void 0===n&&(n=new WeakMap),void 0===a&&(a={});for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i],l=t[s];y(l)?n.get(l)||(n.set(l,!0),a[s]=Array.isArray(l)?[]:{},e(l,r,n,a[s])):a[s]=r}return a}(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return f({},e,{isSubmitting:!1});default:return e}}P.displayName="FormikContext",P.Provider,P.Consumer;var j={},T={};function E(e,t,r){var n=e.slice();return t.forEach(function(t,a){if(void 0===n[a]){var i=!1!==r.clone&&r.isMergeableObject(t);n[a]=i?(0,s.default)(Array.isArray(t)?[]:{},t,r):t}else r.isMergeableObject(t)?n[a]=(0,s.default)(e[a],t,r):-1===e.indexOf(t)&&n.push(t)}),n}var I="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function D(e){var t=(0,i.useRef)(e);return I(function(){t.current=e}),(0,i.useCallback)(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.current.apply(void 0,r)},[])}(0,i.forwardRef)(function(e,t){var r,n=e.action,a=p(e,["action"]),o=((r=(0,i.useContext)(P))||(0,d.default)(!1),r),s=o.handleReset,l=o.handleSubmit;return(0,i.createElement)("form",Object.assign({onSubmit:l,ref:t,onReset:s,action:null!=n?n:"#"},a))}).displayName="Form";var k=function(e,t,r){var n=A(e),a=n[t];return n.splice(t,1),n.splice(r,0,a),n},R=function(e,t,r){var n=A(e),a=n[t];return n[t]=n[r],n[r]=a,n},N=function(e,t,r){var n=A(e);return n.splice(t,0,r),n},F=function(e,t,r){var n=A(e);return n[t]=r,n},A=function(e){if(!e)return[];if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map(function(e){return parseInt(e)}).reduce(function(e,t){return t>e?t:e},0);return Array.from(f({},e,{length:t+1}))};(function(e){function t(t){var r;return(r=e.call(this,t)||this).updateArrayField=function(e,t,n){var a=r.props,i=a.name;(0,a.formik.setFormikState)(function(r){var a=C(r.values,i,e(S(r.values,i))),o=n?("function"==typeof n?n:e)(S(r.errors,i)):void 0,s=t?("function"==typeof t?t:e)(S(r.touched,i)):void 0;return g(o)&&(o=void 0),g(s)&&(s=void 0),f({},r,{values:a,errors:n?C(r.errors,i,o):r.errors,touched:t?C(r.touched,i,s):r.touched})})},r.push=function(e){return r.updateArrayField(function(t){return[].concat(A(t),[(0,m.default)(e)])},!1,!1)},r.handlePush=function(e){return function(){return r.push(e)}},r.swap=function(e,t){return r.updateArrayField(function(r){return R(r,e,t)},!0,!0)},r.handleSwap=function(e,t){return function(){return r.swap(e,t)}},r.move=function(e,t){return r.updateArrayField(function(r){return k(r,e,t)},!0,!0)},r.handleMove=function(e,t){return function(){return r.move(e,t)}},r.insert=function(e,t){return r.updateArrayField(function(r){return N(r,e,t)},function(t){return N(t,e,null)},function(t){return N(t,e,null)})},r.handleInsert=function(e,t){return function(){return r.insert(e,t)}},r.replace=function(e,t){return r.updateArrayField(function(r){return F(r,e,t)},!1,!1)},r.handleReplace=function(e,t){return function(){return r.replace(e,t)}},r.unshift=function(e){var t=-1;return r.updateArrayField(function(r){var n=r?[e].concat(r):[e];return t<0&&(t=n.length),n},function(e){var r=e?[null].concat(e):[null];return t<0&&(t=r.length),r},function(e){var r=e?[null].concat(e):[null];return t<0&&(t=r.length),r}),t},r.handleUnshift=function(e){return function(){return r.unshift(e)}},r.handleRemove=function(e){return function(){return r.remove(e)}},r.handlePop=function(){return function(){return r.pop()}},r.remove=r.remove.bind(h(r)),r.pop=r.pop.bind(h(r)),r}(r=t).prototype=Object.create((n=e).prototype),r.prototype.constructor=r,r.__proto__=n;var r,n,a=t.prototype;return a.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!(0,o.default)(S(e.formik.values,e.name),S(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},a.remove=function(e){var t;return this.updateArrayField(function(r){var n=r?A(r):[];return t||(t=n[e]),v(n.splice)&&n.splice(e,1),n},!0,!0),t},a.pop=function(){var e;return this.updateArrayField(function(t){return e||(e=t&&t.pop&&t.pop()),t},!0,!0),e},a.render=function(){var e,t={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},r=this.props,n=r.component,a=r.render,o=r.children,s=r.name,l=p(r.formik,["validate","validationSchema"]),u=f({},t,{form:l,name:s});return n?(0,i.createElement)(n,u):a?a(u):o?"function"==typeof o?o(u):(e=o,0===i.Children.count(e))?null:i.Children.only(o):null},t})(i.Component).defaultProps={validateOnChange:!0},i.Component,i.Component,e.i(56720);var M=e.i(48357),B=e.i(26801),O=e.i(75109);function V(e){return{id:"filterContractId",value:e,label:`contract ID is ${e}`}}let L={contractId:""},z=M.object().shape({contractId:B.string().required("Required")});function _({trigger:e,open:u,onOpenChange:c}){var d,m,h,g,P,I,k,R,N,F,A,M,B,_,W,H,U,q,G,$,K,Z,Y,X,Q,J,ee,et,er,en,ea,ei,eo,es,el,eu,ec,ed,em,ef,ep,eh,eg,ev,ey,ex,eb,eS,eC,eP,ew,ej,eT,eE,eI;let{closeDialog:eD}=(0,O.useDialog)(),{setFilter:ek}=(0,a.useContracts)(),eR=(h=void 0===(m=(d={initialValues:L,validationSchema:z,onSubmit:e=>{ek(V(e.contractId)),eR.resetForm(),eD()}}).validateOnChange)||m,P=void 0===(g=d.validateOnBlur)||g,k=void 0!==(I=d.validateOnMount)&&I,R=d.isInitialValid,F=void 0!==(N=d.enableReinitialize)&&N,A=d.onSubmit,M=p(d,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),B=f({validateOnChange:h,validateOnBlur:P,validateOnMount:k,onSubmit:A},M),_=(0,i.useRef)(B.initialValues),W=(0,i.useRef)(B.initialErrors||j),H=(0,i.useRef)(B.initialTouched||T),U=(0,i.useRef)(B.initialStatus),q=(0,i.useRef)(!1),G=(0,i.useRef)({}),(0,i.useEffect)(function(){return q.current=!0,function(){q.current=!1}},[]),K=($=(0,i.useReducer)(w,{values:B.initialValues,errors:B.initialErrors||j,touched:B.initialTouched||T,status:B.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}))[0],Z=$[1],Y=(0,i.useCallback)(function(e,t){return new Promise(function(r,n){var a=B.validate(e,t);null==a?r(j):b(a)?a.then(function(e){r(e||j)},function(e){n(e)}):r(a)})},[B.validate]),X=(0,i.useCallback)(function(e,t){var r,n,a,i,o,s=B.validationSchema,u=v(s)?s(t):s,c=t&&u.validateAt?u.validateAt(t,e):(r=e,n=u,void 0===a&&(a=!1),void 0===i&&(i={}),o=function e(t){var r=Array.isArray(t)?[]:{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=String(n);!0===Array.isArray(t[a])?r[a]=t[a].map(function(t){return!0===Array.isArray(t)||(0,l.default)(t)?e(t):""!==t?t:void 0}):(0,l.default)(t[a])?r[a]=e(t[a]):r[a]=""!==t[a]?t[a]:void 0}return r}(r),n[a?"validateSync":"validate"](o,{abortEarly:!1,context:i}));return new Promise(function(e,t){c.then(function(){e(j)},function(r){"ValidationError"===r.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return C(t,e.path,e.message);for(var r=e.inner,n=Array.isArray(r),a=0,r=n?r:r[Symbol.iterator]();;){if(n){if(a>=r.length)break;i=r[a++]}else{if((a=r.next()).done)break;i=a.value}var i,o=i;S(t,o.path)||(t=C(t,o.path,o.message))}}return t}(r)):t(r)})})},[B.validationSchema]),Q=(0,i.useCallback)(function(e,t){return new Promise(function(r){return r(G.current[e].validate(t))})},[]),J=(0,i.useCallback)(function(e){var t=Object.keys(G.current).filter(function(e){return v(G.current[e].validate)});return Promise.all(t.length>0?t.map(function(t){return Q(t,S(e,t))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")]).then(function(e){return e.reduce(function(e,r,n){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===r||r&&(e=C(e,t[n],r)),e},{})})},[Q]),ee=(0,i.useCallback)(function(e){return Promise.all([J(e),B.validationSchema?X(e):{},B.validate?Y(e):{}]).then(function(e){var t=e[0],r=e[1],n=e[2];return s.default.all([t,r,n],{arrayMerge:E})})},[B.validate,B.validationSchema,J,Y,X]),et=D(function(e){return void 0===e&&(e=K.values),Z({type:"SET_ISVALIDATING",payload:!0}),ee(e).then(function(e){return q.current&&(Z({type:"SET_ISVALIDATING",payload:!1}),Z({type:"SET_ERRORS",payload:e})),e})}),(0,i.useEffect)(function(){k&&!0===q.current&&(0,o.default)(_.current,B.initialValues)&&et(_.current)},[k,et]),er=(0,i.useCallback)(function(e){var t=e&&e.values?e.values:_.current,r=e&&e.errors?e.errors:W.current?W.current:B.initialErrors||{},n=e&&e.touched?e.touched:H.current?H.current:B.initialTouched||{},a=e&&e.status?e.status:U.current?U.current:B.initialStatus;_.current=t,W.current=r,H.current=n,U.current=a;var i=function(){Z({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:r,touched:n,status:a,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(B.onReset){var o=B.onReset(K.values,eS);b(o)?o.then(i):i()}else i()},[B.initialErrors,B.initialStatus,B.initialTouched]),(0,i.useEffect)(function(){!0===q.current&&!(0,o.default)(_.current,B.initialValues)&&(F&&(_.current=B.initialValues,er()),k&&et(_.current))},[F,B.initialValues,er,k,et]),(0,i.useEffect)(function(){F&&!0===q.current&&!(0,o.default)(W.current,B.initialErrors)&&(W.current=B.initialErrors||j,Z({type:"SET_ERRORS",payload:B.initialErrors||j}))},[F,B.initialErrors]),(0,i.useEffect)(function(){F&&!0===q.current&&!(0,o.default)(H.current,B.initialTouched)&&(H.current=B.initialTouched||T,Z({type:"SET_TOUCHED",payload:B.initialTouched||T}))},[F,B.initialTouched]),(0,i.useEffect)(function(){F&&!0===q.current&&!(0,o.default)(U.current,B.initialStatus)&&(U.current=B.initialStatus,Z({type:"SET_STATUS",payload:B.initialStatus}))},[F,B.initialStatus,B.initialTouched]),en=D(function(e){if(G.current[e]&&v(G.current[e].validate)){var t=S(K.values,e),r=G.current[e].validate(t);return b(r)?(Z({type:"SET_ISVALIDATING",payload:!0}),r.then(function(e){return e}).then(function(t){Z({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),Z({type:"SET_ISVALIDATING",payload:!1})})):(Z({type:"SET_FIELD_ERROR",payload:{field:e,value:r}}),Promise.resolve(r))}return B.validationSchema?(Z({type:"SET_ISVALIDATING",payload:!0}),X(K.values,e).then(function(e){return e}).then(function(t){Z({type:"SET_FIELD_ERROR",payload:{field:e,value:t[e]}}),Z({type:"SET_ISVALIDATING",payload:!1})})):Promise.resolve()}),ea=(0,i.useCallback)(function(e,t){var r=t.validate;G.current[e]={validate:r}},[]),ei=(0,i.useCallback)(function(e){delete G.current[e]},[]),eo=D(function(e,t){return Z({type:"SET_TOUCHED",payload:e}),(void 0===t?P:t)?et(K.values):Promise.resolve()}),es=(0,i.useCallback)(function(e){Z({type:"SET_ERRORS",payload:e})},[]),el=D(function(e,t){var r=v(e)?e(K.values):e;return Z({type:"SET_VALUES",payload:r}),(void 0===t?h:t)?et(r):Promise.resolve()}),eu=(0,i.useCallback)(function(e,t){Z({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})},[]),ec=D(function(e,t,r){return Z({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?h:r)?et(C(K.values,e,t)):Promise.resolve()}),ed=(0,i.useCallback)(function(e,t){var r,n=t,a=e;if(!x(e)){e.persist&&e.persist();var i=e.target?e.target:e.currentTarget,o=i.type,s=i.name,l=i.id,u=i.value,c=i.checked,d=(i.outerHTML,i.options),m=i.multiple;n=t||s||l,a=/number|range/.test(o)?isNaN(r=parseFloat(u))?"":r:/checkbox/.test(o)?function(e,t,r){if("boolean"==typeof e)return!!t;var n=[],a=!1,i=-1;if(Array.isArray(e))n=e,a=(i=e.indexOf(r))>=0;else if(!r||"true"==r||"false"==r)return!!t;return t&&r&&!a?n.concat(r):a?n.slice(0,i).concat(n.slice(i+1)):n}(S(K.values,n),c,u):d&&m?Array.from(d).filter(function(e){return e.selected}).map(function(e){return e.value}):u}n&&ec(n,a)},[ec,K.values]),em=D(function(e){if(x(e))return function(t){return ed(t,e)};ed(e)}),ef=D(function(e,t,r){return void 0===t&&(t=!0),Z({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===r?P:r)?et(K.values):Promise.resolve()}),ep=(0,i.useCallback)(function(e,t){e.persist&&e.persist();var r=e.target,n=r.name,a=r.id;r.outerHTML,ef(t||n||a,!0)},[ef]),eh=D(function(e){if(x(e))return function(t){return ep(t,e)};ep(e)}),eg=(0,i.useCallback)(function(e){v(e)?Z({type:"SET_FORMIK_STATE",payload:e}):Z({type:"SET_FORMIK_STATE",payload:function(){return e}})},[]),ev=(0,i.useCallback)(function(e){Z({type:"SET_STATUS",payload:e})},[]),ey=(0,i.useCallback)(function(e){Z({type:"SET_ISSUBMITTING",payload:e})},[]),ex=D(function(){return Z({type:"SUBMIT_ATTEMPT"}),et().then(function(e){var t,r=e instanceof Error;if(!r&&0===Object.keys(e).length){try{if(t=eC(),void 0===t)return}catch(e){throw e}return Promise.resolve(t).then(function(e){return q.current&&Z({type:"SUBMIT_SUCCESS"}),e}).catch(function(e){if(q.current)throw Z({type:"SUBMIT_FAILURE"}),e})}if(q.current&&(Z({type:"SUBMIT_FAILURE"}),r))throw e})}),eb=D(function(e){e&&e.preventDefault&&v(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&v(e.stopPropagation)&&e.stopPropagation(),ex().catch(function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)})}),eS={resetForm:er,validateForm:et,validateField:en,setErrors:es,setFieldError:eu,setFieldTouched:ef,setFieldValue:ec,setStatus:ev,setSubmitting:ey,setTouched:eo,setValues:el,setFormikState:eg,submitForm:ex},eC=D(function(){return A(K.values,eS)}),eP=D(function(e){e&&e.preventDefault&&v(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&v(e.stopPropagation)&&e.stopPropagation(),er()}),ew=(0,i.useCallback)(function(e){return{value:S(K.values,e),error:S(K.errors,e),touched:!!S(K.touched,e),initialValue:S(_.current,e),initialTouched:!!S(H.current,e),initialError:S(W.current,e)}},[K.errors,K.touched,K.values]),ej=(0,i.useCallback)(function(e){return{setValue:function(t,r){return ec(e,t,r)},setTouched:function(t,r){return ef(e,t,r)},setError:function(t){return eu(e,t)}}},[ec,ef,eu]),eT=(0,i.useCallback)(function(e){var t=y(e),r=t?e.name:e,n=S(K.values,r),a={name:r,value:n,onChange:em,onBlur:eh};if(t){var i=e.type,o=e.value,s=e.as,l=e.multiple;"checkbox"===i?void 0===o?a.checked=!!n:(a.checked=!!(Array.isArray(n)&&~n.indexOf(o)),a.value=o):"radio"===i?(a.checked=n===o,a.value=o):"select"===s&&l&&(a.value=a.value||[],a.multiple=!0)}return a},[eh,em,K.values]),eE=(0,i.useMemo)(function(){return!(0,o.default)(_.current,K.values)},[_.current,K.values]),eI=(0,i.useMemo)(function(){return void 0!==R?eE?K.errors&&0===Object.keys(K.errors).length:!1!==R&&v(R)?R(B):R:K.errors&&0===Object.keys(K.errors).length},[R,eE,K.errors,B]),f({},K,{initialValues:_.current,initialErrors:W.current,initialTouched:H.current,initialStatus:U.current,handleBlur:eh,handleChange:em,handleReset:eP,handleSubmit:eb,resetForm:er,setErrors:es,setFormikState:eg,setFieldTouched:ef,setFieldValue:ec,setFieldError:eu,setStatus:ev,setSubmitting:ey,setTouched:eo,setValues:el,submitForm:ex,validateForm:et,validateField:en,isValid:eI,dirty:eE,unregisterField:ei,registerField:ea,getFieldProps:eT,getFieldMeta:ew,getFieldHelpers:ej,validateOnBlur:P,validateOnChange:h,validateOnMount:k}));return(0,t.jsx)(r.Dialog,{trigger:e,title:"Filter by contract ID",open:u,onOpenChange:e=>{e||eR.resetForm(),c(e)},contentVariants:{className:"w-[400px]"},onSubmit:eR.handleSubmit,children:(0,t.jsx)("div",{className:"flex flex-col gap-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(n.FormFieldFormik,{formik:eR,title:"Contract ID",name:"contractId",placeholder:"Exact match for contract ID",autoComplete:"off",type:"text",variants:{size:"medium"}}),(0,t.jsx)(n.FormSubmitButtonFormik,{formik:eR,size:"medium",children:"Filter"})]})})})}e.s(["WalletCmdGroup",()=>K],53701);var W=e.i(73797),H=e.i(51600),U=e.i(17837),q=e.i(38053);e.i(7190);var G=e.i(75901);let $={namespace:"wallet",label:"Wallet"};function K({currentPage:e,parentPage:r,pushPage:n}){let{openDialog:a,closeDialog:i}=(0,O.useDialog)(),o=(0,U.useRouter)(),s=(0,G.useWallet)({config:{swr:{revalidateOnFocus:!1,keepPreviousData:!0}}});return(0,t.jsxs)(q.CommandGroup,{currentPage:e,commandPage:$,children:[(0,t.jsx)(q.CommandItemNav,{currentPage:e,parentPage:r,commandPage:$,onSelect:()=>{n($)},children:$.label}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:$,onSelect:()=>{o.push(H.routes.wallet.view),i()},children:"View wallet transactions"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:$,onSelect:()=>{a("sendSiacoin")},children:"Send siacoin"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:$,onSelect:()=>{a("addressDetails")},children:"Receive siacoin"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:$,onSelect:()=>{a("addressDetails")},children:"View wallet address"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:$,onSelect:()=>{(0,W.copyToClipboard)(s.data?.address,"wallet address"),i()},children:"Copy wallet address to clipboard"})]})}e.s(["AppCmdGroup",()=>Q],25743);var Z=e.i(33403);e.i(94066);var Y=e.i(82156);let X={namespace:"settings",label:"Settings"};function Q({currentPage:e,parentPage:r}){let{openDialog:n,closeDialog:a}=(0,O.useDialog)(),{setTheme:i}=(0,Z.useTheme)(),{lock:o,currencyOptions:s,setCurrency:l}=(0,Y.useAppSettings)();return(0,t.jsxs)(q.CommandGroup,{currentPage:e,commandPage:X,children:[(0,t.jsx)(q.CommandItemNav,{currentPage:e,parentPage:r,commandPage:X,onSelect:()=>{n("settings")},children:"Open settings"}),(0,t.jsx)(q.CommandItemRootAndSearch,{currentPage:e,commandPage:X,onSelect:()=>{o(),a()},children:"Lock hostd"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{n("settings")},children:"Open interface theme menu"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{i("system"),a()},children:"Set theme to system preference"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{i("dark"),a()},children:"Set theme to dark"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{i("light"),a()},children:"Set theme to light"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{n("settings")},children:"Open currency settings menu"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{n("settings")},children:"Open security settings menu"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{n("settings")},children:"Open privacy settings menu"}),s.map(({id:r,label:n})=>(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:X,onSelect:()=>{l(r),a()},children:`Set currency to ${n}`},r))]})}e.s(["NodeCmdGroup",()=>ee],88188);let J={namespace:"node",label:"Blockchain node"};function ee({currentPage:e,parentPage:r,pushPage:n}){let{openDialog:a,closeDialog:i}=(0,O.useDialog)(),o=(0,U.useRouter)();return(0,t.jsxs)(q.CommandGroup,{currentPage:e,commandPage:J,children:[(0,t.jsx)(q.CommandItemNav,{currentPage:e,parentPage:r,commandPage:J,onSelect:()=>{n(J)},children:J.label}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:J,onSelect:()=>{a("connectPeer")},children:"Connect to a peer"}),(0,t.jsx)(q.CommandItemSearch,{currentPage:e,commandPage:J,onSelect:()=>{o.push(H.routes.node.index),i()},children:"View peers"})]})}},37351,e=>{"use strict";e.i(37869);var t=e.i(8358),r=e.i(28787),n=e.i(63761);function a(e){return new n.default(e).times((0,r.TBToBytes)(1)).times((0,t.monthsToBlocks)(1))}function i(e){return new n.default(e).times(1e6)}function o(e){return new n.default(e).times(1e6)}function s(e){return new n.default(e).times((0,r.TBToBytes)(1)).times((0,t.monthsToBlocks)(1))}function l(e){return new n.default(e).times((0,r.TBToBytes)(1))}function u(e){return new n.default(e).times((0,r.TBToBytes)(1))}e.s(["humanBaseRpcPrice",()=>i,"humanBaseRpcPriceSuffix",0,"/million","humanCollateralPrice",()=>s,"humanCollateralPriceSuffix",0,"/TB/month","humanEgressPrice",()=>l,"humanEgressPriceSuffix",0,"/TB","humanIngressPrice",()=>u,"humanIngressPriceSuffix",0,"/TB","humanSectorAccessPrice",()=>o,"humanSectorAccessPriceSuffix",0,"/million","humanStoragePrice",()=>a,"humanStoragePriceSuffix",0,"/TB/month"])},20770,16159,e=>{"use strict";e.i(37869);var t=e.i(28787),r=e.i(8358),n=e.i(56115),a=e.i(37351),i=e.i(63761);let o={pinnedCurrency:"",pinnedThreshold:new i.default(0),shouldPinStoragePrice:!1,storagePricePinned:new i.default(0),shouldPinEgressPrice:!1,egressPricePinned:new i.default(0),shouldPinIngressPrice:!1,ingressPricePinned:new i.default(0),shouldPinMaxCollateral:!1,maxCollateralPinned:new i.default(0)},s={acceptingContracts:!1,netAddress:"",maxContractDuration:void 0,contractPrice:void 0,baseRPCPrice:void 0,sectorAccessPrice:void 0,storagePrice:void 0,egressPrice:void 0,ingressPrice:void 0,collateralMultiplier:void 0,maxCollateral:void 0,priceTableValidity:void 0,accountExpiry:void 0,maxAccountBalance:void 0,ingressLimit:void 0,egressLimit:void 0,dnsProvider:"",dnsIpv4:!1,dnsIpv6:!1,dnsDuckDnsToken:"",dnsNoIpEmail:"",dnsNoIpPassword:"",dnsAwsId:"",dnsAwsSecret:"",dnsAwsZoneId:"",dnsCloudflareToken:"",dnsCloudflareZoneId:"",...o};function l(e,i){let o=null;return"duckdns"===e.dnsProvider&&(o={token:e.dnsDuckDnsToken}),"noip"===e.dnsProvider&&(o={email:e.dnsNoIpEmail,password:e.dnsNoIpPassword}),"route53"===e.dnsProvider&&(o={id:e.dnsAwsId,secret:e.dnsAwsSecret,zoneID:e.dnsAwsZoneId}),"cloudflare"===e.dnsProvider&&(o={token:e.dnsCloudflareToken,zoneID:e.dnsCloudflareZoneId}),{...i,acceptingContracts:e.acceptingContracts,netAddress:e.netAddress,maxContractDuration:Number(e.maxContractDuration.times((0,r.monthsToBlocks)(1)).toFixed(0)),contractPrice:(0,n.toHastings)(e.contractPrice).toString(),baseRPCPrice:e.baseRPCPrice.div((0,n.toSiacoins)((0,a.humanBaseRpcPrice)(1))).toFixed(0),sectorAccessPrice:e.sectorAccessPrice.div((0,n.toSiacoins)((0,a.humanSectorAccessPrice)(1))).toFixed(0),collateralMultiplier:e.collateralMultiplier.toNumber(),maxCollateral:(0,n.toHastings)(e.maxCollateral).toString(),storagePrice:e.storagePrice.div((0,n.toSiacoins)((0,a.humanStoragePrice)(1))).toFixed(0),egressPrice:e.egressPrice.div((0,n.toSiacoins)((0,a.humanEgressPrice)(1))).toFixed(0),ingressPrice:e.ingressPrice.div((0,n.toSiacoins)((0,a.humanIngressPrice)(1))).toFixed(0),priceTableValidity:Number(e.priceTableValidity.times(60).times(1e9).toFixed(0)),accountExpiry:Number(e.accountExpiry.times(86400).times(1e9).toFixed(0)),maxAccountBalance:(0,n.toHastings)(e.maxAccountBalance).toString(),ingressLimit:Number((0,t.MBToBytes)(e.ingressLimit).toFixed(0)),egressLimit:Number((0,t.MBToBytes)(e.egressLimit).toFixed(0)),ddns:{...i?.ddns,provider:e.dnsProvider,ipv4:e.dnsIpv4,ipv6:e.dnsIpv6,options:o}}}function u(){return{}}function c(e,t){return{...t,currency:e.pinnedCurrency,threshold:e.pinnedThreshold.div(100).toNumber(),storage:{pinned:e.shouldPinStoragePrice,value:e.storagePricePinned.toNumber()},ingress:{pinned:e.shouldPinIngressPrice,value:e.ingressPricePinned.toNumber()},egress:{pinned:e.shouldPinEgressPrice,value:e.egressPricePinned.toNumber()},maxCollateral:{pinned:e.shouldPinMaxCollateral,value:e.maxCollateralPinned.toNumber()}}}function d({settings:e,settingsPinned:s}){let l=null;return"duckdns"===e.ddns.provider&&(l={dnsDuckDnsToken:e.ddns.options.token}),"noip"===e.ddns.provider&&(l={dnsNoIpEmail:e.ddns.options.email,dnsNoIpPassword:e.ddns.options.password}),"route53"===e.ddns.provider&&(l={dnsAwsId:e.ddns.options.id,dnsAwsSecret:e.ddns.options.secret,dnsAwsZoneId:e.ddns.options.zoneID}),"cloudflare"===e.ddns.provider&&(l={dnsCloudflareToken:e.ddns.options.token,dnsCloudflareZoneId:e.ddns.options.zoneID}),{acceptingContracts:e.acceptingContracts,netAddress:e.netAddress,maxContractDuration:new i.default(e.maxContractDuration).div((0,r.monthsToBlocks)(1)),contractPrice:(0,n.toSiacoins)(e.contractPrice,6),baseRPCPrice:(0,n.toSiacoins)((0,a.humanBaseRpcPrice)(e.baseRPCPrice),6),sectorAccessPrice:(0,n.toSiacoins)((0,a.humanSectorAccessPrice)(e.sectorAccessPrice),6),collateralMultiplier:new i.default(e.collateralMultiplier),maxCollateral:(0,n.toSiacoins)(e.maxCollateral,6),storagePrice:(0,n.toSiacoins)((0,a.humanStoragePrice)(e.storagePrice),6),egressPrice:(0,n.toSiacoins)((0,a.humanEgressPrice)(e.egressPrice),6),ingressPrice:(0,n.toSiacoins)((0,a.humanIngressPrice)(e.ingressPrice),6),priceTableValidity:new i.default(e.priceTableValidity).div(1e9).div(60),accountExpiry:new i.default(e.accountExpiry).div(1e9).div(86400),maxAccountBalance:(0,n.toSiacoins)(e.maxAccountBalance,6),ingressLimit:(0,t.bytesToMB)(new i.default(e.ingressLimit)),egressLimit:(0,t.bytesToMB)(new i.default(e.egressLimit)),dnsProvider:e.ddns.provider,dnsIpv4:e.ddns.ipv4,dnsIpv6:e.ddns.ipv6,...l,...s?{pinnedCurrency:s.currency,pinnedThreshold:new i.default(s.threshold).times(100),shouldPinMaxCollateral:s.maxCollateral.pinned,maxCollateralPinned:new i.default(s.maxCollateral.value),shouldPinStoragePrice:s.storage.pinned,storagePricePinned:new i.default(s.storage.value),shouldPinEgressPrice:s.egress.pinned,egressPricePinned:new i.default(s.egress.value),shouldPinIngressPrice:s.ingress.pinned,ingressPricePinned:new i.default(s.ingress.value)}:o}}function m(e,t,n=10){return!e||!t||e?.isZero()||t?.isZero()?new i.default(0):new i.default(12960).times(e).div((0,r.monthsToBlocks)(1)).times(t).times(n)}e.s(["defaultValues",0,s,"defaultValuesSettingsPinned",0,o,"dnsProviderOptions",0,[{value:"",label:"Off"},{value:"route53",label:"Route 53"},{value:"noip",label:"No-IP"},{value:"duckdns",label:"Duck DNS"},{value:"cloudflare",label:"Cloudflare"}],"scDecimalPlaces",0,6],16159),e.s(["calculateMaxCollateral",()=>m,"getCalculatedValues",()=>u,"transformDown",()=>d,"transformUpSettings",()=>l,"transformUpSettingsPinned",()=>c],20770)},14044,e=>{"use strict";var t=e.i(91398),r=e.i(91788);e.i(86663);var n=e.i(8854),a=e.i(86411),i=e.i(57803),o=e.i(82820),s=e.i(67885),l=e.i(94235),u=e.i(20770);e.i(7190);var c=e.i(75901);e.i(37869);var d=e.i(41399),m=e.i(58021),f=e.i(16159),p=e.i(8358),h=e.i(51281),g=e.i(929),v=e.i(26069),y=e.i(91952);e.i(71487);var x=e.i(76993),b=e.i(63761);e.i(94066);var S=e.i(65277);function C(e,t){return t?new b.default(new b.default(e).div(t).div(10).toFixed(0)).times(10):void 0}function P(e,t){return(r,n)=>!e.pinningEnabled||(t?t(r,n):!!r||"required")}var w=e.i(42431),j=e.i(38499);let T=(0,r.createContext)({});function E({children:e}){let E=function(){let e,{settings:T,settingsPinned:E,dynDNSCheck:I}=(e=(0,c.useSettings)({config:{swr:{refreshInterval:(0,d.minutesInMilliseconds)(1)}}}),{settings:e,settingsPinned:(0,c.useSettingsPinned)({config:{swr:{refreshInterval:(0,d.minutesInMilliseconds)(1),errorRetryCount:0}}}),dynDNSCheck:(0,c.useSettingsDdnsUpdate)({config:{swr:{revalidateOnFocus:!1,errorRetryCount:0}}})}),{form:D,fields:k,configViewMode:R,setConfigViewMode:N}=function(){let e=(0,m.useForm)({mode:"all",defaultValues:f.defaultValues}),n=(0,m.useWatch)({control:e.control,name:"storagePrice"}),a=(0,m.useWatch)({control:e.control,name:"collateralMultiplier"}),[i,o]=(0,w.default)("v0/config/mode",{defaultValue:"basic"});!function({form:e}){let t=(0,r.useMemo)(()=>(0,u.getCalculatedValues)(),[]);(0,r.useEffect)(()=>{for(let[r,n]of Object.entries(t))e.setValue(r,n,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0})},[e,t])}({form:e});let s=(0,j.useDaemonExplorerExchangeRate)({currency:"usd"}),l=(0,c.useHostState)(),d=l.data?.explorer.enabled,T=(0,r.useRef)({pinningEnabled:d});return(0,r.useEffect)(()=>{T.current.pinningEnabled=d},[d]),{form:e,fields:(0,r.useMemo)(()=>(function({pinningEnabled:e,configViewMode:r,storageTBMonth:n,collateralMultiplier:a,exchangeRateUSD:i,validationContext:o}){return{acceptingContracts:{type:"boolean",category:"host",title:"Accepting contracts",description:(0,t.jsx)(t.Fragment,{children:"Whether or not the host is accepting contracts."}),validation:{}},netAddress:{type:"text",category:"host",title:"Address",description:(0,t.jsxs)(t.Fragment,{children:["The network address of the host without a port. Ports must be configured in the ",(0,t.jsx)(h.Code,{children:"hostd.yml"})," config file."]}),placeholder:"my.host.com",validation:{required:"required",validate:{noProtocol:e=>!/^https?:\/\//.test(e||"")||"must not start with http:// or https://",noPort:e=>!/:\d+$/.test(e||"")||"must not include port"}},after:function(){let e=(0,c.useHostState)(),r=e.data?.lastAnnouncement?.address;return(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(v.Tooltip,{align:"start",side:"bottom",content:"Do not include a port in the address.",children:(0,t.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,t.jsx)(g.Text,{className:"flex",children:(0,t.jsx)(x.Information16,{})}),(0,t.jsxs)(g.Text,{size:"12",color:"contrast",children:["Configure ports in ",(0,t.jsx)(h.Code,{children:"hostd.yml"})]})]})}),r?(0,t.jsx)(v.Tooltip,{align:"start",side:"bottom",content:"The last announced address for the host.",children:(0,t.jsxs)("div",{className:"flex gap-1 items-start",children:[(0,t.jsx)(g.Text,{className:"flex",children:(0,t.jsx)(x.Information16,{})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)(g.Text,{size:"12",color:"contrast",children:"Last announcement"}),(0,t.jsx)(y.ValueCopyable,{type:"address",size:"12",maxLength:100,value:r})]})]})}):(0,t.jsx)(v.Tooltip,{align:"start",side:"bottom",content:"The host has not been announced yet. Once an address is configured, it will be announced automatically.",children:(0,t.jsxs)("div",{className:"flex gap-1 items-start",children:[(0,t.jsx)(g.Text,{className:"flex",children:(0,t.jsx)(x.Information16,{})}),(0,t.jsx)(g.Text,{size:"12",color:"contrast",children:"The host has not been announced yet"})]})})]})}},maxContractDuration:{type:"number",category:"host",title:"Maximum contract duration",units:"months",decimalsLimit:2,suggestion:new b.default(6),suggestionTip:"The default maximum duration is 6 months.",description:(0,t.jsx)(t.Fragment,{children:"The maximum contract duration that the host will accept."}),hidden:"basic"===r,validation:{required:"required",validate:{min:e=>new b.default(e).gte((0,p.blocksToMonths)(4320))||"must be at least 1 month"}}},pinnedCurrency:{title:"Pinned currency",description:"Currency to use for fields where price pinning is enabled.",type:"select",options:[...S.currencyOptions.map(({id:e,label:t})=>({label:t,value:e})),{label:"none",value:""}],hidden:!e,validation:{}},pinnedThreshold:{title:"Pinned currency change threshold",type:"number",suggestionTip:"A threshold of 2% is recommended.",suggestion:new b.default(2),units:"%",decimalsLimit:0,description:(0,t.jsx)(t.Fragment,{children:"Percentage that controls the minimum change in exchange rate that will trigger an update to pinned prices. This prevents the host from changing prices too often."}),hidden:!e||"basic"===r,validation:{validate:{required:P(o),max:P(o,e=>new b.default(e).lte(100)||"must be at most 100%"),min:P(o,e=>new b.default(e).gte(0)||"must be at least 0%")}}},shouldPinStoragePrice:{title:"Pin storage price",description:"",type:"boolean",category:"pricing",hidden:!e,validation:{}},storagePrice:{title:"Storage price",description:(0,t.jsx)(t.Fragment,{children:"The host's storage price per TB per month. Choose whether to set your storage price in siacoin per TB per month or to pin the siacoin price to a fixed fiat value per TB per month."}),type:"siacoin",category:"pricing",units:"SC/TB/month",decimalsLimitSc:f.scDecimalPlaces,suggestion:i?C(1,i):void 0,suggestionTip:"The suggested storage price in siacoins per TB per month.",validation:{required:"required"}},storagePricePinned:{title:"Pinned storage price",description:"",units:"/TB/month",type:"fiat",category:"pricing",hidden:!e,validation:{validate:{required:P(o),currency:P(o,(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:P(o,(e,t)=>!t.shouldPinStoragePrice||e?.gte(0)||"storage price must not be negative")}}},shouldPinEgressPrice:{title:"Pin egress price",description:"",type:"boolean",category:"pricing",hidden:!e,validation:{}},egressPrice:{title:"Egress price",description:(0,t.jsx)(t.Fragment,{children:"The host's egress price per TB per month. Egress means bandwidth usage by outgoing download traffic. Choose whether to set your egress price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),type:"siacoin",category:"pricing",units:"SC/TB",decimalsLimitSc:f.scDecimalPlaces,suggestion:i?C(10,i):void 0,suggestionTip:"The suggested egress price in siacoins for egress per TB.",validation:{required:"required"}},egressPricePinned:{title:"Pinned egress price",description:"",type:"fiat",units:"/TB",category:"pricing",hidden:!e,validation:{validate:{required:P(o),currency:P(o,(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:P(o,(e,t)=>!t.shouldPinEgressPrice||e?.gte(0)||"egress price must not be negative")}}},shouldPinIngressPrice:{title:"Pin ingress price",description:"",type:"boolean",category:"pricing",hidden:!e,validation:{}},ingressPrice:{title:"Ingress price",description:(0,t.jsx)(t.Fragment,{children:"The host's ingress price per TB per month. Ingress means bandwidth usage by incoming upload traffic. Choose whether to set your ingress price in siacoin per TB or to pin the siacoin price to a fixed fiat value per TB."}),type:"siacoin",category:"pricing",units:"SC/TB",suggestion:i?C(.05,i):void 0,suggestionTip:"The suggested ingress price in siacoins per TB.",decimalsLimitSc:f.scDecimalPlaces,validation:{required:"required"}},ingressPricePinned:{title:"Pinned ingress price",description:"",type:"fiat",units:"/TB",category:"pricing",hidden:!e,validation:{validate:{required:P(o),currency:P(o,(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:P(o,(e,t)=>!t.shouldPinIngressPrice||e?.gte(0)||"ingress price must not be negative")}}},collateralMultiplier:{title:"Collateral multiplier",type:"number",category:"pricing",units:"* storage price",placeholder:"2",decimalsLimit:1,description:(0,t.jsx)(t.Fragment,{children:"The host's target collateral as a multiple of storage price."}),suggestion:new b.default(2),suggestionTip:"The default multiplier is 2x the storage price.",validation:{required:"required"}},shouldPinMaxCollateral:{title:"Pin max collateral",description:"",type:"boolean",category:"pricing",hidden:!e,validation:{}},maxCollateral:{title:"Max collateral",description:(0,t.jsx)(t.Fragment,{children:"The host's maximum collateral. Choose whether to set your max collateral price in siacoin or to pin the max collateral to a fixed fiat value. The suggested value for max collateral is the configured storage price * collateral multiplier * 10."}),type:"siacoin",category:"pricing",decimalsLimitSc:f.scDecimalPlaces,suggestion:n&&a?(0,u.calculateMaxCollateral)(n,a,10):void 0,suggestionTip:"The suggested maximum collateral, which is the configured storage price * collateral multiplier * 10.",validation:{required:"required"}},maxCollateralPinned:{title:"Pinned max collateral",description:"",type:"fiat",category:"pricing",hidden:!e||"basic"===r,validation:{validate:{required:P(o),currency:P(o,(e,t)=>!!t.pinnedCurrency||"must select a pinned currency"),range:P(o,(e,t)=>!t.shouldPinMaxCollateral||e?.gte(0)||"max collateral must not be negative")}}},contractPrice:{title:"Contract price",type:"siacoin",category:"pricing",decimalsLimitSc:f.scDecimalPlaces,suggestionTip:"The suggested contract price.",tipsDecimalsLimitSc:1,suggestion:new b.default(.2),description:(0,t.jsx)(t.Fragment,{children:"The host's contract price in siacoins."}),hidden:"basic"===r,validation:{required:"required"}},baseRPCPrice:{title:"Base RPC price",type:"siacoin",category:"pricing",units:"SC/million",suggestion:new b.default(1),suggestionTip:"The suggested base RPC price in siacoins per million calls.",decimalsLimitSc:f.scDecimalPlaces,description:(0,t.jsx)(t.Fragment,{children:"The host's base RPC price in siacoins per million calls."}),hidden:"basic"===r,validation:{required:"required"}},sectorAccessPrice:{title:"Sector access price",type:"siacoin",category:"pricing",units:"SC/million",decimalsLimitSc:f.scDecimalPlaces,suggestion:new b.default(1),suggestionTip:"The suggested sector access price in siacoins per million sectors.",description:(0,t.jsx)(t.Fragment,{children:"The host's sector access price in siacoins per million sectors."}),hidden:"basic"===r,validation:{required:"required"}},priceTableValidity:{title:"Price table validity",type:"number",category:"pricing",units:"minutes",suggestion:new b.default(30),suggestionTip:"The suggested price table validity.",description:(0,t.jsx)(t.Fragment,{children:"How long a renter's registered price table remains valid."}),hidden:"basic"===r,validation:{required:"required"}},accountExpiry:{title:"Expiry",type:"number",category:"RHP3",units:"days",suggestion:new b.default(30),suggestionTip:"The suggested account expiry.",description:(0,t.jsx)(t.Fragment,{children:"How long a renter's ephemeral accounts are inactive before the host prunes them and recovers the remaining funds."}),hidden:"basic"===r,validation:{required:"required",validate:{min:e=>new b.default(e).gte(7)||"must be at least 1 week"}}},maxAccountBalance:{title:"Maximum balance",type:"siacoin",category:"RHP3",suggestion:new b.default(10),suggestionTip:"The suggested maximum account balance.",description:(0,t.jsx)(t.Fragment,{children:"Maximum balance a renter's ephemeral account can have. When the limit is reached, deposits are rejected until some of the funds have been spent."}),hidden:"basic"===r,validation:{required:"required",validate:{min:e=>new b.default(e).gte(1)||"must be at least 1 SC"}}},ingressLimit:{title:"Ingress limit",type:"number",category:"bandwidth",units:"MB/second",description:(0,t.jsx)(t.Fragment,{children:"The maximum amount of ingress bandwidth traffic in MB per second."}),validation:{required:"required"}},egressLimit:{title:"Egress limit",type:"number",category:"bandwidth",units:"MB/second",description:(0,t.jsx)(t.Fragment,{children:"The maximum amount of egress bandwidth traffic in MB per second."}),validation:{required:"required"}},dnsProvider:{title:"Dynamic DNS Provider",type:"select",category:"DNS",options:f.dnsProviderOptions,description:(0,t.jsx)(t.Fragment,{children:"Enable dynamic DNS with one of the supported providers."}),validation:{validate:e=>!!f.dnsProviderOptions.find(t=>t.value===e)||"must be one of supported providers"}},dnsIpv4:{title:"IPv4",type:"boolean",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"Whether IPv4 is enabled."}),show:e=>!!e.dnsProvider,validation:{validate:(e,t)=>!t.dnsProvider||!!(e||t.dnsIpv6)||"at least one of IPv4 and IPv6 must be enabled"},trigger:["dnsIpv6"]},dnsIpv6:{type:"boolean",title:"IPv6",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"Whether IPv6 is enabled."}),show:e=>!!e.dnsProvider,validation:{validate:(e,t)=>!t.dnsProvider||!!(e||t.dnsIpv4)||"at least one of IPv4 and IPv6 must be enabled"},trigger:["dnsIpv4"]},dnsDuckDnsToken:{type:"text",title:"Token",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"DuckDNS token."}),show:e=>"duckdns"===e.dnsProvider,validation:{validate:(e,t)=>"duckdns"!==t.dnsProvider||!!e||"required"}},dnsNoIpEmail:{type:"text",title:"Email",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"No-IP email."}),show:e=>"noip"===e.dnsProvider,validation:{validate:(e,t)=>"noip"!==t.dnsProvider||!!e||"required"}},dnsNoIpPassword:{type:"password",title:"Password",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"No-IP password."}),show:e=>"noip"===e.dnsProvider,validation:{validate:(e,t)=>"noip"!==t.dnsProvider||!!e||"required"}},dnsAwsId:{type:"text",title:"ID",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"AWS Route53 ID."}),show:e=>"route53"===e.dnsProvider,validation:{validate:(e,t)=>"route53"!==t.dnsProvider||!!e||"required"}},dnsAwsSecret:{type:"password",title:"Secret",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"AWS Route53 secret."}),show:e=>"route53"===e.dnsProvider,validation:{validate:(e,t)=>"route53"!==t.dnsProvider||!!e||"required"}},dnsAwsZoneId:{type:"text",title:"Zone ID",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"AWS Route53 zone ID."}),show:e=>"route53"===e.dnsProvider,validation:{validate:(e,t)=>"route53"!==t.dnsProvider||!!e||"required"}},dnsCloudflareToken:{type:"text",title:"Token",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"Cloudflare token."}),show:e=>"cloudflare"===e.dnsProvider,validation:{validate:(e,t)=>"cloudflare"!==t.dnsProvider||!!e||"required"}},dnsCloudflareZoneId:{type:"text",title:"Zone ID",category:"DNS",description:(0,t.jsx)(t.Fragment,{children:"Cloudflare zone ID."}),show:e=>"cloudflare"===e.dnsProvider,validation:{validate:(e,t)=>"cloudflare"!==t.dnsProvider||!!e||"required"}}}})({pinningEnabled:l.data?.explorer.enabled,configViewMode:i,storageTBMonth:n,collateralMultiplier:a,exchangeRateUSD:s.rate,validationContext:T.current}),[i,n,a,s.rate,l.data]),storageTBMonth:n,collateralMultiplier:a,configViewMode:i,setConfigViewMode:o}}(),F=(0,r.useMemo)(()=>({settings:{data:T.data,error:T.error},settingsPinned:{data:E.data,error:E.error}}),[T.data,T.error,E.data,E.error]),A=(0,r.useMemo)(()=>!function({settings:e,settingsPinned:t}){return!!(e.data&&(t.data||t.error))}(F)?null:(0,u.transformDown)({settings:F.settings.data,settingsPinned:F.settingsPinned.data}),[F]),M=(0,r.useMemo)(()=>(function({settings:e}){return!!e.error})(F),[F]),B=(0,c.useHostState)(),O=B.data?.explorer.enabled,V=(0,r.useCallback)(async()=>{let e=await T.mutate(),t=await E.mutate();if(e&&(!O||t))return await I.mutate(),D.reset((0,u.transformDown)({settings:e,settingsPinned:t}));(0,n.triggerErrorToast)({title:"Error fetching settings"})},[D,T,E,I,O]);(0,i.useFormInit)({form:D,remoteValues:A}),(0,o.useFormServerSynced)({form:D,remoteValues:A});let{changeCount:L}=(0,s.useFormChangeCount)({form:D}),z=function({resources:e,revalidateAndResetForm:t}){let a=(0,c.useHostState)({config:{swr:{refreshInterval:(0,d.minutesInMilliseconds)(1)}}}),i=(0,c.useSettingsUpdate)(),o=(0,c.useSettingsPinnedUpdate)();return(0,r.useCallback)(async r=>{if(e)try{let s=(0,u.transformUpSettings)(r,e.settings.data),l=await i.patch({payload:s});if(l.error)throw Error(l.error);if(a.data?.explorer.enabled){let t=await o.put({payload:(0,u.transformUpSettingsPinned)(r,e.settingsPinned.data)});if(t.error)throw Error(t.error)}(0,n.triggerSuccessToast)({title:"Settings have been saved"}),await t()}catch(e){(0,n.triggerErrorToast)({title:"Error updating settings",body:e.message}),console.log(e)}},[e,i,o,t,a.data])}({resources:F,revalidateAndResetForm:V}),_=(0,a.useOnInvalid)(k),W=(0,r.useMemo)(()=>D.handleSubmit(z,_),[D,z,_]),H=(0,r.useRef)(null);return{fields:k,settings:T,dynDNSCheck:I,changeCount:L,revalidateAndResetForm:V,form:D,onSubmit:W,setConfigViewMode:N,configViewMode:R,remoteError:M,takeScreenshot:(0,r.useCallback)(async e=>{(0,l.nodeToImage)(H.current,e)},[]),configRef:H,pinningEnabled:O}}();return(0,t.jsx)(T.Provider,{value:E,children:e})}e.s(["ConfigProvider",()=>E,"useConfig",0,()=>(0,r.useContext)(T)],14044)},75109,7594,e=>{"use strict";e.s(["DialogProvider",()=>ef,"Dialogs",()=>ep,"useDialog",()=>em],75109);var t=e.i(91398),r=e.i(91788);e.i(86663);var n=e.i(9690),a=e.i(76150),i=e.i(14755),o=e.i(86513),s=e.i(2636),l=e.i(6890),u=e.i(91435);e.i(7190);var c=e.i(75901),d=e.i(78467),m=e.i(29045),f=e.i(19485),p=e.i(48708),h=e.i(76670);e.i(94066);var g=e.i(82156),v=e.i(51600),y=e.i(20960),x=e.i(77786),b=e.i(41490),S=e.i(34530),C=e.i(40480),P=e.i(10483),w=e.i(53701),j=e.i(25743),T=e.i(88188),E=e.i(17837),I=e.i(38053),D=e.i(14044);let k={namespace:"configuration",label:"Configuration"};function R({currentPage:e,parentPage:r,pushPage:n}){let a=(0,E.useRouter)(),{configViewMode:i}=(0,D.useConfig)(),{closeDialog:o}=em();return(0,t.jsxs)(I.CommandGroup,{currentPage:e,commandPage:k,children:[(0,t.jsx)(I.CommandItemNav,{currentPage:e,parentPage:r,commandPage:k,onSelect:()=>{n(k)},children:k.label}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.index),o()},children:"Open configuration"}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.host),o()},children:"Configure host"}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.pricing),o()},children:"Configure pricing"}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.dns),o()},children:"Configure DNS"}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.bandwidth),o()},children:"Configure bandwidth"}),"advanced"===i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.registry),o()},children:"Configure registry"}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:k,onSelect:()=>{a.push(v.routes.config.accounts),o()},children:"Configure accounts"})]})]})}var N=e.i(37279),F=e.i(8433),A=e.i(929);e.i(71487);var M=e.i(76993);function B({search:e}){return(0,t.jsxs)(A.Text,{color:"verySubtle",className:"flex flex-col gap-2 justify-center items-center mt-5 mb-3",children:[(0,t.jsx)(A.Text,{color:"verySubtle",className:"flex gap-2 justify-center items-center",children:(0,t.jsx)(M.Query16,{})}),(0,t.jsx)(A.Text,{size:"12",color:"verySubtle",className:"flex justify-center",children:e?"No results matching query.":"Type a query to get started."})]})}e.s(["ContractsFilterCmd",()=>$],7594);let O={namespace:"contracts/filterStatus",label:"Contracts filter by status"},V=[{id:"filterStatusActive",value:"active",label:"Contract is active"},{id:"filterStatusSuccessful",value:"successful",label:"Contract was successful"},{id:"filterStatusPending",value:"pending",label:"Contract is pending"},{id:"filterStatusRejected",value:"rejected",label:"Contract was rejected"},{id:"filterStatusFailed",value:"failed",label:"Contract has failed"}],L=[...V,{id:"filterStatusRenewed",value:"renewed",label:"Contract was renewed"}];function z({select:e,currentPage:r}){let{versionMode:n}=(0,N.useContracts)();return(0,t.jsx)(I.CommandGroup,{currentPage:r,commandPage:O,children:("v1"===n?V:L).map(n=>(0,t.jsx)(I.CommandItemSearch,{currentPage:r,commandPage:O,onSelect:()=>{e(n)},children:n.label},n.id+n.value))})}let _={namespace:"contracts/filterAddress",label:"Contracts filter by ID"};function W({select:e,currentPage:r}){let{openDialog:n}=em(),a=(0,f.filterContractId)("");return(0,t.jsx)(I.CommandGroup,{currentPage:r,commandPage:_,children:(0,t.jsx)(I.CommandItemSearch,{currentPage:r,commandPage:_,onSelect:()=>{e(),n("contractsFilterContractId")},children:a.label})})}function H({select:e,currentPage:r,parentPage:n,commandPage:a}){let{openDialog:i}=em();return(0,t.jsx)(I.CommandItemNav,{currentPage:r,parentPage:n,commandPage:a,onSelect:()=>{e(),i("contractsFilterContractId")},children:_.label})}function U({currentPage:e,select:r}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z,{currentPage:e,select:r}),(0,t.jsx)(W,{currentPage:e,select:r})]})}let q={namespace:"contracts",label:"Contracts"};function G({currentPage:e,parentPage:r,pushPage:n,select:a}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.CommandItemNav,{currentPage:e,parentPage:r,commandPage:q,onSelect:()=>{n(O)},children:O.label}),(0,t.jsx)(H,{currentPage:e,parentPage:r,commandPage:q,select:a})]})}function $({currentPage:e,parentPage:n,pushPage:a,beforeSelect:i,afterSelect:o}){let{setFilter:s}=(0,N.useContracts)(),l=(0,r.useCallback)(e=>{i&&i(),e&&s(e),o&&o()},[s,i,o]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(G,{parentPage:n,currentPage:e,pushPage:a,select:l}),(0,t.jsx)(U,{currentPage:e,select:l})]})}let K={namespace:"contracts",label:"Contracts"};function Z({currentPage:e,parentPage:r,pushPage:n,beforeSelect:a,afterSelect:i}){let o=(0,E.useRouter)(),{closeDialog:s}=em();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.CommandItemNav,{currentPage:e,parentPage:r,commandPage:r,onSelect:()=>{n(K)},children:K.label}),(0,t.jsx)(I.CommandGroup,{currentPage:e,commandPage:K,children:(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:K,onSelect:()=>{o.push(v.routes.contracts.index),s()},children:"View contracts"})}),(0,t.jsx)($,{parentPage:K,currentPage:e,beforeSelect:a,afterSelect:i,pushPage:n})]})}let Y={namespace:"volumes",label:"Volumes"};function X({currentPage:e,parentPage:r,pushPage:n}){let a=(0,E.useRouter)(),{openDialog:i,closeDialog:o}=em();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.CommandItemNav,{currentPage:e,parentPage:r,commandPage:r,onSelect:()=>{n(Y)},children:Y.label}),(0,t.jsxs)(I.CommandGroup,{currentPage:e,commandPage:Y,children:[(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:Y,onSelect:()=>{a.push(v.routes.volumes.index),o()},children:"View volumes"}),(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:Y,onSelect:()=>{i("volumeCreate")},children:"Create volume"})]})]})}let Q={namespace:"alerts",label:"Alerts"};function J({currentPage:e,parentPage:r,pushPage:n}){let a=(0,E.useRouter)(),{closeDialog:i}=em();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.CommandItemNav,{currentPage:e,parentPage:r,commandPage:r,onSelect:()=>{n(Q)},children:Q.label}),(0,t.jsx)(I.CommandGroup,{currentPage:e,commandPage:Q,children:(0,t.jsx)(I.CommandItemSearch,{currentPage:e,commandPage:Q,onSelect:()=>{a.push(v.routes.alerts.index),i()},children:"View alerts"})})]})}function ee({panel:e}){let n=(0,E.useRouter)(),a=(0,E.usePathname)(),{resetFilters:i}=(0,N.useContracts)(),{closeDialog:o}=em(),[s,l]=(0,r.useState)(""),[u]=(0,F.useDebounce)(s,500),[c,d]=(0,r.useState)([]),m=c[c.length-1],f=0===c.length,p=(0,r.useCallback)(e=>{d(t=>[...t,e])},[d]),h=(0,r.useCallback)(()=>{o()},[o]),g=(0,r.useCallback)(()=>{l("")},[l]),I=m?.empty||B;return(0,t.jsxs)(P.Command,{label:"Command Menu",loop:!0,className:(0,y.cx)(e&&(0,b.panelStyles)()),onKeyDown:e=>{(c.length>0&&"Escape"===e.key||"Backspace"===e.key&&!s)&&(e.preventDefault(),d(e=>e.slice(0,-1)))},children:[m&&(0,t.jsx)(S.Label,{className:"px-2",children:m.label}),(0,t.jsx)(P.Command.Input,{"aria-label":"search commands",name:"cmdk-input",value:s,onValueChange:l,className:(0,x.textFieldStyles)({variant:"ghost",focus:"none"}),placeholder:m?.prompt||(f?"Search for commands, eg: theme, redundancy":"Search commands")}),(0,t.jsx)(C.Separator,{className:"my-2"}),(0,t.jsxs)(P.Command.List,{children:[(0,t.jsx)(P.Command.Empty,{children:(0,t.jsx)(I,{search:s,debouncedSearch:u})}),(0,t.jsx)(j.AppCmdGroup,{currentPage:m,pushPage:p}),(0,t.jsx)(w.WalletCmdGroup,{currentPage:m,pushPage:p}),(0,t.jsx)(X,{currentPage:m,pushPage:p}),(0,t.jsx)(Z,{currentPage:m,pushPage:p,beforeSelect:()=>{h(),i()},afterSelect:()=>{a.startsWith(v.routes.contracts.index)||n.push(v.routes.contracts.index),g()}}),(0,t.jsx)(J,{currentPage:m,pushPage:p,beforeSelect:()=>{h(),i()},afterSelect:()=>{a.startsWith(v.routes.alerts.index)||n.push(v.routes.alerts.index),g()}}),(0,t.jsx)(R,{currentPage:m,pushPage:p}),(0,t.jsx)(T.NodeCmdGroup,{currentPage:m,pushPage:p})]})]})}function et({open:e,onOpenChange:n,setOpen:a}){let{isUnlockedAndAuthedRoute:i}=(0,g.useAppSettings)(),{isConnected:o}=(0,h.useConnectivity)({route:v.connectivityRoute});return(0,r.useEffect)(()=>{if(!i||!o)return;let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&a()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i,o,a]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(p.Dialog,{open:e,title:"Command palette",titleVisuallyHidden:!0,onOpenChange:n,contentVariants:{className:"!absolute !p-1 w-[450px] top-[200px]"},bodyClassName:"!px-1 !py-1",closeClassName:"hidden",children:(0,t.jsx)(ee,{})})})}var er=e.i(86411),en=e.i(35929),ea=e.i(44953),ei=e.i(79476),eo=e.i(67419),es=e.i(8854),el=e.i(58021),eu=e.i(42431);function ec({trigger:e,open:n,onOpenChange:a}){let[i,o]=(0,eu.default)("v0/hostd/backupDirectory",{defaultValue:"/backups"}),s=(0,r.useMemo)(()=>{let e;return e=new Date().toISOString().replace(/[:.]/g,"-"),{path:`${i||"/backups"}/hostd-${e}.bak`}},[i]),l=(0,c.useSystemBackup)(),u=(0,el.useForm)({mode:"all",defaultValues:s}),{handleOpenChange:d,closeAndReset:m}=(0,ea.useDialogFormHelpers)({form:u,onOpenChange:a,defaultValues:s}),f=(0,r.useMemo)(()=>({path:{type:"text",title:"Backup path",placeholder:"/backups/hostd-2024-01-01T00-00-00-000Z.bak",validation:{required:"required"}}}),[]),h=(0,r.useCallback)(async e=>{let t=await l.post({payload:{database:"main",path:e.path}});if(t.error)(0,es.triggerErrorToast)({title:"Error creating backup",body:t.error});else{var r;let t;o(-1===(t=(r=e.path).lastIndexOf("/"))?"/backups":r.substring(0,t)||"/backups"),(0,es.triggerSuccessToast)({title:"Backup created",body:`Database saved to ${e.path}`}),m()}},[l,m,o]),g=(0,er.useOnInvalid)(f);return(0,t.jsx)(p.Dialog,{title:"Backup database",trigger:e,open:n,onOpenChange:d,contentVariants:{className:"w-[500px]"},onSubmit:u.handleSubmit(h,g),controls:(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(en.FormSubmitButton,{form:u,variant:"accent",size:"medium",children:"Create backup"})}),children:(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,t.jsx)(eo.Paragraph,{size:"14",children:"Create a backup of the database. The backup will be saved to the specified path on the server."}),(0,t.jsx)(ei.FieldText,{name:"path",form:u,fields:f,autoComplete:"off"})]})})}let ed=(0,r.createContext)({}),em=()=>(0,r.useContext)(ed);function ef({children:e}){let n=function(){let[e,t]=(0,r.useState)(),[n,a]=(0,r.useState)(),i=(0,r.useCallback)((e,r)=>{t(e),a(r)},[t,a]),[o,s]=(0,r.useState)(),l=(0,r.useCallback)(e=>{t("confirm"),s(e)},[t,s]),u=(0,r.useCallback)(()=>{t(void 0),a(void 0),s(void 0)},[t,a,s]),c=(0,r.useCallback)(e=>{e||u()},[u]);return{dialog:e,id:n,openDialog:i,confirm:o,openConfirmDialog:l,closeDialog:u,onOpenChange:c}}();return(0,t.jsx)(ed.Provider,{value:n,children:e})}function ep(){let{dialog:e,openDialog:r,openConfirmDialog:p,onOpenChange:h,closeDialog:g,confirm:v}=em(),y=(0,c.useSyncerConnect)(),x=(0,c.useWallet)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et,{open:"cmdk"===e,onOpenChange:h,setOpen:()=>r("cmdk")}),(0,t.jsx)(a.SettingsDialog,{open:"settings"===e,onOpenChange:h}),(0,t.jsx)(d.HostdSendSiacoinDialog,{}),(0,t.jsx)(o.WalletSingleAddressDetailsDialog,{open:"addressDetails"===e,address:x.data?.address,isValidating:x.isValidating,onOpenChange:h}),(0,t.jsx)(m.HostdTransactionDetailsDialog,{}),(0,t.jsx)(i.SyncerConnectPeerDialog,{connect:e=>y.put({payload:{address:e}}),open:"connectPeer"===e,onOpenChange:h}),(0,t.jsx)(s.VolumeCreateDialog,{open:"volumeCreate"===e,onOpenChange:h}),(0,t.jsx)(l.VolumeResizeDialog,{open:"volumeResize"===e,onOpenChange:h}),(0,t.jsx)(u.VolumeDeleteDialog,{open:"volumeDelete"===e,onOpenChange:h}),(0,t.jsx)(f.ContractsFilterContractIdDialog,{open:"contractsFilterContractId"===e,onOpenChange:h}),(0,t.jsx)(ec,{open:"backup"===e,onOpenChange:h}),(0,t.jsx)(n.ConfirmDialog,{open:"confirm"===e,params:v,onOpenChange:e=>e?p(v):g()})]})}},69088,e=>{"use strict";e.s(["columnsDefaultVisible",0,["actions","id","path","storage","available","readOnly","successfulReads","successfulWrites","failedReads","failedWrites"]])},66771,e=>{"use strict";var t=e.i(91398);e.i(86663);var r=e.i(275),n=e.i(15222),a=e.i(24752),i=e.i(50716),o=e.i(83571);e.i(7190);var s=e.i(75901),l=e.i(91788),u=e.i(69088),c=e.i(929),d=e.i(83873),m=e.i(82129),f=e.i(26069);e.i(71487);var p=e.i(76993);e.i(37869);var h=e.i(59999),g=e.i(57184),v=e.i(54413),y=e.i(8854),x=e.i(50529),b=e.i(75109);function S({id:e,contentProps:r,buttonProps:n}){return(0,t.jsx)(g.DropdownMenu,{trigger:(0,t.jsx)(v.Button,{variant:"ghost",icon:"hover","aria-label":"volume context menu",...n,children:(0,t.jsx)(p.CaretDown16,{})}),contentProps:{align:"start",...r},children:(0,t.jsx)(C,{id:e})})}function C({id:e}){let{openDialog:r}=(0,b.useDialog)(),n=(0,s.useVolumeUpdate)(),a=(0,s.useVolume)({params:{id:e}}),i=(0,s.useVolumeCancel)(),o=a.data&&"ready"==a.data.status,l=a.data&&!["ready","unavailable"].includes(a.data.status);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"px-1.5 py-1",children:(0,t.jsxs)(c.Text,{size:"14",weight:"medium",color:"subtle",children:["Volume ",a.data?(0,x.truncate)(a.data?.localPath,24):e]})}),(0,t.jsx)(g.DropdownMenuLabel,{children:"Actions"}),l?(0,t.jsxs)(g.DropdownMenuItem,{onSelect:async()=>{let t=a.data?.status;(await i.delete({params:{id:Number(e)}})).error?(0,y.triggerErrorToast)({title:`Error canceling volume ${P(t)}`}):(0,y.triggerSuccessToast)({title:`Canceled volume ${P(t)}`})},children:[(0,t.jsx)(g.DropdownMenuLeftSlot,{children:(0,t.jsx)(p.Close16,{})}),`Cancel ${P(a.data?.status)}`]}):null,a.data?(0,t.jsxs)(g.DropdownMenuItem,{disabled:!o,onSelect:async()=>{let t=!a.data.readOnly;(await n.put({params:{id:Number(e)},payload:{readOnly:t}})).error?(0,y.triggerErrorToast)({title:t?"Error setting volume to read-only":"Error setting volume to read/write"}):(0,y.triggerSuccessToast)({title:t?"Volume set to read-only":"Volume set to read/write"})},children:[(0,t.jsx)(g.DropdownMenuLeftSlot,{children:a.data.readOnly?(0,t.jsx)(p.Edit16,{}):(0,t.jsx)(p.Locked16,{})}),a.data.readOnly?"Set to read/write":"Set to read-only"]}):null,(0,t.jsxs)(g.DropdownMenuItem,{disabled:!o,onSelect:()=>r("volumeResize",e),children:[(0,t.jsx)(g.DropdownMenuLeftSlot,{children:(0,t.jsx)(p.Ruler16,{})}),"Resize"]}),(0,t.jsxs)(g.DropdownMenuItem,{disabled:l,onSelect:()=>r("volumeDelete",e),children:[(0,t.jsx)(g.DropdownMenuLeftSlot,{children:(0,t.jsx)(p.Delete16,{})}),"Delete"]})]})}function P(e){return"resizing"===e?"resize":"creating"===e?"creation":"removing"===e?"removal":"operation"}let w=[{id:"actions",label:"",fixed:!0,cellClassName:"w-[50px] !pl-2 !pr-4 [&+*]:!pl-0",render:({data:e})=>(0,t.jsx)(S,{id:e.id})},{id:"id",label:"id",category:"general",render:({data:e})=>(0,t.jsx)(c.Text,{font:"mono",ellipsis:!0,children:e.id})},{id:"path",label:"path",category:"general",render:({data:e})=>(0,t.jsx)(c.Text,{font:"mono",ellipsis:!0,children:e.localPath})},{id:"available",label:"status",category:"general",render:({data:e})=>(0,t.jsx)(f.Tooltip,{side:"right",content:e.available?"available":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Text,{size:"12",children:"unavailable"}),(0,t.jsx)("div",{className:"flex flex-col",children:e.errors?.map(e=>(0,t.jsx)(c.Text,{size:"10",noWrap:!0,children:e},e))})]}),children:(0,t.jsxs)("div",{className:"flex gap-2 items-center",children:[e.available&&"ready"===e.status&&(0,t.jsx)(c.Text,{color:"green",children:(0,t.jsx)(p.CheckboxCheckedFilled16,{})}),e.available&&"ready"!==e.status&&(0,t.jsx)(c.Text,{color:"amber",children:(0,t.jsx)(p.InProgress16,{})}),!e.available&&(0,t.jsx)(c.Text,{color:"amber",children:(0,t.jsx)(p.WarningSquareFilled16,{})}),(0,t.jsx)(c.Text,{size:"12",className:"relative -top-px",children:e.status})]})})},{id:"readOnly",label:"read/write",category:"general",render:({data:e})=>e.readOnly?(0,t.jsx)(f.Tooltip,{content:"Read-only",children:(0,t.jsx)(c.Text,{children:(0,t.jsx)(p.Locked16,{})})}):(0,t.jsx)(f.Tooltip,{content:"Read and write enabled",children:(0,t.jsx)(c.Text,{color:"subtle",children:(0,t.jsx)(p.Edit16,{})})})},{id:"storage",label:"storage",category:"general",render:({data:e})=>(0,t.jsx)("div",{className:"flex gap-1 w-full max-w-[200px] pt-[10px]",children:(0,t.jsx)(d.ProgressBar,{variant:"accent",value:e.usedBytes,max:e.totalBytes,label:`${(0,h.humanBytes)(e.usedBytes)} / ${(0,h.humanBytes)(e.totalBytes)}`})})},{id:"successfulReads",label:"successful reads",category:"operations",render:({data:e})=>(0,t.jsx)(m.ValueNum,{variant:"value",size:"12",value:e.successfulReads,format:e=>e.toNumber().toLocaleString()})},{id:"successfulWrites",label:"successful writes",category:"operations",render:({data:e})=>(0,t.jsx)(m.ValueNum,{variant:"value",size:"12",value:e.successfulWrites,format:e=>e.toNumber().toLocaleString()})},{id:"failedReads",label:"failed reads",category:"operations",render:({data:e})=>(0,t.jsx)(m.ValueNum,{variant:"value",size:"12",value:e.failedReads,format:e=>e.toNumber().toLocaleString()})},{id:"failedWrites",label:"failed writes",category:"operations",render:({data:e})=>(0,t.jsx)(m.ValueNum,{variant:"value",size:"12",value:e.failedWrites,format:e=>e.toNumber().toLocaleString()})}];var j=e.i(63761),T=e.i(28787),E=e.i(85645),I=e.i(41399);let D=(0,l.createContext)({});function k({children:e}){let c=function(){let{limit:e,offset:t}=(0,o.usePaginationOffset)(50),{filters:c}=(0,i.useClientFilters)(),{configurableColumns:d,visibleColumnIds:m,visibleColumns:f,toggleColumnVisibility:p,setColumnsVisible:h,setColumnsHidden:g,toggleSort:v,setSortDirection:y,setSortField:x,sortField:b,sortDirection:S,resetDefaultColumnVisibility:C}=(0,r.useTableState)("hostd/v0/volumes",{columns:w,columnsDefaultVisible:u.columnsDefaultVisible,defaultSortField:"id",defaultSortDirection:"asc"}),P=(0,s.useVolumes)({config:{swr:{refreshInterval:e=>e?.find(e=>!["ready","unavailable"].includes(e.status))?(0,I.secondsInMilliseconds)(5):E.defaultDatasetRefreshInterval}}}),D=function({response:e}){return(0,l.useMemo)(()=>{if(e.data)return e.data?.map(e=>{var t;return{id:String((t=e).id),localPath:t.localPath,usedSectors:t.usedSectors,usedBytes:new j.default(t.usedSectors).times((0,T.MiBToBytes)(4)).toNumber(),totalBytes:new j.default(t.totalSectors).times((0,T.MiBToBytes)(4)).toNumber(),totalSectors:t.totalSectors,status:t.status,readOnly:t.readOnly,available:t.available,failedReads:new j.default(t.failedReads),failedWrites:new j.default(t.failedWrites),successfulReads:new j.default(t.successfulReads),successfulWrites:new j.default(t.successfulWrites),errors:t.errors}})||[]},[e.data])}({response:P}),{datasetFiltered:k,datasetPage:R}=(0,a.useClientFilteredDataset)({dataset:D,filters:c,sortField:b,sortDirection:S,offset:t,limit:e}),N=P.isValidating,F=P.error;return{datasetState:(0,n.useDatasetState)({datasetPage:R,isValidating:N,error:F,offset:t}),datasetTotal:D?.length||0,datasetFilteredTotal:k?.length||0,datasetPageTotal:R?.length||0,isLoading:P.isValidating,visibleColumns:f,dataset:D,datasetPage:R,offset:t,limit:e,configurableColumns:d,visibleColumnIds:m,toggleColumnVisibility:p,setColumnsVisible:h,setColumnsHidden:g,toggleSort:v,setSortDirection:y,setSortField:x,sortField:b,sortDirection:S,resetDefaultColumnVisibility:C}}();return(0,t.jsx)(D.Provider,{value:c,children:e})}e.s(["VolumesProvider",()=>k,"useVolumes",0,()=>(0,l.useContext)(D)],66771)}]);