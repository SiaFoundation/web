(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{6272:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var s=n(6029),a=n(93657),l=n(48866),r=n(53361);function c(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(a.EYj,{children:(0,s.jsx)(r.oio,{className:"scale-[200%]"})}),(0,s.jsx)(a.EYj,{color:"subtle",className:"text-center max-w-[500px]",children:"No active contracts matching filters."})]})}function i(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(a.EYj,{children:(0,s.jsx)(r.ox6,{className:"scale-[200%]"})}),(0,s.jsx)(a.EYj,{color:"subtle",className:"text-center max-w-[500px]",children:"There are currently no active contracts. Configure and announce host to start forming contracts."})]})}function o(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(a.EYj,{children:(0,s.jsx)(r.YA5,{className:"scale-[200%]"})}),(0,s.jsx)(a.EYj,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching contracts."})]})}function u(){let{visibleColumns:e,datasetPage:t,sortField:n,sortDirection:r,sortableColumns:u,toggleSort:d,limit:x,datasetState:j,cellContext:h}=(0,l.n)();return(0,s.jsx)("div",{className:"p-6 min-w-fit",children:(0,s.jsx)(a.XIK,{testId:"contractsTable",context:h,isLoading:"loading"===j,emptyState:(0,s.jsx)(a.ppr,{datasetState:j,noneMatching:(0,s.jsx)(c,{}),noneYet:(0,s.jsx)(i,{}),error:(0,s.jsx)(o,{})}),pageSize:x,data:t,columns:e,sortableColumns:u,sortDirection:r,sortField:n,toggleSort:d})})}var d=n(51006),x=n(80698),j=n(61191),h=n(26438),p=n(38003),m=n(45765);function f(){let{configurableColumns:e,toggleColumnVisibility:t,resetDefaultColumnVisibility:n,setColumnsVisible:c,setColumnsHidden:i,sortField:o,setSortField:u,sortDirection:d,setSortDirection:x,visibleColumnIds:j}=(0,l.n)(),h=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id})),f=e.filter(e=>"time"===e.category).map(e=>({label:e.label,value:e.id})),g=e.filter(e=>"financial"===e.category).map(e=>({label:e.label,value:e.id}));return(0,s.jsxs)(a.AMh,{trigger:(0,s.jsxs)(a.$nd,{"aria-label":"Configure view",size:"small",tip:"Configure view",tipAlign:"end",children:[(0,s.jsx)(r.s7Y,{}),"View",(0,s.jsx)(r.NNJ,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,s.jsxs)(a.iy7,{children:[(0,s.jsx)(a.JU7,{children:"Order by"}),(0,s.jsx)(a.DF3,{children:(0,s.jsx)(a.l6P,{value:o,onChange:e=>{u(e.currentTarget.value)},children:Object.entries((0,m.A)(p.vP,"category")).map(e=>{let[t,n]=e;return(0,s.jsx)("optgroup",{label:t,children:n.map(e=>(0,s.jsx)(a.c$x,{value:e.id,children:e.label},e.id))},t)})})})]}),(0,s.jsxs)(a.iy7,{children:[(0,s.jsx)(a.JU7,{children:"Direction"}),(0,s.jsx)(a.DF3,{children:(0,s.jsxs)(a.l6P,{value:d,onClick:e=>{e.stopPropagation()},onChange:e=>{x(e.currentTarget.value)},children:[(0,s.jsx)(a.c$x,{value:"desc",children:"descending"},"desc"),(0,s.jsx)(a.c$x,{value:"asc",children:"ascending"},"asc")]})})]}),(0,s.jsx)(a.bXX,{}),(0,s.jsxs)(a.iy7,{children:[(0,s.jsx)(a.JU7,{children:"Display properties"}),(0,s.jsx)(a.DF3,{children:(0,s.jsx)(a.$nd,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),n()},children:(0,s.jsx)(r.ZxO,{})})})]}),(0,s.jsx)(a.IJR,{label:"General",columns:h.map(e=>e.value),enabled:j,setColumnsVisible:c,setColumnsHidden:i}),(0,s.jsx)(a.iy7,{children:(0,s.jsx)(a.PSc,{options:h,values:j,onChange:e=>t(e)})}),(0,s.jsx)(a.IJR,{label:"Time",columns:f.map(e=>e.value),enabled:j,setColumnsVisible:c,setColumnsHidden:i}),(0,s.jsx)(a.iy7,{children:(0,s.jsx)(a.PSc,{options:f,values:j,onChange:e=>t(e)})}),(0,s.jsx)(a.IJR,{label:"Usage",columns:g.map(e=>e.value),enabled:j,setColumnsVisible:c,setColumnsHidden:i}),(0,s.jsx)(a.iy7,{children:(0,s.jsx)(a.PSc,{options:g,values:j,onChange:e=>t(e)})})]})}function g(){return(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)(f,{})})}var v=n(53185),b=n(55729),y=n(47053);function C(){let{filters:e,removeFilter:t,removeLastFilter:n}=(0,l.n)(),[c,i]=(0,b.useState)(!1),[o,u]=(0,b.useState)(""),[d,x]=(0,b.useState)([]),j=d[d.length-1],h=(d.length,(0,b.useRef)(null)),p=(0,b.useRef)(null),m=(0,b.useCallback)(e=>{x(t=>[...t,e])},[x]),f=(0,b.useCallback)(()=>{x([])},[x]);(0,b.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&i(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let g=(0,b.useCallback)(()=>{var e;null==(e=p.current)||e.focus()},[p]),C=(0,b.useCallback)(()=>{u(""),f()},[f]);return(0,s.jsxs)("div",{className:"flex gap-1",children:[e.map(e=>(0,s.jsxs)(a.tWD,{children:[(0,s.jsx)(a.$nd,{variant:"active",state:"waiting",children:(0,a.xvE)(e.label,30)}),(0,s.jsx)(a.$nd,{variant:"active",size:"small",onClick:()=>t(e.id),children:(0,s.jsx)(r.sn9,{})})]},e.id)),(0,s.jsxs)(v.uB,{ref:h,label:"Command Menu",onFocus:()=>i(!0),onKeyDown:e=>{if(d.length>0)"Escape"!==e.key&&("Backspace"!==e.key||o)||(e.preventDefault(),x(e=>e.slice(0,-1)));else if(0===d.length&&("Backspace"!==e.key||o||n(),"Escape"===e.key&&!o)){var t;i(!1),null==(t=p.current)||t.blur()}},children:[(0,s.jsx)(v.uB.Input,{"aria-label":"filter contracts",name:"filter-contracts-menu-input",ref:p,value:o,onValueChange:u,className:(0,a.uS8)({variant:"ghost",focus:"none"}),placeholder:"Filter contracts"}),c&&(0,s.jsx)(a.Zkm,{className:"absolute z-20 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,s.jsxs)(a.FKN,{children:[j&&(0,s.jsx)(a.JU7,{className:"px-1.5 py-1",children:j.label}),(0,s.jsx)(v.uB.List,{children:(0,s.jsx)(y.o,{currentPage:j,beforeSelect:g,afterSelect:C,pushPage:m})})]})})]})]})}function k(){let{offset:e,limit:t,datasetFilteredTotal:n,datasetState:r,versionMode:c,setVersionMode:i}=(0,l.n)();return(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,s.jsx)("div",{children:(0,s.jsxs)(a.rId,{contentProps:{side:"bottom",align:"start"},trigger:(0,s.jsx)(a.$nd,{"aria-label":"contracts version mode",tip:"v2"===c?"Currently viewing v2 contracts":"Currently viewing v1 contracts",variant:"active",children:"v2"===c?"v2":"v1"}),children:[(0,s.jsx)(a._26,{onSelect:()=>i("v2"),children:"View v2 contracts"}),(0,s.jsx)(a._26,{onSelect:()=>i("v1"),children:"View v1 contracts"})]})}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(C,{})}),(0,s.jsx)(a.LmH,{offset:e,limit:t,isLoading:"loading"===r,total:n})]})}var N=n(32708),w=n(90899);function E(){let{multiSelect:e}=(0,l.n)(),t=(0,w._H)(),n=(0,b.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,n]=e;return n.id}),[e.selection]),c=(0,b.useCallback)(async()=>{await (0,a.qBJ)(n.map(e=>t.put({params:{id:e}})),{toastError:e=>{let{successCount:t,errorCount:n,totalCount:s}=e;return{title:"Integrity checks started for ".concat((0,N.td)(t,"contract")),body:"Error starting integrity checks for ".concat(n,"/").concat(s," total contracts.")}},toastSuccess:e=>{let{totalCount:t}=e;return{title:"Integrity checks started for ".concat((0,N.td)(t,"contract")),body:(0,s.jsxs)(s.Fragment,{children:["Depending on contract data size this operation can take a while. Check ",(0,s.jsx)(a.CyN,{children:"hostd"})," ",(0,s.jsx)(a.N_E,{href:x.J.alerts.index,children:"alerts"})," for status updates."]})}},after:()=>{e.deselectAll()}})},[e,n,t]);return(0,s.jsx)(a.$nd,{"aria-label":"run integrity check for each contract",tip:"Run integrity check for each contract",onClick:c,children:(0,s.jsx)(r.ysp,{})})}function S(){let{multiSelect:e}=(0,l.n)();return(0,s.jsx)(a.ptQ,{multiSelect:e,entityWord:"contract",children:(0,s.jsx)(E,{})})}function _(){return(0,s.jsx)(u,{})}_.Layout=h.Y,_.useLayoutProps=function(){let{openDialog:e}=(0,j.sp)();return{title:"Contracts",routes:x.J,sidenav:(0,s.jsx)(d.F,{}),openSettings:()=>e("settings"),actions:(0,s.jsx)(g,{}),stats:(0,s.jsx)(k,{}),size:"full",dockedControls:(0,s.jsx)(S,{})}}},21452:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/contracts",function(){return n(6272)}])}},e=>{e.O(0,[907,636,593,792],()=>e(e.s=21452)),_N_E=e.O()}]);