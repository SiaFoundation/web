(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10077,e=>{"use strict";var t=e.i(91398);e.i(86663);var n=e.i(4885),s=e.i(22494),a=e.i(37279),l=e.i(929);e.i(71487);var i=e.i(76993);function r(){return(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(l.Text,{children:(0,t.jsx)(i.Filter32,{className:"scale-[200%]"})}),(0,t.jsx)(l.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"No active contracts matching filters."})]})}var c=e.i(73478);function o(){return(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(l.Text,{children:(0,t.jsx)(c.FileContractIcon,{className:"scale-[200%]"})}),(0,t.jsx)(l.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"There are currently no active contracts. Configure and announce host to start forming contracts."})]})}function u(){return(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(l.Text,{children:(0,t.jsx)(i.MisuseOutline32,{className:"scale-[200%]"})}),(0,t.jsx)(l.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching contracts."})]})}function d(){let{visibleColumns:e,datasetPage:l,sortField:i,sortDirection:c,sortableColumns:d,toggleSort:x,limit:h,datasetState:m,cellContext:j}=(0,a.useContracts)();return(0,t.jsx)("div",{className:"p-6 min-w-fit",children:(0,t.jsx)(s.Table,{testId:"contractsTable",context:j,isLoading:"loading"===m,emptyState:(0,t.jsx)(n.EmptyState,{datasetState:m,noneMatching:(0,t.jsx)(r,{}),noneYet:(0,t.jsx)(o,{}),error:(0,t.jsx)(u,{})}),pageSize:h,data:l,columns:e,sortableColumns:d,sortDirection:c,sortField:i,toggleSort:x})})}var x=e.i(88384),h=e.i(51600),m=e.i(75109),j=e.i(51189),p=e.i(54413),g=e.i(34666),v=e.i(59651),f=e.i(34530),b=e.i(33124),C=e.i(7880),y=e.i(78114),k=e.i(97018);e.i(19513);var w=e.i(36409);function S(){let{configurableColumns:e,toggleColumnVisibility:n,resetDefaultColumnVisibility:s,setColumnsVisible:l,setColumnsHidden:r,sortField:c,setSortField:o,sortDirection:u,setSortDirection:d,visibleColumnIds:x}=(0,a.useContracts)(),h=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id})),m=e.filter(e=>"time"===e.category).map(e=>({label:e.label,value:e.id})),j=e.filter(e=>"financial"===e.category).map(e=>({label:e.label,value:e.id}));return(0,t.jsxs)(b.Popover,{trigger:(0,t.jsxs)(p.Button,{"aria-label":"Configure view",size:"small",tip:"Configure view",tipAlign:"end",children:[(0,t.jsx)(i.SettingsAdjust16,{}),"View",(0,t.jsx)(i.CaretDown16,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,t.jsxs)(C.BaseMenuItem,{children:[(0,t.jsx)(f.Label,{children:"Order by"}),(0,t.jsx)(C.MenuItemRightSlot,{children:(0,t.jsx)(g.Select,{value:c,onChange:e=>{o(e.currentTarget.value)},children:Object.entries((0,w.groupBy)(k.sortOptions,"category")).map(([e,n])=>(0,t.jsx)("optgroup",{label:e,children:n.map(e=>(0,t.jsx)(g.Option,{value:e.id,children:e.label},e.id))},e))})})]}),(0,t.jsxs)(C.BaseMenuItem,{children:[(0,t.jsx)(f.Label,{children:"Direction"}),(0,t.jsx)(C.MenuItemRightSlot,{children:(0,t.jsxs)(g.Select,{value:u,onClick:e=>{e.stopPropagation()},onChange:e=>{d(e.currentTarget.value)},children:[(0,t.jsx)(g.Option,{value:"desc",children:"descending"},"desc"),(0,t.jsx)(g.Option,{value:"asc",children:"ascending"},"asc")]})})]}),(0,t.jsx)(C.MenuSeparator,{}),(0,t.jsxs)(C.BaseMenuItem,{children:[(0,t.jsx)(f.Label,{children:"Display properties"}),(0,t.jsx)(C.MenuItemRightSlot,{children:(0,t.jsx)(p.Button,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),s()},children:(0,t.jsx)(i.Reset16,{})})})]}),(0,t.jsx)(y.MenuSectionLabelToggleAll,{label:"General",columns:h.map(e=>e.value),enabled:x,setColumnsVisible:l,setColumnsHidden:r}),(0,t.jsx)(C.BaseMenuItem,{children:(0,t.jsx)(v.PoolCombo,{options:h,values:x,onChange:e=>n(e)})}),(0,t.jsx)(y.MenuSectionLabelToggleAll,{label:"Time",columns:m.map(e=>e.value),enabled:x,setColumnsVisible:l,setColumnsHidden:r}),(0,t.jsx)(C.BaseMenuItem,{children:(0,t.jsx)(v.PoolCombo,{options:m,values:x,onChange:e=>n(e)})}),(0,t.jsx)(y.MenuSectionLabelToggleAll,{label:"Usage",columns:j.map(e=>e.value),enabled:x,setColumnsVisible:l,setColumnsHidden:r}),(0,t.jsx)(C.BaseMenuItem,{children:(0,t.jsx)(v.PoolCombo,{options:j,values:x,onChange:e=>n(e)})})]})}function T(){return(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)(S,{})})}var M=e.i(57184),N=e.i(83512),P=e.i(77786),B=e.i(41490),I=e.i(40410),L=e.i(21324),D=e.i(50529),E=e.i(10483),O=e.i(91788),A=e.i(7594);function R(){let{filters:e,removeFilter:n,removeLastFilter:s}=(0,a.useContracts)(),[l,r]=(0,O.useState)(!1),[c,o]=(0,O.useState)(""),[u,d]=(0,O.useState)([]),x=u[u.length-1],h=(u.length,(0,O.useRef)(null)),m=(0,O.useRef)(null),j=(0,O.useCallback)(e=>{d(t=>[...t,e])},[d]),g=(0,O.useCallback)(()=>{d([])},[d]);(0,O.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&r(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let v=(0,O.useCallback)(()=>{m.current?.focus()},[m]),b=(0,O.useCallback)(()=>{o(""),g()},[g]);return(0,t.jsxs)("div",{className:"flex gap-1",children:[e.map(e=>(0,t.jsxs)(L.ControlGroup,{children:[(0,t.jsx)(p.Button,{variant:"active",state:"waiting",children:(0,D.truncate)(e.label,30)}),(0,t.jsx)(p.Button,{variant:"active",size:"small",onClick:()=>n(e.id),children:(0,t.jsx)(i.Close16,{})})]},e.id)),(0,t.jsxs)(E.Command,{ref:h,label:"Command Menu",onFocus:()=>r(!0),onKeyDown:e=>{u.length>0?"Escape"!==e.key&&("Backspace"!==e.key||c)||(e.preventDefault(),d(e=>e.slice(0,-1))):0===u.length&&("Backspace"!==e.key||c||s(),"Escape"!==e.key||c||(r(!1),m.current?.blur()))},children:[(0,t.jsx)(E.Command.Input,{"aria-label":"filter contracts",name:"filter-contracts-menu-input",ref:m,value:c,onValueChange:o,className:(0,P.textFieldStyles)({variant:"ghost",focus:"none"}),placeholder:"Filter contracts"}),l&&(0,t.jsx)(B.Panel,{className:"absolute z-20 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,t.jsxs)(I.ScrollArea,{children:[x&&(0,t.jsx)(f.Label,{className:"px-1.5 py-1",children:x.label}),(0,t.jsx)(E.Command.List,{children:(0,t.jsx)(A.ContractsFilterCmd,{currentPage:x,beforeSelect:v,afterSelect:b,pushPage:j})})]})})]})]})}function _(){let{offset:e,limit:n,datasetFilteredTotal:s,datasetState:l,versionMode:i,setVersionMode:r}=(0,a.useContracts)();return(0,t.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(M.DropdownMenu,{contentProps:{side:"bottom",align:"start"},trigger:(0,t.jsx)(p.Button,{"aria-label":"contracts version mode",tip:"v2"===i?"Currently viewing v2 contracts":"Currently viewing v1 contracts",variant:"active",children:"v2"===i?"v2":"v1"}),children:[(0,t.jsx)(M.DropdownMenuItem,{onSelect:()=>r("v2"),children:"View v2 contracts"}),(0,t.jsx)(M.DropdownMenuItem,{onSelect:()=>r("v1"),children:"View v1 contracts"})]})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(R,{})}),(0,t.jsx)(N.PaginatorKnownTotal,{offset:e,limit:n,isLoading:"loading"===l,total:s})]})}var z=e.i(7732),F=e.i(51281),V=e.i(46193),H=e.i(70765);e.i(37869);var K=e.i(93936);e.i(7190);var $=e.i(75901);function U(){let{multiSelect:e}=(0,a.useContracts)(),n=(0,$.useContractsIntegrityCheck)(),s=(0,O.useMemo)(()=>Object.entries(e.selection).map(([e,t])=>t.id),[e.selection]),l=(0,O.useCallback)(async()=>{await (0,V.handleBatchOperation)(s.map(e=>n.put({params:{id:e}})),{toastError:({successCount:e,errorCount:t,totalCount:n})=>({title:`Integrity checks started for ${(0,K.pluralize)(e,"contract")}`,body:`Error starting integrity checks for ${t}/${n} total contracts.`}),toastSuccess:({totalCount:e})=>({title:`Integrity checks started for ${(0,K.pluralize)(e,"contract")}`,body:(0,t.jsxs)(t.Fragment,{children:["Depending on contract data size this operation can take a while. Check ",(0,t.jsx)(F.Code,{children:"hostd"})," ",(0,t.jsx)(H.Link,{href:h.routes.alerts.index,children:"alerts"})," for status updates."]})}),after:()=>{e.deselectAll()}})},[e,s,n]);return(0,t.jsx)(p.Button,{"aria-label":"run integrity check for each contract",tip:"Run integrity check for each contract",onClick:l,children:(0,t.jsx)(i.DataCheck16,{})})}function X(){let{multiSelect:e}=(0,a.useContracts)();return(0,t.jsx)(z.MultiSelectionMenu,{multiSelect:e,entityWord:"contract",children:(0,t.jsx)(U,{})})}function G(){return(0,t.jsx)(d,{})}G.Layout=j.HostdAuthedLayout,G.useLayoutProps=function(){let{openDialog:e}=(0,m.useDialog)();return{title:"Contracts",routes:h.routes,sidenav:(0,t.jsx)(x.HostdSidenav,{}),openSettings:()=>e("settings"),actions:(0,t.jsx)(T,{}),stats:(0,t.jsx)(_,{}),size:"full",dockedControls:(0,t.jsx)(X,{})}},e.s(["default",()=>G],10077)},60297,(e,t,n)=>{let s="/contracts";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(10077)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/54f26a8bf797519f.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/700022329b1c82af.js"].map(t=>e.l(t))).then(()=>t(79466)))},69796,e=>{e.v(t=>Promise.all(["static/chunks/c0a88d8f93bce614.js"].map(t=>e.l(t))).then(()=>t(41159)))}]);