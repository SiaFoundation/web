(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{57344:function(e,i,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config",function(){return r(46484)}])},95628:function(e,i,r){"use strict";r.d(i,{q:function(){return l}});var t=r(52322),n=r(18885),s=r(13369),a=r(6391),c=r.n(a),o=r(74881);function l(e){let i=(0,s.Os)();return(0,t.jsx)(n.tU3,{appName:"hostd",connectivityRoute:o.h,walletBalance:i.data?new(c())(i.data.spendable):void 0,...e})}},39031:function(e,i,r){"use strict";r.d(i,{N:function(){return a}});var t=r(52322),n=r(18885),s=r(74881);function a(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.KJW,{title:"Dashboard",route:s._.home,children:(0,t.jsx)(n.K2o,{})}),(0,t.jsx)(n.KJW,{title:"Volumes",route:s._.volumes.index,children:(0,t.jsx)(n.zvn,{})}),(0,t.jsx)(n.KJW,{title:"Contracts",route:s._.contracts.index,children:(0,t.jsx)(n.VBo,{})}),(0,t.jsx)(n.KJW,{title:"Configuration",route:s._.config.index,children:(0,t.jsx)(n.wWN,{})})]})}},46484:function(e,i,r){"use strict";r.r(i),r.d(i,{default:function(){return P}});var t=r(52322),n=r(18885),s=r(6391),a=r.n(s),c=r(2784),o=r(39031),l=r(74881),d=r(130),m=r(95628),u=r(63397),x=r(13369),g=r(65413);let h=[{value:"",label:"Off"},{value:"route53",label:"Route 53"},{value:"noip",label:"No-IP"},{value:"duckdns",label:"Duck DNS"}],p=g.Ry().shape({acceptingContracts:g.Xg().required("required"),netAddress:g.Z_().required("required"),maxContractDuration:g.nK().required("required"),windowSize:g.nK().required("required"),contractPrice:g.nK().required("required"),baseRPCPrice:g.nK().required("required"),sectorAccessPrice:g.nK().required("required"),collateral:g.nK().required("required"),maxCollateral:g.nK().required("required"),minStoragePrice:g.nK().required("required"),minEgressPrice:g.nK().required("required"),minIngressPrice:g.nK().required("required"),priceTableValidity:g.nK().required("required"),maxRegistryEntries:g.nK().required("required"),accountExpiry:g.nK().required("required"),maxAccountBalance:g.nK().required("required"),ingressLimit:g.nK().required("required"),egressLimit:g.nK().required("required"),dnsProvider:g.Z_().oneOf(h.map(e=>e.value),"required"),dnsIpv4:g.Xg().required("required"),dnsIpv6:g.Xg().required("required")}),j={acceptingContracts:!1,netAddress:"",maxContractDuration:void 0,windowSize:void 0,contractPrice:void 0,baseRPCPrice:void 0,sectorAccessPrice:void 0,collateral:void 0,maxCollateral:void 0,minStoragePrice:void 0,minEgressPrice:void 0,minIngressPrice:void 0,priceTableValidity:void 0,maxRegistryEntries:void 0,accountExpiry:void 0,maxAccountBalance:void 0,ingressLimit:void 0,egressLimit:void 0,dnsProvider:"",dnsIpv4:!1,dnsIpv6:!1,dnsOptions:{}},v={acceptingContracts:(0,t.jsx)(t.Fragment,{children:"Whether or not the host is accepting contracts."}),netAddress:(0,t.jsx)(t.Fragment,{children:"The network address of the host."}),maxContractDuration:(0,t.jsx)(t.Fragment,{children:"The maximum contract duration that the host will accept."}),windowSize:(0,t.jsx)(t.Fragment,{children:"The contract proof window size in days."}),contractPrice:(0,t.jsx)(t.Fragment,{children:"The host's contract price in siacoins."}),baseRPCPrice:(0,t.jsx)(t.Fragment,{children:"The host's base RPC price in siacoins per million calls."}),sectorAccessPrice:(0,t.jsx)(t.Fragment,{children:"The host's sector access price in siacoins million sectors."}),collateral:(0,t.jsx)(t.Fragment,{children:"The host's target collateral in siacoins per month."}),maxCollateral:(0,t.jsx)(t.Fragment,{children:"The host's maximum collateral in siacoins."}),minStoragePrice:(0,t.jsx)(t.Fragment,{children:"The host's minimum storage price in siacoins per TB per month."}),minEgressPrice:(0,t.jsx)(t.Fragment,{children:"The host's minimum egress price in siacoins per TB."}),minIngressPrice:(0,t.jsx)(t.Fragment,{children:"The host's minimum ingress price in siacoins per TB."}),priceTableValidity:(0,t.jsx)(t.Fragment,{children:"How long a renter's registered price table remains valid."}),maxRegistryEntries:(0,t.jsx)(t.Fragment,{children:"The maximum number of registry entries that the host will store. Each registry entry is up to 113 bytes."}),accountExpiry:(0,t.jsx)(t.Fragment,{children:"How long a renter's ephemeral accounts are inactive before the host prunes them and recovers the remaining funds."}),maxAccountBalance:(0,t.jsx)(t.Fragment,{children:"Maximum balance a renter's ephemeral account can have. When the limit is reached, deposits are rejected until some of the funds have been spent."}),ingressLimit:(0,t.jsx)(t.Fragment,{children:"The maximum amount of ingress bandwidth traffic in TB."}),egressLimit:(0,t.jsx)(t.Fragment,{children:"The maximum amount of egress bandwidth traffic in TB."}),dnsProvider:(0,t.jsx)(t.Fragment,{children:"Enable dynamic DNS with one of the supported providers."}),dnsIpv4:(0,t.jsx)(t.Fragment,{children:"Whether IPv4 is enabled."}),dnsIpv6:(0,t.jsx)(t.Fragment,{children:"Whether IPv6 is enabled."}),dnsOptions:""};var f=r(2288);function w(){var e;let{openDialog:i}=(0,d.Rh)(),r=(0,x.rV)({config:{swr:{revalidateOnFocus:!1}}}),s=(0,x.Te)(),g=(0,x.Az)(),w=(0,x.go)({disabled:!r.data||!r.data.dynDNS.provider,config:{swr:{revalidateOnFocus:!1,errorRetryCount:0}}}),P=(0,u.TA)({validationSchema:p,initialValues:j,onSubmit:async e=>{if(r.data)try{let i=await s.post({payload:{acceptingContracts:e.acceptingContracts,netAddress:e.netAddress,maxContractDuration:Number(e.maxContractDuration.times((0,n.S5V)(1)).toFixed(0)),windowSize:Number(e.windowSize.times((0,n.gUO)(1)).toFixed(0)),contractPrice:(0,f.qN)(e.contractPrice).toString(),baseRPCPrice:(0,f.qN)(e.baseRPCPrice).div(1e7).toString(),sectorAccessPrice:(0,f.qN)(e.sectorAccessPrice).div(1e7).toString(),collateral:(0,f.qN)(e.collateral.div((0,n.xf5)(1)).div((0,n.S5V)(1))).toString(),maxCollateral:(0,f.qN)(e.maxCollateral).toString(),minStoragePrice:(0,f.qN)(e.minStoragePrice.div((0,n.xf5)(1)).div((0,n.S5V)(1))).toString(),minEgressPrice:(0,f.qN)(e.minEgressPrice.div((0,n.xf5)(1))).toString(),minIngressPrice:(0,f.qN)(e.minIngressPrice.div((0,n.xf5)(1))).toString(),priceTableValidity:Number(e.priceTableValidity.times(60).times(1e9).toFixed(0)),maxRegistryEntries:Number(e.maxRegistryEntries.toFixed(0)),accountExpiry:Number(e.accountExpiry.times(86400).times(1e9).toFixed(0)),maxAccountBalance:(0,f.qN)(e.maxAccountBalance).toString(),ingressLimit:Number(e.ingressLimit.toFixed(0)),egressLimit:Number(e.egressLimit.toFixed(0)),dynDNS:{provider:e.dnsProvider,ipv4:e.dnsIpv4,ipv6:e.dnsIpv6,options:e.dnsOptions}}});if(i.error)throw Error(i.error);S.netAddress?(0,n.OPV)("Settings have been saved. Address has changed, make sure to re-announce the host.",{duration:2e4}):(0,n.OPV)("Settings have been saved."),w.mutate()}catch(t){(0,n.OHV)(t.message)}}}),y=(0,c.useCallback)(()=>{let e=async()=>{P.resetForm(),await r.mutate(),w.mutate()};e()},[P,r,w]);(0,c.useEffect)(()=>{let e=async()=>{if(r.data)try{let e=r.data;await P.resetForm({values:{acceptingContracts:e.acceptingContracts,netAddress:e.netAddress,maxContractDuration:new(a())(e.maxContractDuration).div((0,n.S5V)(1)),windowSize:new(a())(e.windowSize).div((0,n.gUO)(1)),contractPrice:(0,f.ll)(e.contractPrice,6),baseRPCPrice:(0,f.ll)(new(a())(e.baseRPCPrice).times(1e7),6),sectorAccessPrice:(0,f.ll)(new(a())(e.sectorAccessPrice).times(1e7),6),collateral:(0,f.ll)(new(a())(e.collateral).times((0,n.xf5)(1)).times((0,n.S5V)(1)),6),maxCollateral:(0,f.ll)(e.maxCollateral,6),minStoragePrice:(0,f.ll)(new(a())(e.minStoragePrice).times((0,n.xf5)(1)).times((0,n.S5V)(1)),6),minEgressPrice:(0,f.ll)(new(a())(e.minEgressPrice).times((0,n.xf5)(1)),6),minIngressPrice:(0,f.ll)(new(a())(e.minIngressPrice).times((0,n.xf5)(1)),6),priceTableValidity:new(a())(e.priceTableValidity).div(1e9).div(60),maxRegistryEntries:new(a())(e.maxRegistryEntries),accountExpiry:new(a())(e.accountExpiry).div(1e9).div(86400),maxAccountBalance:(0,f.ll)(e.maxAccountBalance,6),ingressLimit:new(a())(e.ingressLimit),egressLimit:new(a())(e.egressLimit),dnsProvider:e.dynDNS.provider,dnsIpv4:e.dynDNS.ipv4,dnsIpv6:e.dynDNS.ipv6,dnsOptions:e.dynDNS.options}})}catch(i){console.log(i)}};e()},[r.data]);let{changed:S,changeCount:b}=(0,n.VyY)(P);return(0,t.jsx)(m.q,{title:"Configuration",routes:l._,sidenav:(0,t.jsx)(o.N,{}),stats:(null===(e=r.data)||void 0===e?void 0:e.dynDNS.provider)&&!w.isValidating?w.error?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.xvT,{color:"amber",children:(0,t.jsx)(n.qdM,{})}),(0,t.jsx)(n.xvT,{children:"Error with dynamic DNS configuration"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.xvT,{color:"green",children:(0,t.jsx)(n.Y3p,{})}),(0,t.jsx)(n.xvT,{children:"Dynamic DNS enabled"})]}):null,actions:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!!b&&(0,t.jsx)(n.xvT,{size:"12",color:"subtle",children:1===b?"1 change":"".concat(b," changes")}),(0,t.jsx)(n.zxk,{tip:"Reset all changes",icon:"contrast",disabled:!b,onClick:()=>y(),children:(0,t.jsx)(n.Wet,{})}),(0,t.jsxs)(n.zxk,{tip:"Save all changes",variant:"accent",disabled:!b,onClick:()=>P.submitForm(),children:[(0,t.jsx)(n.ZEk,{}),"Save changes"]}),(0,t.jsxs)(n.zxk,{variant:"accent",tip:"Announce host address",onClick:()=>g.post({}),children:[(0,t.jsx)(n.cfm,{}),"Announce"]})]}),openSettings:()=>i("settings"),children:(0,t.jsxs)("div",{className:"p-6 flex flex-col gap-16 max-w-screen-xl",children:[(0,t.jsxs)(n.M9k,{title:"Host",children:[(0,t.jsx)(n.VXA,{title:"Accepting contracts",description:v.acceptingContracts,control:(0,t.jsx)(n.hGk,{formik:P,changed:S,name:"acceptingContracts"})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Address",description:v.netAddress,control:(0,t.jsx)(n.LLj,{formik:P,changed:S,placeholder:"my.host.com:9882",name:"netAddress"})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Maximum contract duration",description:v.maxContractDuration,control:(0,t.jsx)(n.wmY,{formik:P,changed:S,units:"months",decimalsLimit:2,name:"maxContractDuration",suggestion:new(a())(6),suggestionTip:"The default maximum duration is 6 months."})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Window size",description:v.windowSize,control:(0,t.jsx)(n.wmY,{formik:P,changed:S,units:"days",name:"windowSize",suggestion:new(a())(1),suggestionTip:"The default window size is 1 day."})})]}),(0,t.jsxs)(n.M9k,{title:"Pricing",children:[(0,t.jsx)(n.VXA,{title:"Minimum storage price",description:v.minStoragePrice,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,units:"SC/TB/month",name:"minStoragePrice",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Minimum egress price",description:v.minEgressPrice,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,units:"SC/TB",name:"minEgressPrice",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Minimum ingress price",description:v.minIngressPrice,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,units:"SC/TB",name:"minIngressPrice",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Collateral",description:v.collateral,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,name:"collateral",units:"SC/month",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Maximum collateral",description:v.maxCollateral,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,name:"maxCollateral",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Contract price",description:v.contractPrice,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,name:"contractPrice",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Base RPC price",description:v.baseRPCPrice,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,units:"SC/million",name:"baseRPCPrice",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Sector access price",description:v.sectorAccessPrice,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,units:"SC/million",name:"sectorAccessPrice",decimalsLimitSc:6})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Price table validity",description:v.priceTableValidity,control:(0,t.jsx)(n.wmY,{formik:P,units:"minutes",changed:S,name:"priceTableValidity"})})]}),(0,t.jsxs)(n.M9k,{title:"DNS",children:[(0,t.jsx)(n.VXA,{title:"Dynamic DNS Provider",description:v.dnsProvider,control:(0,t.jsx)(n._ew,{options:h,formik:P,changed:S,name:"dnsProvider"})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"IPv4",description:v.dnsIpv4,control:(0,t.jsx)(n.hGk,{formik:P,changed:S,name:"dnsIpv4"})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"IPv6",description:v.dnsIpv6,control:(0,t.jsx)(n.hGk,{formik:P,changed:S,name:"dnsIpv6"})})]}),(0,t.jsxs)(n.M9k,{title:"Bandwidth",children:[(0,t.jsx)(n.VXA,{title:"Ingress limit",description:v.ingressLimit,control:(0,t.jsx)(n.wmY,{formik:P,changed:S,units:"TB",name:"ingressLimit"})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Egress limit",description:v.egressLimit,control:(0,t.jsx)(n.wmY,{formik:P,changed:S,units:"TB",name:"egressLimit"})})]}),(0,t.jsx)(n.M9k,{title:"Registry",children:(0,t.jsx)(n.VXA,{title:"Maximum registry size",description:v.maxRegistryEntries,control:(0,t.jsx)(n.wmY,{formik:P,units:"entries",decimalsLimit:0,changed:S,name:"maxRegistryEntries"})})}),(0,t.jsxs)(n.M9k,{title:"RHP3",children:[(0,t.jsx)(n.VXA,{title:"Account expiry",description:v.accountExpiry,control:(0,t.jsx)(n.wmY,{formik:P,units:"days",changed:S,name:"accountExpiry"})}),(0,t.jsx)(n.Z0O,{className:"w-full my-3"}),(0,t.jsx)(n.VXA,{title:"Maximum account balance",description:v.maxAccountBalance,control:(0,t.jsx)(n.ckm,{formik:P,changed:S,name:"maxAccountBalance"})})]})]})})}function P(){return(0,t.jsx)(w,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=57344)}),_N_E=e.O()}]);