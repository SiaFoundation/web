(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{7344:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config",function(){return t(5160)}])},362:function(e,a,t){"use strict";t.d(a,{J:function(){return l}});var r=t(2322),i=t(1387),n=t(3621),o=t(6391),c=t.n(o),s=t(4881);function l(e){let a=(0,n.tM)();return(0,r.jsx)(i.tU3,{appName:"renterd",connectivityRoute:s.h,walletBalance:a.data?new(c())(a.data):void 0,...e})}},5755:function(e,a,t){"use strict";t.d(a,{e:function(){return c}});var r=t(2322),i=t(1387),n=t(4881),o=t(3121);function c(){let{autopilotMode:e}=(0,o.K)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.KJW,{title:"Files",route:n._.files.index,children:(0,r.jsx)(i.ROc,{})}),"on"===e&&(0,r.jsx)(i.KJW,{title:"Autopilot",route:n._.autopilot.index,children:(0,r.jsx)(i.aFQ,{})}),(0,r.jsx)(i.KJW,{title:"Contracts",route:n._.contracts.index,children:(0,r.jsx)(i.VBo,{})}),(0,r.jsx)(i.KJW,{title:"Hosts",route:n._.hosts.index,children:(0,r.jsx)(i.VHe,{})}),(0,r.jsx)(i.KJW,{title:"Configuration",route:n._.config.index,children:(0,r.jsx)(i.wWN,{})})]})}},5160:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var r=t(2322),i=t(1387),n=t(6391),o=t.n(n),c=t(2784),s=t(5755),l=t(4881),d=t(650),m=t(362),x=t(3621),h=t(3397),u=t(2288),g=t(4511);let f=g.Ry().shape({maxStoragePrice:g.nK().required("required"),maxDownloadPrice:g.nK().required("required"),maxUploadPrice:g.nK().required("required"),maxContractPrice:g.nK().required("required"),maxRpcPrice:g.nK().required("required"),minMaxCollateral:g.nK().required("required"),hostBlockHeightLeeway:g.Rx().required("required"),minShards:g.nK().required("required"),totalShards:g.nK().required("required")}),p={maxRpcPrice:void 0,maxStoragePrice:void 0,maxContractPrice:void 0,maxDownloadPrice:void 0,maxUploadPrice:void 0,minMaxCollateral:void 0,hostBlockHeightLeeway:void 0,minShards:void 0,totalShards:void 0};function j(){let{openDialog:e}=(0,d.Rh)(),a=(0,x.yu)({params:{key:"gouging"},config:{swr:{revalidateOnFocus:!1}}}),t=(0,x.yu)({params:{key:"redundancy"},config:{swr:{revalidateOnFocus:!1}}}),n=(0,x.KJ)(),g=(0,h.TA)({validationSchema:f,initialValues:p,onSubmit:async e=>{if(a.data&&t.data)try{let r=await n.put({params:{key:"gouging"},payload:{maxRPCPrice:(0,u.qN)(e.maxRpcPrice).toString(),maxStoragePrice:(0,u.qN)(e.maxStoragePrice.div((0,i.S5V)(1)).div((0,i.xf5)(1))).toString(),maxContractPrice:(0,u.qN)(e.maxContractPrice).toString(),maxDownloadPrice:(0,u.qN)(e.maxDownloadPrice).toString(),maxUploadPrice:(0,u.qN)(e.maxUploadPrice).toString(),minMaxCollateral:(0,u.qN)(e.minMaxCollateral).toString(),hostBlockHeightLeeway:e.hostBlockHeightLeeway.toNumber()}}),o=await n.put({params:{key:"redundancy"},payload:{minShards:e.minShards.toNumber(),totalShards:e.totalShards.toNumber()}});if(r.error)throw Error(r.error);if(o.error)throw Error(o.error);(0,i.OPV)("Configuration has been saved.")}catch(c){(0,i.OHV)(c.message)}}}),j=(0,c.useCallback)(()=>{g.resetForm(),a.mutate(),t.mutate()},[g,a,t]);(0,c.useEffect)(()=>{let e=async()=>{if(a.data&&t.data)try{let e=a.data,r=t.data;await g.resetForm({values:{maxStoragePrice:(0,u.ll)(new(o())(e.maxStoragePrice).times((0,i.S5V)(1)).times((0,i.xf5)(1)),6),maxDownloadPrice:(0,u.ll)(e.maxDownloadPrice,6),maxUploadPrice:(0,u.ll)(e.maxUploadPrice,6),maxContractPrice:(0,u.ll)(e.maxContractPrice,6),maxRpcPrice:(0,u.ll)(e.maxRPCPrice,6),minMaxCollateral:(0,u.ll)(e.minMaxCollateral,6),hostBlockHeightLeeway:new(o())(e.hostBlockHeightLeeway),minShards:new(o())(r.minShards),totalShards:new(o())(r.totalShards)}})}catch(n){console.log(n)}};e()},[a.data,t.data]);let{changed:w,changeCount:k}=(0,i.VyY)(g);return(0,r.jsx)(m.J,{title:"Configuration",routes:l._,sidenav:(0,r.jsx)(s.e,{}),actions:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[!!k&&(0,r.jsx)(i.xvT,{size:"12",color:"subtle",children:1===k?"1 change":"".concat(k," changes")}),(0,r.jsx)(i.zxk,{tip:"Reset all changes",icon:"contrast",disabled:!k,onClick:()=>j(),children:(0,r.jsx)(i.Wet,{})}),(0,r.jsxs)(i.zxk,{tip:"Save all changes",variant:"accent",disabled:!k,onClick:()=>g.submitForm(),children:[(0,r.jsx)(i.ZEk,{}),"Save changes"]})]}),openSettings:()=>e("settings"),children:(0,r.jsxs)("div",{className:"p-6 flex flex-col gap-16 max-w-screen-xl",children:[(0,r.jsxs)(i.M9k,{title:"Gouging",children:[(0,r.jsx)(i.VXA,{title:"Max storage price",description:(0,r.jsx)(r.Fragment,{children:"The max allowed price to store 1 TB per month."}),control:(0,r.jsx)(i.ckm,{formik:g,changed:w,name:"maxStoragePrice",units:"SC/TB/month",decimalsLimitSc:6})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Max download price",description:(0,r.jsx)(r.Fragment,{children:"The max allowed price to download 1 TB."}),control:(0,r.jsx)(i.ckm,{formik:g,changed:w,name:"maxDownloadPrice",units:"SC/TB/month",decimalsLimitSc:6})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Max upload price",description:(0,r.jsx)(r.Fragment,{children:"The max allowed price to upload 1 TB."}),control:(0,r.jsx)(i.ckm,{formik:g,changed:w,name:"maxUploadPrice",units:"SC/TB/month",decimalsLimitSc:6})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Max contract price",description:(0,r.jsx)(r.Fragment,{children:"The max allowed price to form a contract."}),control:(0,r.jsx)(i.ckm,{formik:g,changed:w,name:"maxContractPrice",decimalsLimitSc:6})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Max RPC price",description:(0,r.jsx)(r.Fragment,{children:"The max allowed base price for RPCs."}),control:(0,r.jsx)(i.ckm,{formik:g,changed:w,name:"maxRpcPrice",decimalsLimitSc:6})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Min max collateral",description:(0,r.jsx)(r.Fragment,{children:"The minimum value for max collateral in the host's price settings."}),control:(0,r.jsx)(i.ckm,{formik:g,changed:w,name:"minMaxCollateral",decimalsLimitSc:6})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Block height leeway",description:(0,r.jsx)(r.Fragment,{children:"The amount of blocks of leeway given to the host block height in the host's price table."}),control:(0,r.jsx)(i.wmY,{formik:g,changed:w,name:"hostBlockHeightLeeway",units:"blocks",suggestion:new(o())(6),suggestionTip:"The recommended value is 6 blocks."})})]}),(0,r.jsxs)(i.M9k,{title:"Redundancy",children:[(0,r.jsx)(i.VXA,{title:"Min shards",description:(0,r.jsx)(r.Fragment,{children:"The minimum amount of shards needed to reconstruct a slab."}),control:(0,r.jsx)(i.wmY,{formik:g,changed:w,name:"minShards",units:"shards"})}),(0,r.jsx)(i.Z0O,{className:"w-full my-3"}),(0,r.jsx)(i.VXA,{title:"Total shards",description:(0,r.jsx)(r.Fragment,{children:"The total amount of shards for each slab."}),control:(0,r.jsx)(i.wmY,{formik:g,changed:w,name:"totalShards",units:"shards"})})]})]})})}function w(){return(0,r.jsx)(j,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7344)}),_N_E=e.O()}]);