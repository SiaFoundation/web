(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{98292:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/autopilot",function(){return n(99555)}])},10689:function(e,t,n){"use strict";n.d(t,{x:function(){return s}});var o=n(52322),i=n(69553);function s(e){let{title:t,children:n}=e;return(0,o.jsxs)("div",{className:"flex flex-col gap-6",children:[t&&(0,o.jsx)(i.X6q,{size:"24",children:t}),(0,o.jsx)(i.s_4,{className:"p-6",children:(0,o.jsx)("div",{className:"flex flex-col gap-6",children:n})})]})}},30362:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var o=n(52322),i=n(69553),s=n(73621),a=n(6391),r=n.n(a);function l(e){let t=(0,s.tM)();return(0,o.jsx)(i.tU3,{appName:"renterd",connectivityRoute:"/bus/consensus/state",walletBalance:t.data?new(r())(t.data):void 0,...e})}},15755:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var o=n(52322),i=n(69553),s=n(74881),a=n(13121);function r(){let{autopilotMode:e}=(0,a.K)();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.KJW,{title:"Files",route:s._.files.index,children:(0,o.jsx)(i.ROc,{})}),"on"===e&&(0,o.jsx)(i.KJW,{title:"Autopilot",route:s._.autopilot.index,children:(0,o.jsx)(i.aFQ,{})}),(0,o.jsx)(i.KJW,{title:"Contracts",route:s._.contracts.index,children:(0,o.jsx)(i.VBo,{})}),(0,o.jsx)(i.KJW,{title:"Hosts",route:s._.hosts.index,children:(0,o.jsx)(i.VHe,{})}),(0,o.jsx)(i.KJW,{title:"Configuration",route:s._.config.index,children:(0,o.jsx)(i.wWN,{})})]})}},34434:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var o=n(52322),i=n(69553);function s(e){let{title:t,description:n,suggestion:s,control:a}=e;return(0,o.jsxs)("div",{className:"flex gap-10 justify-between",children:[(0,o.jsxs)("div",{className:"flex flex-col gap-2 max-w-[600px]",children:[(0,o.jsx)(i.X6q,{size:"20",children:t}),(0,o.jsx)(i.nvN,{size:"14",children:n}),s&&(0,o.jsxs)(i.xvT,{color:"accent",children:["Suggestion: ",s]})]}),(0,o.jsx)("div",{className:"",children:a})]})}},99555:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return T}});var o=n(52322),i=n(69553),s=n(6391),a=n.n(s),r=n(2784),l=n(15755),c=n(74881),d=n(30650),u=n(30362),x=n(73621),m=n(63397),h=n(34434),p=n(10689),g=n(2288),w=n(24511);let f=w.Ry().shape({targetPrice:w.nK().optional(),set:w.Z_().required("required"),amount:w.nK().required("required"),allowance:w.nK().required("required"),period:w.nK().required("required"),renewWindow:w.nK().required("required"),download:w.nK().required("required"),upload:w.nK().required("required"),storage:w.Rx().required("required")}),j={targetPrice:void 0,set:"",amount:void 0,allowance:void 0,period:void 0,renewWindow:void 0,download:void 0,upload:void 0,storage:void 0},v=["targetPrice"];function y(){let{openDialog:e}=(0,d.Rh)(),t=(0,x.oe)(),n=(0,x.e$)({config:{swr:{revalidateOnFocus:!1}}}),s=(0,m.TA)({initialValues:j,validationSchema:f,onSubmit:async e=>{if(n.data)try{await t.put({payload:{contracts:{set:e.set,amount:e.amount.toNumber(),allowance:(0,g.qN)(e.allowance).toString(),period:(0,i.mvJ)(e.period.toNumber()),renewWindow:(0,i.mvJ)(e.renewWindow.toNumber()),download:(0,i.qAV)(e.download).toNumber(),upload:(0,i.qAV)(e.upload).toNumber(),storage:(0,i.qAV)(e.storage).toNumber()},hosts:n.data.hosts,wallet:n.data.wallet}}),(0,i.OPV)("Configuration has been saved.")}catch(o){s.setErrors(o)}}}),[w,y]=(0,r.useState)(new(a())(0)),T=(0,r.useCallback)(()=>{s.resetForm(),n.mutate()},[s,n]);(0,r.useEffect)(()=>{let e=async()=>{var e,t,o,r,l,c,d,u;if(!n.data)return;let x=null===(e=n.data)||void 0===e?void 0:e.contracts.set,m=(0,g.ll)(null===(t=n.data)||void 0===t?void 0:t.contracts.allowance,6),h=new(a())(null===(o=n.data)||void 0===o?void 0:o.contracts.amount),p=new(a())((0,i.x5w)(null===(r=n.data)||void 0===r?void 0:r.contracts.period)),w=new(a())((0,i.x5w)(null===(l=n.data)||void 0===l?void 0:l.contracts.renewWindow)),f=(0,i.mdB)(new(a())(null===(c=n.data)||void 0===c?void 0:c.contracts.download)),j=(0,i.mdB)(new(a())(null===(d=n.data)||void 0===d?void 0:d.contracts.upload)),v=(0,i.mdB)(new(a())(null===(u=n.data)||void 0===u?void 0:u.contracts.storage)),y=new(a())(0);v.isZero()||p.isZero()||(y=(0,g.IZ)(m.div(v.times(p)),0));try{await s.resetForm({values:{targetPrice:y,set:x,allowance:m,amount:h,period:p,renewWindow:w,download:f,upload:j,storage:v}})}catch(T){console.log(T)}};e()},[n.data]),(0,r.useEffect)(()=>{s.values.storage&&s.values.targetPrice&&s.values.period&&y((0,g.IZ)(s.values.storage.times(s.values.targetPrice).times(s.values.period),0))},[s.values.storage,s.values.period,s.values.targetPrice]);let{changed:N,changeCount:k}=(0,i.VyY)(s,v);return(0,o.jsx)(u.J,{title:"Autopilot",routes:c._,sidenav:(0,o.jsx)(l.e,{}),actions:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[!!k&&(0,o.jsx)(i.xvT,{size:"12",color:"subtle",children:1===k?"1 change":"".concat(k," changes")}),(0,o.jsx)(i.zxk,{tip:"Reset all changes",icon:"contrast",disabled:!k,onClick:()=>T(),children:(0,o.jsx)(i.Wet,{})}),(0,o.jsx)(i.zxk,{tip:"Save all changes",variant:"accent",disabled:!k,onClick:()=>s.submitForm(),children:"Save changes"})]}),openSettings:()=>e("settings"),children:(0,o.jsxs)("div",{className:"p-5 flex flex-col gap-16 max-w-screen-xl",children:[(0,o.jsx)(p.x,{title:"",children:(0,o.jsx)(h.p,{title:"Target price",description:(0,o.jsx)(o.Fragment,{children:"The target price you would like to pay per month to to store 1 TiB of data. This price and your expected utilization values are used to calculate a suggested allowance. Suggested values are shown below each input field."}),control:(0,o.jsx)(i.ckm,{formik:s,changed:N,name:"targetPrice",decimalsLimitSc:6})})}),(0,o.jsxs)(p.x,{title:"Estimates",children:[(0,o.jsx)(h.p,{title:"Expected storage",description:(0,o.jsx)(o.Fragment,{children:"The amount of storage you would like to rent in TiB."}),control:(0,o.jsx)(i.wmY,{formik:s,changed:N,name:"storage",units:"TiB"})}),(0,o.jsx)(i.Z0O,{className:"w-full my-3"}),(0,o.jsx)(h.p,{title:"Expected upload",description:(0,o.jsx)(o.Fragment,{children:"The amount of upload bandwidth you plan to use each month in TiB."}),control:(0,o.jsx)(i.wmY,{formik:s,changed:N,name:"upload",units:"TiB"})}),(0,o.jsx)(i.Z0O,{className:"w-full my-3"}),(0,o.jsx)(h.p,{title:"Expected download",description:(0,o.jsx)(o.Fragment,{children:"The amount of download bandwidth you plan to use each month in TiB."}),control:(0,o.jsx)(i.wmY,{formik:s,changed:N,name:"download",units:"TiB"})})]}),(0,o.jsxs)(p.x,{title:"Settings",children:[(0,o.jsx)(h.p,{title:"Allowance",description:(0,o.jsx)(o.Fragment,{children:"The amount of Siacoin you would like to spend for the period."}),control:(0,o.jsx)(i.ckm,{formik:s,changed:N,name:"allowance",decimalsLimitSc:6,suggestion:w,suggestionTip:"Suggested allowance based on your target price, expected usage, and period."})}),(0,o.jsx)(i.Z0O,{className:"w-full my-3"}),(0,o.jsx)(h.p,{title:"Period",description:(0,o.jsx)(o.Fragment,{children:"The length of the storage contracts."}),control:(0,o.jsx)(i.wmY,{formik:s,changed:N,name:"period",units:"weeks",suggestion:new(a())(6),suggestionTip:"Typically 6 weeks."})}),(0,o.jsx)(i.Z0O,{className:"w-full my-3"}),(0,o.jsx)(h.p,{title:"Renew window",description:(0,o.jsx)(o.Fragment,{children:"The number of weeks prior to contract expiration that Sia will attempt to renew your contracts."}),control:(0,o.jsx)(i.wmY,{formik:s,changed:N,name:"renewWindow",units:"weeks",suggestion:new(a())(2),suggestionTip:"Typically 2 weeks."})}),(0,o.jsx)(i.Z0O,{className:"w-full my-3"}),(0,o.jsx)(h.p,{title:"Hosts",description:(0,o.jsx)(o.Fragment,{children:"The number of hosts to create contracts with."}),control:(0,o.jsx)(i.wmY,{formik:s,changed:N,name:"amount",units:"hosts",suggestion:new(a())(50),suggestionTip:"Typically 50 hosts."})}),(0,o.jsx)(i.Z0O,{className:"w-full my-3"}),(0,o.jsx)(h.p,{title:"Contract set",description:(0,o.jsx)(o.Fragment,{children:"The contract set that autopilot should use."}),control:(0,o.jsx)(i.LLj,{formik:s,changed:N,name:"set",placeholder:"autopilot",suggestion:"autopilot",suggestionTip:(0,o.jsxs)(o.Fragment,{children:["The default contract set is ",(0,o.jsx)(i.EKh,{children:"autopilot"}),", only change this if you understand the implications."]})})})]})]})})}function T(){return(0,o.jsx)(y,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=98292)}),_N_E=e.O()}]);