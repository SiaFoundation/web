(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{57344:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config",function(){return t(5160)}])},10689:function(e,a,t){"use strict";t.d(a,{x:function(){return r}});var n=t(52322),i=t(95129);function r(e){let{title:a,children:t}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[a&&(0,n.jsx)(i.X6q,{size:"24",children:a}),(0,n.jsx)(i.s_4,{className:"p-6",children:(0,n.jsx)("div",{className:"flex flex-col gap-6",children:t})})]})}},62529:function(e,a,t){"use strict";t.d(a,{x:function(){return l}});var n=t(52322),i=t(95129),r=t(74881),s=t(89553);function l(){let{autopilotMode:e}=(0,s.V)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.KJW,{title:"Files",route:r._.files.index,children:(0,n.jsx)(i.ROc,{})}),"on"===e&&(0,n.jsx)(i.KJW,{title:"Autopilot",route:r._.autopilot.index,children:(0,n.jsx)(i.aFQ,{})}),(0,n.jsx)(i.KJW,{title:"Contracts",route:r._.contracts.index,children:(0,n.jsx)(i.VBo,{})}),(0,n.jsx)(i.KJW,{title:"Hosts",route:r._.hosts.index,children:(0,n.jsx)(i.VHe,{})}),(0,n.jsx)(i.KJW,{title:"Configuration",route:r._.config.index,children:(0,n.jsx)(i.wWN,{})})]})}},30362:function(e,a,t){"use strict";t.d(a,{J:function(){return r}});var n=t(52322),i=t(95129);function r(e){return(0,n.jsx)(i.tU3,{...e})}},34434:function(e,a,t){"use strict";t.d(a,{p:function(){return r}});var n=t(52322),i=t(95129);function r(e){let{title:a,description:t,suggestion:r,control:s}=e;return(0,n.jsxs)("div",{className:"flex gap-10 justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2 max-w-[600px]",children:[(0,n.jsx)(i.X6q,{size:"20",children:a}),(0,n.jsx)(i.nvN,{size:"14",children:t}),r&&(0,n.jsxs)(i.xvT,{color:"accent",children:["Suggestion: ",r]})]}),(0,n.jsx)("div",{className:"",children:s})]})}},5160:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return w}});var n=t(52322),i=t(95129),r=t(6391),s=t.n(r),l=t(2784),o=t(62529),c=t(74881),d=t(27259),x=t(30362),m=t(88815),u=t(63397),h=t(34434),g=t(10689);function p(){let{openDialog:e}=(0,d.Rh)(),a=(0,m.yu)({params:{key:"gouging"},config:{swr:{revalidateOnFocus:!1}}}),t=(0,m.yu)({params:{key:"redundancy"},config:{swr:{revalidateOnFocus:!1}}}),r=(0,m.Te)(),p=(0,u.TA)({initialValues:{maxRpcPrice:new(s())(0),maxStoragePrice:new(s())(0),maxContractPrice:new(s())(0),maxDownloadPrice:new(s())(0),maxUploadPrice:new(s())(0),minMaxCollateral:new(s())(0),hostBlockHeightLeeway:new(s())(0),minShards:new(s())(0),totalShards:new(s())(0)},onSubmit:async e=>{if(a.data&&t.data)try{let n=await r.put({payload:{gouging:JSON.stringify({maxRPCPrice:e.maxRpcPrice.toFixed(0).toString(),maxStoragePrice:e.maxStoragePrice.toFixed(0).toString(),maxContractPrice:e.maxContractPrice.toFixed(0).toString(),maxDownloadPrice:e.maxDownloadPrice.toFixed(0).toString(),maxUploadPrice:e.maxUploadPrice.toFixed(0).toString(),minMaxCollateral:e.minMaxCollateral.toFixed(0).toString(),hostBlockHeightLeeway:e.hostBlockHeightLeeway.toNumber()}),redundancy:JSON.stringify({minShards:e.minShards.toNumber(),totalShards:e.totalShards.toNumber()})}});if(n.error)throw Error(n.error);(0,i.OPV)("Configuration has been saved."),a.mutate(),t.mutate()}catch(s){(0,i.OHV)(s.message)}}});(0,l.useEffect)(()=>{let e=async()=>{if(a.data&&t.data)try{let e=JSON.parse(a.data),n=JSON.parse(t.data);await p.resetForm({values:{maxStoragePrice:new(s())(e.maxStoragePrice),maxDownloadPrice:new(s())(e.maxDownloadPrice),maxUploadPrice:new(s())(e.maxUploadPrice),maxContractPrice:new(s())(e.maxContractPrice),maxRpcPrice:new(s())(e.maxRPCPrice),minMaxCollateral:new(s())(e.minMaxCollateral),hostBlockHeightLeeway:new(s())(e.hostBlockHeightLeeway),minShards:new(s())(n.minShards),totalShards:new(s())(n.totalShards)}})}catch(i){console.log(i)}};e()},[a.data,t.data]);let{changed:w,changeCount:j}=(0,i.VyY)(p);return(0,n.jsx)(x.J,{title:"Configuration",routes:c._,sidenav:(0,n.jsx)(o.x,{}),actions:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[!!j&&(0,n.jsx)(i.xvT,{size:"12",color:"subtle",children:1===j?"1 change":"".concat(j," changes")}),(0,n.jsx)(i.zxk,{variant:"accent",disabled:!j,onClick:()=>p.submitForm(),children:"Save changes"})]}),openSettings:()=>e("settings"),children:(0,n.jsxs)("div",{className:"p-5 flex flex-col gap-16 max-w-screen-xl",children:[(0,n.jsxs)(g.x,{title:"Gouging",children:[(0,n.jsx)(h.p,{title:"Max storage price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price to store one TiB."}),control:(0,n.jsx)(i.ckm,{value:p.values.maxStoragePrice,changed:w.maxStoragePrice,onChange:e=>p.setFieldValue("maxStoragePrice",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Max download price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price to download one TiB."}),control:(0,n.jsx)(i.ckm,{value:p.values.maxDownloadPrice,changed:w.maxDownloadPrice,onChange:e=>p.setFieldValue("maxDownloadPrice",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Max upload price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price to upload one TiB."}),control:(0,n.jsx)(i.ckm,{value:p.values.maxUploadPrice,changed:w.maxUploadPrice,onChange:e=>p.setFieldValue("maxUploadPrice",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Max contract price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed price to form a contract."}),control:(0,n.jsx)(i.ckm,{value:p.values.maxContractPrice,changed:w.maxContractPrice,onChange:e=>p.setFieldValue("maxContractPrice",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Max RPC price",description:(0,n.jsx)(n.Fragment,{children:"The max allowed base price for RPCs."}),control:(0,n.jsx)(i.ckm,{value:p.values.maxRpcPrice,changed:w.maxRpcPrice,onChange:e=>p.setFieldValue("maxRpcPrice",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Min max collateral",description:(0,n.jsx)(n.Fragment,{children:"The minimum value for max collateral in the host's price settings."}),control:(0,n.jsx)(i.ckm,{value:p.values.minMaxCollateral,changed:w.minMaxCollateral,onChange:e=>p.setFieldValue("minMaxCollateral",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Block height leeway",description:(0,n.jsx)(n.Fragment,{children:"The amount of blocks of leeway given to hosts."}),control:(0,n.jsx)(i.wmY,{units:"blocks",value:p.values.hostBlockHeightLeeway,changed:w.hostBlockHeightLeeway,suggestion:new(s())(3),suggestionTip:"The recommended value is 3 blocks.",onChange:e=>p.setFieldValue("hostBlockHeightLeeway",e)})})]}),(0,n.jsxs)(g.x,{title:"Redundancy",children:[(0,n.jsx)(h.p,{title:"Min shards",description:(0,n.jsx)(n.Fragment,{children:"The minimum amount of shards needed to reconstruct a slab."}),control:(0,n.jsx)(i.wmY,{units:"shards",value:p.values.minShards,changed:w.minShards,onChange:e=>p.setFieldValue("minShards",e)})}),(0,n.jsx)(i.Z0O,{className:"w-full my-3"}),(0,n.jsx)(h.p,{title:"Total shards",description:(0,n.jsx)(n.Fragment,{children:"The total amount of shards for each slab."}),control:(0,n.jsx)(i.wmY,{units:"shards",value:p.values.totalShards,changed:w.totalShards,onChange:e=>p.setFieldValue("totalShards",e)})})]})]})})}function w(){return(0,n.jsx)(p,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=57344)}),_N_E=e.O()}]);