(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{98292:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/autopilot",function(){return n(99555)}])},10689:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var s=n(52322),o=n(95129);function a(e){let{title:t,children:n}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[t&&(0,s.jsx)(o.X6q,{size:"24",children:t}),(0,s.jsx)(o.s_4,{className:"p-6",children:(0,s.jsx)("div",{className:"flex flex-col gap-6",children:n})})]})}},62529:function(e,t,n){"use strict";n.d(t,{x:function(){return l}});var s=n(52322),o=n(95129),a=n(74881),i=n(89553);function l(){let{autopilotMode:e}=(0,i.V)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.KJW,{title:"Files",route:a._.files.index,children:(0,s.jsx)(o.ROc,{})}),"on"===e&&(0,s.jsx)(o.KJW,{title:"Autopilot",route:a._.autopilot.index,children:(0,s.jsx)(o.aFQ,{})}),(0,s.jsx)(o.KJW,{title:"Contracts",route:a._.contracts.index,children:(0,s.jsx)(o.VBo,{})}),(0,s.jsx)(o.KJW,{title:"Hosts",route:a._.hosts.index,children:(0,s.jsx)(o.VHe,{})}),(0,s.jsx)(o.KJW,{title:"Configuration",route:a._.config.index,children:(0,s.jsx)(o.wWN,{})})]})}},30362:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var s=n(52322),o=n(95129);function a(e){return(0,s.jsx)(o.tU3,{...e})}},34434:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var s=n(52322),o=n(95129);function a(e){let{title:t,description:n,suggestion:a,control:i}=e;return(0,s.jsxs)("div",{className:"flex gap-10 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 max-w-[600px]",children:[(0,s.jsx)(o.X6q,{size:"20",children:t}),(0,s.jsx)(o.nvN,{size:"14",children:n}),a&&(0,s.jsxs)(o.xvT,{color:"accent",children:["Suggestion: ",a]})]}),(0,s.jsx)("div",{className:"",children:i})]})}},99555:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n(52322),o=n(95129),a=n(6391),i=n.n(a),l=n(2784),r=n(62529),c=n(74881),d=n(27259),u=n(30362),x=n(88815),h=n(63397),w=n(34434),g=n(10689);function p(){let{openDialog:e}=(0,d.Rh)(),t=(0,x.oe)(),n=(0,x.e$)({config:{swr:{revalidateOnFocus:!1}}}),a=(0,h.TA)({initialValues:{set:"",amount:new(i())(0),allowance:new(i())(0),period:new(i())(0),renewWindow:new(i())(0),download:new(i())(0),upload:new(i())(0),storage:new(i())(0)},onSubmit:async(e,s)=>{if(n.data)try{await t.put({payload:{contracts:{set:e.set,amount:e.amount.toNumber(),allowance:e.allowance.toFixed(0).toString(),period:(0,o.mvJ)(e.period.toNumber()),renewWindow:(0,o.mvJ)(e.renewWindow.toNumber()),download:j(e.download).toNumber(),upload:j(e.upload).toNumber(),storage:j(e.storage).toNumber()},hosts:n.data.hosts,wallet:n.data.wallet}}),(0,o.OPV)("Configuration has been saved."),n.mutate()}catch(i){a.setErrors(i)}}}),[p,v]=(0,l.useState)(new(i())(0)),[f,T]=(0,l.useState)(new(i())(0));(0,l.useEffect)(()=>{let e=async()=>{var e,t,s,l,r,c,d,u;if(!n.data)return;let x=null===(e=n.data)||void 0===e?void 0:e.contracts.set,h=new(i())(null===(t=n.data)||void 0===t?void 0:t.contracts.allowance),w=new(i())(null===(s=n.data)||void 0===s?void 0:s.contracts.amount),g=new(i())((0,o.x5w)(null===(l=n.data)||void 0===l?void 0:l.contracts.period)),p=new(i())((0,o.x5w)(null===(r=n.data)||void 0===r?void 0:r.contracts.renewWindow)),j=m(new(i())(null===(c=n.data)||void 0===c?void 0:c.contracts.download)),f=m(new(i())(null===(d=n.data)||void 0===d?void 0:d.contracts.upload)),T=m(new(i())(null===(u=n.data)||void 0===u?void 0:u.contracts.storage));try{await a.resetForm({values:{set:x,allowance:h,amount:w,period:g,renewWindow:p,download:j,upload:f,storage:T}})}catch(y){console.log(y)}T.isZero()||g.isZero()||v(h.div(T.times(g)))};e()},[n.data]),(0,l.useEffect)(()=>{T(a.values.storage.times(p).times(a.values.period).integerValue())},[a.values.storage,a.values.period,p]);let{changed:y,changeCount:N}=(0,o.VyY)(a);return(0,s.jsx)(u.J,{title:"Autopilot",routes:c._,sidenav:(0,s.jsx)(r.x,{}),actions:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!!N&&(0,s.jsx)(o.xvT,{size:"12",color:"subtle",children:1===N?"1 change":"".concat(N," changes")}),(0,s.jsx)(o.zxk,{variant:"accent",disabled:!N,onClick:()=>a.submitForm(),children:"Save changes"})]}),openSettings:()=>e("settings"),children:(0,s.jsxs)("div",{className:"p-5 flex flex-col gap-16 max-w-screen-xl",children:[(0,s.jsx)(g.x,{title:"",children:(0,s.jsx)(w.p,{title:"Target price",description:(0,s.jsx)(s.Fragment,{children:"The target price you would like to pay per month to to store 1 TB of data. This price and your expected utilization values are used to calculate a suggested allowance. Suggested values are shown below each input field."}),control:(0,s.jsx)(o.ckm,{value:p,onChange:v})})}),(0,s.jsxs)(g.x,{title:"Estimates",children:[(0,s.jsx)(w.p,{title:"Expected storage",description:(0,s.jsx)(s.Fragment,{children:"The amount of storage you would like to rent in TB."}),control:(0,s.jsx)(o.wmY,{units:"TB",value:a.values.storage,changed:y.storage,onChange:e=>a.setFieldValue("storage",e)})}),(0,s.jsx)(o.Z0O,{className:"w-full my-3"}),(0,s.jsx)(w.p,{title:"Expected upload",description:(0,s.jsx)(s.Fragment,{children:"The amount of upload bandwidth you plan to use each month in TB."}),control:(0,s.jsx)(o.wmY,{units:"TB",value:a.values.upload,changed:y.upload,onChange:e=>a.setFieldValue("upload",e)})}),(0,s.jsx)(o.Z0O,{className:"w-full my-3"}),(0,s.jsx)(w.p,{title:"Expected download",description:(0,s.jsx)(s.Fragment,{children:"The amount of download bandwidth you plan to use each month in TB."}),control:(0,s.jsx)(o.wmY,{units:"TB",changed:y.download,value:a.values.download,onChange:e=>a.setFieldValue("download",e)})})]}),(0,s.jsxs)(g.x,{title:"Settings",children:[(0,s.jsx)(w.p,{title:"Allowance",description:(0,s.jsx)(s.Fragment,{children:"The amount of Siacoin you would like to spend for the period."}),control:(0,s.jsx)(o.ckm,{value:a.values.allowance,changed:y.allowance,onChange:e=>a.setFieldValue("allowance",e),suggestion:f,decimalsLimitSc:0,suggestionTip:"Suggested allowance based on your target price, expected usage, and period."})}),(0,s.jsx)(o.Z0O,{className:"w-full my-3"}),(0,s.jsx)(w.p,{title:"Period",description:(0,s.jsx)(s.Fragment,{children:"The length of the storage contracts."}),control:(0,s.jsx)(o.wmY,{units:"weeks",value:a.values.period,changed:y.period,onChange:e=>a.setFieldValue("period",e),suggestion:new(i())(6),suggestionTip:"Typically 6 weeks."})}),(0,s.jsx)(o.Z0O,{className:"w-full my-3"}),(0,s.jsx)(w.p,{title:"Renew window",description:(0,s.jsx)(s.Fragment,{children:"The number of weeks prior to contract expiration that Sia will attempt to renew your contracts."}),control:(0,s.jsx)(o.wmY,{units:"weeks",value:a.values.renewWindow,changed:y.renewWindow,onChange:e=>a.setFieldValue("renewWindow",e),suggestion:new(i())(2),suggestionTip:"Typically 2 weeks."})}),(0,s.jsx)(o.Z0O,{className:"w-full my-3"}),(0,s.jsx)(w.p,{title:"Hosts",description:(0,s.jsx)(s.Fragment,{children:"The number of hosts to create contracts with."}),control:(0,s.jsx)(o.wmY,{units:"hosts",changed:y.amount,value:a.values.amount,onChange:e=>a.setFieldValue("amount",e),suggestion:new(i())(50),suggestionTip:"Typically 50 hosts."})}),(0,s.jsx)(o.Z0O,{className:"w-full my-3"}),(0,s.jsx)(w.p,{title:"Contract set",description:(0,s.jsx)(s.Fragment,{children:"The contract set that autopilot should use."}),control:(0,s.jsx)(o.LLj,{changed:y.set,value:a.values.set,onChange:e=>a.setFieldValue("set",e),suggestion:"autopilot",suggestionTip:(0,s.jsxs)(s.Fragment,{children:["The default contract set is ",(0,s.jsx)(o.EKh,{children:"autopilot"}),", only change this if you understand the implications."]})})})]})]})})}function m(e){return e.div(1024).div(1024).div(1024).div(1024)}function j(e){return e.times(1024).times(1024).times(1024).times(1024)}function v(){return(0,s.jsx)(p,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=98292)}),_N_E=e.O()}]);