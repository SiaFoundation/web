(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80046,84985,71664,e=>{"use strict";var t=e.i(91398);e.i(86663);var l=e.i(54413),s=e.i(67419);e.i(71487);var a=e.i(76993),i=e.i(91788),n=e.i(84588);e.i(37869);var o=e.i(93936),c=e.i(26566);function r({multiSelect:e,publicKeys:r}){let{openConfirmDialog:u}=(0,n.useDialog)(),d=(0,c.useAllowlistUpdate)(),x=(0,i.useCallback)(async()=>{d(r,[]),e.deselectAll()},[d,e,r]);return(0,t.jsxs)(l.Button,{"aria-label":"add host public keys to allowlist",tip:"Add host public keys to allowlist",onClick:()=>{u({title:`Add ${(0,o.pluralize)(e.selectionCount,"host")} to allowlist`,action:"Add to allowlist",variant:"accent",body:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsxs)(s.Paragraph,{size:"14",children:["Are you sure you would like to add"," ",(0,o.pluralize)(e.selectionCount,"host public key")," to the allowlist?"]})}),onConfirm:x})},children:[(0,t.jsx)(a.ListChecked16,{}),"Add hosts to allowlist"]})}function u({multiSelect:e,publicKeys:r}){let{openConfirmDialog:u}=(0,n.useDialog)(),d=(0,c.useAllowlistUpdate)(),x=(0,i.useCallback)(async()=>{await d([],r),e.deselectAll()},[d,e,r]);return(0,t.jsxs)(l.Button,{"aria-label":"remove host public keys from allowlist",tip:"Remove host public keys from allowlist",onClick:()=>{u({title:`Remove ${(0,o.pluralize)(e.selectionCount,"host")} from allowlist`,action:"Remove from allowlist",variant:"accent",body:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsxs)(s.Paragraph,{size:"14",children:["Are you sure you would like to remove"," ",(0,o.pluralize)(e.selectionCount,"host public key")," from the allowlist?"]})}),onConfirm:x})},children:[(0,t.jsx)(a.ListChecked16,{}),"Remove hosts from allowlist"]})}e.s(["BulkAddAllowlist",()=>r],80046),e.s(["BulkRemoveAllowlist",()=>u],84985);var d=e.i(46193);e.i(86283);var x=e.i(53658),h=e.i(41399);function m({multiSelect:e,publicKeys:s}){let n=(0,x.useHostScan)(),c=(0,i.useCallback)(async()=>{await (0,d.handleBatchOperation)(s.map(e=>n.post({params:{hostkey:e},payload:{timeout:(0,h.secondsInMilliseconds)(30)}})),{toastError:({successCount:e,errorCount:t,totalCount:l})=>({title:`Rescanning ${(0,o.pluralize)(e,"host")}`,body:`Error starting rescan for ${t}/${l} of total hosts.`}),toastSuccess:({totalCount:e})=>({title:`Rescanning ${(0,o.pluralize)(e,"host")}`}),after:()=>{e.deselectAll()}})},[e,s,n]);return(0,t.jsx)(l.Button,{"aria-label":"rescan selected hosts",tip:"Rescan selected hosts",onClick:c,children:(0,t.jsx)(a.DataView16,{})})}e.s(["BulkRescanHosts",()=>m],71664)},62969,e=>{"use strict";var t=e.i(91398);e.i(86663);var l=e.i(4885),s=e.i(40410),a=e.i(22494),i=e.i(26093),n=e.i(929);e.i(71487);var o=e.i(76993);function c(){return(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(n.Text,{children:(0,t.jsx)(o.Filter32,{className:"scale-[200%]"})}),(0,t.jsx)(n.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"No active contracts matching filters."})]})}var r=e.i(73478);function u(){return(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(n.Text,{children:(0,t.jsx)(r.FileContractIcon,{className:"scale-[200%]"})}),(0,t.jsx)(n.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"There are currently no active contracts. Configure autopilot or manually form contracts to get started."})]})}function d({error:e}){return e?.message.startsWith("404")?(0,t.jsx)(u,{}):(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(n.Text,{children:(0,t.jsx)(o.MisuseOutline32,{className:"scale-[200%]"})}),(0,t.jsx)(n.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching contracts."})]})}var x=e.i(48684),h=e.i(54413),m=e.i(6367),p=e.i(50529);function j(){return(0,t.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,t.jsx)(n.Text,{children:(0,t.jsx)(o.ChartArea32,{className:"scale-[200%]"})}),(0,t.jsx)(n.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"No data available."})]})}function g(){let{selectedContract:e,allContractsSpendingMetrics:l,selectedContractSpendingMetrics:s,graphMode:a,setGraphMode:n}=(0,i.useContracts)(),o=(0,t.jsxs)("div",{className:"flex gap-2",children:[!e&&(0,t.jsx)(h.Button,{variant:"spending"===a?"accent":"gray",onClick:()=>n("spending"),children:"Funding & spending: All contracts"}),e&&(0,t.jsxs)(h.Button,{variant:"spending"===a?"accent":"gray",onClick:()=>n("spending"),children:["Funding & spending: Contract"," ",(0,p.stripPrefix)(e.id).slice(0,6)]})]});return(0,t.jsxs)("div",{className:"w-full h-full",children:["spending"===a&&!e&&(0,t.jsx)(m.ChartXY,{id:"renterd/v0/contracts/graphs/fundingAndSpending",height:"100%",data:l.data,config:l.config,isLoading:l.isLoading,actionsLeft:o,emptyState:(0,t.jsx)(j,{})}),"spending"===a&&e&&(0,t.jsx)(m.ChartXY,{id:"renterd/v0/contracts/graphs/fundingAndSpending",height:"100%",data:s.data,config:s.config,isLoading:s.isLoading,actionsLeft:o,emptyState:(0,t.jsx)(j,{})})]})}function f(){let{visibleColumns:e,datasetPage:n,sortField:o,sortDirection:r,sortableColumns:h,toggleSort:m,limit:p,datasetState:j,cellContext:f,error:v,viewMode:b,filters:C,selectedContract:y}=(0,i.useContracts)(),w="detail"===b&&(!C.length||y),k=w?n&&n.length?`${400-Math.max((2-n.length)*100,0)}px`:"400px":"100%";return(0,t.jsxs)("div",{className:"relative flex flex-col overflow-hidden h-full w-full",children:[(0,t.jsx)("div",{className:(0,x.cx)("absolute w-full",w?"block":"invisible","transition-all","p-6"),style:{height:w?`calc(100% - ${k})`:0},children:w?(0,t.jsx)(g,{}):null}),(0,t.jsx)("div",{className:(0,x.cx)("absolute overflow-hidden transition-all w-full","duration-300","overflow-hidden"),style:{bottom:0,height:k},children:(0,t.jsx)(s.ScrollArea,{className:"z-0",children:(0,t.jsx)("div",{className:(0,x.cx)(w?"pb-6 px-6":"p-6","min-w-fit"),children:(0,t.jsx)(a.Table,{testId:"contractsTable",context:f,isLoading:"loading"===j,emptyState:(0,t.jsx)(l.EmptyState,{datasetState:j,noneMatching:(0,t.jsx)(c,{}),noneYet:(0,t.jsx)(u,{}),error:(0,t.jsx)(d,{error:v})}),sortableColumns:h,pageSize:p,data:n,columns:e,sortDirection:r,sortField:o,toggleSort:m,rowSize:"default"})})})})]})}var v=e.i(65667),b=e.i(43652),C=e.i(84588),y=e.i(7357),w=e.i(34666),k=e.i(59651),S=e.i(34530),A=e.i(33124),N=e.i(7880),B=e.i(78114),T=e.i(92559);e.i(19513);var M=e.i(36409);function P(){let{configurableColumns:e,toggleColumnVisibility:l,resetDefaultColumnVisibility:s,setColumnsVisible:a,setColumnsHidden:n,sortField:c,setSortField:r,sortDirection:u,setSortDirection:d,visibleColumnIds:x}=(0,i.useContracts)(),m=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id})),p=e.filter(e=>"time"===e.category).map(e=>({label:e.label,value:e.id})),j=e.filter(e=>"financial"===e.category).map(e=>({label:e.label,value:e.id}));return(0,t.jsxs)(A.Popover,{trigger:(0,t.jsxs)(h.Button,{"aria-label":"configure view",size:"small",tip:"Configure view",tipAlign:"end",children:[(0,t.jsx)(o.SettingsAdjust16,{}),"View",(0,t.jsx)(o.CaretDown16,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,t.jsxs)(N.BaseMenuItem,{children:[(0,t.jsx)(S.Label,{children:"Order by"}),(0,t.jsx)(N.MenuItemRightSlot,{children:(0,t.jsx)(w.Select,{value:c,onChange:e=>{r(e.currentTarget.value)},children:Object.entries((0,M.groupBy)(T.sortOptions,"category")).map(([e,l])=>(0,t.jsx)("optgroup",{label:e,children:l.map(e=>(0,t.jsx)(w.Option,{value:e.id,children:e.label},e.id))},e))})})]}),(0,t.jsxs)(N.BaseMenuItem,{children:[(0,t.jsx)(S.Label,{children:"Direction"}),(0,t.jsx)(N.MenuItemRightSlot,{children:(0,t.jsxs)(w.Select,{value:u,onClick:e=>{e.stopPropagation()},onChange:e=>{d(e.currentTarget.value)},children:[(0,t.jsx)(w.Option,{value:"desc",children:"descending"},"desc"),(0,t.jsx)(w.Option,{value:"asc",children:"ascending"},"asc")]})})]}),(0,t.jsx)(N.MenuSeparator,{}),(0,t.jsxs)(N.BaseMenuItem,{children:[(0,t.jsx)(S.Label,{children:"Display properties"}),(0,t.jsx)(N.MenuItemRightSlot,{children:(0,t.jsx)(h.Button,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),s()},children:(0,t.jsx)(o.Reset16,{})})})]}),(0,t.jsx)(B.MenuSectionLabelToggleAll,{label:"General",columns:m.map(e=>e.value),enabled:x,setColumnsVisible:a,setColumnsHidden:n}),(0,t.jsx)(N.BaseMenuItem,{children:(0,t.jsx)(k.PoolCombo,{options:m,values:x,onChange:e=>l(e)})}),(0,t.jsx)(B.MenuSectionLabelToggleAll,{label:"Time",columns:p.map(e=>e.value),enabled:x,setColumnsVisible:a,setColumnsHidden:n}),(0,t.jsx)(N.BaseMenuItem,{children:(0,t.jsx)(k.PoolCombo,{options:p,values:x,onChange:e=>l(e)})}),(0,t.jsx)(B.MenuSectionLabelToggleAll,{label:"Financial",columns:j.map(e=>e.value),enabled:x,setColumnsVisible:a,setColumnsHidden:n}),(0,t.jsx)(N.BaseMenuItem,{children:(0,t.jsx)(k.PoolCombo,{options:j,values:x,onChange:e=>l(e)})})]})}function L(){let{setViewMode:e}=(0,i.useContracts)();return(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(h.Button,{tip:"Toggle graphs",onClick:()=>e(e=>"detail"===e?"list":"detail"),children:(0,t.jsx)(o.ChartArea16,{})}),(0,t.jsx)(P,{})]})}var R=e.i(20770),z=e.i(77786),D=e.i(41490),O=e.i(21324),E=e.i(10483),I=e.i(91788),$=e.i(66153);function F(){let{filters:e,removeFilter:l,removeLastFilter:a}=(0,i.useContracts)(),[n,c]=(0,I.useState)(!1),[r,u]=(0,I.useState)(""),[d,x]=(0,I.useState)([]),m=d[d.length-1],p=(d.length,(0,I.useRef)(null)),j=(0,I.useRef)(null),g=(0,I.useCallback)(e=>{x(t=>[...t,e])},[x]),f=(0,I.useCallback)(()=>{x([])},[x]);(0,I.useEffect)(()=>{let e=e=>{p.current&&!p.current.contains(e.target)&&c(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let v=(0,I.useCallback)(()=>{j.current?.focus()},[j]),b=(0,I.useCallback)(()=>{u(""),f()},[f]);return(0,t.jsxs)("div",{className:"flex gap-1",children:[e.map(e=>(0,t.jsxs)(O.ControlGroup,{children:[(0,t.jsx)(h.Button,{variant:"active",state:"waiting",children:e.label}),(0,t.jsx)(h.Button,{variant:"active",size:"small",onClick:()=>l(e.id),children:(0,t.jsx)(o.Close16,{})})]},e.id)),(0,t.jsxs)(E.Command,{ref:p,label:"Command Menu",onFocus:()=>c(!0),onKeyDown:e=>{d.length>0?"Escape"!==e.key&&("Backspace"!==e.key||r)||(e.preventDefault(),x(e=>e.slice(0,-1))):0===d.length&&("Backspace"!==e.key||r||a(),"Escape"!==e.key||r||(c(!1),j.current?.blur()))},children:[(0,t.jsx)(E.Command.Input,{"aria-label":"filter contracts",name:"filter-contracts-menu-input",ref:j,value:r,onValueChange:u,className:(0,z.textFieldStyles)({variant:"ghost",focus:"none"}),placeholder:"Filter contracts"}),n&&(0,t.jsx)(D.Panel,{className:"absolute z-20 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,t.jsxs)(s.ScrollArea,{children:[m&&(0,t.jsx)(S.Label,{className:"px-1.5 py-1",children:m.label}),(0,t.jsx)(E.Command.List,{children:(0,t.jsx)($.ContractsFilterCmd,{currentPage:m,beforeSelect:v,afterSelect:b,pushPage:g})})]})})]})]})}function K(){let{datasetState:e,offset:l,limit:s,datasetFilteredTotal:a}=(0,i.useContracts)();return(0,t.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,t.jsx)(F,{}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(R.PaginatorKnownTotal,{isLoading:"loading"===e,offset:l,limit:s,total:a})]})}var _=e.i(11895),H=e.i(46193),V=e.i(67419);e.i(86283);var X=e.i(53658);e.i(37869);var U=e.i(93936);function Y(){let{multiSelect:e}=(0,i.useContracts)(),l=(0,I.useMemo)(()=>Object.entries(e.selection).map(([e,t])=>t.id),[e.selection]),{openConfirmDialog:s}=(0,C.useDialog)(),a=(0,X.useContractDelete)(),n=(0,I.useCallback)(async()=>{await (0,H.handleBatchOperation)(l.map(e=>a.delete({params:{id:e}})),{toastError:({successCount:e,errorCount:t,totalCount:l})=>({title:`${(0,U.pluralize)(e,"contract")} deleted`,body:`Error deleting ${t}/${l} total contracts.`}),toastSuccess:({totalCount:e})=>({title:`${(0,U.pluralize)(e,"contract")} deleted`}),after:()=>{e.deselectAll()}})},[e,l,a]);return(0,t.jsx)(h.Button,{"aria-label":"delete selected contracts",tip:"Delete selected contracts",onClick:()=>{s({title:"Delete contracts",action:"Delete",variant:"red",body:(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsxs)(V.Paragraph,{size:"14",children:["Are you sure you would like to delete the"," ",(0,U.pluralize)(e.selectionCount,"selected contract"),"?"]})}),onConfirm:async()=>{n()}})},children:(0,t.jsx)(o.Delete16,{})})}var G=e.i(80046);function W(){let{multiSelect:e}=(0,i.useContracts)(),l=(0,I.useMemo)(()=>Object.entries(e.selection).map(([e,t])=>t.hostKey),[e.selection]);return(0,t.jsx)(G.BulkAddAllowlist,{multiSelect:e,publicKeys:l})}var q=e.i(84985);function J(){let{multiSelect:e}=(0,i.useContracts)(),l=(0,I.useMemo)(()=>Object.entries(e.selection).map(([e,t])=>t.hostKey),[e.selection]);return(0,t.jsx)(q.BulkRemoveAllowlist,{multiSelect:e,publicKeys:l})}var Q=e.i(71664);function Z(){let{multiSelect:e}=(0,i.useContracts)(),l=(0,I.useMemo)(()=>Object.entries(e.selection).map(([e,t])=>t.hostKey),[e.selection]);return(0,t.jsx)(Q.BulkRescanHosts,{multiSelect:e,publicKeys:l})}function ee(){let{multiSelect:e}=(0,i.useContracts)();return(0,t.jsxs)(_.MultiSelectionMenu,{multiSelect:e,entityWord:"contract",children:[(0,t.jsx)(W,{}),(0,t.jsx)(J,{}),(0,t.jsx)(Z,{}),(0,t.jsx)(Y,{})]})}function et(){return(0,t.jsx)(f,{})}et.Layout=y.RenterdAuthedLayout,et.useLayoutProps=function(){let{openDialog:e}=(0,C.useDialog)();return{title:"Active contracts",routes:b.routes,sidenav:(0,t.jsx)(v.RenterdSidenav,{}),openSettings:()=>e("settings"),actions:(0,t.jsx)(L,{}),stats:(0,t.jsx)(K,{}),size:"full",scroll:!1,dockedControls:(0,t.jsx)(ee,{})}},e.s(["default",()=>et],62969)},36518,(e,t,l)=>{let s="/contracts";(window.__NEXT_P=window.__NEXT_P||[]).push([s,()=>e.r(62969)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([s])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/54f26a8bf797519f.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/700022329b1c82af.js"].map(t=>e.l(t))).then(()=>t(79466)))},69796,e=>{e.v(t=>Promise.all(["static/chunks/c0a88d8f93bce614.js"].map(t=>e.l(t))).then(()=>t(41159)))}]);