(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{8198:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/keys",function(){return t(63052)}])},63052:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var l=t(6029),n=t(59617),i=t(4968);function r(){return(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,l.jsx)(n.EYj,{children:(0,l.jsx)(i.oio,{className:"scale-[200%]"})}),(0,l.jsx)(n.EYj,{color:"subtle",className:"text-center max-w-[500px]",children:"No keys matching filters."})]})}var a=t(18449);function c(){let{openDialog:e}=(0,a.sp)();return(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,l.jsx)(n.EYj,{children:(0,l.jsx)(i.RYV,{size:64})}),(0,l.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,l.jsx)(n.EYj,{color:"subtle",className:"text-center max-w-[500px]",children:"There are no S3 authentication keypairs yet. Create one to get started."}),(0,l.jsx)(n.$nd,{onClick:()=>{e("keysCreate")},children:"Create keypair"})]})]})}function o(){return(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,l.jsx)(n.EYj,{children:(0,l.jsx)(i.YA5,{className:"scale-[200%]"})}),(0,l.jsx)(n.EYj,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching keys."})]})}var d=t(3139);function x(){let{visibleColumns:e,datasetPage:s,sortField:t,sortDirection:i,sortableColumns:a,toggleSort:x,limit:u,datasetState:j,cellContext:h}=(0,d._)();return(0,l.jsx)("div",{className:"p-6 min-w-fit",children:(0,l.jsx)(n.XIK,{testId:"keysTable",isLoading:"loading"===j,emptyState:(0,l.jsx)(n.ppr,{datasetState:j,noneMatching:(0,l.jsx)(r,{}),noneYet:(0,l.jsx)(c,{}),error:(0,l.jsx)(o,{})}),sortableColumns:a,pageSize:u,data:s,context:h,columns:e,sortDirection:i,sortField:t,toggleSort:x,rowSize:"default"})})}var u=t(20820),j=t(80698),h=t(30947),p=t(10064),f=t(45765);function y(){let{configurableColumns:e,toggleColumnVisibility:s,resetDefaultColumnVisibility:t,setColumnsVisible:r,setColumnsHidden:a,sortField:c,setSortField:o,sortDirection:x,setSortDirection:u,visibleColumnIds:j}=(0,d._)(),h=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id}));return(0,l.jsxs)(n.AMh,{trigger:(0,l.jsxs)(n.$nd,{size:"small",tip:"Configure view",tipAlign:"end",children:[(0,l.jsx)(i.s7Y,{}),"View",(0,l.jsx)(i.NNJ,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,l.jsxs)(n.iy7,{children:[(0,l.jsx)(n.JU7,{children:"Order by"}),(0,l.jsx)(n.DF3,{children:(0,l.jsx)(n.l6P,{value:c,onChange:e=>{o(e.currentTarget.value)},children:Object.entries((0,f.A)(p.vP,"category")).map(e=>{let[s,t]=e;return(0,l.jsx)("optgroup",{label:s,children:t.map(e=>(0,l.jsx)(n.c$x,{value:e.id,children:e.label},e.id))},s)})})})]}),(0,l.jsxs)(n.iy7,{children:[(0,l.jsx)(n.JU7,{children:"Direction"}),(0,l.jsx)(n.DF3,{children:(0,l.jsxs)(n.l6P,{value:x,onClick:e=>{e.stopPropagation()},onChange:e=>{u(e.currentTarget.value)},children:[(0,l.jsx)(n.c$x,{value:"desc",children:"descending"},"desc"),(0,l.jsx)(n.c$x,{value:"asc",children:"ascending"},"asc")]})})]}),(0,l.jsx)(n.bXX,{}),(0,l.jsxs)(n.iy7,{children:[(0,l.jsx)(n.JU7,{children:"Display properties"}),(0,l.jsx)(n.DF3,{children:(0,l.jsx)(n.$nd,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),t()},children:(0,l.jsx)(i.ZxO,{})})})]}),(0,l.jsx)(n.IJR,{label:"General",columns:h.map(e=>e.value),enabled:j,setColumnsVisible:r,setColumnsHidden:a}),(0,l.jsx)(n.iy7,{children:(0,l.jsx)(n.PSc,{options:h,values:j,onChange:e=>s(e)})})]})}function m(){let{openDialog:e}=(0,a.sp)();return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(n.$nd,{onClick:()=>e("keysCreate"),children:[(0,l.jsx)(i.X4t,{}),"Create keypair"]}),(0,l.jsx)(y,{})]})}function g(){let{limit:e,offset:s,datasetTotal:t,datasetState:i}=(0,d._)();return(0,l.jsxs)("div",{className:"flex w-full",children:[(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsx)(n.LmH,{offset:s,limit:e,total:t,isLoading:"loading"===i})]})}var v=t(56523),k=t(55729),C=t(95775);function N(){let{multiSelect:e}=(0,d._)(),s=(0,k.useMemo)(()=>Object.entries(e.selection).map(e=>{let[s,t]=e;return t.key}),[e.selection]),{openConfirmDialog:t}=(0,a.sp)(),r=(0,v.ro)(),c=(0,v.E2)(),o=(0,k.useCallback)(async()=>{var t;if(!r.data)return void(0,n.el3)({title:"Error deleting key"});let l=(0,C.A)(null==(t=r.data)?void 0:t.authentication.v4Keypairs,s),i=await c.put({payload:{...r.data,authentication:{...r.data.authentication,v4Keypairs:l}}});e.deselectAll(),i.error?(0,n.el3)({title:"Error deleting keys",body:i.error}):(0,n.VE1)({title:"Keys deleted"})},[r.data,c,e,s]);return(0,l.jsx)(n.$nd,{"aria-label":"delete selected keys",tip:"Delete selected keys",onClick:()=>{t({title:"Delete keys",action:"Delete",variant:"red",body:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsxs)(n.fzL,{size:"14",children:["Are you sure you would like to delete the"," ",e.selectionCount.toLocaleString()," selected keys?"]})}),onConfirm:async()=>{o()}})},children:(0,l.jsx)(i.$$D,{})})}function b(){let{multiSelect:e}=(0,d._)();return(0,l.jsx)(n.ptQ,{multiSelect:e,entityWord:"key",children:(0,l.jsx)(N,{})})}function w(){return(0,l.jsx)(x,{})}w.Layout=h.C,w.useLayoutProps=function(){let{openDialog:e}=(0,a.sp)();return{title:"Keys",routes:j.J,sidenav:(0,l.jsx)(u.T,{}),openSettings:()=>e("settings"),actions:(0,l.jsx)(m,{}),stats:(0,l.jsx)(g,{}),dockedControls:(0,l.jsx)(b,{})}}}},e=>{var s=s=>e(e.s=s);e.O(0,[634,636,593,792],()=>s(8198)),_N_E=e.O()}]);