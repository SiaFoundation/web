(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{87111:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/keys",function(){return s(42329)}])},42329:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var n=s(52322),l=s(35105),r=s(63862);function i(){return(0,n.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,n.jsx)(l.xvT,{children:(0,n.jsx)(r.Hb6,{className:"scale-[200%]"})}),(0,n.jsx)(l.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No keys matching filters."})]})}var a=s(82285);function c(){let{openDialog:e}=(0,a.Rh)();return(0,n.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,n.jsx)(l.xvT,{children:(0,n.jsx)(r._m8,{size:64})}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,n.jsx)(l.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"There are no S3 authentication keypairs yet. Create one to get started."}),(0,n.jsx)(l.zxk,{onClick:()=>{e("keysCreate")},children:"Create keypair"})]})]})}function o(){return(0,n.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,n.jsx)(l.xvT,{children:(0,n.jsx)(r.Ckx,{className:"scale-[200%]"})}),(0,n.jsx)(l.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching keys."})]})}var x=s(83239);function d(){let{columns:e,datasetPage:t,sortField:s,sortDirection:r,sortableColumns:a,toggleSort:d,limit:u,dataState:j,cellContext:h}=(0,x.E)();return(0,n.jsx)("div",{className:"p-6 min-w-fit",children:(0,n.jsx)(l.iA_,{testId:"keysTable",isLoading:"loading"===j,emptyState:"noneMatchingFilters"===j?(0,n.jsx)(i,{}):"noneYet"===j?(0,n.jsx)(c,{}):"error"===j?(0,n.jsx)(o,{}):null,sortableColumns:a,pageSize:u,data:t,context:h,columns:e,sortDirection:r,sortField:s,toggleSort:d,rowSize:"default"})})}var u=s(70825),j=s(4300),h=s(6637),p=s(14974),f=s(83894);function m(){let{configurableColumns:e,toggleColumnVisibility:t,resetDefaultColumnVisibility:s,setColumnsVisible:i,setColumnsHidden:a,sortField:c,setSortField:o,sortDirection:d,setSortDirection:u,enabledColumns:j}=(0,x.E)(),h=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id}));return(0,n.jsxs)(l.J2e,{trigger:(0,n.jsxs)(l.zxk,{size:"small",tip:"Configure view",tipAlign:"end",children:[(0,n.jsx)(r.hiv,{}),"View",(0,n.jsx)(r.EMN,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,n.jsxs)(l.WVB,{children:[(0,n.jsx)(l.__J,{children:"Order by"}),(0,n.jsx)(l.kFS,{children:(0,n.jsx)(l.PhF,{value:c,onChange:e=>{o(e.currentTarget.value)},children:Object.entries((0,f.Z)(p.Fo,"category")).map(e=>{let[t,s]=e;return(0,n.jsx)("optgroup",{label:t,children:s.map(e=>(0,n.jsx)(l.Wxm,{value:e.id,children:e.label},e.id))},t)})})})]}),(0,n.jsxs)(l.WVB,{children:[(0,n.jsx)(l.__J,{children:"Direction"}),(0,n.jsx)(l.kFS,{children:(0,n.jsxs)(l.PhF,{value:d,onClick:e=>{e.stopPropagation()},onChange:e=>{u(e.currentTarget.value)},children:[(0,n.jsx)(l.Wxm,{value:"desc",children:"descending"},"desc"),(0,n.jsx)(l.Wxm,{value:"asc",children:"ascending"},"asc")]})})]}),(0,n.jsx)(l.Clw,{}),(0,n.jsxs)(l.WVB,{children:[(0,n.jsx)(l.__J,{children:"Display properties"}),(0,n.jsx)(l.kFS,{children:(0,n.jsx)(l.zxk,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),s()},children:(0,n.jsx)(r.Wet,{})})})]}),(0,n.jsx)(l.FzK,{label:"General",columns:h.map(e=>e.value),enabled:j,setColumnsVisible:i,setColumnsHidden:a}),(0,n.jsx)(l.WVB,{children:(0,n.jsx)(l.j4H,{options:h,values:j,onChange:e=>t(e)})})]})}function g(){let{openDialog:e}=(0,a.Rh)();return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(l.zxk,{onClick:()=>e("keysCreate"),children:[(0,n.jsx)(r.aXP,{}),"Create keypair"]}),(0,n.jsx)(m,{})]})}function v(){let{limit:e,offset:t,datasetCount:s,pageCount:r,dataState:i}=(0,x.E)();return(0,n.jsxs)("div",{className:"flex w-full",children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(l.uDJ,{offset:t,limit:e,datasetTotal:s,pageTotal:r,isLoading:"loading"===i})]})}var y=s(94041),k=s(2784),C=s(6539);function N(){let{multiSelect:e}=(0,x.E)(),t=(0,k.useMemo)(()=>Object.entries(e.selectionMap).map(e=>{let[t,s]=e;return s.key}),[e.selectionMap]),{openConfirmDialog:s}=(0,a.Rh)(),i=(0,y.AR)(),c=(0,y._M)(),o=(0,k.useCallback)(async()=>{var s;if(!i.data){(0,l.OHV)({title:"Error deleting key"});return}let n=(0,C.Z)(null===(s=i.data)||void 0===s?void 0:s.authentication.v4Keypairs,t),r=await c.put({payload:{...i.data,authentication:{...i.data.authentication,v4Keypairs:n}}});e.deselectAll(),r.error?(0,l.OHV)({title:"Error deleting keys",body:r.error}):(0,l.OPV)({title:"Keys deleted"})},[i.data,c,e,t]);return(0,n.jsx)(l.zxk,{"aria-label":"delete selected keys",tip:"Delete selected keys",onClick:()=>{s({title:"Delete keys",action:"Delete",variant:"red",body:(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsxs)(l.nvN,{size:"14",children:["Are you sure you would like to delete the"," ",e.selectionCount.toLocaleString()," selected keys?"]})}),onConfirm:async()=>{o()}})},children:(0,n.jsx)(r.Jrl,{})})}function b(){let{multiSelect:e}=(0,x.E)();return(0,n.jsx)(l.hv1,{multiSelect:e,entityWord:"key",children:(0,n.jsx)(N,{})})}function _(){return(0,n.jsx)(b,{})}let w=h.J;function E(){return(0,n.jsx)(d,{})}E.Layout=w,E.useLayoutProps=function(){let{openDialog:e}=(0,a.Rh)();return{title:"Keys",routes:j._,sidenav:(0,n.jsx)(u.e,{}),openSettings:()=>e("settings"),actions:(0,n.jsx)(g,{}),stats:(0,n.jsx)(v,{}),dockedControls:(0,n.jsx)(_,{})}}}},function(e){e.O(0,[158,888,774,179],function(){return e(e.s=87111)}),_N_E=e.O()}]);