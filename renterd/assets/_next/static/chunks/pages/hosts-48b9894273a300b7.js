(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{88924:function(e,l,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/hosts",function(){return s(40709)}])},40709:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return E}});var n=s(52322),a=s(35105),t=s(46741),i=s(63862),c=s(4300);function r(){let{dataState:e}=(0,t.l)();return"error"===e?(0,n.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,n.jsx)(a.xvT,{children:(0,n.jsx)(i.Ckx,{className:"scale-[200%]"})}),(0,n.jsx)(a.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching hosts."})]}):"noneMatchingFilters"===e?(0,n.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,n.jsx)(a.xvT,{children:(0,n.jsx)(i.Hb6,{className:"scale-[200%]"})}),(0,n.jsx)(a.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No hosts matching filters."})]}):"noneYet"===e?(0,n.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,n.jsx)(a.xvT,{children:(0,n.jsx)(i.zvn,{className:"scale-[200%]"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,n.jsxs)(a.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:["There are currently no hosts in the database. Make sure"," ",(0,n.jsx)(a.EKh,{children:"renterd"})," can access the network and make sure peers are being discovered."]}),(0,n.jsx)(a.Qjf,{href:c._.node.index,children:"View peers"})]})]}):null}var o=s(83429),u=s(777),x=s(54597);function d(){let{gpu:e,settings:l}=(0,o.Hv)(),{setCmd:s,activeHost:i,onHostMapClick:c,onHostMapHover:r,hostsWithLocation:d}=(0,t.l)();return l.siaCentral&&!e.shouldRender?null:(0,n.jsxs)("div",{className:"w-full h-full",children:[(0,n.jsx)(u.T,{activeHost:(null==i?void 0:i.location)?i:void 0,hosts:d,onHostClick:c,onHostHover:r,onMount:e=>{s(e)}}),(0,n.jsxs)("div",{className:"absolute top-5 left-6 flex flex-col gap-1",children:[(0,n.jsx)(a.wEc,{color:x.jY.activeAndUsable.colorHex,label:"Active contract & usable",size:"12"}),(0,n.jsx)(a.wEc,{color:x.jY.activeAndUnusable.colorHex,label:"Active contract & unusable",size:"12"}),(0,n.jsx)(a.wEc,{color:x.jY.potentialHost.colorHex,label:"No active contract",size:"12"})]})]})}var h=s(82851);function j(){let{dataset:e,activeHost:l,columns:s,limit:i,dataState:c,tableContext:o,viewMode:u}=(0,t.l)();return(0,n.jsxs)("div",{className:"relative flex flex-col overflow-hidden h-full w-full",children:[(0,n.jsx)("div",{className:(0,h.cx)("absolute h-[70%] w-full","map"===u?"block":"invisible","transition-all"),children:(0,n.jsx)(d,{})}),(0,n.jsx)("div",{className:(0,h.cx)("absolute overflow-hidden transition-all w-full","duration-300","overflow-hidden"),style:{bottom:0,height:"map"===u?e&&e.length?400-Math.max((2-e.length)*100,0):400:"100%"},children:(0,n.jsx)(a.xrM,{className:"z-0",id:"scroll-hosts",children:(0,n.jsx)("div",{className:(0,h.cx)("map"===u?"pb-6 px-6":"p-6","min-w-fit"),children:(0,n.jsx)(a.iA_,{testId:"hostsTable",focusId:null==l?void 0:l.publicKey,focusColor:l?(0,x.Kg)(l).colorName:void 0,isLoading:"loading"===c,emptyState:(0,n.jsx)(r,{}),context:o,pageSize:i,data:e,columns:s,rowSize:"default"})})})})]})}var m=s(70825),p=s(82285),v=s(6637);function f(){let{configurableColumns:e,toggleColumnVisibility:l,setColumnsVisible:s,setColumnsHidden:c,resetDefaultColumnVisibility:r,enabledColumns:o}=(0,t.l)(),u=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id})),x=e.filter(e=>"autopilot"===e.category).map(e=>({label:e.label,value:e.id})),d=e.filter(e=>"priceTable"===e.category).map(e=>({label:e.label,value:e.id})),h=e.filter(e=>"hostSettings"===e.category).map(e=>({label:e.label,value:e.id}));return(0,n.jsxs)(a.J2e,{trigger:(0,n.jsxs)(a.zxk,{tip:"Configure view",tipAlign:"end",children:[(0,n.jsx)(i.hiv,{}),"View",(0,n.jsx)(i.EMN,{})]}),contentProps:{align:"end",className:"!max-w-md !h-[400px]"},children:[(0,n.jsxs)(a.WVB,{children:[(0,n.jsx)(a.__J,{children:"Display properties"}),(0,n.jsx)(a.kFS,{children:(0,n.jsx)(a.zxk,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),r()},children:(0,n.jsx)(i.Wet,{})})})]}),(0,n.jsx)(a.FzK,{label:"General",columns:u.map(e=>e.value),enabled:o,setColumnsVisible:s,setColumnsHidden:c}),(0,n.jsx)(a.WVB,{children:(0,n.jsx)(a.j4H,{options:u,values:o,onChange:e=>l(e)})}),x.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.FzK,{label:"Autopilot",columns:x.map(e=>e.value),enabled:o,setColumnsVisible:s,setColumnsHidden:c}),(0,n.jsx)(a.WVB,{children:(0,n.jsx)(a.j4H,{options:x,values:o,onChange:e=>l(e)})})]}):null,d.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.FzK,{label:"Price table (RHPv3)",columns:d.map(e=>e.value),enabled:o,setColumnsVisible:s,setColumnsHidden:c}),(0,n.jsx)(a.WVB,{children:(0,n.jsx)(a.j4H,{options:d,values:o,onChange:e=>l(e)})})]}):null,h.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.FzK,{label:"Host settings (RHPv2)",columns:h.map(e=>e.value),enabled:o,setColumnsVisible:s,setColumnsHidden:c}),(0,n.jsx)(a.WVB,{children:(0,n.jsx)(a.j4H,{options:h,values:o,onChange:e=>l(e)})})]}):null]})}function g(){let{openDialog:e}=(0,p.Rh)(),{viewMode:l,setViewMode:s}=(0,t.l)(),{settings:c,gpu:r}=(0,o.Hv)();return(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(a.zxk,{onClick:()=>e("hostsManageAllowBlock"),tip:"Manage host blocklist and allowlist",children:[(0,n.jsx)(i.nCM,{}),"Manage lists"]}),(0,n.jsx)(a.ua7,{content:c.siaCentral?r.canGpuRender&&r.isGpuEnabled?"Toggle interactive map":"Enable GPU to view interactive map":"Enable Sia Central to view interactive map",children:(0,n.jsx)(a.zxk,{disabled:!r.canGpuRender,onClick:()=>{if(!c.siaCentral){e("settings");return}r.isGpuEnabled?s("map"===l?"list":"map"):e("settings")},children:(0,n.jsx)(i.nDH,{})})}),(0,n.jsx)(f,{})]})}var b=s(65304),k=s(2784),w=s(50454);function C(){let{filters:e,removeFilter:l,removeLastFilter:s}=(0,t.l)(),[c,r]=(0,k.useState)(!1),[o,u]=(0,k.useState)(""),[x,d]=(0,k.useState)([]),h=x[x.length-1],j=(0,k.useRef)(null),m=(0,k.useRef)(null),p=(0,k.useCallback)(e=>{d(l=>[...l,e])},[d]),v=(0,k.useCallback)(()=>{d([])},[d]);(0,k.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&r(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let f=(0,k.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.focus()},[m]),g=(0,k.useCallback)(()=>{u(""),v()},[v]);return(0,n.jsxs)("div",{className:"flex gap-1",children:[e.map(e=>(0,n.jsxs)(a.eQh,{children:[(0,n.jsx)(a.zxk,{variant:"active",state:"waiting",children:e.label}),(0,n.jsx)(a.zxk,{variant:"active",size:"small",onClick:()=>l(e.id),children:(0,n.jsx)(i.PcV,{})})]},e.id)),(0,n.jsxs)(b.mY,{ref:j,label:"Command Menu",onFocus:()=>r(!0),onKeyDown:e=>{if(x.length>0)"Escape"!==e.key&&("Backspace"!==e.key||o)||(e.preventDefault(),d(e=>e.slice(0,-1)));else if(0===x.length&&("Backspace"!==e.key||o||s(),"Escape"===e.key&&!o)){var l;r(!1),null===(l=m.current)||void 0===l||l.blur()}},children:[(0,n.jsx)(b.mY.Input,{ref:m,value:o,onValueChange:u,className:(0,a.cEb)({variant:"ghost",focus:"none"}),placeholder:"Filter hosts"}),c&&(0,n.jsx)(a.s_4,{className:"absolute z-20 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,n.jsxs)(a.xrM,{children:[h&&(0,n.jsx)(a.__J,{className:"px-1.5 py-1",children:h.label}),(0,n.jsx)(b.mY.List,{children:(0,n.jsx)(w.L,{currentPage:h,beforeSelect:f,afterSelect:g,pushPage:p})})]})})]})]})}function N(){let{offset:e,limit:l,pageCount:s,dataState:i}=(0,t.l)();return(0,n.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,n.jsx)(C,{}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)(a.wFK,{offset:e,limit:l,pageTotal:s,isLoading:"loading"===i})]})}let H=v.J;function E(){return(0,n.jsx)(j,{})}E.Layout=H,E.useLayoutProps=function(){let{openDialog:e}=(0,p.Rh)();return{title:"Hosts",routes:c._,sidenav:(0,n.jsx)(m.e,{}),openSettings:()=>e("settings"),size:"full",actions:(0,n.jsx)(g,{}),stats:(0,n.jsx)(N,{}),scroll:!1}}}},function(e){e.O(0,[158,888,774,179],function(){return e(e.s=88924)}),_N_E=e.O()}]);