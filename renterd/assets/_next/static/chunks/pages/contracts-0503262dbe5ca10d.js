(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{77441:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contracts",function(){return l(30753)}])},53305:function(e,t,l){"use strict";l.d(t,{a:function(){return d}});var s=l(52322),n=l(43657),a=l(28420),i=l(2784),c=l(82285),o=l(60381),r=l(12295);function d(e){let{multiSelect:t,publicKeys:l}=e,{openConfirmDialog:d}=(0,c.Rh)(),u=(0,r.I)(),x=(0,i.useCallback)(async()=>{u(l,[]),t.deselectAll()},[u,t,l]);return(0,s.jsxs)(n.zxk,{"aria-label":"add host public keys to allowlist",tip:"Add host public keys to allowlist",onClick:()=>{d({title:"Add ".concat((0,o._6)(t.selectionCount,"host")," to allowlist"),action:"Add to allowlist",variant:"accent",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to add"," ",(0,o._6)(t.selectionCount,"host public key")," to the allowlist?"]})}),onConfirm:x})},children:[(0,s.jsx)(a.nCM,{}),"Add hosts to allowlist"]})}},69818:function(e,t,l){"use strict";l.d(t,{e:function(){return d}});var s=l(52322),n=l(43657),a=l(28420),i=l(2784),c=l(82285),o=l(60381),r=l(9408);function d(e){let{multiSelect:t,hostAddresses:l}=e,{openConfirmDialog:d}=(0,c.Rh)(),u=(0,r.l)(),x=(0,i.useCallback)(async()=>{u(l,[]),t.deselectAll()},[u,t,l]);return(0,s.jsxs)(n.zxk,{"aria-label":"add host addresses to blocklist",tip:"Add host addresses to blocklist",onClick:()=>{d({title:"Add ".concat((0,o._6)(t.selectionCount,"host")," to blocklist"),action:"Add to blocklist",variant:"red",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to add"," ",(0,o._6)(t.selectionCount,"host address","host addresses")," ","to the blocklist?"]})}),onConfirm:x})},children:[(0,s.jsx)(a.nCM,{}),"Add hosts to blocklist"]})}},1884:function(e,t,l){"use strict";l.d(t,{U:function(){return d}});var s=l(52322),n=l(43657),a=l(28420),i=l(2784),c=l(82285),o=l(60381),r=l(12295);function d(e){let{multiSelect:t,publicKeys:l}=e,{openConfirmDialog:d}=(0,c.Rh)(),u=(0,r.I)(),x=(0,i.useCallback)(async()=>{await u([],l),t.deselectAll()},[u,t,l]);return(0,s.jsxs)(n.zxk,{"aria-label":"remove host public keys from allowlist",tip:"Remove host public keys from allowlist",onClick:()=>{d({title:"Remove ".concat((0,o._6)(t.selectionCount,"host")," from allowlist"),action:"Remove from allowlist",variant:"accent",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to remove"," ",(0,o._6)(t.selectionCount,"host public key")," from the allowlist?"]})}),onConfirm:x})},children:[(0,s.jsx)(a.nCM,{}),"Remove hosts from allowlist"]})}},46348:function(e,t,l){"use strict";l.d(t,{H:function(){return d}});var s=l(52322),n=l(43657),a=l(28420),i=l(2784),c=l(82285),o=l(60381),r=l(9408);function d(e){let{multiSelect:t,hostAddresses:l}=e,{openConfirmDialog:d}=(0,c.Rh)(),u=(0,r.l)(),x=(0,i.useCallback)(async()=>{u([],l),t.deselectAll()},[u,t,l]);return(0,s.jsxs)(n.zxk,{"aria-label":"remove host addresses from blocklist",tip:"Remove host addresses from blocklist",onClick:()=>{d({title:"Remove ".concat((0,o._6)(t.selectionCount,"host")," from blocklist"),action:"Remove from blocklist",variant:"red",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to remove"," ",(0,o._6)(t.selectionCount,"host address","host addresses")," ","from the blocklist?"]})}),onConfirm:x})},children:[(0,s.jsx)(a.nCM,{}),"Remove hosts from blocklist"]})}},30753:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return K}});var s=l(52322),n=l(43657),a=l(74282),i=l(28420);function c(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(n.xvT,{children:(0,s.jsx)(i.Hb6,{className:"scale-[200%]"})}),(0,s.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No active contracts matching filters."})]})}function o(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(n.xvT,{children:(0,s.jsx)(i.VBo,{className:"scale-[200%]"})}),(0,s.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"There are currently no active contracts. Configure autopilot or manually form contracts to get started."})]})}function r(e){let{error:t}=e;return(null==t?void 0:t.message.startsWith("404"))?(0,s.jsx)(o,{}):(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(n.xvT,{children:(0,s.jsx)(i.Ckx,{className:"scale-[200%]"})}),(0,s.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching contracts."})]})}var d=l(82851);function u(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(n.xvT,{children:(0,s.jsx)(i.uTh,{className:"scale-[200%]"})}),(0,s.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No data available."})]})}function x(){let{selectedContract:e,allContractsSpendingMetrics:t,selectedContractSpendingMetrics:l,graphMode:i,setGraphMode:c}=(0,a.G)(),o=(0,s.jsxs)("div",{className:"flex gap-2",children:[!e&&(0,s.jsx)(n.zxk,{variant:"spending"===i?"accent":"gray",onClick:()=>c("spending"),children:"Funding & spending: All contracts"}),e&&(0,s.jsxs)(n.zxk,{variant:"spending"===i?"accent":"gray",onClick:()=>c("spending"),children:["Funding & spending: Contract"," ",(0,n.I13)(e.id).slice(0,6)]})]});return(0,s.jsxs)("div",{className:"w-full h-full",children:["spending"===i&&!e&&(0,s.jsx)(n.b0u,{id:"renterd/v0/contracts/graphs/fundingAndSpending",height:"100%",data:t.data,config:t.config,isLoading:t.isLoading,actionsLeft:o,emptyState:(0,s.jsx)(u,{})}),"spending"===i&&e&&(0,s.jsx)(n.b0u,{id:"renterd/v0/contracts/graphs/fundingAndSpending",height:"100%",data:l.data,config:l.config,isLoading:l.isLoading,actionsLeft:o,emptyState:(0,s.jsx)(u,{})})]})}function h(){let{columns:e,datasetPage:t,sortField:l,sortDirection:i,sortableColumns:u,toggleSort:h,limit:f,dataState:m,cellContext:j,error:p,viewMode:v,filters:g,selectedContract:b}=(0,a.G)(),k="detail"===v&&(!g.length||b),y=k?t&&t.length?"".concat(400-Math.max((2-t.length)*100,0),"px"):"400px":"100%";return(0,s.jsxs)("div",{className:"relative flex flex-col overflow-hidden h-full w-full",children:[(0,s.jsx)("div",{className:(0,d.cx)("absolute w-full",k?"block":"invisible","transition-all","p-6"),style:{height:k?"calc(100% - ".concat(y,")"):0},children:k?(0,s.jsx)(x,{}):null}),(0,s.jsx)("div",{className:(0,d.cx)("absolute overflow-hidden transition-all w-full","duration-300","overflow-hidden"),style:{bottom:0,height:y},children:(0,s.jsx)(n.xrM,{className:"z-0",children:(0,s.jsx)("div",{className:(0,d.cx)(k?"pb-6 px-6":"p-6","min-w-fit"),children:(0,s.jsx)(n.iA_,{testId:"contractsTable",context:j,isLoading:"loading"===m,emptyState:"noneMatchingFilters"===m?(0,s.jsx)(c,{}):"noneYet"===m?(0,s.jsx)(o,{}):"error"===m?(0,s.jsx)(r,{error:p}):null,sortableColumns:u,pageSize:f,data:t,columns:e,sortDirection:i,sortField:l,toggleSort:h,rowSize:"default"})})})})]})}var f=l(70825),m=l(4300),j=l(82285),p=l(31392),v=l(46850),g=l(83894);function b(){let{configurableColumns:e,toggleColumnVisibility:t,resetDefaultColumnVisibility:l,setColumnsVisible:c,setColumnsHidden:o,sortField:r,setSortField:d,sortDirection:u,setSortDirection:x,enabledColumns:h}=(0,a.G)(),f=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id})),m=e.filter(e=>"time"===e.category).map(e=>({label:e.label,value:e.id})),j=e.filter(e=>"financial"===e.category).map(e=>({label:e.label,value:e.id}));return(0,s.jsxs)(n.J2e,{trigger:(0,s.jsxs)(n.zxk,{"aria-label":"configure view",size:"small",tip:"Configure view",tipAlign:"end",children:[(0,s.jsx)(i.hiv,{}),"View",(0,s.jsx)(i.EMN,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,s.jsxs)(n.WVB,{children:[(0,s.jsx)(n.__J,{children:"Order by"}),(0,s.jsx)(n.kFS,{children:(0,s.jsx)(n.PhF,{value:r,onChange:e=>{d(e.currentTarget.value)},children:Object.entries((0,g.Z)(v.Fo,"category")).map(e=>{let[t,l]=e;return(0,s.jsx)("optgroup",{label:t,children:l.map(e=>(0,s.jsx)(n.Wxm,{value:e.id,children:e.label},e.id))},t)})})})]}),(0,s.jsxs)(n.WVB,{children:[(0,s.jsx)(n.__J,{children:"Direction"}),(0,s.jsx)(n.kFS,{children:(0,s.jsxs)(n.PhF,{value:u,onClick:e=>{e.stopPropagation()},onChange:e=>{x(e.currentTarget.value)},children:[(0,s.jsx)(n.Wxm,{value:"desc",children:"descending"},"desc"),(0,s.jsx)(n.Wxm,{value:"asc",children:"ascending"},"asc")]})})]}),(0,s.jsx)(n.Clw,{}),(0,s.jsxs)(n.WVB,{children:[(0,s.jsx)(n.__J,{children:"Display properties"}),(0,s.jsx)(n.kFS,{children:(0,s.jsx)(n.zxk,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),l()},children:(0,s.jsx)(i.Wet,{})})})]}),(0,s.jsx)(n.FzK,{label:"General",columns:f.map(e=>e.value),enabled:h,setColumnsVisible:c,setColumnsHidden:o}),(0,s.jsx)(n.WVB,{children:(0,s.jsx)(n.j4H,{options:f,values:h,onChange:e=>t(e)})}),(0,s.jsx)(n.FzK,{label:"Time",columns:m.map(e=>e.value),enabled:h,setColumnsVisible:c,setColumnsHidden:o}),(0,s.jsx)(n.WVB,{children:(0,s.jsx)(n.j4H,{options:m,values:h,onChange:e=>t(e)})}),(0,s.jsx)(n.FzK,{label:"Financial",columns:j.map(e=>e.value),enabled:h,setColumnsVisible:c,setColumnsHidden:o}),(0,s.jsx)(n.WVB,{children:(0,s.jsx)(n.j4H,{options:j,values:h,onChange:e=>t(e)})})]})}function k(){let{setViewMode:e}=(0,a.G)();return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.zxk,{tip:"Toggle graphs",onClick:()=>e(e=>"detail"===e?"list":"detail"),children:(0,s.jsx)(i.oce,{})}),(0,s.jsx)(b,{})]})}var y=l(65304),C=l(2784),w=l(94248);function N(){let{filters:e,removeFilter:t,removeLastFilter:l}=(0,a.G)(),[c,o]=(0,C.useState)(!1),[r,d]=(0,C.useState)(""),[u,x]=(0,C.useState)([]),h=u[u.length-1],f=(u.length,(0,C.useRef)(null)),m=(0,C.useRef)(null),j=(0,C.useCallback)(e=>{x(t=>[...t,e])},[x]),p=(0,C.useCallback)(()=>{x([])},[x]);(0,C.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let v=(0,C.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.focus()},[m]),g=(0,C.useCallback)(()=>{d(""),p()},[p]);return(0,s.jsxs)("div",{className:"flex gap-1",children:[e.map(e=>(0,s.jsxs)(n.eQh,{children:[(0,s.jsx)(n.zxk,{variant:"active",state:"waiting",children:e.label}),(0,s.jsx)(n.zxk,{variant:"active",size:"small",onClick:()=>t(e.id),children:(0,s.jsx)(i.PcV,{})})]},e.id)),(0,s.jsxs)(y.mY,{ref:f,label:"Command Menu",onFocus:()=>o(!0),onKeyDown:e=>{if(u.length>0)"Escape"!==e.key&&("Backspace"!==e.key||r)||(e.preventDefault(),x(e=>e.slice(0,-1)));else if(0===u.length&&("Backspace"!==e.key||r||l(),"Escape"===e.key&&!r)){var t;o(!1),null===(t=m.current)||void 0===t||t.blur()}},children:[(0,s.jsx)(y.mY.Input,{ref:m,value:r,onValueChange:d,className:(0,n.cEb)({variant:"ghost",focus:"none"}),placeholder:"Filter contracts"}),c&&(0,s.jsx)(n.s_4,{className:"absolute z-20 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,s.jsxs)(n.xrM,{children:[h&&(0,s.jsx)(n.__J,{className:"px-1.5 py-1",children:h.label}),(0,s.jsx)(y.mY.List,{children:(0,s.jsx)(w.F,{currentPage:h,beforeSelect:v,afterSelect:g,pushPage:j})})]})})]})]})}function _(){let{dataState:e,offset:t,limit:l,datasetFilteredCount:i,pageCount:c}=(0,a.G)();return(0,s.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,s.jsx)(N,{}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(n.uDJ,{isLoading:"loading"===e,offset:t,limit:l,datasetTotal:i,pageTotal:c})]})}var z=l(91426),A=l(60381);function M(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selectionMap).map(e=>{let[t,l]=e;return l.id}),[e.selectionMap]),{openConfirmDialog:l}=(0,j.Rh)(),c=(0,z.IK)(),o=(0,C.useCallback)(async()=>{await (0,n.eKZ)(t.map(e=>c.delete({params:{id:e}})),{toastError:e=>{let{successCount:t,errorCount:l,totalCount:s}=e;return{title:"".concat((0,A._6)(t,"contract")," deleted"),body:"Error deleting ".concat(l,"/").concat(s," total contracts.")}},toastSuccess:e=>{let{totalCount:t}=e;return{title:"".concat((0,A._6)(t,"contract")," deleted")}},after:()=>{e.deselectAll()}})},[e,t,c]);return(0,s.jsx)(n.zxk,{"aria-label":"delete selected contracts",tip:"Delete selected contracts",onClick:()=>{l({title:"Delete contracts",action:"Delete",variant:"red",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to delete the"," ",(0,A._6)(e.selectionCount,"selected contract"),"?"]})}),onConfirm:async()=>{o()}})},children:(0,s.jsx)(i.Jrl,{})})}var S=l(69818);function T(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selectionMap).map(e=>{let[t,l]=e;return l.hostIp}),[e.selectionMap]);return(0,s.jsx)(S.e,{multiSelect:e,hostAddresses:t})}var F=l(53305);function R(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selectionMap).map(e=>{let[t,l]=e;return l.hostKey}),[e.selectionMap]);return(0,s.jsx)(F.a,{multiSelect:e,publicKeys:t})}var E=l(46348);function G(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selectionMap).map(e=>{let[t,l]=e;return l.hostIp}),[e.selectionMap]);return(0,s.jsx)(E.H,{multiSelect:e,hostAddresses:t})}var L=l(1884);function V(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selectionMap).map(e=>{let[t,l]=e;return l.hostKey}),[e.selectionMap]);return(0,s.jsx)(L.U,{multiSelect:e,publicKeys:t})}function W(){let{multiSelect:e}=(0,a.G)();return(0,s.jsxs)(n.hv1,{multiSelect:e,entityWord:"contract",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(R,{}),(0,s.jsx)(T,{})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(V,{}),(0,s.jsx)(G,{})]}),(0,s.jsx)(M,{})]})}let P=p.J;function K(){return(0,s.jsx)(h,{})}K.Layout=P,K.useLayoutProps=function(){let{openDialog:e}=(0,j.Rh)();return{title:"Active contracts",routes:m._,sidenav:(0,s.jsx)(f.e,{}),openSettings:()=>e("settings"),actions:(0,s.jsx)(k,{}),stats:(0,s.jsx)(_,{}),size:"full",scroll:!1,dockedControls:(0,s.jsx)(W,{})}}}},function(e){e.O(0,[705,888,774,179],function(){return e(e.s=77441)}),_N_E=e.O()}]);