(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{77441:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contracts",function(){return s(18677)}])},53305:function(e,t,s){"use strict";s.d(t,{a:function(){return d}});var l=s(52322),n=s(18575),a=s(28420),c=s(2784),i=s(82285),o=s(60381),r=s(12295);function d(e){let{multiSelect:t,publicKeys:s}=e,{openConfirmDialog:d}=(0,i.Rh)(),u=(0,r.I)(),x=(0,c.useCallback)(async()=>{u(s,[]),t.deselectAll()},[u,t,s]);return(0,l.jsxs)(n.zxk,{"aria-label":"add host public keys to allowlist",tip:"Add host public keys to allowlist",onClick:()=>{d({title:"Add ".concat((0,o._6)(t.selectionCount,"host")," to allowlist"),action:"Add to allowlist",variant:"accent",body:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to add"," ",(0,o._6)(t.selectionCount,"host public key")," to the allowlist?"]})}),onConfirm:x})},children:[(0,l.jsx)(a.nCM,{}),"Add hosts to allowlist"]})}},69818:function(e,t,s){"use strict";s.d(t,{e:function(){return d}});var l=s(52322),n=s(18575),a=s(28420),c=s(2784),i=s(82285),o=s(60381),r=s(9408);function d(e){let{multiSelect:t,hostAddresses:s}=e,{openConfirmDialog:d}=(0,i.Rh)(),u=(0,r.l)(),x=(0,c.useCallback)(async()=>{u(s,[]),t.deselectAll()},[u,t,s]);return(0,l.jsxs)(n.zxk,{"aria-label":"add host addresses to blocklist",tip:"Add host addresses to blocklist",onClick:()=>{d({title:"Add ".concat((0,o._6)(t.selectionCount,"host")," to blocklist"),action:"Add to blocklist",variant:"red",body:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to add"," ",(0,o._6)(t.selectionCount,"host address","host addresses")," ","to the blocklist?"]})}),onConfirm:x})},children:[(0,l.jsx)(a.nCM,{}),"Add hosts to blocklist"]})}},1884:function(e,t,s){"use strict";s.d(t,{U:function(){return d}});var l=s(52322),n=s(18575),a=s(28420),c=s(2784),i=s(82285),o=s(60381),r=s(12295);function d(e){let{multiSelect:t,publicKeys:s}=e,{openConfirmDialog:d}=(0,i.Rh)(),u=(0,r.I)(),x=(0,c.useCallback)(async()=>{await u([],s),t.deselectAll()},[u,t,s]);return(0,l.jsxs)(n.zxk,{"aria-label":"remove host public keys from allowlist",tip:"Remove host public keys from allowlist",onClick:()=>{d({title:"Remove ".concat((0,o._6)(t.selectionCount,"host")," from allowlist"),action:"Remove from allowlist",variant:"accent",body:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to remove"," ",(0,o._6)(t.selectionCount,"host public key")," from the allowlist?"]})}),onConfirm:x})},children:[(0,l.jsx)(a.nCM,{}),"Remove hosts from allowlist"]})}},46348:function(e,t,s){"use strict";s.d(t,{H:function(){return d}});var l=s(52322),n=s(18575),a=s(28420),c=s(2784),i=s(82285),o=s(60381),r=s(9408);function d(e){let{multiSelect:t,hostAddresses:s}=e,{openConfirmDialog:d}=(0,i.Rh)(),u=(0,r.l)(),x=(0,c.useCallback)(async()=>{u([],s),t.deselectAll()},[u,t,s]);return(0,l.jsxs)(n.zxk,{"aria-label":"remove host addresses from blocklist",tip:"Remove host addresses from blocklist",onClick:()=>{d({title:"Remove ".concat((0,o._6)(t.selectionCount,"host")," from blocklist"),action:"Remove from blocklist",variant:"red",body:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to remove"," ",(0,o._6)(t.selectionCount,"host address","host addresses")," ","from the blocklist?"]})}),onConfirm:x})},children:[(0,l.jsx)(a.nCM,{}),"Remove hosts from blocklist"]})}},50039:function(e,t,s){"use strict";s.d(t,{c:function(){return r}});var l=s(52322),n=s(18575),a=s(28420),c=s(91426),i=s(2784),o=s(60381);function r(e){let{multiSelect:t,publicKeys:s}=e,r=(0,c.ED)(),d=(0,i.useCallback)(async()=>{await (0,n.eKZ)(s.map(e=>r.post({params:{hostkey:e},payload:{timeout:(0,o.XB)(30)}})),{toastError:e=>{let{successCount:t,errorCount:s,totalCount:l}=e;return{title:"Rescanning ".concat((0,o._6)(t,"host")),body:"Error starting rescan for ".concat(s,"/").concat(l," of total hosts.")}},toastSuccess:e=>{let{totalCount:t}=e;return{title:"Rescanning ".concat((0,o._6)(t,"host"))}},after:()=>{t.deselectAll()}})},[t,s,r]);return(0,l.jsx)(n.zxk,{"aria-label":"rescan selected hosts",tip:"Rescan selected hosts",onClick:d,children:(0,l.jsx)(a._Eq,{})})}},18677:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return D}});var l=s(52322),n=s(18575),a=s(74282),c=s(28420);function i(){return(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,l.jsx)(n.xvT,{children:(0,l.jsx)(c.Hb6,{className:"scale-[200%]"})}),(0,l.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No active contracts matching filters."})]})}function o(){return(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,l.jsx)(n.xvT,{children:(0,l.jsx)(c.VBo,{className:"scale-[200%]"})}),(0,l.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"There are currently no active contracts. Configure autopilot or manually form contracts to get started."})]})}function r(e){let{error:t}=e;return(null==t?void 0:t.message.startsWith("404"))?(0,l.jsx)(o,{}):(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,l.jsx)(n.xvT,{children:(0,l.jsx)(c.Ckx,{className:"scale-[200%]"})}),(0,l.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching contracts."})]})}var d=s(82851);function u(){return(0,l.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,l.jsx)(n.xvT,{children:(0,l.jsx)(c.uTh,{className:"scale-[200%]"})}),(0,l.jsx)(n.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No data available."})]})}function x(){let{selectedContract:e,allContractsSpendingMetrics:t,selectedContractSpendingMetrics:s,graphMode:c,setGraphMode:i}=(0,a.G)(),o=(0,l.jsxs)("div",{className:"flex gap-2",children:[!e&&(0,l.jsx)(n.zxk,{variant:"spending"===c?"accent":"gray",onClick:()=>i("spending"),children:"Funding & spending: All contracts"}),e&&(0,l.jsxs)(n.zxk,{variant:"spending"===c?"accent":"gray",onClick:()=>i("spending"),children:["Funding & spending: Contract"," ",(0,n.I13)(e.id).slice(0,6)]})]});return(0,l.jsxs)("div",{className:"w-full h-full",children:["spending"===c&&!e&&(0,l.jsx)(n.b0u,{id:"renterd/v0/contracts/graphs/fundingAndSpending",height:"100%",data:t.data,config:t.config,isLoading:t.isLoading,actionsLeft:o,emptyState:(0,l.jsx)(u,{})}),"spending"===c&&e&&(0,l.jsx)(n.b0u,{id:"renterd/v0/contracts/graphs/fundingAndSpending",height:"100%",data:s.data,config:s.config,isLoading:s.isLoading,actionsLeft:o,emptyState:(0,l.jsx)(u,{})})]})}function h(){let{columns:e,datasetPage:t,sortField:s,sortDirection:c,sortableColumns:u,toggleSort:h,limit:f,dataState:m,cellContext:j,error:p,viewMode:v,filters:g,selectedContract:b}=(0,a.G)(),k="detail"===v&&(!g.length||b),y=k?t&&t.length?"".concat(400-Math.max((2-t.length)*100,0),"px"):"400px":"100%";return(0,l.jsxs)("div",{className:"relative flex flex-col overflow-hidden h-full w-full",children:[(0,l.jsx)("div",{className:(0,d.cx)("absolute w-full",k?"block":"invisible","transition-all","p-6"),style:{height:k?"calc(100% - ".concat(y,")"):0},children:k?(0,l.jsx)(x,{}):null}),(0,l.jsx)("div",{className:(0,d.cx)("absolute overflow-hidden transition-all w-full","duration-300","overflow-hidden"),style:{bottom:0,height:y},children:(0,l.jsx)(n.xrM,{className:"z-0",children:(0,l.jsx)("div",{className:(0,d.cx)(k?"pb-6 px-6":"p-6","min-w-fit"),children:(0,l.jsx)(n.iA_,{testId:"contractsTable",context:j,isLoading:"loading"===m,emptyState:"noneMatchingFilters"===m?(0,l.jsx)(i,{}):"noneYet"===m?(0,l.jsx)(o,{}):"error"===m?(0,l.jsx)(r,{error:p}):null,sortableColumns:u,pageSize:f,data:t,columns:e,sortDirection:c,sortField:s,toggleSort:h,rowSize:"default"})})})})]})}var f=s(70825),m=s(4300),j=s(82285),p=s(31392),v=s(46850),g=s(83894);function b(){let{configurableColumns:e,toggleColumnVisibility:t,resetDefaultColumnVisibility:s,setColumnsVisible:i,setColumnsHidden:o,sortField:r,setSortField:d,sortDirection:u,setSortDirection:x,enabledColumns:h}=(0,a.G)(),f=e.filter(e=>"general"===e.category).map(e=>({label:e.label,value:e.id})),m=e.filter(e=>"time"===e.category).map(e=>({label:e.label,value:e.id})),j=e.filter(e=>"financial"===e.category).map(e=>({label:e.label,value:e.id}));return(0,l.jsxs)(n.J2e,{trigger:(0,l.jsxs)(n.zxk,{"aria-label":"configure view",size:"small",tip:"Configure view",tipAlign:"end",children:[(0,l.jsx)(c.hiv,{}),"View",(0,l.jsx)(c.EMN,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,l.jsxs)(n.WVB,{children:[(0,l.jsx)(n.__J,{children:"Order by"}),(0,l.jsx)(n.kFS,{children:(0,l.jsx)(n.PhF,{value:r,onChange:e=>{d(e.currentTarget.value)},children:Object.entries((0,g.Z)(v.Fo,"category")).map(e=>{let[t,s]=e;return(0,l.jsx)("optgroup",{label:t,children:s.map(e=>(0,l.jsx)(n.Wxm,{value:e.id,children:e.label},e.id))},t)})})})]}),(0,l.jsxs)(n.WVB,{children:[(0,l.jsx)(n.__J,{children:"Direction"}),(0,l.jsx)(n.kFS,{children:(0,l.jsxs)(n.PhF,{value:u,onClick:e=>{e.stopPropagation()},onChange:e=>{x(e.currentTarget.value)},children:[(0,l.jsx)(n.Wxm,{value:"desc",children:"descending"},"desc"),(0,l.jsx)(n.Wxm,{value:"asc",children:"ascending"},"asc")]})})]}),(0,l.jsx)(n.Clw,{}),(0,l.jsxs)(n.WVB,{children:[(0,l.jsx)(n.__J,{children:"Display properties"}),(0,l.jsx)(n.kFS,{children:(0,l.jsx)(n.zxk,{tip:"Reset all to defaults",variant:"ghost",onClick:e=>{e.stopPropagation(),s()},children:(0,l.jsx)(c.Wet,{})})})]}),(0,l.jsx)(n.FzK,{label:"General",columns:f.map(e=>e.value),enabled:h,setColumnsVisible:i,setColumnsHidden:o}),(0,l.jsx)(n.WVB,{children:(0,l.jsx)(n.j4H,{options:f,values:h,onChange:e=>t(e)})}),(0,l.jsx)(n.FzK,{label:"Time",columns:m.map(e=>e.value),enabled:h,setColumnsVisible:i,setColumnsHidden:o}),(0,l.jsx)(n.WVB,{children:(0,l.jsx)(n.j4H,{options:m,values:h,onChange:e=>t(e)})}),(0,l.jsx)(n.FzK,{label:"Financial",columns:j.map(e=>e.value),enabled:h,setColumnsVisible:i,setColumnsHidden:o}),(0,l.jsx)(n.WVB,{children:(0,l.jsx)(n.j4H,{options:j,values:h,onChange:e=>t(e)})})]})}function k(){let{setViewMode:e}=(0,a.G)();return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(n.zxk,{tip:"Toggle graphs",onClick:()=>e(e=>"detail"===e?"list":"detail"),children:(0,l.jsx)(c.oce,{})}),(0,l.jsx)(b,{})]})}var y=s(65304),C=s(2784),w=s(94248);function N(){let{filters:e,removeFilter:t,removeLastFilter:s}=(0,a.G)(),[i,o]=(0,C.useState)(!1),[r,d]=(0,C.useState)(""),[u,x]=(0,C.useState)([]),h=u[u.length-1],f=(u.length,(0,C.useRef)(null)),m=(0,C.useRef)(null),j=(0,C.useCallback)(e=>{x(t=>[...t,e])},[x]),p=(0,C.useCallback)(()=>{x([])},[x]);(0,C.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[]);let v=(0,C.useCallback)(()=>{var e;null===(e=m.current)||void 0===e||e.focus()},[m]),g=(0,C.useCallback)(()=>{d(""),p()},[p]);return(0,l.jsxs)("div",{className:"flex gap-1",children:[e.map(e=>(0,l.jsxs)(n.eQh,{children:[(0,l.jsx)(n.zxk,{variant:"active",state:"waiting",children:e.label}),(0,l.jsx)(n.zxk,{variant:"active",size:"small",onClick:()=>t(e.id),children:(0,l.jsx)(c.PcV,{})})]},e.id)),(0,l.jsxs)(y.mY,{ref:f,label:"Command Menu",onFocus:()=>o(!0),onKeyDown:e=>{if(u.length>0)"Escape"!==e.key&&("Backspace"!==e.key||r)||(e.preventDefault(),x(e=>e.slice(0,-1)));else if(0===u.length&&("Backspace"!==e.key||r||s(),"Escape"===e.key&&!r)){var t;o(!1),null===(t=m.current)||void 0===t||t.blur()}},children:[(0,l.jsx)(y.mY.Input,{ref:m,value:r,onValueChange:d,className:(0,n.cEb)({variant:"ghost",focus:"none"}),placeholder:"Filter contracts"}),i&&(0,l.jsx)(n.s_4,{className:"absolute z-20 min-w-[200px] max-h-[400px] overflow-auto p-1",children:(0,l.jsxs)(n.xrM,{children:[h&&(0,l.jsx)(n.__J,{className:"px-1.5 py-1",children:h.label}),(0,l.jsx)(y.mY.List,{children:(0,l.jsx)(w.F,{currentPage:h,beforeSelect:v,afterSelect:g,pushPage:j})})]})})]})]})}function _(){let{dataState:e,offset:t,limit:s,datasetFilteredCount:c,pageCount:i}=(0,a.G)();return(0,l.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,l.jsx)(N,{}),(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsx)(n.uDJ,{isLoading:"loading"===e,offset:t,limit:s,datasetTotal:c,pageTotal:i})]})}var z=s(91426),A=s(60381);function S(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,s]=e;return s.id}),[e.selection]),{openConfirmDialog:s}=(0,j.Rh)(),i=(0,z.IK)(),o=(0,C.useCallback)(async()=>{await (0,n.eKZ)(t.map(e=>i.delete({params:{id:e}})),{toastError:e=>{let{successCount:t,errorCount:s,totalCount:l}=e;return{title:"".concat((0,A._6)(t,"contract")," deleted"),body:"Error deleting ".concat(s,"/").concat(l," total contracts.")}},toastSuccess:e=>{let{totalCount:t}=e;return{title:"".concat((0,A._6)(t,"contract")," deleted")}},after:()=>{e.deselectAll()}})},[e,t,i]);return(0,l.jsx)(n.zxk,{"aria-label":"delete selected contracts",tip:"Delete selected contracts",onClick:()=>{s({title:"Delete contracts",action:"Delete",variant:"red",body:(0,l.jsx)("div",{className:"flex flex-col gap-1",children:(0,l.jsxs)(n.nvN,{size:"14",children:["Are you sure you would like to delete the"," ",(0,A._6)(e.selectionCount,"selected contract"),"?"]})}),onConfirm:async()=>{o()}})},children:(0,l.jsx)(c.Jrl,{})})}var R=s(69818);function E(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,s]=e;return s.hostIp}),[e.selection]);return(0,l.jsx)(R.e,{multiSelect:e,hostAddresses:t})}var T=s(53305);function F(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,s]=e;return s.hostKey}),[e.selection]);return(0,l.jsx)(T.a,{multiSelect:e,publicKeys:t})}var M=s(46348);function G(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,s]=e;return s.hostIp}),[e.selection]);return(0,l.jsx)(M.H,{multiSelect:e,hostAddresses:t})}var K=s(1884);function L(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,s]=e;return s.hostKey}),[e.selection]);return(0,l.jsx)(K.U,{multiSelect:e,publicKeys:t})}var V=s(50039);function W(){let{multiSelect:e}=(0,a.G)(),t=(0,C.useMemo)(()=>Object.entries(e.selection).map(e=>{let[t,s]=e;return s.hostKey}),[e.selection]);return(0,l.jsx)(V.c,{multiSelect:e,publicKeys:t})}function P(){let{multiSelect:e}=(0,a.G)();return(0,l.jsxs)(n.hv1,{multiSelect:e,entityWord:"contract",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)(F,{}),(0,l.jsx)(E,{})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)(L,{}),(0,l.jsx)(G,{})]}),(0,l.jsx)(W,{}),(0,l.jsx)(S,{})]})}let B=p.J;function D(){return(0,l.jsx)(h,{})}D.Layout=B,D.useLayoutProps=function(){let{openDialog:e}=(0,j.Rh)();return{title:"Active contracts",routes:m._,sidenav:(0,l.jsx)(f.e,{}),openSettings:()=>e("settings"),actions:(0,l.jsx)(k,{}),stats:(0,l.jsx)(_,{}),size:"full",scroll:!1,dockedControls:(0,l.jsx)(P,{})}}}},function(e){e.O(0,[705,888,774,179],function(){return e(e.s=77441)}),_N_E=e.O()}]);