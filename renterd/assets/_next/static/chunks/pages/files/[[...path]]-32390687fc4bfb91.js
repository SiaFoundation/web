(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[958],{38345:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/files/[[...path]]",function(){return s(22082)}])},67465:function(e,t,s){"use strict";s.d(t,{J:function(){return h}});var i=s(52322),n=s(39140),l=s(73621),a=s(6391),r=s.n(a),o=s(74881),c=s(41491),d=s(99484);function x(){var e,t,s;let{openDialog:a}=(0,d.Rh)(),r=(0,l.gM)({config:{swr:{revalidateOnFocus:!1}}}),o=(0,l.Tu)({config:{swr:{revalidateOnFocus:!1}}}),x=(0,l.cQ)(),u=(0,c.n)();return(0,i.jsxs)(n.HfT,{name:"renterd",peerCount:null===(e=x.data)||void 0===e?void 0:e.length,connectPeer:()=>a("connectPeer"),isSynced:u.isSynced,syncPercent:u.syncPercent,nodeBlockHeight:u.nodeBlockHeight,estimatedBlockHeight:u.estimatedBlockHeight,firstTimeSyncing:u.firstTimeSyncing,moreThan100BlocksToSync:u.moreThan100BlocksToSync,children:[(0,i.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,i.jsx)(n.__J,{size:"14",color:"subtle",noWrap:!0,className:"w-[100px]",children:"Wallet address"}),(0,i.jsx)(n.XxW,{className:"overflow-hidden",size:"14",maxLength:50,value:null===(t=o.data)||void 0===t?void 0:t.address,type:"address"})]}),(0,i.jsxs)("div",{className:"flex gap-4 justify-between items-center",children:[(0,i.jsx)(n.__J,{size:"14",color:"subtle",noWrap:!0,className:"w-[100px]",children:"Network"}),(0,i.jsx)(n.xvT,{size:"14",children:null===(s=r.data)||void 0===s?void 0:s.Name})]})]})}function u(){let e=(0,l.gM)({config:{swr:{revalidateOnFocus:!1}}});if(!e.data||"mainnet"===e.data.Name)return null;let t="zen"===e.data.Name?"Zen Testnet":e.data.Name;return(0,i.jsx)(n.t6k,{testnetName:t})}function h(e){let t=(0,l.Tu)(),{isSynced:s}=(0,c.n)();return(0,i.jsx)(n.tU3,{appName:"renterd",profile:(0,i.jsx)(x,{}),banner:(0,i.jsx)(u,{}),connectivityRoute:o.h,isSynced:s,walletBalance:t.data?new(r())(t.data.spendable).plus(t.data.unconfirmed):void 0,...e})}},15755:function(e,t,s){"use strict";s.d(t,{e:function(){return d}});var i=s(52322),n=s(39140),l=s(73621),a=s(44905),r=s(74881),o=s(36091),c=s(99484);function d(){var e,t;let{autopilot:s}=(0,o.q)(),d=(0,l.Z7)(),{openDialog:x}=(0,c.Rh)(),u=!(null===(e=d.data)||void 0===e?void 0:e.find(e=>"info"!==e.severity)),h=(null===(t=d.data)||void 0===t?void 0:t.length)||0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.KJW,{title:"Files",route:r._.files.index,children:(0,i.jsx)(n.ROc,{})}),"on"===s.state&&(0,i.jsx)(n.KJW,{title:"Autopilot",route:r._.autopilot.index,children:(0,i.jsx)(n.aFQ,{})}),(0,i.jsx)(n.KJW,{title:"Configuration",route:r._.config.index,children:(0,i.jsx)(n.wWN,{})}),(0,i.jsx)(n.KJW,{title:"Contracts",route:r._.contracts.index,children:(0,i.jsx)(n.VBo,{})}),(0,i.jsx)(n.KJW,{title:"Hosts",route:r._.hosts.index,children:(0,i.jsx)(n.VHe,{})}),(0,i.jsxs)("div",{className:"relative",children:[!!h&&u&&(0,i.jsx)("div",{className:(0,a.cx)("absolute -right-[2px] top-px w-1 h-1","rounded-full","bg-gray-1000 dark:bg-white","pointer-events-none")}),!!h&&!u&&(0,i.jsx)(n.xvT,{size:"10",className:(0,a.cx)("absolute -right-[9px] -top-1 py-px px-[5px]","text-white","bg-red-500 dark:bg-red-500 rounded","pointer-events-none"),color:"none",children:h.toLocaleString()}),(0,i.jsx)(n.KJW,{title:"Alerts",onClick:()=>x("alerts"),children:(0,i.jsx)(n.Dkj,{})})]})]})}},40121:function(e,t,s){"use strict";s.d(t,{a:function(){return n}});var i=s(73621);function n(e){return(0,i.yu)({...e,params:{key:"contractset"}})}},41491:function(e,t,s){"use strict";s.d(t,{n:function(){return l}});var i=s(48240),n=s(73621);function l(){var e,t,s,l;let{isUnlocked:a}=(0,i.Hv)(),r=(0,n.DQ)({config:{swr:{refreshInterval:e=>(null==e?void 0:e.synced)?6e4:1e4}}}),o=(0,n.nH)(),c=r.data?null===(e=r.data)||void 0===e?void 0:e.blockHeight:0,d=(0,n.Tu)({config:{swr:{refreshInterval:e=>(null==e?void 0:e.scanHeight)>=c?6e4:1e4}}}),x=a&&c&&o?Number((100*Math.min(c/o,1)).toFixed(1)):0,u=a&&c&&d.data?Number((100*Math.min(d.data.scanHeight/o,1)).toFixed(1)):0;return{isSynced:null===(t=r.data)||void 0===t?void 0:t.synced,isWalletSynced:(null===(s=r.data)||void 0===s?void 0:s.synced)&&(null===(l=d.data)||void 0===l?void 0:l.scanHeight)>=c-1,nodeBlockHeight:c,estimatedBlockHeight:o,syncPercent:x,walletScanPercent:u,moreThan100BlocksToSync:!!c&&!!o&&o-c>100,firstTimeSyncing:!!c&&!!o&&o-c>5e4}}},22082:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O}});var i=s(52322),n=s(15755),l=s(74881),a=s(99484),r=s(39140),o=s(7446);function c(){return(0,i.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,i.jsx)(r.xvT,{children:(0,i.jsx)(r.Ckx,{className:"scale-[200%]"})}),(0,i.jsx)(r.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching files."})]})}function d(){return(0,i.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,i.jsx)(r.xvT,{children:(0,i.jsx)(r.Hb6,{className:"scale-[200%]"})}),(0,i.jsx)(r.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No files matching filters."})]})}function x(){return(0,i.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,i.jsx)(r.xvT,{children:(0,i.jsx)(r.Y9T,{className:"scale-[200%]"})}),(0,i.jsx)(r.xvT,{color:"subtle",className:"text-center max-w-[500px]",children:"No files, drag and drop files or click here to start uploading."})]})}function u(){let{uploadFiles:e,datasetPage:t,pageCount:s,dataState:n,columns:l,sortField:a,sortDirection:u,sortableColumns:h,toggleSort:v}=(0,o.Y)();return(0,i.jsx)("div",{className:"relative",children:(0,i.jsx)(r.fhJ,{onDrop:e,noClick:s>0,children:(0,i.jsx)(r.iA_,{isLoading:"loading"===n,emptyState:"noneMatchingFilters"===n?(0,i.jsx)(d,{}):"noneYet"===n?(0,i.jsx)(x,{}):"error"===n?(0,i.jsx)(c,{}):null,pageSize:10,data:t,columns:l,sortableColumns:h,sortField:a,sortDirection:u,toggleSort:v,rowSize:"dense"})})})}var h=s(2784);function v(){let{activeDirectory:e,setActiveDirectory:t}=(0,o.Y)(),s=(0,h.useRef)(null);return(0,h.useEffect)(()=>{let e=setTimeout(()=>{var e;null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100);return()=>{clearTimeout(e)}},[e]),(0,i.jsx)(r.xrM,{children:(0,i.jsxs)("div",{className:"flex gap-1 items-center h-full",children:[(0,i.jsx)(r.xvT,{onClick:()=>t(()=>[]),size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:"Files"}),!!e.length&&(0,i.jsx)(r.xvT,{size:"16",color:"verySubtle",className:"flex items-center",children:(0,i.jsx)(r.F3j,{})}),e.map((e,s)=>(0,i.jsxs)(h.Fragment,{children:[s>0&&(0,i.jsx)(r.xvT,{size:"16",color:"verySubtle",className:"flex items-center",children:(0,i.jsx)(r.F3j,{})}),(0,i.jsx)(r.xvT,{onClick:()=>t(e=>e.slice(0,s+1)),size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:e})]},e+s)),(0,i.jsx)("div",{ref:s})]})})}var j=s(67465),f=s(74424),m=s(30774),g=s(76635);function p(){let{configurableColumns:e,toggleColumnVisibility:t,resetDefaultColumnVisibility:s,sortField:n,setSortField:l,sortDirection:a,setSortDirection:c,enabledColumns:d}=(0,o.Y)();return(0,i.jsxs)(r.J2e,{trigger:(0,i.jsxs)(r.zxk,{size:"small",tip:"Configure view",tipAlign:"end",children:[(0,i.jsx)(r.hiv,{}),"View",(0,i.jsx)(r.EMN,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,i.jsxs)(r.WVB,{children:[(0,i.jsx)(r.__J,{children:"Order by"}),(0,i.jsx)(r.kFS,{children:(0,i.jsx)(r.PhF,{value:n,onChange:e=>{l(e.currentTarget.value)},children:Object.entries((0,g.groupBy)(m.Fo,"category")).map(e=>{let[t,s]=e;return(0,i.jsx)("optgroup",{label:t,children:s.map(e=>(0,i.jsx)(r.Wxm,{value:e.id,children:e.label},e.id))},t)})})})]}),(0,i.jsxs)(r.WVB,{children:[(0,i.jsx)(r.__J,{children:"Direction"}),(0,i.jsx)(r.kFS,{children:(0,i.jsxs)(r.PhF,{value:a,onClick:e=>{e.stopPropagation()},onChange:e=>{c(e.currentTarget.value)},children:[(0,i.jsx)(r.Wxm,{value:"desc",children:"descending"},"desc"),(0,i.jsx)(r.Wxm,{value:"asc",children:"ascending"},"asc")]})})]}),(0,i.jsx)(r.Clw,{}),(0,i.jsxs)(r.WVB,{children:[(0,i.jsx)(r.__J,{children:"Display properties"}),(0,i.jsx)(r.kFS,{children:(0,i.jsx)(r.zxk,{onClick:e=>{e.stopPropagation(),s()},children:"Reset default"})})]}),(0,i.jsx)(r.WVB,{children:(0,i.jsx)(r.j4H,{options:e.map(e=>({label:e.label,value:e.id})),values:d,onChange:e=>t(e)})})]})}function b(){let{openDialog:e}=(0,a.Rh)(),{uploadFiles:t}=(0,o.Y)(),{getRootProps:s,getInputProps:n}=(0,f.uI)({noDrag:!0,onDrop:t});return(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(r.zxk,{onClick:()=>e("filesSearch"),tip:"Search files",children:(0,i.jsx)(r.UBs,{})}),(0,i.jsxs)(r.zxk,{...s(),tip:"Upload files",children:[(0,i.jsx)("input",{...n()}),(0,i.jsx)(r.bQp,{})]}),(0,i.jsx)(r.zxk,{onClick:()=>e("filesCreateDirectory"),tip:"Create directory",children:(0,i.jsx)(r.L37,{})}),(0,i.jsx)(p,{})]})}var T=s(73621),N=s(2288);function w(){let e=(0,T.Q5)({config:{swr:{refreshInterval:6e4,keepPreviousData:!0,revalidateOnFocus:!1}}});if(!e.data)return null;let t=e.data.totalObjectsSize?e.data.totalSectorsSize/e.data.totalObjectsSize:0;return(0,i.jsx)(r.ua7,{side:"bottom",content:(0,i.jsxs)(r.xvT,{className:"flex justify-between gap-6",children:[(0,i.jsxs)(r.xvT,{className:"flex flex-col gap-1",children:[(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"size of all files"}),(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"with redundancy"}),!!t&&(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"average redundancy factor"}),(0,i.jsx)(r.Z0O,{className:"w-full my-1"}),(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"reclaimable space"}),(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"total storage utilization"})]}),(0,i.jsxs)(r.xvT,{className:"flex flex-col gap-1 items-end",children:[(0,i.jsx)(r.xvT,{size:"12",children:(0,N.vW)(e.data.totalObjectsSize)}),(0,i.jsx)(r.xvT,{size:"12",children:(0,N.vW)(e.data.totalSectorsSize)}),!!t&&(0,i.jsxs)(r.xvT,{size:"12",font:"mono",children:[t.toFixed(1),"x"]}),(0,i.jsx)(r.Z0O,{className:"w-full my-1"}),(0,i.jsx)(r.xvT,{size:"12",children:(0,N.vW)(e.data.totalUploadedSize-e.data.totalSectorsSize)}),(0,i.jsx)(r.xvT,{size:"12",children:(0,N.vW)(e.data.totalUploadedSize)})]})]}),children:(0,i.jsx)(r.xvT,{size:"12",font:"mono",children:"".concat((0,N.vW)(e.data.totalObjectsSize)).concat(t?" @ ".concat(t.toFixed(1),"x"):"")})})}var z=s(1739);function y(){var e;let t=(0,T.Jv)({params:{key:""},config:{swr:{dedupingInterval:5e3}}}),s=(0,h.useMemo)(()=>{var e,s,i,n;return null===(e=t.data)||void 0===e?void 0:null===(s=e.entries)||void 0===s?void 0:s.reduce((e,t)=>{let{health:s}=t;return s<e?s:e},(null===(i=null===(n=t.data)||void 0===n?void 0:n.entries[0])||void 0===i?void 0:i.health)||1)},[t.data]),{displayHealth:n,label:l}=(0,z.B)({health:s,size:1,isDirectory:!0});return(null===(e=t.data)||void 0===e?void 0:e.entries)&&0!==t.data.entries.length?(0,i.jsx)(r.ua7,{align:"end",content:(0,i.jsxs)("div",{className:"flex flex-col overflow-hidden mb-1",children:[(0,i.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,i.jsx)(r.xvT,{size:"12",children:l}),(0,i.jsxs)(r.xvT,{size:"12",children:[(100*n).toFixed(0),"%"]})]}),(0,i.jsx)(r.Z0O,{className:"w-full my-1.5"}),(0,i.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"Health is calculated as the minimum health value from across all file slabs. For directories this is across all contained files."}),(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"Slab health is calculated as the number of shards with active contracts in the autopilot contract set above the minimum required shards and expressed as a percentage."})]}),(0,i.jsx)(r.Z0O,{className:"w-full my-1.5"}),(0,i.jsxs)("div",{className:"flex gap-3 justify-between",children:[(0,i.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"excellent health"}),(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"good health"}),(0,i.jsx)(r.xvT,{size:"12",color:"subtle",children:"poor health"})]}),(0,i.jsxs)("div",{className:"flex flex-col gap-1 items-end",children:[(0,i.jsxs)(r.xvT,{size:"12",color:"subtle",children:[100*z.V.excellent,"%"]}),(0,i.jsxs)(r.xvT,{size:"12",color:"subtle",children:[100*z.V.good,"% -"," ",100*z.V.excellent,"%"]}),(0,i.jsxs)(r.xvT,{size:"12",color:"subtle",children:[100*z.V.poor,"% - ",100*z.V.good,"%"]})]})]})]}),children:(0,i.jsx)(r.xvT,{size:"12",font:"mono",className:"flex",children:l})}):null}var S=s(36091),k=s(40121);function F(){var e;let{autopilot:t}=(0,S.q)(),s=(0,T.e$)({config:{swr:{errorRetryCount:0}}}),n=(0,k.a)(),a=function(){var e,t;let{autopilot:s}=(0,S.q)(),i=(0,T.e$)({disabled:"on"!==s.state}),n=(0,k.a)();return{isValidating:i.isValidating||n.isValidating,data:(null===(e=i.data)||void 0===e?void 0:e.contracts.set)===(null===(t=n.data)||void 0===t?void 0:t.default)}}(),o="none";return"on"!==t.state||a.isValidating||a.data||(o="contractSetMismatch"),"on"===t.state&&s.error&&(o="setupAutopilot"),!n.data||(null===(e=n.data)||void 0===e?void 0:e.default)||(o="setupDefaultContractSet"),(0,i.jsxs)(i.Fragment,{children:["setupDefaultContractSet"===o&&(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(r.xvT,{size:"12",font:"mono",weight:"medium",color:"amber",children:(0,i.jsx)(r.qdM,{})}),(0,i.jsxs)(r.xvT,{size:"12",font:"mono",weight:"medium",color:"amber",children:["Configure a default contract set to get started."," ",(0,i.jsx)(r.rUS,{underline:"hover",size:"12",font:"mono",weight:"medium",color:"amber",href:l._.config.index,children:"Configuration →"})]})]}),"setupAutopilot"===o&&(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(r.xvT,{size:"12",font:"mono",weight:"medium",color:"amber",children:(0,i.jsx)(r.qdM,{})}),(0,i.jsxs)(r.xvT,{size:"12",font:"mono",weight:"medium",color:"amber",children:["Configure autopilot to get started."," ",(0,i.jsx)(r.rUS,{underline:"hover",size:"12",font:"mono",weight:"medium",color:"amber",href:l._.autopilot.index,children:"Autopilot →"})]})]}),"contractSetMismatch"===o&&(0,i.jsx)(r.ua7,{align:"start",content:(0,i.jsx)(i.Fragment,{children:"The autopilot contract set does not match the default contract set. This means that by default workers will not upload data to contracts that autopilot manages. Unless these contract are being manually maintained, this will result in data loss. Continue with caution or update the autopilot contract set to match the default contract set."}),children:(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)(r.xvT,{size:"12",font:"mono",weight:"medium",color:"amber",children:(0,i.jsx)(r.qdM,{})}),(0,i.jsx)(r.xvT,{size:"12",font:"mono",weight:"medium",color:"amber",children:"Uploaded data will not be managed by autopilot."})]})})]})}function _(){var e;let{pageCount:t}=(0,o.Y)(),s=(0,T.Q5)({config:{swr:{refreshInterval:6e4,keepPreviousData:!0,revalidateOnFocus:!1}}});return(0,i.jsx)(r.ua7,{side:"bottom",content:"Number of files in current directory",children:(0,i.jsxs)(r.xvT,{size:"12",font:"mono",children:[t.toLocaleString(),s.data?" of ".concat(null===(e=s.data)||void 0===e?void 0:e.numObjects.toLocaleString()," files"):" files"]})})}function C(){return(0,i.jsxs)("div",{className:"flex gap-2 w-full",children:[(0,i.jsx)(F,{}),(0,i.jsx)("div",{className:"flex-1"}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsx)(r.ua7,{side:"bottom",content:"Filtered statistics",children:(0,i.jsx)(r.xvT,{size:"12",color:"verySubtle",children:(0,i.jsx)(r.q0D,{})})}),(0,i.jsx)(_,{})]}),(0,i.jsx)(r.Z0O,{variant:"vertical",className:"h-full"}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)(r.ua7,{side:"bottom",content:"Global statistics",children:(0,i.jsx)(r.xvT,{size:"12",color:"verySubtle",children:(0,i.jsx)(r.RFr,{})})}),(0,i.jsx)(w,{}),(0,i.jsx)(y,{})]})]})]})}function W(){let{openDialog:e}=(0,a.Rh)();return(0,i.jsx)(j.J,{title:"Files",navTitle:null,routes:l._,sidenav:(0,i.jsx)(n.e,{}),nav:(0,i.jsx)(v,{}),stats:(0,i.jsx)(C,{}),actions:(0,i.jsx)(b,{}),openSettings:()=>e("settings"),children:(0,i.jsx)("div",{className:"p-6 min-w-fit",children:(0,i.jsx)(u,{})})})}function O(){return(0,i.jsx)(W,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=38345)}),_N_E=e.O()}]);