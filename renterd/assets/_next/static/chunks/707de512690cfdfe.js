(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97820,3640,e=>{"use strict";var s=e.i(91398);e.i(86663);var t=e.i(22494),l=e.i(95062),i=e.i(79455),r=e.i(51281),a=e.i(70765),n=e.i(77593),o=e.i(929);e.i(71487);var c=e.i(76993),d=e.i(43652);e.i(86283);var x=e.i(53658);function u(){let e=(0,x.useAutopilotConfig)();return{active:!e.data?.enabled}}var h=e.i(10336);function j(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.MisuseOutline32,{className:"scale-[200%]"})}),(0,s.jsx)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching files."})]})}var f=e.i(54413),m=e.i(69509);function g(){let{filters:e,resetFilters:t}=(0,m.useFilesManager)();return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.Filter32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsx)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"No files matching filters."}),!!e.length&&(0,s.jsx)(f.Button,{onClick:e=>{e.stopPropagation(),t()},children:"Clear filters"})]})]})}function p(){let{activeBucketName:e,activeDirectory:t,setActiveDirectory:l}=(0,m.useFilesManager)();return t.length>1?(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.CloudUpload32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsx)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"The current directory does not contain any files yet, drag and drop files or click here to start uploading."}),(0,s.jsx)(f.Button,{onClick:e=>{e.stopPropagation(),l(e=>e.slice(0,-1))},children:"Back"})]})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.CloudUpload32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsxs)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:["The ",(0,s.jsx)(r.Code,{children:e})," bucket does not contain any files, drag and drop files or click here to start uploading."]}),(0,s.jsx)(a.LinkButton,{href:d.routes.buckets.index,onClick:e=>{e.stopPropagation()},children:"View buckets list"})]})]})}var v=e.i(47438),b=e.i(84588);function N(){let{openDialog:e}=(0,b.useDialog)();return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(v.BucketIcon,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsx)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"Create a bucket to get started. Buckets are distinct storage areas that you can use to organize your files."}),(0,s.jsxs)(f.Button,{onClick:()=>e("filesCreateBucket"),tip:"Create bucket",children:[(0,s.jsx)(c.Add16,{}),"Create bucket"]})]})]})}function y(){let{isViewingRootOfABucket:e,isViewingBuckets:t}=(0,m.useFilesManager)(),{datasetState:l}=(0,i.useFilesDirectory)(),x=u(),f=(0,h.useNotEnoughContracts)();return"noneOnPage"===l?(0,s.jsx)(n.StateNoneOnPage,{}):"noneMatchingFilters"===l?(0,s.jsx)(g,{}):"error"===l?(0,s.jsx)(j,{}):e&&"noneYet"===l&&x.active?(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.CloudUpload32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 justify-center items-center",children:[(0,s.jsxs)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:["Before you can upload files you must configure and enable your settings. Once enabled, ",(0,s.jsx)(r.Code,{children:"renterd"})," will find contracts with hosts based on the settings. ",(0,s.jsx)(r.Code,{children:"renterd"})," will also repair your data as hosts come and go."]}),(0,s.jsx)(a.LinkButton,{variant:"accent",href:d.routes.config.index,children:"Configure"})]})]}):e&&"noneYet"===l&&f.active?(0,s.jsxs)("div",{className:"flex flex-col gap-12 justify-center items-center h-[400px] cursor-pointer",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.CloudUpload32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 justify-center items-center",children:[(0,s.jsxs)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:["There are not enough contracts to upload data yet. Redundancy is configured to use ",f.required," shards which means at least that many contracts are required."]}),(0,s.jsxs)(o.Text,{size:"30",className:"text-center max-w-[500px]",children:[f.count,"/",f.required]})]})]}):"noneYet"===l?t?(0,s.jsx)(N,{}):(0,s.jsx)(p,{}):null}var T=e.i(79757);function C(){let{isViewingABucket:e}=(0,m.useFilesManager)(),s=(0,T.useSyncStatus)(),t=(0,h.useNotEnoughContracts)();return e&&!t.active&&s.isSynced}e.i(37869);var S=e.i(93936),k=e.i(5024);function F(){let{isViewingBuckets:e}=(0,m.useFilesManager)(),{uploadFiles:r}=(0,k.useUploadsManager)(),{datasetPage:a,datasetPageTotal:n,datasetState:o,cellContext:c,onDragEnd:d,onDragOver:x,onDragStart:u,onDragCancel:h,onDragMove:j,draggingObjects:f,tableState:g}=(0,i.useFilesDirectory)(),p=C();return(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(l.Dropzone,{testId:"filesDropzone",onDrop:r,noClick:!p||n>0,noDrag:!p,children:(0,s.jsx)(t.Table,{testId:e?"bucketsTable":"filesTable",isLoading:"loading"===o,emptyState:(0,s.jsx)(y,{}),pageSize:10,data:a,context:c,columns:g.visibleColumns,sortableColumns:g.sortableColumns,sortField:g.sortField,sortDirection:g.sortDirection,toggleSort:g.toggleSort,rowSize:"dense",onDragStart:u,onDragOver:x,onDragEnd:d,onDragCancel:h,onDragMove:j,draggingDatums:f,draggingMultipleLabel:e=>`move ${(0,S.pluralize)(e,"file")}`})})})}function z(){return(0,s.jsx)("div",{className:"p-6 min-w-fit",children:(0,s.jsx)(F,{})})}function w(){return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.MisuseOutline32,{className:"scale-[200%]"})}),(0,s.jsx)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"Error fetching files."})]})}function M(){let{filters:e,resetFilters:t}=(0,m.useFilesManager)();return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px]",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.Filter32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsx)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:"No files matching filters."}),!!e.length&&(0,s.jsx)(f.Button,{onClick:e=>{e.stopPropagation(),t()},children:"Clear filters"})]})]})}function D(){let{activeBucketName:e}=(0,m.useFilesManager)();return(0,s.jsxs)("div",{className:"flex flex-col gap-10 justify-center items-center h-[400px] cursor-pointer",children:[(0,s.jsx)(o.Text,{children:(0,s.jsx)(c.CloudUpload32,{className:"scale-[200%]"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsxs)(o.Text,{color:"subtle",className:"text-center max-w-[500px]",children:["The ",(0,s.jsx)(r.Code,{children:e})," bucket does not contain any files."]}),(0,s.jsx)(a.LinkButton,{href:d.routes.buckets.index,onClick:e=>{e.stopPropagation()},children:"View buckets list"})]})]})}var B=e.i(2553);function O(){let{datasetState:e}=(0,B.useFilesFlat)();return"noneOnPage"===e?(0,s.jsx)(n.StateNoneOnPage,{}):"noneMatchingFilters"===e?(0,s.jsx)(M,{}):"error"===e?(0,s.jsx)(w,{}):"noneYet"===e?(0,s.jsx)(D,{}):null}function P(){let{datasetPage:e,datasetState:i,cellContext:r,tableState:a,datasetPageTotal:n}=(0,B.useFilesFlat)(),{uploadFiles:o}=(0,k.useUploadsManager)(),c=C();return(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(l.Dropzone,{testId:"filesDropzone",onDrop:o,noClick:!c||n>0,noDrag:!c,children:(0,s.jsx)(t.Table,{testId:"filesTable",isLoading:"loading"===i,emptyState:(0,s.jsx)(O,{}),pageSize:10,data:e,context:r,columns:a.visibleColumns,sortableColumns:a.sortableColumns,sortField:a.sortField,sortDirection:a.sortDirection,toggleSort:a.toggleSort,rowSize:"dense"})})})}function U(){return(0,s.jsx)("div",{className:"p-6 min-w-fit",children:(0,s.jsx)(P,{})})}function L(){let{isViewingBuckets:e,activeExplorerMode:t}=(0,m.useFilesManager)();return"directory"===t||e?(0,s.jsx)(z,{}):(0,s.jsx)(U,{})}e.s(["Files",()=>L],97820);var A=e.i(65667),I=e.i(91788),R=e.i(40410),E=e.i(3084);function W(){let{activeDirectory:e,setActiveDirectory:t}=(0,m.useFilesManager)(),l=(0,I.useRef)(null);return(0,I.useEffect)(()=>{let e=setTimeout(()=>{l.current?.scrollIntoView({behavior:"smooth"})},100);return()=>{clearTimeout(e)}},[e]),(0,s.jsxs)("div",{className:"flex gap-2 items-center h-full",children:[(0,s.jsx)(E.FilesExplorerModeButton,{}),(0,s.jsx)(R.ScrollArea,{children:(0,s.jsxs)("div",{className:"flex gap-1 items-center h-full",children:[(0,s.jsx)(o.Text,{onClick:()=>t(()=>[]),size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:"Buckets"}),e.length>0&&(0,s.jsx)(o.Text,{size:"16",color:"verySubtle",className:"flex items-center",children:(0,s.jsx)(c.ChevronRight16,{})}),e.map((e,l)=>(0,s.jsxs)(I.Fragment,{children:[l>0&&(0,s.jsx)(o.Text,{size:"16",color:"verySubtle",className:"flex items-center",children:(0,s.jsx)(c.ChevronRight16,{})}),(0,s.jsx)(o.Text,{onClick:()=>t(e=>e.slice(0,l+1)),size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:e})]},e+l)),(0,s.jsx)("div",{ref:l})]})})]})}function $(){let{activeBucketName:e,setActiveDirectory:t}=(0,m.useFilesManager)();return(0,s.jsxs)("div",{className:"flex gap-2 items-center h-full",children:[(0,s.jsx)(E.FilesExplorerModeButton,{}),(0,s.jsx)(R.ScrollArea,{children:(0,s.jsxs)("div",{className:"flex gap-1 items-center h-full",children:[(0,s.jsx)(o.Text,{onClick:()=>t(()=>[]),size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:"Buckets"}),(0,s.jsx)(o.Text,{size:"16",color:"verySubtle",className:"flex items-center",children:(0,s.jsx)(c.ChevronRight16,{})}),(0,s.jsx)(o.Text,{onClick:()=>null,size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:e}),(0,s.jsx)(o.Text,{size:"16",color:"verySubtle",className:"flex items-center",children:(0,s.jsx)(c.ChevronRight16,{})}),(0,s.jsx)(o.Text,{size:"18",weight:"semibold",className:"flex items-center cursor-pointer",noWrap:!0,children:"All files"})]})})]})}var V=e.i(7357);e.i(17190);var q=e.i(34316),Y=e.i(34666),H=e.i(59651),K=e.i(34530),G=e.i(33124),J=e.i(7880),Q=e.i(11956);e.i(19513);var X=e.i(36409);function Z({tableState:e}){return(0,s.jsxs)(G.Popover,{trigger:(0,s.jsxs)(f.Button,{size:"small","aria-label":"configure view",tip:"Configure view",tipAlign:"end",children:[(0,s.jsx)(c.SettingsAdjust16,{}),"View",(0,s.jsx)(c.CaretDown16,{})]}),contentProps:{align:"end",className:"max-w-[300px]"},children:[(0,s.jsxs)(J.BaseMenuItem,{children:[(0,s.jsx)(K.Label,{htmlFor:"sortField",children:"Order by"}),(0,s.jsx)(J.MenuItemRightSlot,{children:(0,s.jsx)(Y.Select,{id:"sortField",name:"sortField",value:e.sortField,onChange:s=>{e.setSortField(s.currentTarget.value)},children:Object.entries((0,X.groupBy)(Q.sortOptions,"category")).map(([e,t])=>(0,s.jsx)("optgroup",{label:e,children:t.map(e=>(0,s.jsx)(Y.Option,{value:e.id,children:e.label},e.id))},e))})})]}),(0,s.jsxs)(J.BaseMenuItem,{children:[(0,s.jsx)(K.Label,{htmlFor:"sortDirection",children:"Direction"}),(0,s.jsx)(J.MenuItemRightSlot,{children:(0,s.jsxs)(Y.Select,{id:"sortDirection",name:"sortDirection",value:e.sortDirection,onClick:e=>{e.stopPropagation()},onChange:s=>{e.setSortDirection(s.currentTarget.value)},children:[(0,s.jsx)(Y.Option,{value:"desc",children:"descending"},"desc"),(0,s.jsx)(Y.Option,{value:"asc",children:"ascending"},"asc")]})})]}),(0,s.jsx)(J.MenuSeparator,{}),(0,s.jsxs)(J.BaseMenuItem,{children:[(0,s.jsx)(K.Label,{children:"Display properties"}),(0,s.jsx)(J.MenuItemRightSlot,{children:(0,s.jsx)(f.Button,{onClick:s=>{s.stopPropagation(),e.resetDefaultColumnVisibility()},children:"Reset default"})})]}),(0,s.jsx)(J.BaseMenuItem,{children:(0,s.jsx)(H.PoolCombo,{options:e.configurableColumns.map(e=>({label:e.label,value:e.id})),values:e.visibleColumns.map(e=>e.id),onChange:s=>e.toggleColumnVisibility(s)})})]})}let{useDropzone:_}=q;function ee(){let{openDialog:e}=(0,b.useDialog)(),{isViewingBuckets:t}=(0,m.useFilesManager)(),{tableState:l}=(0,i.useFilesDirectory)(),{uploadFiles:r}=(0,k.useUploadsManager)(),a=C(),{getRootProps:n,getInputProps:o}=_({noDrag:!0,noClick:!a,onDrop:r});return(0,s.jsxs)("div",{className:"flex gap-2",children:[t?(0,s.jsxs)(f.Button,{onClick:()=>e("filesCreateBucket"),tip:"Create bucket",children:[(0,s.jsx)(c.Add16,{}),"Create bucket"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Button,{onClick:()=>e("filesSearch"),tip:"Search files","aria-label":"search files",children:(0,s.jsx)(c.Search16,{})}),(0,s.jsxs)(f.Button,{"aria-label":"Upload files",...n(),tip:"Upload files",disabled:!a,children:[(0,s.jsx)("input",{...o()}),(0,s.jsx)(c.CloudUpload16,{})]}),(0,s.jsx)(f.Button,{"aria-label":"Create directory",disabled:!a,onClick:()=>e("filesCreateDirectory"),tip:"Create directory",children:(0,s.jsx)(c.FolderAdd16,{})})]}),(0,s.jsx)(Z,{tableState:l})]})}var es=e.i(55737),et=e.i(40480),el=e.i(26069),ei=e.i(38921),er=e.i(59999),ea=e.i(41399);function en(){let e=(0,x.useObjectStats)({config:{swr:{refreshInterval:(0,ea.minutesInMilliseconds)(5),revalidateOnFocus:!1}}});if(!e.data&&e.isValidating)return(0,s.jsx)(ei.LoadingDots,{className:"pr-1"});if(!e.data)return null;let t=e.data.totalObjectsSize+e.data.totalUnfinishedObjectsSize,l=t?e.data.totalSectorsSize/t:0;return(0,s.jsx)(el.Tooltip,{side:"bottom",content:(0,s.jsxs)("div",{className:"flex justify-between gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"size of all files"}),(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"with redundancy"}),!!l&&(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"average redundancy factor"}),(0,s.jsx)(et.Separator,{className:"w-full my-1"}),(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"total storage utilization"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 items-end",children:[(0,s.jsx)(o.Text,{size:"12",children:(0,er.humanBytes)(e.data.totalObjectsSize)}),(0,s.jsx)(o.Text,{size:"12",children:(0,er.humanBytes)(e.data.totalSectorsSize)}),!!l&&(0,s.jsxs)(o.Text,{size:"12",font:"mono",children:[l.toFixed(1),"x"]}),(0,s.jsx)(et.Separator,{className:"w-full my-1"}),(0,s.jsx)(o.Text,{size:"12",children:(0,er.humanBytes)(e.data.totalUploadedSize)})]})]}),children:(0,s.jsx)(o.Text,{size:"12",font:"mono",children:`${(0,er.humanBytes)(e.data.totalObjectsSize)}${l?` @ ${l.toFixed(1)}x`:""}`})})}var eo=e.i(62625);function ec(){let e=(0,x.useObjectStats)({config:{swr:{refreshInterval:6e4,keepPreviousData:!0,revalidateOnFocus:!1}}}),{displayHealth:t,label:l}=(0,eo.getFileHealth)({health:e.data?.minHealth,size:1,isDirectory:!0}),i=e.data?.totalObjectsSize===0;return!e.data||i?null:(0,s.jsx)(el.Tooltip,{align:"end",content:(0,s.jsxs)("div",{className:"flex flex-col overflow-hidden mb-1",children:[(0,s.jsxs)("div",{className:"flex justify-between gap-2",children:[(0,s.jsx)(o.Text,{size:"12",children:l}),(0,s.jsxs)(o.Text,{size:"12",children:[(100*t).toFixed(0),"%"]})]}),(0,s.jsx)(et.Separator,{className:"w-full my-1.5"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"Health is calculated as the minimum health value from across all file slabs. For directories this is across all contained files."}),(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"Slab health is calculated as the number of shards with active contracts in the autopilot contract set above the minimum required shards and expressed as a percentage."})]}),(0,s.jsx)(et.Separator,{className:"w-full my-1.5"}),(0,s.jsxs)("div",{className:"flex gap-3 justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"excellent health"}),(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"good health"}),(0,s.jsx)(o.Text,{size:"12",color:"subtle",children:"poor health"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 items-end",children:[(0,s.jsxs)(o.Text,{size:"12",color:"subtle",children:[100*eo.healthThresholds.excellent,"%"]}),(0,s.jsxs)(o.Text,{size:"12",color:"subtle",children:[100*eo.healthThresholds.good,"% -"," ",100*eo.healthThresholds.excellent,"%"]}),(0,s.jsxs)(o.Text,{size:"12",color:"subtle",children:[100*eo.healthThresholds.poor,"% - ",100*eo.healthThresholds.good,"%"]})]})]})]}),children:(0,s.jsx)(o.Text,{size:"12",font:"mono",className:"flex",children:l})})}var ed=e.i(67419);function ex(){let e=(0,T.useSyncStatus)(),t=u(),l=(0,h.useNotEnoughContracts)(),i=(0,I.useMemo)(()=>e.isSynced?null:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(o.Text,{size:"12",font:"mono",weight:"medium",color:"amber",children:"Uploads are disabled until renterd is synced."}),(0,s.jsx)(ed.Paragraph,{size:"12",children:"The blockchain must be fully synced before uploading files. This can take a while depending on your hardware and network connection."})]},"syncStatus"),[e.isSynced]),r=(0,I.useMemo)(()=>t.active?(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(o.Text,{size:"12",font:"mono",weight:"medium",color:"amber",children:"Autopilot is currently disabled."}),(0,s.jsx)(ed.Paragraph,{size:"12",children:"Files and contracts will not be automatically maintained while autopilot is disabled."})]},"autopilotNotConfigured"):null,[t.active]),a=(0,I.useMemo)(()=>l.active?(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)(o.Text,{size:"12",font:"mono",weight:"medium",color:"amber",children:"Uploads are disabled until settings are configured."}),(0,s.jsxs)(ed.Paragraph,{size:"12",children:["There are not enough contracts to upload data yet. Redundancy is configured to use ",l.required," shards which means at least that many contracts are required."]})]},"notEnoughContracts"):null,[l]),n=(0,I.useMemo)(()=>[i,r,a].filter(Boolean),[i,r,a]);if(n.length)return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G.Popover,{trigger:(0,s.jsx)(f.Button,{variant:"ghost",icon:"contrast",color:"amber",children:(0,s.jsx)(c.Warning16,{})}),children:(0,s.jsx)("div",{className:"flex flex-col gap-3 px-1 py-2",children:n})}),(0,s.jsx)(et.Separator,{variant:"vertical",className:"h-full"})]})}var eu=e.i(87400);function eh(){let{isViewingABucket:e}=(0,m.useFilesManager)(),{datasetPageTotal:t}=(0,eu.useFilesActiveMode)(),l=(0,x.useObjectStats)({config:{swr:{refreshInterval:6e4,keepPreviousData:!0,revalidateOnFocus:!1}}}),i=l.data?.numObjects||0;return e?(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)(el.Tooltip,{side:"bottom",content:"Number of files in page of current directory",children:(0,s.jsx)(o.Text,{size:"12",font:"mono",children:t.toLocaleString()})}),(0,s.jsx)(el.Tooltip,{side:"bottom",content:"Number of files across all buckets",children:(0,s.jsx)(o.Text,{size:"12",font:"mono",children:l.data?`of ${i.toLocaleString()} files`:" files"})})]}):(0,s.jsx)(el.Tooltip,{side:"bottom",content:"Number of files across all buckets",children:l.data?(0,s.jsxs)(o.Text,{size:"12",font:"mono",children:[i.toLocaleString()," files"]}):(0,s.jsx)(ei.LoadingDots,{})})}function ej(){return(0,s.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,s.jsx)(ex,{}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(el.Tooltip,{side:"bottom",content:"Filtered statistics",children:(0,s.jsx)(o.Text,{size:"12",color:"verySubtle",children:(0,s.jsx)(c.Filter16,{})})}),(0,s.jsx)(eh,{})]}),(0,s.jsx)(et.Separator,{variant:"vertical",className:"h-full"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(el.Tooltip,{side:"bottom",content:"Global statistics",children:(0,s.jsx)(o.Text,{size:"12",color:"verySubtle",children:(0,s.jsx)(c.Wikis16,{})})}),(0,s.jsx)(en,{}),(0,s.jsx)(ec,{})]})]})}var ef=e.i(77786),em=e.i(66033);function eg({placeholder:e}){let{setFilter:t,removeFilter:l,fileNamePrefixFilter:i}=(0,m.useFilesManager)(),[r,a]=(0,I.useState)(i),[n]=(0,em.useDebounce)(r,500);return(0,I.useEffect)(()=>{i!==r&&a(i)},[i]),(0,I.useEffect)(()=>{i!==n&&(n.length?t({id:"fileNamePrefix",label:"",value:n}):l("fileNamePrefix"))},[n]),(0,s.jsxs)("div",{className:"flex gap-1 flex-1",children:[(0,s.jsx)(ef.TextField,{"aria-label":"filter files in current directory",variant:"ghost",focus:"none",placeholder:e||"Filter files in current directory",value:r,onChange:e=>a(e.currentTarget.value),className:"w-full !pl-0"}),!!r.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Button,{variant:"ghost",onClick:()=>a(""),children:(0,s.jsx)(c.Close16,{})}),(0,s.jsx)(et.Separator,{variant:"vertical",className:"h-full"})]})]})}function ep(){let{isViewingABucket:e,isViewingBuckets:t}=(0,m.useFilesManager)(),{limit:l,marker:r,nextMarker:a,isMore:n,datasetPageTotal:o,datasetState:c}=(0,i.useFilesDirectory)();return(0,s.jsxs)("div",{className:"flex gap-3 w-full",children:[t?(0,s.jsx)("div",{className:"flex-1"}):(0,s.jsx)(eg,{}),(0,s.jsx)(ej,{}),e&&(0,s.jsx)(es.PaginatorMarker,{isMore:n,marker:r,nextMarker:a,limit:l,pageTotal:o,isLoading:"loading"===c})]})}function ev(){let{limit:e,datasetPageTotal:t,datasetState:l,marker:i,nextMarker:r,isMore:a}=(0,B.useFilesFlat)();return(0,s.jsxs)("div",{className:"flex gap-3 w-full",children:[(0,s.jsx)(eg,{placeholder:"Filter files in current bucket"}),(0,s.jsx)(ej,{}),(0,s.jsx)(es.PaginatorMarker,{marker:i,nextMarker:r,isMore:a,limit:e,pageTotal:t,isLoading:"loading"===l})]})}var eb=e.i(11895),eN=e.i(46193);function ey({multiSelect:e}){let t=(0,I.useMemo)(()=>Object.entries(e.selection).map(([e,s])=>({bucket:s.bucket.name,prefix:s.key})),[e.selection]),{openConfirmDialog:l}=(0,b.useDialog)(),i=(0,x.useObjectsRemove)(),r=(0,I.useCallback)(async()=>{await (0,eN.handleBatchOperation)(t.map(({bucket:e,prefix:s})=>i.post({payload:{bucket:e,prefix:s}})),{toastError:({totalCount:e,errorCount:s,successCount:t})=>({title:`${(0,S.pluralize)(t,"file")} deleted`,body:`Error deleting ${s}/${e} total files.`}),toastSuccess:({totalCount:e})=>({title:`${(0,S.pluralize)(e,"file")} deleted`}),after:()=>{e.deselectAll()}})},[e,t,i]);return(0,s.jsx)(f.Button,{"aria-label":"delete selected files",tip:"Delete selected files",onClick:()=>{l({title:"Delete files",action:"Delete",variant:"red",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(ed.Paragraph,{size:"14",children:["Are you sure you would like to delete the"," ",(0,S.pluralize)(e.selectionCount,"selected file"),"?"]})}),onConfirm:async()=>{r()}})},children:(0,s.jsx)(c.Delete16,{})})}function eT(){let{openConfirmDialog:e}=(0,b.useDialog)(),{multiSelect:t,moveSelectedFiles:l,moveSelectedFilesOperationCount:r}=(0,i.useFilesDirectory)();return(0,s.jsx)(f.Button,{disabled:0===r,"aria-label":"move selected files to the current directory",tip:"Move selected files to the current directory",onClick:()=>{e({title:"Move files",action:"Move",variant:"accent",body:(0,s.jsx)("div",{className:"flex flex-col gap-1",children:(0,s.jsxs)(ed.Paragraph,{size:"14",children:["Are you sure you would like to move the"," ",t.selectionCount.toLocaleString()," selected files to the current directory?"]})}),onConfirm:async()=>{l()}})},children:(0,s.jsx)(c.FolderMoveTo16,{})})}function eC(){let{multiSelect:e}=(0,i.useFilesDirectory)();return(0,s.jsxs)(eb.MultiSelectionMenu,{multiSelect:e,entityWord:"file",children:[(0,s.jsx)(eT,{}),(0,s.jsx)(ey,{multiSelect:e})]})}function eS(){let{multiSelect:e}=(0,B.useFilesFlat)();return(0,s.jsx)(eb.MultiSelectionMenu,{multiSelect:e,entityWord:"file",children:(0,s.jsx)(ey,{multiSelect:e})})}let{useDropzone:ek}=q;function eF(){let{openDialog:e}=(0,b.useDialog)(),{tableState:t}=(0,B.useFilesFlat)(),{uploadFiles:l}=(0,k.useUploadsManager)(),i=C(),{getRootProps:r,getInputProps:a}=ek({noDrag:!0,noClick:!i,onDrop:l});return(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(f.Button,{onClick:()=>e("filesSearch"),tip:"Search files","aria-label":"search files",children:(0,s.jsx)(c.Search16,{})}),(0,s.jsxs)(f.Button,{"aria-label":"Upload files",...r(),tip:"Upload files",disabled:!i,children:[(0,s.jsx)("input",{...a()}),(0,s.jsx)(c.CloudUpload16,{})]}),(0,s.jsx)(Z,{tableState:t})]})}let ez=V.RenterdAuthedLayout;function ew(){let{openDialog:e}=(0,b.useDialog)(),{isViewingBuckets:t,activeExplorerMode:l}=(0,m.useFilesManager)();return"directory"===l||t?{title:"Files",navTitle:null,routes:d.routes,sidenav:(0,s.jsx)(A.RenterdSidenav,{}),openSettings:()=>e("settings"),nav:(0,s.jsx)(W,{}),stats:(0,s.jsx)(ep,{}),actions:(0,s.jsx)(ee,{}),dockedControls:(0,s.jsx)(eC,{})}:{title:"Files",navTitle:null,routes:d.routes,sidenav:(0,s.jsx)(A.RenterdSidenav,{}),openSettings:()=>e("settings"),nav:(0,s.jsx)($,{}),stats:(0,s.jsx)(ev,{}),actions:(0,s.jsx)(eF,{}),dockedControls:(0,s.jsx)(eS,{})}}e.s(["Layout",0,ez,"useLayoutProps",()=>ew],3640)}]);